2025-10-23 10:37:36,894 - __main__ - INFO - 系统启动中...
2025-10-23 10:37:36,895 - __main__ - INFO - 检测到模型文件,将使用真实模型
2025-10-23 10:37:36,895 - __main__ - INFO - 正在初始化系统...
2025-10-23 10:37:36,895 - system_core - INFO - 系统核心初始化完成
2025-10-23 10:37:36,895 - system_core - INFO - 正在初始化系统组件...
2025-10-23 10:37:41,344 - system_core - INFO - 初始化题库...
2025-10-23 10:37:41,345 - data_management.question_db - INFO - 加载题库成功,共 20 道题目
2025-10-23 10:37:41,345 - data_management.question_db - INFO - 题库数据库初始化完成,路径: D:\HUAWEI\education_7\files\edu_assessment_system\edu_assessment_system\data\question_database.json
2025-10-23 10:37:41,347 - system_core - INFO - 初始化模型...
2025-10-23 10:37:41,347 - models.embedding_model - INFO - 初始化BGE-M3嵌入模型: D:\HUAWEI\bgem3
2025-10-23 10:37:41,347 - models.llm_models - INFO - 初始化Qwen出题模型
2025-10-23 10:37:41,347 - models.llm_models - INFO - 初始化PanGu评估模型
2025-10-23 10:37:41,348 - system_core - INFO - 初始化功能组件...
2025-10-23 10:37:41,348 - utils.question_generator - INFO - 题目生成器初始化完成
2025-10-23 10:37:41,348 - utils.evaluator - INFO - 学生评估器初始化完成
2025-10-23 10:37:41,348 - visualization.kg_visualizer - INFO - 知识图谱可视化器初始化完成
2025-10-23 10:37:41,348 - system_core - INFO - 系统初始化完成
2025-10-23 10:37:41,349 - __main__ - INFO - 系统核心初始化完成
2025-10-23 10:37:41,349 - __main__ - INFO - 检查题库数据...
2025-10-23 10:37:41,349 - __main__ - INFO - 题库已有 20 道题目
2025-10-23 10:37:41,349 - __main__ - INFO - 正在创建UI界面...
2025-10-23 10:37:41,349 - ui.main_ui - INFO - UI界面初始化完成
2025-10-23 10:37:42,642 - httpx - INFO - HTTP Request: GET https://api.gradio.app/pkg-version "HTTP/1.1 200 OK"
2025-10-23 10:37:43,005 - __main__ - INFO - 系统启动成功!
2025-10-23 10:37:43,416 - httpx - INFO - HTTP Request: GET http://127.0.0.1:7860/gradio_api/startup-events "HTTP/1.1 200 OK"
2025-10-23 10:37:43,702 - httpx - INFO - HTTP Request: HEAD http://127.0.0.1:7860/ "HTTP/1.1 200 OK"
2025-10-23 10:37:55,316 - system_core - INFO - 开始测评: 代数, 难度: 简单, 数量: 5
2025-10-23 10:37:55,316 - data_management.question_db - INFO - 筛选结果: 11 道题目
2025-10-23 10:38:16,222 - models.llm_models - INFO - 正在加载模型: D:\HUAWEI\pangu
2025-10-23 10:38:16,234 - models.llm_models - ERROR - 模型加载失败: D:\HUAWEI\pangu does not appear to have a file named tokenization_openpangu.py. Checkout 'https://huggingface.co/D:\HUAWEI\pangu/tree/None' for available files.
2025-10-23 10:38:16,234 - utils.evaluator - ERROR - 答案检查失败: D:\HUAWEI\pangu does not appear to have a file named tokenization_openpangu.py. Checkout 'https://huggingface.co/D:\HUAWEI\pangu/tree/None' for available files.
2025-10-23 10:38:26,312 - models.llm_models - INFO - 正在加载模型: D:\HUAWEI\pangu
2025-10-23 10:38:26,313 - models.llm_models - ERROR - 模型加载失败: D:\HUAWEI\pangu does not appear to have a file named tokenization_openpangu.py. Checkout 'https://huggingface.co/D:\HUAWEI\pangu/tree/None' for available files.
2025-10-23 10:38:26,314 - utils.evaluator - ERROR - 答案检查失败: D:\HUAWEI\pangu does not appear to have a file named tokenization_openpangu.py. Checkout 'https://huggingface.co/D:\HUAWEI\pangu/tree/None' for available files.
2025-10-23 10:38:42,054 - models.llm_models - INFO - 正在加载模型: D:\HUAWEI\pangu
2025-10-23 10:38:42,056 - models.llm_models - ERROR - 模型加载失败: D:\HUAWEI\pangu does not appear to have a file named tokenization_openpangu.py. Checkout 'https://huggingface.co/D:\HUAWEI\pangu/tree/None' for available files.
2025-10-23 10:38:42,057 - utils.evaluator - ERROR - 答案检查失败: D:\HUAWEI\pangu does not appear to have a file named tokenization_openpangu.py. Checkout 'https://huggingface.co/D:\HUAWEI\pangu/tree/None' for available files.
2025-10-23 10:38:48,664 - models.llm_models - INFO - 正在加载模型: D:\HUAWEI\pangu
2025-10-23 10:38:48,666 - models.llm_models - ERROR - 模型加载失败: D:\HUAWEI\pangu does not appear to have a file named tokenization_openpangu.py. Checkout 'https://huggingface.co/D:\HUAWEI\pangu/tree/None' for available files.
2025-10-23 10:38:48,666 - utils.evaluator - ERROR - 答案检查失败: D:\HUAWEI\pangu does not appear to have a file named tokenization_openpangu.py. Checkout 'https://huggingface.co/D:\HUAWEI\pangu/tree/None' for available files.
2025-10-23 10:38:54,392 - models.llm_models - INFO - 正在加载模型: D:\HUAWEI\pangu
2025-10-23 10:38:54,393 - models.llm_models - ERROR - 模型加载失败: D:\HUAWEI\pangu does not appear to have a file named tokenization_openpangu.py. Checkout 'https://huggingface.co/D:\HUAWEI\pangu/tree/None' for available files.
2025-10-23 10:38:54,394 - utils.evaluator - ERROR - 答案检查失败: D:\HUAWEI\pangu does not appear to have a file named tokenization_openpangu.py. Checkout 'https://huggingface.co/D:\HUAWEI\pangu/tree/None' for available files.
2025-10-23 10:38:56,545 - models.llm_models - INFO - 正在加载模型: D:\HUAWEI\pangu
2025-10-23 10:38:56,548 - models.llm_models - ERROR - 模型加载失败: D:\HUAWEI\pangu does not appear to have a file named tokenization_openpangu.py. Checkout 'https://huggingface.co/D:\HUAWEI\pangu/tree/None' for available files.
2025-10-23 10:38:56,548 - utils.evaluator - ERROR - 生成评估报告失败: D:\HUAWEI\pangu does not appear to have a file named tokenization_openpangu.py. Checkout 'https://huggingface.co/D:\HUAWEI\pangu/tree/None' for available files.
2025-10-23 10:39:32,312 - visualization.kg_visualizer - INFO - 知识图谱构建完成: 27 个节点, 40 条边
2025-10-23 10:39:46,166 - visualization.kg_visualizer - INFO - 知识图谱构建完成: 27 个节点, 40 条边
2025-10-23 10:39:47,750 - visualization.kg_visualizer - INFO - 知识图谱构建完成: 27 个节点, 40 条边
2025-10-23 10:39:50,582 - visualization.kg_visualizer - INFO - 知识图谱构建完成: 27 个节点, 40 条边
2025-10-23 10:39:57,835 - visualization.kg_visualizer - INFO - 知识图谱构建完成: 27 个节点, 40 条边
2025-10-23 10:40:00,025 - visualization.kg_visualizer - INFO - 知识图谱构建完成: 27 个节点, 40 条边
2025-10-23 10:40:13,615 - visualization.kg_visualizer - INFO - 知识图谱构建完成: 27 个节点, 40 条边
2025-10-23 10:40:13,691 - visualization.kg_visualizer - INFO - 知识图谱已保存到: D:\HUAWEI\education_7\files\edu_assessment_system\edu_assessment_system\data\knowledge_graph.html
2025-10-23 10:40:48,507 - visualization.kg_visualizer - INFO - 知识图谱构建完成: 27 个节点, 40 条边
2025-10-23 10:40:50,355 - visualization.kg_visualizer - INFO - 知识图谱构建完成: 27 个节点, 40 条边
2025-10-23 10:40:50,414 - visualization.kg_visualizer - INFO - 知识图谱已保存到: D:\HUAWEI\education_7\files\edu_assessment_system\edu_assessment_system\data\knowledge_graph.html
2025-10-23 10:47:28,438 - __main__ - INFO - 系统启动中...
2025-10-23 10:47:28,439 - __main__ - INFO - 检测到模型文件,将使用真实模型
2025-10-23 10:47:28,439 - __main__ - INFO - 正在初始化系统...
2025-10-23 10:47:28,439 - system_core - INFO - 系统核心初始化完成
2025-10-23 10:47:28,439 - system_core - INFO - 正在初始化系统组件...
2025-10-23 10:47:32,923 - system_core - INFO - 初始化题库...
2025-10-23 10:47:32,923 - data_management.question_db - INFO - 加载题库成功,共 20 道题目
2025-10-23 10:47:32,924 - data_management.question_db - INFO - 题库数据库初始化完成,路径: D:\HUAWEI\education_7\files\edu_assessment_system\edu_assessment_system\data\question_database.json
2025-10-23 10:47:32,924 - system_core - INFO - 初始化模型...
2025-10-23 10:47:32,924 - models.embedding_model - INFO - 初始化BGE-M3嵌入模型: D:\HUAWEI\bgem3
2025-10-23 10:47:32,924 - models.llm_models - INFO - 初始化Qwen出题模型
2025-10-23 10:47:32,925 - models.llm_models - INFO - 初始化PanGu评估模型
2025-10-23 10:47:32,925 - system_core - INFO - 初始化功能组件...
2025-10-23 10:47:32,925 - utils.question_generator - INFO - 题目生成器初始化完成
2025-10-23 10:47:32,925 - utils.evaluator - INFO - 学生评估器初始化完成
2025-10-23 10:47:32,925 - visualization.kg_visualizer - INFO - 知识图谱可视化器初始化完成
2025-10-23 10:47:32,925 - system_core - INFO - 系统初始化完成
2025-10-23 10:47:32,925 - __main__ - INFO - 系统核心初始化完成
2025-10-23 10:47:32,925 - __main__ - INFO - 检查题库数据...
2025-10-23 10:47:32,925 - __main__ - INFO - 题库已有 20 道题目
2025-10-23 10:47:32,926 - __main__ - INFO - 正在创建UI界面...
2025-10-23 10:47:32,926 - ui.main_ui - INFO - UI界面初始化完成
2025-10-23 10:47:33,377 - __main__ - INFO - 系统启动成功!
2025-10-23 10:47:33,480 - httpx - INFO - HTTP Request: GET http://127.0.0.1:7860/gradio_api/startup-events "HTTP/1.1 200 OK"
2025-10-23 10:47:33,608 - httpx - INFO - HTTP Request: HEAD http://127.0.0.1:7860/ "HTTP/1.1 200 OK"
2025-10-23 10:47:33,889 - httpx - INFO - HTTP Request: GET https://api.gradio.app/pkg-version "HTTP/1.1 200 OK"
2025-10-23 10:48:22,444 - system_core - INFO - 开始测评: None, 难度: 混合, 数量: 3
2025-10-23 10:48:22,444 - utils.question_generator - INFO - 正在生成 2 道简单难度的None题目...
2025-10-23 10:48:22,444 - utils.question_generator - INFO - 正在生成题目 (尝试 1/3)...
2025-10-23 10:48:22,445 - models.llm_models - INFO - 正在加载模型: D:\HUAWEI\qwen
2025-10-23 10:48:22,445 - models.llm_models - ERROR - 模型加载失败: local variable 'AutoTokenizer' referenced before assignment
2025-10-23 10:48:22,445 - models.llm_models - WARNING - 模型加载失败，将使用模拟模式
2025-10-23 10:48:22,445 - models.llm_models - ERROR - 文本生成失败: 'NoneType' object is not callable
2025-10-23 10:48:22,445 - utils.question_generator - ERROR - 响应中未找到JSON格式
2025-10-23 10:48:22,446 - utils.question_generator - WARNING - 题目解析失败,重试...
2025-10-23 10:48:22,446 - utils.question_generator - INFO - 正在生成题目 (尝试 2/3)...
2025-10-23 10:48:22,446 - models.llm_models - INFO - 正在加载模型: D:\HUAWEI\qwen
2025-10-23 10:48:22,446 - models.llm_models - ERROR - 模型加载失败: local variable 'AutoTokenizer' referenced before assignment
2025-10-23 10:48:22,446 - models.llm_models - WARNING - 模型加载失败，将使用模拟模式
2025-10-23 10:48:22,446 - models.llm_models - ERROR - 文本生成失败: 'NoneType' object is not callable
2025-10-23 10:48:22,446 - utils.question_generator - ERROR - 响应中未找到JSON格式
2025-10-23 10:48:22,446 - utils.question_generator - WARNING - 题目解析失败,重试...
2025-10-23 10:48:22,447 - utils.question_generator - INFO - 正在生成题目 (尝试 3/3)...
2025-10-23 10:48:22,447 - models.llm_models - INFO - 正在加载模型: D:\HUAWEI\qwen
2025-10-23 10:48:22,447 - models.llm_models - ERROR - 模型加载失败: local variable 'AutoTokenizer' referenced before assignment
2025-10-23 10:48:22,447 - models.llm_models - WARNING - 模型加载失败，将使用模拟模式
2025-10-23 10:48:22,447 - models.llm_models - ERROR - 文本生成失败: 'NoneType' object is not callable
2025-10-23 10:48:22,447 - utils.question_generator - ERROR - 响应中未找到JSON格式
2025-10-23 10:48:22,447 - utils.question_generator - WARNING - 题目解析失败,重试...
2025-10-23 10:48:22,448 - utils.question_generator - ERROR - 生成题目失败,已尝试 3 次
2025-10-23 10:48:22,448 - utils.question_generator - INFO - 正在生成题目 (尝试 1/3)...
2025-10-23 10:48:22,448 - models.llm_models - INFO - 正在加载模型: D:\HUAWEI\qwen
2025-10-23 10:48:22,448 - models.llm_models - ERROR - 模型加载失败: local variable 'AutoTokenizer' referenced before assignment
2025-10-23 10:48:22,448 - models.llm_models - WARNING - 模型加载失败，将使用模拟模式
2025-10-23 10:48:22,448 - models.llm_models - ERROR - 文本生成失败: 'NoneType' object is not callable
2025-10-23 10:48:22,449 - utils.question_generator - ERROR - 响应中未找到JSON格式
2025-10-23 10:48:22,449 - utils.question_generator - WARNING - 题目解析失败,重试...
2025-10-23 10:48:22,449 - utils.question_generator - INFO - 正在生成题目 (尝试 2/3)...
2025-10-23 10:48:22,449 - models.llm_models - INFO - 正在加载模型: D:\HUAWEI\qwen
2025-10-23 10:48:22,449 - models.llm_models - ERROR - 模型加载失败: local variable 'AutoTokenizer' referenced before assignment
2025-10-23 10:48:22,449 - models.llm_models - WARNING - 模型加载失败，将使用模拟模式
2025-10-23 10:48:22,449 - models.llm_models - ERROR - 文本生成失败: 'NoneType' object is not callable
2025-10-23 10:48:22,449 - utils.question_generator - ERROR - 响应中未找到JSON格式
2025-10-23 10:48:22,449 - utils.question_generator - WARNING - 题目解析失败,重试...
2025-10-23 10:48:22,449 - utils.question_generator - INFO - 正在生成题目 (尝试 3/3)...
2025-10-23 10:48:22,450 - models.llm_models - INFO - 正在加载模型: D:\HUAWEI\qwen
2025-10-23 10:48:22,450 - models.llm_models - ERROR - 模型加载失败: local variable 'AutoTokenizer' referenced before assignment
2025-10-23 10:48:22,450 - models.llm_models - WARNING - 模型加载失败，将使用模拟模式
2025-10-23 10:48:22,450 - models.llm_models - ERROR - 文本生成失败: 'NoneType' object is not callable
2025-10-23 10:48:22,450 - utils.question_generator - ERROR - 响应中未找到JSON格式
2025-10-23 10:48:22,450 - utils.question_generator - WARNING - 题目解析失败,重试...
2025-10-23 10:48:22,451 - utils.question_generator - ERROR - 生成题目失败,已尝试 3 次
2025-10-23 10:48:22,451 - utils.question_generator - INFO - 正在生成 1 道中等难度的None题目...
2025-10-23 10:48:22,451 - utils.question_generator - INFO - 正在生成题目 (尝试 1/3)...
2025-10-23 10:48:22,451 - models.llm_models - INFO - 正在加载模型: D:\HUAWEI\qwen
2025-10-23 10:48:22,451 - models.llm_models - ERROR - 模型加载失败: local variable 'AutoTokenizer' referenced before assignment
2025-10-23 10:48:22,451 - models.llm_models - WARNING - 模型加载失败，将使用模拟模式
2025-10-23 10:48:22,451 - models.llm_models - ERROR - 文本生成失败: 'NoneType' object is not callable
2025-10-23 10:48:22,452 - utils.question_generator - ERROR - 响应中未找到JSON格式
2025-10-23 10:48:22,452 - utils.question_generator - WARNING - 题目解析失败,重试...
2025-10-23 10:48:22,452 - utils.question_generator - INFO - 正在生成题目 (尝试 2/3)...
2025-10-23 10:48:22,452 - models.llm_models - INFO - 正在加载模型: D:\HUAWEI\qwen
2025-10-23 10:48:22,452 - models.llm_models - ERROR - 模型加载失败: local variable 'AutoTokenizer' referenced before assignment
2025-10-23 10:48:22,452 - models.llm_models - WARNING - 模型加载失败，将使用模拟模式
2025-10-23 10:48:22,453 - models.llm_models - ERROR - 文本生成失败: 'NoneType' object is not callable
2025-10-23 10:48:22,453 - utils.question_generator - ERROR - 响应中未找到JSON格式
2025-10-23 10:48:22,453 - utils.question_generator - WARNING - 题目解析失败,重试...
2025-10-23 10:48:22,453 - utils.question_generator - INFO - 正在生成题目 (尝试 3/3)...
2025-10-23 10:48:22,453 - models.llm_models - INFO - 正在加载模型: D:\HUAWEI\qwen
2025-10-23 10:48:22,453 - models.llm_models - ERROR - 模型加载失败: local variable 'AutoTokenizer' referenced before assignment
2025-10-23 10:48:22,453 - models.llm_models - WARNING - 模型加载失败，将使用模拟模式
2025-10-23 10:48:22,453 - models.llm_models - ERROR - 文本生成失败: 'NoneType' object is not callable
2025-10-23 10:48:22,453 - utils.question_generator - ERROR - 响应中未找到JSON格式
2025-10-23 10:48:22,453 - utils.question_generator - WARNING - 题目解析失败,重试...
2025-10-23 10:48:22,454 - utils.question_generator - ERROR - 生成题目失败,已尝试 3 次
2025-10-23 10:48:22,454 - utils.question_generator - INFO - 正在生成 0 道困难难度的None题目...
2025-10-23 10:48:22,454 - utils.question_generator - INFO - 题目生成完成,成功 0/3 道
2025-10-23 10:48:22,454 - system_core - ERROR - 无法生成题目
2025-10-23 10:48:26,363 - system_core - INFO - 开始测评: None, 难度: 混合, 数量: 3
2025-10-23 10:48:26,363 - utils.question_generator - INFO - 正在生成 2 道简单难度的None题目...
2025-10-23 10:48:26,363 - utils.question_generator - INFO - 正在生成题目 (尝试 1/3)...
2025-10-23 10:48:26,364 - models.llm_models - INFO - 正在加载模型: D:\HUAWEI\qwen
2025-10-23 10:48:26,364 - models.llm_models - ERROR - 模型加载失败: local variable 'AutoTokenizer' referenced before assignment
2025-10-23 10:48:26,364 - models.llm_models - WARNING - 模型加载失败，将使用模拟模式
2025-10-23 10:48:26,364 - models.llm_models - ERROR - 文本生成失败: 'NoneType' object is not callable
2025-10-23 10:48:26,365 - utils.question_generator - ERROR - 响应中未找到JSON格式
2025-10-23 10:48:26,365 - utils.question_generator - WARNING - 题目解析失败,重试...
2025-10-23 10:48:26,365 - utils.question_generator - INFO - 正在生成题目 (尝试 2/3)...
2025-10-23 10:48:26,365 - models.llm_models - INFO - 正在加载模型: D:\HUAWEI\qwen
2025-10-23 10:48:26,365 - models.llm_models - ERROR - 模型加载失败: local variable 'AutoTokenizer' referenced before assignment
2025-10-23 10:48:26,365 - models.llm_models - WARNING - 模型加载失败，将使用模拟模式
2025-10-23 10:48:26,365 - models.llm_models - ERROR - 文本生成失败: 'NoneType' object is not callable
2025-10-23 10:48:26,365 - utils.question_generator - ERROR - 响应中未找到JSON格式
2025-10-23 10:48:26,366 - utils.question_generator - WARNING - 题目解析失败,重试...
2025-10-23 10:48:26,366 - utils.question_generator - INFO - 正在生成题目 (尝试 3/3)...
2025-10-23 10:48:26,366 - models.llm_models - INFO - 正在加载模型: D:\HUAWEI\qwen
2025-10-23 10:48:26,366 - models.llm_models - ERROR - 模型加载失败: local variable 'AutoTokenizer' referenced before assignment
2025-10-23 10:48:26,366 - models.llm_models - WARNING - 模型加载失败，将使用模拟模式
2025-10-23 10:48:26,366 - models.llm_models - ERROR - 文本生成失败: 'NoneType' object is not callable
2025-10-23 10:48:26,366 - utils.question_generator - ERROR - 响应中未找到JSON格式
2025-10-23 10:48:26,366 - utils.question_generator - WARNING - 题目解析失败,重试...
2025-10-23 10:48:26,366 - utils.question_generator - ERROR - 生成题目失败,已尝试 3 次
2025-10-23 10:48:26,366 - utils.question_generator - INFO - 正在生成题目 (尝试 1/3)...
2025-10-23 10:48:26,366 - models.llm_models - INFO - 正在加载模型: D:\HUAWEI\qwen
2025-10-23 10:48:26,366 - models.llm_models - ERROR - 模型加载失败: local variable 'AutoTokenizer' referenced before assignment
2025-10-23 10:48:26,367 - models.llm_models - WARNING - 模型加载失败，将使用模拟模式
2025-10-23 10:48:26,367 - models.llm_models - ERROR - 文本生成失败: 'NoneType' object is not callable
2025-10-23 10:48:26,367 - utils.question_generator - ERROR - 响应中未找到JSON格式
2025-10-23 10:48:26,367 - utils.question_generator - WARNING - 题目解析失败,重试...
2025-10-23 10:48:26,367 - utils.question_generator - INFO - 正在生成题目 (尝试 2/3)...
2025-10-23 10:48:26,367 - models.llm_models - INFO - 正在加载模型: D:\HUAWEI\qwen
2025-10-23 10:48:26,367 - models.llm_models - ERROR - 模型加载失败: local variable 'AutoTokenizer' referenced before assignment
2025-10-23 10:48:26,367 - models.llm_models - WARNING - 模型加载失败，将使用模拟模式
2025-10-23 10:48:26,367 - models.llm_models - ERROR - 文本生成失败: 'NoneType' object is not callable
2025-10-23 10:48:26,367 - utils.question_generator - ERROR - 响应中未找到JSON格式
2025-10-23 10:48:26,367 - utils.question_generator - WARNING - 题目解析失败,重试...
2025-10-23 10:48:26,368 - utils.question_generator - INFO - 正在生成题目 (尝试 3/3)...
2025-10-23 10:48:26,368 - models.llm_models - INFO - 正在加载模型: D:\HUAWEI\qwen
2025-10-23 10:48:26,368 - models.llm_models - ERROR - 模型加载失败: local variable 'AutoTokenizer' referenced before assignment
2025-10-23 10:48:26,368 - models.llm_models - WARNING - 模型加载失败，将使用模拟模式
2025-10-23 10:48:26,368 - models.llm_models - ERROR - 文本生成失败: 'NoneType' object is not callable
2025-10-23 10:48:26,368 - utils.question_generator - ERROR - 响应中未找到JSON格式
2025-10-23 10:48:26,368 - utils.question_generator - WARNING - 题目解析失败,重试...
2025-10-23 10:48:26,368 - utils.question_generator - ERROR - 生成题目失败,已尝试 3 次
2025-10-23 10:48:26,368 - utils.question_generator - INFO - 正在生成 1 道中等难度的None题目...
2025-10-23 10:48:26,369 - utils.question_generator - INFO - 正在生成题目 (尝试 1/3)...
2025-10-23 10:48:26,369 - models.llm_models - INFO - 正在加载模型: D:\HUAWEI\qwen
2025-10-23 10:48:26,369 - models.llm_models - ERROR - 模型加载失败: local variable 'AutoTokenizer' referenced before assignment
2025-10-23 10:48:26,369 - models.llm_models - WARNING - 模型加载失败，将使用模拟模式
2025-10-23 10:48:26,369 - models.llm_models - ERROR - 文本生成失败: 'NoneType' object is not callable
2025-10-23 10:48:26,369 - utils.question_generator - ERROR - 响应中未找到JSON格式
2025-10-23 10:48:26,370 - utils.question_generator - WARNING - 题目解析失败,重试...
2025-10-23 10:48:26,370 - utils.question_generator - INFO - 正在生成题目 (尝试 2/3)...
2025-10-23 10:48:26,370 - models.llm_models - INFO - 正在加载模型: D:\HUAWEI\qwen
2025-10-23 10:48:26,370 - models.llm_models - ERROR - 模型加载失败: local variable 'AutoTokenizer' referenced before assignment
2025-10-23 10:48:26,370 - models.llm_models - WARNING - 模型加载失败，将使用模拟模式
2025-10-23 10:48:26,370 - models.llm_models - ERROR - 文本生成失败: 'NoneType' object is not callable
2025-10-23 10:48:26,370 - utils.question_generator - ERROR - 响应中未找到JSON格式
2025-10-23 10:48:26,370 - utils.question_generator - WARNING - 题目解析失败,重试...
2025-10-23 10:48:26,370 - utils.question_generator - INFO - 正在生成题目 (尝试 3/3)...
2025-10-23 10:48:26,370 - models.llm_models - INFO - 正在加载模型: D:\HUAWEI\qwen
2025-10-23 10:48:26,370 - models.llm_models - ERROR - 模型加载失败: local variable 'AutoTokenizer' referenced before assignment
2025-10-23 10:48:26,370 - models.llm_models - WARNING - 模型加载失败，将使用模拟模式
2025-10-23 10:48:26,372 - models.llm_models - ERROR - 文本生成失败: 'NoneType' object is not callable
2025-10-23 10:48:26,372 - utils.question_generator - ERROR - 响应中未找到JSON格式
2025-10-23 10:48:26,372 - utils.question_generator - WARNING - 题目解析失败,重试...
2025-10-23 10:48:26,372 - utils.question_generator - ERROR - 生成题目失败,已尝试 3 次
2025-10-23 10:48:26,372 - utils.question_generator - INFO - 正在生成 0 道困难难度的None题目...
2025-10-23 10:48:26,372 - utils.question_generator - INFO - 题目生成完成,成功 0/3 道
2025-10-23 10:48:26,372 - system_core - ERROR - 无法生成题目
2025-10-23 10:48:30,284 - system_core - INFO - 开始测评: 代数, 难度: 混合, 数量: 3
2025-10-23 10:48:30,285 - utils.question_generator - INFO - 正在生成 2 道简单难度的代数题目...
2025-10-23 10:48:30,285 - utils.question_generator - INFO - 正在生成题目 (尝试 1/3)...
2025-10-23 10:48:30,285 - models.llm_models - INFO - 正在加载模型: D:\HUAWEI\qwen
2025-10-23 10:48:30,285 - models.llm_models - ERROR - 模型加载失败: local variable 'AutoTokenizer' referenced before assignment
2025-10-23 10:48:30,285 - models.llm_models - WARNING - 模型加载失败，将使用模拟模式
2025-10-23 10:48:30,286 - models.llm_models - ERROR - 文本生成失败: 'NoneType' object is not callable
2025-10-23 10:48:30,286 - utils.question_generator - ERROR - 响应中未找到JSON格式
2025-10-23 10:48:30,286 - utils.question_generator - WARNING - 题目解析失败,重试...
2025-10-23 10:48:30,286 - utils.question_generator - INFO - 正在生成题目 (尝试 2/3)...
2025-10-23 10:48:30,286 - models.llm_models - INFO - 正在加载模型: D:\HUAWEI\qwen
2025-10-23 10:48:30,286 - models.llm_models - ERROR - 模型加载失败: local variable 'AutoTokenizer' referenced before assignment
2025-10-23 10:48:30,286 - models.llm_models - WARNING - 模型加载失败，将使用模拟模式
2025-10-23 10:48:30,286 - models.llm_models - ERROR - 文本生成失败: 'NoneType' object is not callable
2025-10-23 10:48:30,287 - utils.question_generator - ERROR - 响应中未找到JSON格式
2025-10-23 10:48:30,287 - utils.question_generator - WARNING - 题目解析失败,重试...
2025-10-23 10:48:30,287 - utils.question_generator - INFO - 正在生成题目 (尝试 3/3)...
2025-10-23 10:48:30,287 - models.llm_models - INFO - 正在加载模型: D:\HUAWEI\qwen
2025-10-23 10:48:30,287 - models.llm_models - ERROR - 模型加载失败: local variable 'AutoTokenizer' referenced before assignment
2025-10-23 10:48:30,287 - models.llm_models - WARNING - 模型加载失败，将使用模拟模式
2025-10-23 10:48:30,287 - models.llm_models - ERROR - 文本生成失败: 'NoneType' object is not callable
2025-10-23 10:48:30,287 - utils.question_generator - ERROR - 响应中未找到JSON格式
2025-10-23 10:48:30,287 - utils.question_generator - WARNING - 题目解析失败,重试...
2025-10-23 10:48:30,287 - utils.question_generator - ERROR - 生成题目失败,已尝试 3 次
2025-10-23 10:48:30,287 - utils.question_generator - INFO - 正在生成题目 (尝试 1/3)...
2025-10-23 10:48:30,288 - models.llm_models - INFO - 正在加载模型: D:\HUAWEI\qwen
2025-10-23 10:48:30,288 - models.llm_models - ERROR - 模型加载失败: local variable 'AutoTokenizer' referenced before assignment
2025-10-23 10:48:30,288 - models.llm_models - WARNING - 模型加载失败，将使用模拟模式
2025-10-23 10:48:30,288 - models.llm_models - ERROR - 文本生成失败: 'NoneType' object is not callable
2025-10-23 10:48:30,288 - utils.question_generator - ERROR - 响应中未找到JSON格式
2025-10-23 10:48:30,288 - utils.question_generator - WARNING - 题目解析失败,重试...
2025-10-23 10:48:30,288 - utils.question_generator - INFO - 正在生成题目 (尝试 2/3)...
2025-10-23 10:48:30,288 - models.llm_models - INFO - 正在加载模型: D:\HUAWEI\qwen
2025-10-23 10:48:30,288 - models.llm_models - ERROR - 模型加载失败: local variable 'AutoTokenizer' referenced before assignment
2025-10-23 10:48:30,289 - models.llm_models - WARNING - 模型加载失败，将使用模拟模式
2025-10-23 10:48:30,289 - models.llm_models - ERROR - 文本生成失败: 'NoneType' object is not callable
2025-10-23 10:48:30,289 - utils.question_generator - ERROR - 响应中未找到JSON格式
2025-10-23 10:48:30,289 - utils.question_generator - WARNING - 题目解析失败,重试...
2025-10-23 10:48:30,289 - utils.question_generator - INFO - 正在生成题目 (尝试 3/3)...
2025-10-23 10:48:30,289 - models.llm_models - INFO - 正在加载模型: D:\HUAWEI\qwen
2025-10-23 10:48:30,290 - models.llm_models - ERROR - 模型加载失败: local variable 'AutoTokenizer' referenced before assignment
2025-10-23 10:48:30,290 - models.llm_models - WARNING - 模型加载失败，将使用模拟模式
2025-10-23 10:48:30,290 - models.llm_models - ERROR - 文本生成失败: 'NoneType' object is not callable
2025-10-23 10:48:30,290 - utils.question_generator - ERROR - 响应中未找到JSON格式
2025-10-23 10:48:30,290 - utils.question_generator - WARNING - 题目解析失败,重试...
2025-10-23 10:48:30,290 - utils.question_generator - ERROR - 生成题目失败,已尝试 3 次
2025-10-23 10:48:30,290 - utils.question_generator - INFO - 正在生成 1 道中等难度的代数题目...
2025-10-23 10:48:30,290 - utils.question_generator - INFO - 正在生成题目 (尝试 1/3)...
2025-10-23 10:48:30,290 - models.llm_models - INFO - 正在加载模型: D:\HUAWEI\qwen
2025-10-23 10:48:30,291 - models.llm_models - ERROR - 模型加载失败: local variable 'AutoTokenizer' referenced before assignment
2025-10-23 10:48:30,291 - models.llm_models - WARNING - 模型加载失败，将使用模拟模式
2025-10-23 10:48:30,291 - models.llm_models - ERROR - 文本生成失败: 'NoneType' object is not callable
2025-10-23 10:48:30,291 - utils.question_generator - ERROR - 响应中未找到JSON格式
2025-10-23 10:48:30,291 - utils.question_generator - WARNING - 题目解析失败,重试...
2025-10-23 10:48:30,291 - utils.question_generator - INFO - 正在生成题目 (尝试 2/3)...
2025-10-23 10:48:30,291 - models.llm_models - INFO - 正在加载模型: D:\HUAWEI\qwen
2025-10-23 10:48:30,291 - models.llm_models - ERROR - 模型加载失败: local variable 'AutoTokenizer' referenced before assignment
2025-10-23 10:48:30,291 - models.llm_models - WARNING - 模型加载失败，将使用模拟模式
2025-10-23 10:48:30,291 - models.llm_models - ERROR - 文本生成失败: 'NoneType' object is not callable
2025-10-23 10:48:30,292 - utils.question_generator - ERROR - 响应中未找到JSON格式
2025-10-23 10:48:30,292 - utils.question_generator - WARNING - 题目解析失败,重试...
2025-10-23 10:48:30,292 - utils.question_generator - INFO - 正在生成题目 (尝试 3/3)...
2025-10-23 10:48:30,292 - models.llm_models - INFO - 正在加载模型: D:\HUAWEI\qwen
2025-10-23 10:48:30,292 - models.llm_models - ERROR - 模型加载失败: local variable 'AutoTokenizer' referenced before assignment
2025-10-23 10:48:30,292 - models.llm_models - WARNING - 模型加载失败，将使用模拟模式
2025-10-23 10:48:30,292 - models.llm_models - ERROR - 文本生成失败: 'NoneType' object is not callable
2025-10-23 10:48:30,292 - utils.question_generator - ERROR - 响应中未找到JSON格式
2025-10-23 10:48:30,292 - utils.question_generator - WARNING - 题目解析失败,重试...
2025-10-23 10:48:30,292 - utils.question_generator - ERROR - 生成题目失败,已尝试 3 次
2025-10-23 10:48:30,292 - utils.question_generator - INFO - 正在生成 0 道困难难度的代数题目...
2025-10-23 10:48:30,292 - utils.question_generator - INFO - 题目生成完成,成功 0/3 道
2025-10-23 10:48:30,293 - system_core - ERROR - 无法生成题目
2025-10-23 10:48:38,078 - system_core - INFO - 开始测评: None, 难度: 混合, 数量: 3
2025-10-23 10:48:38,078 - utils.question_generator - INFO - 正在生成 2 道简单难度的None题目...
2025-10-23 10:48:38,079 - utils.question_generator - INFO - 正在生成题目 (尝试 1/3)...
2025-10-23 10:48:38,079 - models.llm_models - INFO - 正在加载模型: D:\HUAWEI\qwen
2025-10-23 10:48:38,079 - models.llm_models - ERROR - 模型加载失败: local variable 'AutoTokenizer' referenced before assignment
2025-10-23 10:48:38,079 - models.llm_models - WARNING - 模型加载失败，将使用模拟模式
2025-10-23 10:48:38,079 - models.llm_models - ERROR - 文本生成失败: 'NoneType' object is not callable
2025-10-23 10:48:38,080 - utils.question_generator - ERROR - 响应中未找到JSON格式
2025-10-23 10:48:38,080 - utils.question_generator - WARNING - 题目解析失败,重试...
2025-10-23 10:48:38,082 - utils.question_generator - INFO - 正在生成题目 (尝试 2/3)...
2025-10-23 10:48:38,083 - models.llm_models - INFO - 正在加载模型: D:\HUAWEI\qwen
2025-10-23 10:48:38,083 - models.llm_models - ERROR - 模型加载失败: local variable 'AutoTokenizer' referenced before assignment
2025-10-23 10:48:38,084 - models.llm_models - WARNING - 模型加载失败，将使用模拟模式
2025-10-23 10:48:38,085 - models.llm_models - ERROR - 文本生成失败: 'NoneType' object is not callable
2025-10-23 10:48:38,085 - utils.question_generator - ERROR - 响应中未找到JSON格式
2025-10-23 10:48:38,085 - utils.question_generator - WARNING - 题目解析失败,重试...
2025-10-23 10:48:38,086 - utils.question_generator - INFO - 正在生成题目 (尝试 3/3)...
2025-10-23 10:48:38,086 - models.llm_models - INFO - 正在加载模型: D:\HUAWEI\qwen
2025-10-23 10:48:38,086 - models.llm_models - ERROR - 模型加载失败: local variable 'AutoTokenizer' referenced before assignment
2025-10-23 10:48:38,086 - models.llm_models - WARNING - 模型加载失败，将使用模拟模式
2025-10-23 10:48:38,087 - models.llm_models - ERROR - 文本生成失败: 'NoneType' object is not callable
2025-10-23 10:48:38,087 - utils.question_generator - ERROR - 响应中未找到JSON格式
2025-10-23 10:48:38,087 - utils.question_generator - WARNING - 题目解析失败,重试...
2025-10-23 10:48:38,087 - utils.question_generator - ERROR - 生成题目失败,已尝试 3 次
2025-10-23 10:48:38,088 - utils.question_generator - INFO - 正在生成题目 (尝试 1/3)...
2025-10-23 10:48:38,088 - models.llm_models - INFO - 正在加载模型: D:\HUAWEI\qwen
2025-10-23 10:48:38,088 - models.llm_models - ERROR - 模型加载失败: local variable 'AutoTokenizer' referenced before assignment
2025-10-23 10:48:38,089 - models.llm_models - WARNING - 模型加载失败，将使用模拟模式
2025-10-23 10:48:38,089 - models.llm_models - ERROR - 文本生成失败: 'NoneType' object is not callable
2025-10-23 10:48:38,090 - utils.question_generator - ERROR - 响应中未找到JSON格式
2025-10-23 10:48:38,090 - utils.question_generator - WARNING - 题目解析失败,重试...
2025-10-23 10:48:38,090 - utils.question_generator - INFO - 正在生成题目 (尝试 2/3)...
2025-10-23 10:48:38,091 - models.llm_models - INFO - 正在加载模型: D:\HUAWEI\qwen
2025-10-23 10:48:38,091 - models.llm_models - ERROR - 模型加载失败: local variable 'AutoTokenizer' referenced before assignment
2025-10-23 10:48:38,091 - models.llm_models - WARNING - 模型加载失败，将使用模拟模式
2025-10-23 10:48:38,092 - models.llm_models - ERROR - 文本生成失败: 'NoneType' object is not callable
2025-10-23 10:48:38,092 - utils.question_generator - ERROR - 响应中未找到JSON格式
2025-10-23 10:48:38,092 - utils.question_generator - WARNING - 题目解析失败,重试...
2025-10-23 10:48:38,092 - utils.question_generator - INFO - 正在生成题目 (尝试 3/3)...
2025-10-23 10:48:38,093 - models.llm_models - INFO - 正在加载模型: D:\HUAWEI\qwen
2025-10-23 10:48:38,093 - models.llm_models - ERROR - 模型加载失败: local variable 'AutoTokenizer' referenced before assignment
2025-10-23 10:48:38,093 - models.llm_models - WARNING - 模型加载失败，将使用模拟模式
2025-10-23 10:48:38,093 - models.llm_models - ERROR - 文本生成失败: 'NoneType' object is not callable
2025-10-23 10:48:38,094 - utils.question_generator - ERROR - 响应中未找到JSON格式
2025-10-23 10:48:38,094 - utils.question_generator - WARNING - 题目解析失败,重试...
2025-10-23 10:48:38,094 - utils.question_generator - ERROR - 生成题目失败,已尝试 3 次
2025-10-23 10:48:38,094 - utils.question_generator - INFO - 正在生成 1 道中等难度的None题目...
2025-10-23 10:48:38,095 - utils.question_generator - INFO - 正在生成题目 (尝试 1/3)...
2025-10-23 10:48:38,095 - models.llm_models - INFO - 正在加载模型: D:\HUAWEI\qwen
2025-10-23 10:48:38,095 - models.llm_models - ERROR - 模型加载失败: local variable 'AutoTokenizer' referenced before assignment
2025-10-23 10:48:38,095 - models.llm_models - WARNING - 模型加载失败，将使用模拟模式
2025-10-23 10:48:38,096 - models.llm_models - ERROR - 文本生成失败: 'NoneType' object is not callable
2025-10-23 10:48:38,096 - utils.question_generator - ERROR - 响应中未找到JSON格式
2025-10-23 10:48:38,096 - utils.question_generator - WARNING - 题目解析失败,重试...
2025-10-23 10:48:38,097 - utils.question_generator - INFO - 正在生成题目 (尝试 2/3)...
2025-10-23 10:48:38,097 - models.llm_models - INFO - 正在加载模型: D:\HUAWEI\qwen
2025-10-23 10:48:38,097 - models.llm_models - ERROR - 模型加载失败: local variable 'AutoTokenizer' referenced before assignment
2025-10-23 10:48:38,097 - models.llm_models - WARNING - 模型加载失败，将使用模拟模式
2025-10-23 10:48:38,098 - models.llm_models - ERROR - 文本生成失败: 'NoneType' object is not callable
2025-10-23 10:48:38,098 - utils.question_generator - ERROR - 响应中未找到JSON格式
2025-10-23 10:48:38,098 - utils.question_generator - WARNING - 题目解析失败,重试...
2025-10-23 10:48:38,099 - utils.question_generator - INFO - 正在生成题目 (尝试 3/3)...
2025-10-23 10:48:38,099 - models.llm_models - INFO - 正在加载模型: D:\HUAWEI\qwen
2025-10-23 10:48:38,099 - models.llm_models - ERROR - 模型加载失败: local variable 'AutoTokenizer' referenced before assignment
2025-10-23 10:48:38,099 - models.llm_models - WARNING - 模型加载失败，将使用模拟模式
2025-10-23 10:48:38,099 - models.llm_models - ERROR - 文本生成失败: 'NoneType' object is not callable
2025-10-23 10:48:38,100 - utils.question_generator - ERROR - 响应中未找到JSON格式
2025-10-23 10:48:38,100 - utils.question_generator - WARNING - 题目解析失败,重试...
2025-10-23 10:48:38,100 - utils.question_generator - ERROR - 生成题目失败,已尝试 3 次
2025-10-23 10:48:38,101 - utils.question_generator - INFO - 正在生成 0 道困难难度的None题目...
2025-10-23 10:48:38,101 - utils.question_generator - INFO - 题目生成完成,成功 0/3 道
2025-10-23 10:48:38,101 - system_core - ERROR - 无法生成题目
2025-10-23 10:48:40,713 - system_core - INFO - 开始测评: 代数, 难度: 混合, 数量: 3
2025-10-23 10:48:40,714 - utils.question_generator - INFO - 正在生成 2 道简单难度的代数题目...
2025-10-23 10:48:40,714 - utils.question_generator - INFO - 正在生成题目 (尝试 1/3)...
2025-10-23 10:48:40,714 - models.llm_models - INFO - 正在加载模型: D:\HUAWEI\qwen
2025-10-23 10:48:40,714 - models.llm_models - ERROR - 模型加载失败: local variable 'AutoTokenizer' referenced before assignment
2025-10-23 10:48:40,714 - models.llm_models - WARNING - 模型加载失败，将使用模拟模式
2025-10-23 10:48:40,714 - models.llm_models - ERROR - 文本生成失败: 'NoneType' object is not callable
2025-10-23 10:48:40,714 - utils.question_generator - ERROR - 响应中未找到JSON格式
2025-10-23 10:48:40,714 - utils.question_generator - WARNING - 题目解析失败,重试...
2025-10-23 10:48:40,715 - utils.question_generator - INFO - 正在生成题目 (尝试 2/3)...
2025-10-23 10:48:40,715 - models.llm_models - INFO - 正在加载模型: D:\HUAWEI\qwen
2025-10-23 10:48:40,715 - models.llm_models - ERROR - 模型加载失败: local variable 'AutoTokenizer' referenced before assignment
2025-10-23 10:48:40,715 - models.llm_models - WARNING - 模型加载失败，将使用模拟模式
2025-10-23 10:48:40,715 - models.llm_models - ERROR - 文本生成失败: 'NoneType' object is not callable
2025-10-23 10:48:40,715 - utils.question_generator - ERROR - 响应中未找到JSON格式
2025-10-23 10:48:40,715 - utils.question_generator - WARNING - 题目解析失败,重试...
2025-10-23 10:48:40,715 - utils.question_generator - INFO - 正在生成题目 (尝试 3/3)...
2025-10-23 10:48:40,715 - models.llm_models - INFO - 正在加载模型: D:\HUAWEI\qwen
2025-10-23 10:48:40,716 - models.llm_models - ERROR - 模型加载失败: local variable 'AutoTokenizer' referenced before assignment
2025-10-23 10:48:40,716 - models.llm_models - WARNING - 模型加载失败，将使用模拟模式
2025-10-23 10:48:40,716 - models.llm_models - ERROR - 文本生成失败: 'NoneType' object is not callable
2025-10-23 10:48:40,716 - utils.question_generator - ERROR - 响应中未找到JSON格式
2025-10-23 10:48:40,716 - utils.question_generator - WARNING - 题目解析失败,重试...
2025-10-23 10:48:40,716 - utils.question_generator - ERROR - 生成题目失败,已尝试 3 次
2025-10-23 10:48:40,716 - utils.question_generator - INFO - 正在生成题目 (尝试 1/3)...
2025-10-23 10:48:40,716 - models.llm_models - INFO - 正在加载模型: D:\HUAWEI\qwen
2025-10-23 10:48:40,716 - models.llm_models - ERROR - 模型加载失败: local variable 'AutoTokenizer' referenced before assignment
2025-10-23 10:48:40,716 - models.llm_models - WARNING - 模型加载失败，将使用模拟模式
2025-10-23 10:48:40,717 - models.llm_models - ERROR - 文本生成失败: 'NoneType' object is not callable
2025-10-23 10:48:40,717 - utils.question_generator - ERROR - 响应中未找到JSON格式
2025-10-23 10:48:40,717 - utils.question_generator - WARNING - 题目解析失败,重试...
2025-10-23 10:48:40,717 - utils.question_generator - INFO - 正在生成题目 (尝试 2/3)...
2025-10-23 10:48:40,717 - models.llm_models - INFO - 正在加载模型: D:\HUAWEI\qwen
2025-10-23 10:48:40,717 - models.llm_models - ERROR - 模型加载失败: local variable 'AutoTokenizer' referenced before assignment
2025-10-23 10:48:40,717 - models.llm_models - WARNING - 模型加载失败，将使用模拟模式
2025-10-23 10:48:40,717 - models.llm_models - ERROR - 文本生成失败: 'NoneType' object is not callable
2025-10-23 10:48:40,717 - utils.question_generator - ERROR - 响应中未找到JSON格式
2025-10-23 10:48:40,717 - utils.question_generator - WARNING - 题目解析失败,重试...
2025-10-23 10:48:40,717 - utils.question_generator - INFO - 正在生成题目 (尝试 3/3)...
2025-10-23 10:48:40,718 - models.llm_models - INFO - 正在加载模型: D:\HUAWEI\qwen
2025-10-23 10:48:40,718 - models.llm_models - ERROR - 模型加载失败: local variable 'AutoTokenizer' referenced before assignment
2025-10-23 10:48:40,718 - models.llm_models - WARNING - 模型加载失败，将使用模拟模式
2025-10-23 10:48:40,718 - models.llm_models - ERROR - 文本生成失败: 'NoneType' object is not callable
2025-10-23 10:48:40,718 - utils.question_generator - ERROR - 响应中未找到JSON格式
2025-10-23 10:48:40,718 - utils.question_generator - WARNING - 题目解析失败,重试...
2025-10-23 10:48:40,718 - utils.question_generator - ERROR - 生成题目失败,已尝试 3 次
2025-10-23 10:48:40,718 - utils.question_generator - INFO - 正在生成 1 道中等难度的代数题目...
2025-10-23 10:48:40,719 - utils.question_generator - INFO - 正在生成题目 (尝试 1/3)...
2025-10-23 10:48:40,719 - models.llm_models - INFO - 正在加载模型: D:\HUAWEI\qwen
2025-10-23 10:48:40,719 - models.llm_models - ERROR - 模型加载失败: local variable 'AutoTokenizer' referenced before assignment
2025-10-23 10:48:40,720 - models.llm_models - WARNING - 模型加载失败，将使用模拟模式
2025-10-23 10:48:40,720 - models.llm_models - ERROR - 文本生成失败: 'NoneType' object is not callable
2025-10-23 10:48:40,720 - utils.question_generator - ERROR - 响应中未找到JSON格式
2025-10-23 10:48:40,720 - utils.question_generator - WARNING - 题目解析失败,重试...
2025-10-23 10:48:40,720 - utils.question_generator - INFO - 正在生成题目 (尝试 2/3)...
2025-10-23 10:48:40,720 - models.llm_models - INFO - 正在加载模型: D:\HUAWEI\qwen
2025-10-23 10:48:40,722 - models.llm_models - ERROR - 模型加载失败: local variable 'AutoTokenizer' referenced before assignment
2025-10-23 10:48:40,722 - models.llm_models - WARNING - 模型加载失败，将使用模拟模式
2025-10-23 10:48:40,722 - models.llm_models - ERROR - 文本生成失败: 'NoneType' object is not callable
2025-10-23 10:48:40,723 - utils.question_generator - ERROR - 响应中未找到JSON格式
2025-10-23 10:48:40,723 - utils.question_generator - WARNING - 题目解析失败,重试...
2025-10-23 10:48:40,723 - utils.question_generator - INFO - 正在生成题目 (尝试 3/3)...
2025-10-23 10:48:40,724 - models.llm_models - INFO - 正在加载模型: D:\HUAWEI\qwen
2025-10-23 10:48:40,724 - models.llm_models - ERROR - 模型加载失败: local variable 'AutoTokenizer' referenced before assignment
2025-10-23 10:48:40,724 - models.llm_models - WARNING - 模型加载失败，将使用模拟模式
2025-10-23 10:48:40,725 - models.llm_models - ERROR - 文本生成失败: 'NoneType' object is not callable
2025-10-23 10:48:40,725 - utils.question_generator - ERROR - 响应中未找到JSON格式
2025-10-23 10:48:40,725 - utils.question_generator - WARNING - 题目解析失败,重试...
2025-10-23 10:48:40,725 - utils.question_generator - ERROR - 生成题目失败,已尝试 3 次
2025-10-23 10:48:40,725 - utils.question_generator - INFO - 正在生成 0 道困难难度的代数题目...
2025-10-23 10:48:40,726 - utils.question_generator - INFO - 题目生成完成,成功 0/3 道
2025-10-23 10:48:40,726 - system_core - ERROR - 无法生成题目
2025-10-23 10:48:43,518 - system_core - INFO - 开始测评: 代数, 难度: 简单, 数量: 3
2025-10-23 10:48:43,519 - data_management.question_db - INFO - 筛选结果: 11 道题目
2025-10-23 10:48:48,612 - models.llm_models - INFO - 正在加载模型: D:\HUAWEI\pangu
2025-10-23 10:48:51,408 - models.llm_models - ERROR - 模型加载失败: Torch not compiled with CUDA enabled
2025-10-23 10:48:51,408 - models.llm_models - WARNING - 模型加载失败，将使用模拟模式
2025-10-23 10:48:51,417 - models.llm_models - ERROR - 文本生成失败: Torch not compiled with CUDA enabled
2025-10-23 10:49:03,509 - models.llm_models - INFO - 正在加载模型: D:\HUAWEI\pangu
2025-10-23 10:49:05,826 - models.llm_models - ERROR - 模型加载失败: Torch not compiled with CUDA enabled
2025-10-23 10:49:05,826 - models.llm_models - WARNING - 模型加载失败，将使用模拟模式
2025-10-23 10:49:05,830 - models.llm_models - ERROR - 文本生成失败: Torch not compiled with CUDA enabled
2025-10-23 10:49:12,792 - models.llm_models - INFO - 正在加载模型: D:\HUAWEI\pangu
2025-10-23 10:49:15,088 - models.llm_models - ERROR - 模型加载失败: Torch not compiled with CUDA enabled
2025-10-23 10:49:15,089 - models.llm_models - WARNING - 模型加载失败，将使用模拟模式
2025-10-23 10:49:15,095 - models.llm_models - ERROR - 文本生成失败: Torch not compiled with CUDA enabled
2025-10-23 10:49:17,795 - models.llm_models - INFO - 正在加载模型: D:\HUAWEI\pangu
2025-10-23 10:49:20,006 - models.llm_models - ERROR - 模型加载失败: Torch not compiled with CUDA enabled
2025-10-23 10:49:20,006 - models.llm_models - WARNING - 模型加载失败，将使用模拟模式
2025-10-23 10:49:20,013 - models.llm_models - ERROR - 文本生成失败: Torch not compiled with CUDA enabled
2025-10-23 10:49:43,831 - visualization.kg_visualizer - INFO - 知识图谱构建完成: 27 个节点, 40 条边
2025-10-23 10:49:47,793 - visualization.kg_visualizer - INFO - 知识图谱构建完成: 27 个节点, 40 条边
2025-10-23 10:49:47,857 - visualization.kg_visualizer - INFO - 知识图谱已保存到: D:\HUAWEI\education_7\files\edu_assessment_system\edu_assessment_system\data\knowledge_graph.html
2025-10-23 10:51:33,427 - __main__ - INFO - 系统启动中...
2025-10-23 10:51:33,427 - __main__ - INFO - 检测到模型文件,将使用真实模型
2025-10-23 10:51:33,428 - __main__ - INFO - 正在初始化系统...
2025-10-23 10:51:33,428 - system_core - INFO - 系统核心初始化完成
2025-10-23 10:51:33,428 - system_core - INFO - 正在初始化系统组件...
2025-10-23 10:51:37,496 - system_core - INFO - 初始化题库...
2025-10-23 10:51:37,496 - data_management.question_db - INFO - 加载题库成功,共 20 道题目
2025-10-23 10:51:37,496 - data_management.question_db - INFO - 题库数据库初始化完成,路径: D:\HUAWEI\education_7\files\edu_assessment_system\edu_assessment_system\data\question_database.json
2025-10-23 10:51:37,497 - system_core - INFO - 初始化模型...
2025-10-23 10:51:37,497 - models.embedding_model - INFO - 初始化BGE-M3嵌入模型: D:\HUAWEI\bgem3
2025-10-23 10:51:37,497 - models.llm_models - INFO - 初始化Qwen出题模型
2025-10-23 10:51:37,497 - models.llm_models - INFO - 初始化PanGu评估模型
2025-10-23 10:51:37,497 - system_core - INFO - 初始化功能组件...
2025-10-23 10:51:37,497 - utils.question_generator - INFO - 题目生成器初始化完成
2025-10-23 10:51:37,498 - utils.evaluator - INFO - 学生评估器初始化完成
2025-10-23 10:51:37,498 - visualization.kg_visualizer - INFO - 知识图谱可视化器初始化完成
2025-10-23 10:51:37,498 - system_core - INFO - 系统初始化完成
2025-10-23 10:51:37,498 - __main__ - INFO - 系统核心初始化完成
2025-10-23 10:51:37,498 - __main__ - INFO - 检查题库数据...
2025-10-23 10:51:37,498 - __main__ - INFO - 题库已有 20 道题目
2025-10-23 10:51:37,498 - __main__ - INFO - 正在创建UI界面...
2025-10-23 10:51:37,498 - ui.main_ui - INFO - UI界面初始化完成
2025-10-23 10:51:37,898 - __main__ - INFO - 系统启动成功!
2025-10-23 10:51:38,002 - httpx - INFO - HTTP Request: GET http://127.0.0.1:7860/gradio_api/startup-events "HTTP/1.1 200 OK"
2025-10-23 10:51:38,133 - httpx - INFO - HTTP Request: HEAD http://127.0.0.1:7860/ "HTTP/1.1 200 OK"
2025-10-23 10:51:38,623 - httpx - INFO - HTTP Request: GET https://api.gradio.app/pkg-version "HTTP/1.1 200 OK"
2025-10-23 10:51:43,997 - system_core - INFO - 开始测评: None, 难度: 混合, 数量: 3
2025-10-23 10:51:43,998 - utils.question_generator - INFO - 正在生成 2 道简单难度的None题目...
2025-10-23 10:51:43,998 - utils.question_generator - INFO - 正在生成题目 (尝试 1/3)...
2025-10-23 10:51:43,998 - models.llm_models - INFO - 正在加载模型: D:\HUAWEI\qwen
2025-10-23 10:51:43,998 - models.llm_models - ERROR - 模型加载失败: local variable 'AutoTokenizer' referenced before assignment
2025-10-23 10:51:44,000 - models.llm_models - WARNING - 模型加载失败，将使用模拟模式
2025-10-23 10:51:44,001 - models.llm_models - ERROR - 文本生成失败: 'NoneType' object is not callable
2025-10-23 10:51:44,001 - utils.question_generator - ERROR - 响应中未找到JSON格式
2025-10-23 10:51:44,001 - utils.question_generator - WARNING - 题目解析失败,重试...
2025-10-23 10:51:44,002 - utils.question_generator - INFO - 正在生成题目 (尝试 2/3)...
2025-10-23 10:51:44,002 - models.llm_models - INFO - 正在加载模型: D:\HUAWEI\qwen
2025-10-23 10:51:44,002 - models.llm_models - ERROR - 模型加载失败: local variable 'AutoTokenizer' referenced before assignment
2025-10-23 10:51:44,003 - models.llm_models - WARNING - 模型加载失败，将使用模拟模式
2025-10-23 10:51:44,015 - models.llm_models - ERROR - 文本生成失败: 'NoneType' object is not callable
2025-10-23 10:51:44,015 - utils.question_generator - ERROR - 响应中未找到JSON格式
2025-10-23 10:51:44,015 - utils.question_generator - WARNING - 题目解析失败,重试...
2025-10-23 10:51:44,016 - utils.question_generator - INFO - 正在生成题目 (尝试 3/3)...
2025-10-23 10:51:44,016 - models.llm_models - INFO - 正在加载模型: D:\HUAWEI\qwen
2025-10-23 10:51:44,016 - models.llm_models - ERROR - 模型加载失败: local variable 'AutoTokenizer' referenced before assignment
2025-10-23 10:51:44,017 - models.llm_models - WARNING - 模型加载失败，将使用模拟模式
2025-10-23 10:51:44,017 - models.llm_models - ERROR - 文本生成失败: 'NoneType' object is not callable
2025-10-23 10:51:44,017 - utils.question_generator - ERROR - 响应中未找到JSON格式
2025-10-23 10:51:44,018 - utils.question_generator - WARNING - 题目解析失败,重试...
2025-10-23 10:51:44,018 - utils.question_generator - ERROR - 生成题目失败,已尝试 3 次
2025-10-23 10:51:44,019 - utils.question_generator - INFO - 正在生成题目 (尝试 1/3)...
2025-10-23 10:51:44,019 - models.llm_models - INFO - 正在加载模型: D:\HUAWEI\qwen
2025-10-23 10:51:44,022 - models.llm_models - ERROR - 模型加载失败: local variable 'AutoTokenizer' referenced before assignment
2025-10-23 10:51:44,023 - models.llm_models - WARNING - 模型加载失败，将使用模拟模式
2025-10-23 10:51:44,023 - models.llm_models - ERROR - 文本生成失败: 'NoneType' object is not callable
2025-10-23 10:51:44,025 - utils.question_generator - ERROR - 响应中未找到JSON格式
2025-10-23 10:51:44,025 - utils.question_generator - WARNING - 题目解析失败,重试...
2025-10-23 10:51:44,026 - utils.question_generator - INFO - 正在生成题目 (尝试 2/3)...
2025-10-23 10:51:44,027 - models.llm_models - INFO - 正在加载模型: D:\HUAWEI\qwen
2025-10-23 10:51:44,027 - models.llm_models - ERROR - 模型加载失败: local variable 'AutoTokenizer' referenced before assignment
2025-10-23 10:51:44,028 - models.llm_models - WARNING - 模型加载失败，将使用模拟模式
2025-10-23 10:51:44,028 - models.llm_models - ERROR - 文本生成失败: 'NoneType' object is not callable
2025-10-23 10:51:44,028 - utils.question_generator - ERROR - 响应中未找到JSON格式
2025-10-23 10:51:44,030 - utils.question_generator - WARNING - 题目解析失败,重试...
2025-10-23 10:51:44,030 - utils.question_generator - INFO - 正在生成题目 (尝试 3/3)...
2025-10-23 10:51:44,039 - models.llm_models - INFO - 正在加载模型: D:\HUAWEI\qwen
2025-10-23 10:51:44,040 - models.llm_models - ERROR - 模型加载失败: local variable 'AutoTokenizer' referenced before assignment
2025-10-23 10:51:44,041 - models.llm_models - WARNING - 模型加载失败，将使用模拟模式
2025-10-23 10:51:44,041 - models.llm_models - ERROR - 文本生成失败: 'NoneType' object is not callable
2025-10-23 10:51:44,042 - utils.question_generator - ERROR - 响应中未找到JSON格式
2025-10-23 10:51:44,042 - utils.question_generator - WARNING - 题目解析失败,重试...
2025-10-23 10:51:44,043 - utils.question_generator - ERROR - 生成题目失败,已尝试 3 次
2025-10-23 10:51:44,043 - utils.question_generator - INFO - 正在生成 1 道中等难度的None题目...
2025-10-23 10:51:44,050 - utils.question_generator - INFO - 正在生成题目 (尝试 1/3)...
2025-10-23 10:51:44,051 - models.llm_models - INFO - 正在加载模型: D:\HUAWEI\qwen
2025-10-23 10:51:44,051 - models.llm_models - ERROR - 模型加载失败: local variable 'AutoTokenizer' referenced before assignment
2025-10-23 10:51:44,051 - models.llm_models - WARNING - 模型加载失败，将使用模拟模式
2025-10-23 10:51:44,052 - models.llm_models - ERROR - 文本生成失败: 'NoneType' object is not callable
2025-10-23 10:51:44,053 - utils.question_generator - ERROR - 响应中未找到JSON格式
2025-10-23 10:51:44,053 - utils.question_generator - WARNING - 题目解析失败,重试...
2025-10-23 10:51:44,054 - utils.question_generator - INFO - 正在生成题目 (尝试 2/3)...
2025-10-23 10:51:44,055 - models.llm_models - INFO - 正在加载模型: D:\HUAWEI\qwen
2025-10-23 10:51:44,056 - models.llm_models - ERROR - 模型加载失败: local variable 'AutoTokenizer' referenced before assignment
2025-10-23 10:51:44,056 - models.llm_models - WARNING - 模型加载失败，将使用模拟模式
2025-10-23 10:51:44,056 - models.llm_models - ERROR - 文本生成失败: 'NoneType' object is not callable
2025-10-23 10:51:44,057 - utils.question_generator - ERROR - 响应中未找到JSON格式
2025-10-23 10:51:44,057 - utils.question_generator - WARNING - 题目解析失败,重试...
2025-10-23 10:51:44,057 - utils.question_generator - INFO - 正在生成题目 (尝试 3/3)...
2025-10-23 10:51:44,058 - models.llm_models - INFO - 正在加载模型: D:\HUAWEI\qwen
2025-10-23 10:51:44,058 - models.llm_models - ERROR - 模型加载失败: local variable 'AutoTokenizer' referenced before assignment
2025-10-23 10:51:44,060 - models.llm_models - WARNING - 模型加载失败，将使用模拟模式
2025-10-23 10:51:44,060 - models.llm_models - ERROR - 文本生成失败: 'NoneType' object is not callable
2025-10-23 10:51:44,060 - utils.question_generator - ERROR - 响应中未找到JSON格式
2025-10-23 10:51:44,061 - utils.question_generator - WARNING - 题目解析失败,重试...
2025-10-23 10:51:44,061 - utils.question_generator - ERROR - 生成题目失败,已尝试 3 次
2025-10-23 10:51:44,061 - utils.question_generator - INFO - 正在生成 0 道困难难度的None题目...
2025-10-23 10:51:44,062 - utils.question_generator - INFO - 题目生成完成,成功 0/3 道
2025-10-23 10:51:44,062 - system_core - ERROR - 无法生成题目
2025-10-23 10:51:48,956 - system_core - INFO - 开始测评: 代数, 难度: 简单, 数量: 3
2025-10-23 10:51:48,957 - data_management.question_db - INFO - 筛选结果: 11 道题目
2025-10-23 10:53:03,029 - models.llm_models - INFO - 正在加载模型: D:\HUAWEI\pangu
2025-10-23 10:53:05,666 - models.llm_models - INFO - 模型加载成功,设备: cpu
2025-10-23 10:53:30,486 - __main__ - INFO - 系统启动中...
2025-10-23 10:53:30,487 - __main__ - INFO - 检测到模型文件,将使用真实模型
2025-10-23 10:53:30,487 - __main__ - INFO - 正在初始化系统...
2025-10-23 10:53:30,487 - system_core - INFO - 系统核心初始化完成
2025-10-23 10:53:30,487 - system_core - INFO - 正在初始化系统组件...
2025-10-23 10:53:35,038 - system_core - INFO - 初始化题库...
2025-10-23 10:53:35,039 - data_management.question_db - INFO - 加载题库成功,共 20 道题目
2025-10-23 10:53:35,039 - data_management.question_db - INFO - 题库数据库初始化完成,路径: D:\HUAWEI\education_7\files\edu_assessment_system\edu_assessment_system\data\question_database.json
2025-10-23 10:53:35,039 - system_core - INFO - 初始化模型...
2025-10-23 10:53:35,039 - models.embedding_model - INFO - 初始化BGE-M3嵌入模型: D:\HUAWEI\bgem3
2025-10-23 10:53:35,040 - models.llm_models - INFO - 初始化Qwen出题模型
2025-10-23 10:53:35,040 - models.llm_models - INFO - 初始化PanGu评估模型
2025-10-23 10:53:35,040 - system_core - INFO - 初始化功能组件...
2025-10-23 10:53:35,040 - utils.question_generator - INFO - 题目生成器初始化完成
2025-10-23 10:53:35,040 - utils.evaluator - INFO - 学生评估器初始化完成
2025-10-23 10:53:35,040 - visualization.kg_visualizer - INFO - 知识图谱可视化器初始化完成
2025-10-23 10:53:35,041 - system_core - INFO - 系统初始化完成
2025-10-23 10:53:35,041 - __main__ - INFO - 系统核心初始化完成
2025-10-23 10:53:35,041 - __main__ - INFO - 检查题库数据...
2025-10-23 10:53:35,041 - __main__ - INFO - 题库已有 20 道题目
2025-10-23 10:53:35,041 - __main__ - INFO - 正在创建UI界面...
2025-10-23 10:53:35,041 - ui.main_ui - INFO - UI界面初始化完成
2025-10-23 10:53:35,506 - __main__ - INFO - 系统启动成功!
2025-10-23 10:53:35,620 - httpx - INFO - HTTP Request: GET http://127.0.0.1:7860/gradio_api/startup-events "HTTP/1.1 200 OK"
2025-10-23 10:53:35,757 - httpx - INFO - HTTP Request: HEAD http://127.0.0.1:7860/ "HTTP/1.1 200 OK"
2025-10-23 10:53:37,773 - httpx - INFO - HTTP Request: GET https://api.gradio.app/pkg-version "HTTP/1.1 200 OK"
2025-10-23 10:53:44,064 - system_core - INFO - 开始测评: 代数, 难度: 简单, 数量: 3
2025-10-23 10:53:44,064 - data_management.question_db - INFO - 筛选结果: 11 道题目
2025-10-23 10:53:48,321 - models.llm_models - INFO - 正在加载模型: D:\HUAWEI\pangu
2025-10-23 10:53:50,825 - models.llm_models - INFO - 模型加载成功,设备: cpu
2025-10-23 10:58:18,312 - __main__ - INFO - 系统已关闭
2025-10-23 10:58:53,317 - __main__ - INFO - 系统启动中...
2025-10-23 10:58:53,318 - __main__ - INFO - 检测到模型文件,将使用真实模型
2025-10-23 10:58:53,318 - __main__ - INFO - 正在初始化系统...
2025-10-23 10:58:53,318 - system_core - INFO - 系统核心初始化完成
2025-10-23 10:58:53,319 - system_core - INFO - 正在初始化系统组件...
2025-10-23 10:58:57,819 - system_core - INFO - 初始化题库...
2025-10-23 10:58:57,820 - data_management.question_db - INFO - 加载题库成功,共 20 道题目
2025-10-23 10:58:57,820 - data_management.question_db - INFO - 题库数据库初始化完成,路径: D:\HUAWEI\education_7\files\edu_assessment_system\edu_assessment_system\data\question_database.json
2025-10-23 10:58:57,820 - system_core - INFO - 初始化模型...
2025-10-23 10:58:57,820 - models.embedding_model - INFO - 初始化BGE-M3嵌入模型: D:\HUAWEI\bgem3
2025-10-23 10:58:57,820 - models.llm_models - INFO - 初始化Qwen出题模型
2025-10-23 10:58:57,821 - models.llm_models - INFO - 初始化PanGu评估模型
2025-10-23 10:58:57,821 - system_core - INFO - 初始化功能组件...
2025-10-23 10:58:57,821 - utils.question_generator - INFO - 题目生成器初始化完成
2025-10-23 10:58:57,821 - utils.evaluator - INFO - 学生评估器初始化完成
2025-10-23 10:58:57,821 - visualization.kg_visualizer - INFO - 知识图谱可视化器初始化完成
2025-10-23 10:58:57,821 - system_core - INFO - 系统初始化完成
2025-10-23 10:58:57,821 - __main__ - INFO - 系统核心初始化完成
2025-10-23 10:58:57,821 - __main__ - INFO - 检查题库数据...
2025-10-23 10:58:57,822 - __main__ - INFO - 题库已有 20 道题目
2025-10-23 10:58:57,822 - __main__ - INFO - 正在创建UI界面...
2025-10-23 10:58:57,822 - ui.main_ui - INFO - UI界面初始化完成
2025-10-23 10:58:58,294 - __main__ - INFO - 系统启动成功!
2025-10-23 10:58:58,397 - httpx - INFO - HTTP Request: GET http://127.0.0.1:7860/gradio_api/startup-events "HTTP/1.1 200 OK"
2025-10-23 10:58:58,528 - httpx - INFO - HTTP Request: HEAD http://127.0.0.1:7860/ "HTTP/1.1 200 OK"
2025-10-23 10:58:59,239 - httpx - INFO - HTTP Request: GET https://api.gradio.app/pkg-version "HTTP/1.1 200 OK"
2025-10-23 10:59:24,069 - system_core - INFO - 开始测评: 代数, 难度: 简单, 数量: 3
2025-10-23 10:59:24,069 - data_management.question_db - INFO - 筛选结果: 11 道题目
2025-10-23 10:59:30,934 - models.llm_models - INFO - 正在加载模型: D:\HUAWEI\pangu
2025-10-23 10:59:34,118 - models.llm_models - INFO - 模型加载成功,设备: cpu
2025-10-23 11:09:30,312 - __main__ - INFO - 系统启动中...
2025-10-23 11:09:30,313 - __main__ - INFO - 检测到模型文件,但强制使用模拟模式以提升性能
2025-10-23 11:09:30,314 - __main__ - INFO - 正在初始化系统...
2025-10-23 11:09:30,314 - system_core - INFO - 系统核心初始化完成
2025-10-23 11:09:30,315 - system_core - INFO - 正在初始化系统组件...
2025-10-23 11:09:44,421 - system_core - INFO - 初始化题库...
2025-10-23 11:09:44,423 - data_management.question_db - INFO - 加载题库成功,共 20 道题目
2025-10-23 11:09:44,424 - data_management.question_db - INFO - 题库数据库初始化完成,路径: D:\HUAWEI\education_7\files\edu_assessment_system\edu_assessment_system\data\question_database.json
2025-10-23 11:09:44,424 - system_core - INFO - 初始化模型...
2025-10-23 11:09:44,424 - models.embedding_model - INFO - 初始化BGE-M3嵌入模型: D:\HUAWEI\bgem3
2025-10-23 11:09:44,425 - models.llm_models - INFO - 使用模拟模型 (路径不存在: D:\HUAWEI\qwen)
2025-10-23 11:09:44,425 - models.llm_models - INFO - 使用模拟模型 (路径不存在: D:\HUAWEI\pangu)
2025-10-23 11:09:44,425 - system_core - INFO - 初始化功能组件...
2025-10-23 11:09:44,426 - utils.question_generator - INFO - 使用模拟题目生成器
2025-10-23 11:09:44,426 - utils.evaluator - INFO - 使用模拟评估器
2025-10-23 11:09:44,426 - visualization.kg_visualizer - INFO - 知识图谱可视化器初始化完成
2025-10-23 11:09:44,426 - system_core - INFO - 系统初始化完成
2025-10-23 11:09:44,426 - __main__ - INFO - 系统核心初始化完成
2025-10-23 11:09:44,427 - __main__ - INFO - 检查题库数据...
2025-10-23 11:09:44,427 - __main__ - INFO - 题库已有 20 道题目
2025-10-23 11:09:44,427 - __main__ - INFO - 正在创建UI界面...
2025-10-23 11:09:44,428 - ui.main_ui - INFO - UI界面初始化完成
2025-10-23 11:09:45,573 - __main__ - INFO - 系统启动成功!
2025-10-23 11:09:45,855 - httpx - INFO - HTTP Request: GET http://127.0.0.1:7860/gradio_api/startup-events "HTTP/1.1 200 OK"
2025-10-23 11:09:46,164 - httpx - INFO - HTTP Request: GET https://api.gradio.app/pkg-version "HTTP/1.1 200 OK"
2025-10-23 11:09:46,176 - httpx - INFO - HTTP Request: HEAD http://127.0.0.1:7860/ "HTTP/1.1 200 OK"
2025-10-23 11:09:54,267 - system_core - INFO - 开始测评: 代数, 难度: 简单, 数量: 3
2025-10-23 11:09:54,269 - data_management.question_db - INFO - 筛选结果: 11 道题目
2025-10-23 11:13:02,919 - __main__ - INFO - 系统启动中...
2025-10-23 11:13:02,921 - __main__ - INFO - 检测到模型文件,将使用真实模型
2025-10-23 11:13:02,924 - __main__ - INFO - 正在初始化系统...
2025-10-23 11:13:02,926 - system_core - INFO - 系统核心初始化完成
2025-10-23 11:13:02,927 - system_core - INFO - 正在初始化系统组件...
2025-10-23 11:13:24,667 - system_core - INFO - 初始化题库...
2025-10-23 11:13:24,669 - data_management.question_db - INFO - 加载题库成功,共 20 道题目
2025-10-23 11:13:24,670 - data_management.question_db - INFO - 题库数据库初始化完成,路径: D:\HUAWEI\education_7\files\edu_assessment_system\edu_assessment_system\data\question_database.json
2025-10-23 11:13:24,670 - system_core - INFO - 初始化模型...
2025-10-23 11:13:24,670 - models.embedding_model - INFO - 初始化BGE-M3嵌入模型: D:\HUAWEI\bgem3
2025-10-23 11:13:24,671 - models.llm_models - INFO - 初始化Qwen出题模型
2025-10-23 11:13:24,671 - models.llm_models - INFO - 初始化PanGu评估模型
2025-10-23 11:13:24,672 - system_core - INFO - 初始化功能组件...
2025-10-23 11:13:24,672 - utils.question_generator - INFO - 题目生成器初始化完成
2025-10-23 11:13:24,672 - utils.evaluator - INFO - 学生评估器初始化完成
2025-10-23 11:13:24,673 - visualization.kg_visualizer - INFO - 知识图谱可视化器初始化完成
2025-10-23 11:13:24,673 - system_core - INFO - 系统初始化完成
2025-10-23 11:13:24,673 - __main__ - INFO - 系统核心初始化完成
2025-10-23 11:13:24,673 - __main__ - INFO - 检查题库数据...
2025-10-23 11:13:24,674 - __main__ - INFO - 题库已有 20 道题目
2025-10-23 11:13:24,674 - __main__ - INFO - 正在创建UI界面...
2025-10-23 11:13:24,674 - ui.main_ui - INFO - UI界面初始化完成
2025-10-23 11:13:26,061 - httpx - INFO - HTTP Request: GET https://api.gradio.app/pkg-version "HTTP/1.1 200 OK"
2025-10-23 11:13:26,592 - __main__ - INFO - 系统启动成功!
2025-10-23 11:13:27,113 - httpx - INFO - HTTP Request: GET http://127.0.0.1:7860/gradio_api/startup-events "HTTP/1.1 200 OK"
2025-10-23 11:13:27,524 - httpx - INFO - HTTP Request: HEAD http://127.0.0.1:7860/ "HTTP/1.1 200 OK"
2025-10-23 11:13:54,106 - system_core - INFO - 开始测评: 代数, 难度: 简单, 数量: 3
2025-10-23 11:13:54,106 - data_management.question_db - INFO - 筛选结果: 11 道题目
2025-10-23 11:14:01,709 - models.llm_models - INFO - 正在加载模型: D:\HUAWEI\pangu
2025-10-23 11:14:07,662 - models.llm_models - INFO - 模型加载成功,设备: cpu
2025-10-23 13:06:24,673 - __main__ - INFO - 系统启动中...
2025-10-23 13:06:24,676 - __main__ - INFO - 检测到模型文件,将使用真实模型
2025-10-23 13:06:24,684 - __main__ - INFO - 正在初始化系统...
2025-10-23 13:06:24,684 - system_core - INFO - 系统核心初始化完成
2025-10-23 13:06:24,684 - system_core - INFO - 正在初始化系统组件...
2025-10-23 13:06:44,689 - system_core - INFO - 初始化题库...
2025-10-23 13:06:44,690 - data_management.question_db - INFO - 加载题库成功,共 20 道题目
2025-10-23 13:06:44,690 - data_management.question_db - INFO - 题库数据库初始化完成,路径: D:\HUAWEI\education_7\files\edu_assessment_system\edu_assessment_system\data\question_database.json
2025-10-23 13:06:44,690 - system_core - INFO - 初始化模型...
2025-10-23 13:06:44,691 - models.embedding_model - INFO - 初始化BGE-M3嵌入模型: D:\HUAWEI\bgem3
2025-10-23 13:06:44,691 - models.llm_models - INFO - 初始化Qwen出题模型
2025-10-23 13:06:44,691 - models.llm_models - INFO - 初始化PanGu评估模型
2025-10-23 13:06:44,692 - system_core - INFO - 初始化功能组件...
2025-10-23 13:06:44,692 - utils.question_generator - INFO - 题目生成器初始化完成
2025-10-23 13:06:44,692 - utils.evaluator - INFO - 学生评估器初始化完成
2025-10-23 13:06:44,692 - visualization.kg_visualizer - INFO - 知识图谱可视化器初始化完成
2025-10-23 13:06:44,693 - system_core - INFO - 系统初始化完成
2025-10-23 13:06:44,693 - __main__ - INFO - 系统核心初始化完成
2025-10-23 13:06:44,693 - __main__ - INFO - 检查题库数据...
2025-10-23 13:06:44,693 - __main__ - INFO - 题库已有 20 道题目
2025-10-23 13:06:44,693 - __main__ - INFO - 正在创建UI界面...
2025-10-23 13:06:44,693 - ui.main_ui - INFO - UI界面初始化完成
2025-10-23 13:06:45,740 - __main__ - INFO - 系统启动成功!
2025-10-23 13:06:46,017 - httpx - INFO - HTTP Request: GET http://127.0.0.1:7860/gradio_api/startup-events "HTTP/1.1 200 OK"
2025-10-23 13:06:46,187 - httpx - INFO - HTTP Request: HEAD http://127.0.0.1:7860/ "HTTP/1.1 200 OK"
2025-10-23 13:06:46,228 - httpx - INFO - HTTP Request: GET https://api.gradio.app/pkg-version "HTTP/1.1 200 OK"
2025-10-23 13:06:54,840 - system_core - INFO - 开始测评: None, 难度: 混合, 数量: 3
2025-10-23 13:06:54,840 - utils.question_generator - INFO - 正在生成 2 道简单难度的None题目...
2025-10-23 13:06:54,840 - utils.question_generator - INFO - 正在生成题目 (尝试 1/3)...
2025-10-23 13:06:54,840 - models.llm_models - INFO - 正在加载模型: D:\HUAWEI\qwen
2025-10-23 13:06:54,841 - models.llm_models - ERROR - 模型加载失败: local variable 'AutoTokenizer' referenced before assignment
2025-10-23 13:06:54,841 - models.llm_models - WARNING - 模型加载失败，将使用模拟模式
2025-10-23 13:06:54,841 - utils.question_generator - INFO - 题目生成成功
2025-10-23 13:06:54,841 - utils.question_generator - INFO - 进度: 1/3
2025-10-23 13:06:54,841 - utils.question_generator - INFO - 正在生成题目 (尝试 1/3)...
2025-10-23 13:06:54,842 - models.llm_models - INFO - 正在加载模型: D:\HUAWEI\qwen
2025-10-23 13:06:54,842 - models.llm_models - ERROR - 模型加载失败: local variable 'AutoTokenizer' referenced before assignment
2025-10-23 13:06:54,842 - models.llm_models - WARNING - 模型加载失败，将使用模拟模式
2025-10-23 13:06:54,842 - utils.question_generator - INFO - 题目生成成功
2025-10-23 13:06:54,842 - utils.question_generator - INFO - 进度: 2/3
2025-10-23 13:06:54,842 - utils.question_generator - INFO - 正在生成 1 道中等难度的None题目...
2025-10-23 13:06:54,843 - utils.question_generator - INFO - 正在生成题目 (尝试 1/3)...
2025-10-23 13:06:54,843 - models.llm_models - INFO - 正在加载模型: D:\HUAWEI\qwen
2025-10-23 13:06:54,843 - models.llm_models - ERROR - 模型加载失败: local variable 'AutoTokenizer' referenced before assignment
2025-10-23 13:06:54,843 - models.llm_models - WARNING - 模型加载失败，将使用模拟模式
2025-10-23 13:06:54,843 - utils.question_generator - INFO - 题目生成成功
2025-10-23 13:06:54,843 - utils.question_generator - INFO - 进度: 3/3
2025-10-23 13:06:54,844 - utils.question_generator - INFO - 正在生成 0 道困难难度的None题目...
2025-10-23 13:06:54,844 - utils.question_generator - INFO - 题目生成完成,成功 3/3 道
2025-10-23 13:07:42,364 - models.llm_models - INFO - 正在加载模型: D:\HUAWEI\pangu
2025-10-23 13:07:47,266 - models.llm_models - INFO - 模型加载成功,设备: cpu
2025-10-23 13:08:16,124 - __main__ - INFO - 系统启动中...
2025-10-23 13:08:16,124 - __main__ - INFO - 检测到模型文件,将使用真实模型
2025-10-23 13:08:16,125 - __main__ - INFO - 正在初始化系统...
2025-10-23 13:08:16,126 - system_core - INFO - 系统核心初始化完成
2025-10-23 13:08:16,126 - system_core - INFO - 正在初始化系统组件...
2025-10-23 13:08:22,466 - system_core - INFO - 初始化题库...
2025-10-23 13:08:22,466 - data_management.question_db - INFO - 加载题库成功,共 20 道题目
2025-10-23 13:08:22,467 - data_management.question_db - INFO - 题库数据库初始化完成,路径: D:\HUAWEI\education_7\files\edu_assessment_system\edu_assessment_system\data\question_database.json
2025-10-23 13:08:22,467 - system_core - INFO - 初始化模型...
2025-10-23 13:08:22,467 - models.embedding_model - INFO - 初始化BGE-M3嵌入模型: D:\HUAWEI\bgem3
2025-10-23 13:08:22,467 - models.llm_models - INFO - 初始化Qwen出题模型
2025-10-23 13:08:22,468 - models.llm_models - INFO - 初始化PanGu评估模型
2025-10-23 13:08:22,468 - system_core - INFO - 初始化功能组件...
2025-10-23 13:08:22,468 - utils.question_generator - INFO - 题目生成器初始化完成
2025-10-23 13:08:22,468 - utils.evaluator - INFO - 学生评估器初始化完成
2025-10-23 13:08:22,468 - visualization.kg_visualizer - INFO - 知识图谱可视化器初始化完成
2025-10-23 13:08:22,469 - system_core - INFO - 系统初始化完成
2025-10-23 13:08:22,469 - __main__ - INFO - 系统核心初始化完成
2025-10-23 13:08:22,469 - __main__ - INFO - 检查题库数据...
2025-10-23 13:08:22,469 - __main__ - INFO - 题库已有 20 道题目
2025-10-23 13:08:22,469 - __main__ - INFO - 正在创建UI界面...
2025-10-23 13:08:22,469 - ui.main_ui - INFO - UI界面初始化完成
2025-10-23 13:08:23,048 - __main__ - INFO - 系统启动成功!
2025-10-23 13:08:23,178 - httpx - INFO - HTTP Request: GET http://127.0.0.1:7860/gradio_api/startup-events "HTTP/1.1 200 OK"
2025-10-23 13:08:23,330 - httpx - INFO - HTTP Request: HEAD http://127.0.0.1:7860/ "HTTP/1.1 200 OK"
2025-10-23 13:08:23,545 - httpx - INFO - HTTP Request: GET https://api.gradio.app/pkg-version "HTTP/1.1 200 OK"
2025-10-23 13:09:24,019 - system_core - INFO - 开始测评: None, 难度: 混合, 数量: 3
2025-10-23 13:09:24,019 - utils.question_generator - INFO - 正在生成 2 道简单难度的None题目...
2025-10-23 13:09:24,020 - utils.question_generator - INFO - 正在生成题目 (尝试 1/3)...
2025-10-23 13:09:24,021 - models.llm_models - INFO - 正在加载模型: D:\HUAWEI\qwen
2025-10-23 13:09:25,860 - models.llm_models - INFO - 模型加载成功,设备: cpu
2025-10-23 13:10:05,958 - utils.question_generator - ERROR - JSON解析失败: Extra data: line 1 column 134 (char 133)
2025-10-23 13:10:05,959 - utils.question_generator - WARNING - 题目解析失败,重试...
2025-10-23 13:10:05,960 - utils.question_generator - INFO - 正在生成题目 (尝试 2/3)...
2025-10-23 13:13:40,290 - utils.question_generator - ERROR - JSON解析失败: Extra data: line 1 column 140 (char 139)
2025-10-23 13:13:40,291 - utils.question_generator - WARNING - 题目解析失败,重试...
2025-10-23 13:13:40,291 - utils.question_generator - INFO - 正在生成题目 (尝试 3/3)...
2025-10-23 13:13:57,576 - utils.question_generator - INFO - 题目生成成功
2025-10-23 13:13:57,576 - utils.question_generator - INFO - 进度: 1/3
2025-10-23 13:13:57,576 - utils.question_generator - INFO - 正在生成题目 (尝试 1/3)...
2025-10-23 13:14:09,691 - utils.question_generator - ERROR - 生成的题目缺少字段: 问题
2025-10-23 13:14:09,692 - utils.question_generator - WARNING - 题目解析失败,重试...
2025-10-23 13:14:09,692 - utils.question_generator - INFO - 正在生成题目 (尝试 2/3)...
2025-10-23 13:14:25,820 - utils.question_generator - INFO - 题目生成成功
2025-10-23 13:14:25,821 - utils.question_generator - INFO - 进度: 2/3
2025-10-23 13:14:25,821 - utils.question_generator - INFO - 正在生成 1 道中等难度的None题目...
2025-10-23 13:14:25,821 - utils.question_generator - INFO - 正在生成题目 (尝试 1/3)...
2025-10-23 13:15:24,291 - utils.question_generator - ERROR - JSON解析失败: Extra data: line 1 column 67 (char 66)
2025-10-23 13:15:24,292 - utils.question_generator - WARNING - 题目解析失败,重试...
2025-10-23 13:15:24,292 - utils.question_generator - INFO - 正在生成题目 (尝试 2/3)...
2025-10-23 13:15:42,065 - utils.question_generator - INFO - 题目生成成功
2025-10-23 13:15:42,066 - utils.question_generator - INFO - 进度: 3/3
2025-10-23 13:15:42,067 - utils.question_generator - INFO - 正在生成 0 道困难难度的None题目...
2025-10-23 13:15:42,067 - utils.question_generator - INFO - 题目生成完成,成功 3/3 道
2025-10-23 13:22:30,684 - __main__ - INFO - 系统启动中...
2025-10-23 13:22:30,685 - __main__ - INFO - 检测到模型文件,将使用真实模型
2025-10-23 13:22:30,686 - __main__ - INFO - 正在初始化系统...
2025-10-23 13:22:30,686 - system_core - INFO - 系统核心初始化完成
2025-10-23 13:22:30,686 - system_core - INFO - 正在初始化系统组件...
2025-10-23 13:22:34,516 - system_core - INFO - 初始化题库...
2025-10-23 13:22:34,517 - data_management.question_db - INFO - 加载题库成功,共 20 道题目
2025-10-23 13:22:34,517 - data_management.question_db - INFO - 题库数据库初始化完成,路径: D:\HUAWEI\education_7\files\edu_assessment_system\edu_assessment_system\data\question_database.json
2025-10-23 13:22:34,517 - system_core - INFO - 初始化模型...
2025-10-23 13:22:34,517 - models.embedding_model - INFO - 初始化BGE-M3嵌入模型: D:\HUAWEI\bgem3
2025-10-23 13:22:34,517 - models.llm_models - INFO - 初始化Qwen出题模型
2025-10-23 13:22:34,517 - models.llm_models - INFO - 初始化PanGu评估模型
2025-10-23 13:22:34,518 - system_core - INFO - 初始化功能组件...
2025-10-23 13:22:34,518 - utils.question_generator - INFO - 题目生成器初始化完成
2025-10-23 13:22:34,518 - utils.evaluator - INFO - 学生评估器初始化完成
2025-10-23 13:22:34,518 - visualization.kg_visualizer - INFO - 知识图谱可视化器初始化完成
2025-10-23 13:22:34,518 - system_core - INFO - 系统初始化完成
2025-10-23 13:22:34,518 - __main__ - INFO - 系统核心初始化完成
2025-10-23 13:22:34,518 - __main__ - INFO - 检查题库数据...
2025-10-23 13:22:34,518 - __main__ - INFO - 题库已有 20 道题目
2025-10-23 13:22:34,518 - __main__ - INFO - 正在创建UI界面...
2025-10-23 13:22:34,518 - ui.main_ui - INFO - UI界面初始化完成
2025-10-23 13:22:34,907 - __main__ - INFO - 系统启动成功!
2025-10-23 13:22:35,005 - httpx - INFO - HTTP Request: GET http://127.0.0.1:7860/gradio_api/startup-events "HTTP/1.1 200 OK"
2025-10-23 13:22:35,147 - httpx - INFO - HTTP Request: HEAD http://127.0.0.1:7860/ "HTTP/1.1 200 OK"
2025-10-23 13:22:35,838 - httpx - INFO - HTTP Request: GET https://api.gradio.app/pkg-version "HTTP/1.1 200 OK"
2025-10-23 13:22:48,629 - system_core - INFO - 开始测评: 代数, 难度: 混合, 数量: 3
2025-10-23 13:22:48,629 - utils.question_generator - INFO - 正在生成 2 道简单难度的代数题目...
2025-10-23 13:22:48,630 - utils.question_generator - INFO - 正在生成题目 (尝试 1/3)...
2025-10-23 13:22:48,630 - models.llm_models - INFO - 正在加载模型: D:\HUAWEI\qwen
2025-10-23 13:22:49,655 - models.llm_models - INFO - 模型加载成功,设备: cpu
2025-10-23 13:22:54,395 - visualization.kg_visualizer - INFO - 知识图谱构建完成: 27 个节点, 40 条边
2025-10-23 13:22:59,889 - visualization.kg_visualizer - INFO - 知识图谱构建完成: 27 个节点, 40 条边
2025-10-23 13:22:59,984 - visualization.kg_visualizer - INFO - 知识图谱已保存到: D:\HUAWEI\education_7\files\edu_assessment_system\edu_assessment_system\data\knowledge_graph.html
2025-10-23 13:23:29,975 - utils.question_generator - ERROR - JSON解析失败: Invalid \escape: line 1 column 15 (char 14)
2025-10-23 13:23:29,976 - utils.question_generator - WARNING - 题目解析失败,重试...
2025-10-23 13:23:29,976 - utils.question_generator - INFO - 正在生成题目 (尝试 2/3)...
2025-10-23 13:23:50,808 - utils.question_generator - INFO - 题目生成成功
2025-10-23 13:23:50,809 - utils.question_generator - INFO - 进度: 1/3
2025-10-23 13:23:50,809 - utils.question_generator - INFO - 正在生成题目 (尝试 1/3)...
2025-10-23 13:24:12,523 - __main__ - INFO - 系统启动中...
2025-10-23 13:24:12,524 - __main__ - INFO - 检测到模型文件,将使用真实模型
2025-10-23 13:24:12,524 - __main__ - INFO - 正在初始化系统...
2025-10-23 13:24:12,524 - system_core - INFO - 系统核心初始化完成
2025-10-23 13:24:12,524 - system_core - INFO - 正在初始化系统组件...
2025-10-23 13:24:23,313 - system_core - INFO - 初始化题库...
2025-10-23 13:24:23,315 - data_management.question_db - INFO - 加载题库成功,共 20 道题目
2025-10-23 13:24:23,316 - data_management.question_db - INFO - 题库数据库初始化完成,路径: D:\HUAWEI\education_7\files\edu_assessment_system\edu_assessment_system\data\question_database.json
2025-10-23 13:24:23,316 - system_core - INFO - 初始化模型...
2025-10-23 13:24:23,316 - models.embedding_model - INFO - 初始化BGE-M3嵌入模型: D:\HUAWEI\bgem3
2025-10-23 13:24:23,317 - models.llm_models - INFO - 初始化Qwen出题模型
2025-10-23 13:24:23,317 - models.llm_models - INFO - 初始化PanGu评估模型
2025-10-23 13:24:23,317 - system_core - INFO - 初始化功能组件...
2025-10-23 13:24:23,317 - utils.question_generator - INFO - 题目生成器初始化完成
2025-10-23 13:24:23,317 - utils.evaluator - INFO - 学生评估器初始化完成
2025-10-23 13:24:23,317 - visualization.kg_visualizer - INFO - 知识图谱可视化器初始化完成
2025-10-23 13:24:23,318 - system_core - INFO - 系统初始化完成
2025-10-23 13:24:23,318 - __main__ - INFO - 系统核心初始化完成
2025-10-23 13:24:23,318 - __main__ - INFO - 检查题库数据...
2025-10-23 13:24:23,318 - __main__ - INFO - 题库已有 20 道题目
2025-10-23 13:24:23,318 - __main__ - INFO - 正在创建UI界面...
2025-10-23 13:24:23,318 - ui.main_ui - INFO - UI界面初始化完成
2025-10-23 13:24:24,128 - __main__ - INFO - 系统启动成功!
2025-10-23 13:24:24,264 - httpx - INFO - HTTP Request: GET https://api.gradio.app/pkg-version "HTTP/1.1 200 OK"
2025-10-23 13:24:24,296 - __main__ - ERROR - 系统运行出错: Cannot find empty port in range: 7860-7860. You can specify a different port by setting the GRADIO_SERVER_PORT environment variable or passing the `server_port` parameter to `launch()`.
Traceback (most recent call last):
  File "D:\HUAWEI\education_7\files\edu_assessment_system\edu_assessment_system\main.py", line 114, in main
    interface.launch(
  File "C:\Users\ASUS\AppData\Local\Packages\PythonSoftwareFoundation.Python.3.10_qbz5n2kfra8p0\LocalCache\local-packages\Python310\site-packages\gradio\blocks.py", line 2724, in launch
    ) = http_server.start_server(
  File "C:\Users\ASUS\AppData\Local\Packages\PythonSoftwareFoundation.Python.3.10_qbz5n2kfra8p0\LocalCache\local-packages\Python310\site-packages\gradio\http_server.py", line 156, in start_server
    raise OSError(
OSError: Cannot find empty port in range: 7860-7860. You can specify a different port by setting the GRADIO_SERVER_PORT environment variable or passing the `server_port` parameter to `launch()`.
2025-10-23 13:24:24,328 - __main__ - INFO - 系统已关闭
2025-10-23 13:24:42,792 - utils.question_generator - ERROR - JSON解析失败: Invalid \escape: line 1 column 24 (char 23)
2025-10-23 13:24:42,792 - utils.question_generator - WARNING - 题目解析失败,重试...
2025-10-23 13:24:42,793 - utils.question_generator - INFO - 正在生成题目 (尝试 2/3)...
2025-10-23 13:25:04,998 - utils.question_generator - ERROR - JSON解析失败: Invalid \escape: line 1 column 14 (char 13)
2025-10-23 13:25:04,998 - utils.question_generator - WARNING - 题目解析失败,重试...
2025-10-23 13:25:04,998 - utils.question_generator - INFO - 正在生成题目 (尝试 3/3)...
2025-10-23 13:26:03,328 - utils.question_generator - ERROR - JSON解析失败: Expecting ',' delimiter: line 1 column 333 (char 332)
2025-10-23 13:26:03,329 - utils.question_generator - WARNING - 题目解析失败,重试...
2025-10-23 13:26:03,329 - utils.question_generator - ERROR - 生成题目失败,已尝试 3 次
2025-10-23 13:26:03,329 - utils.question_generator - INFO - 正在生成 1 道中等难度的代数题目...
2025-10-23 13:26:03,329 - utils.question_generator - INFO - 正在生成题目 (尝试 1/3)...
2025-10-23 13:26:16,304 - __main__ - INFO - 系统启动中...
2025-10-23 13:26:16,305 - __main__ - INFO - 检测到模型文件,将使用真实模型
2025-10-23 13:26:16,306 - __main__ - INFO - 正在初始化系统...
2025-10-23 13:26:16,306 - system_core - INFO - 系统核心初始化完成
2025-10-23 13:26:16,306 - system_core - INFO - 正在初始化系统组件...
2025-10-23 13:26:21,801 - utils.question_generator - ERROR - JSON解析失败: Expecting ',' delimiter: line 1 column 196 (char 195)
2025-10-23 13:26:21,801 - utils.question_generator - WARNING - 题目解析失败,重试...
2025-10-23 13:26:21,802 - utils.question_generator - INFO - 正在生成题目 (尝试 2/3)...
2025-10-23 13:26:25,388 - system_core - INFO - 初始化题库...
2025-10-23 13:26:25,389 - data_management.question_db - INFO - 加载题库成功,共 20 道题目
2025-10-23 13:26:25,389 - data_management.question_db - INFO - 题库数据库初始化完成,路径: D:\HUAWEI\education_7\files\edu_assessment_system\edu_assessment_system\data\question_database.json
2025-10-23 13:26:25,390 - system_core - INFO - 初始化模型...
2025-10-23 13:26:25,390 - models.embedding_model - INFO - 初始化BGE-M3嵌入模型: D:\HUAWEI\bgem3
2025-10-23 13:26:25,390 - models.llm_models - INFO - 初始化Qwen出题模型
2025-10-23 13:26:25,391 - models.llm_models - INFO - 初始化PanGu评估模型
2025-10-23 13:26:25,391 - system_core - INFO - 初始化功能组件...
2025-10-23 13:26:25,391 - utils.question_generator - INFO - 题目生成器初始化完成
2025-10-23 13:26:25,392 - utils.evaluator - INFO - 学生评估器初始化完成
2025-10-23 13:26:25,392 - visualization.kg_visualizer - INFO - 知识图谱可视化器初始化完成
2025-10-23 13:26:25,392 - system_core - INFO - 系统初始化完成
2025-10-23 13:26:25,392 - __main__ - INFO - 系统核心初始化完成
2025-10-23 13:26:25,392 - __main__ - INFO - 检查题库数据...
2025-10-23 13:26:25,393 - __main__ - INFO - 题库已有 20 道题目
2025-10-23 13:26:25,393 - __main__ - INFO - 正在创建UI界面...
2025-10-23 13:26:25,393 - ui.main_ui - INFO - UI界面初始化完成
2025-10-23 13:26:26,274 - __main__ - INFO - 系统启动成功!
2025-10-23 13:26:26,429 - __main__ - ERROR - 系统运行出错: Cannot find empty port in range: 7860-7860. You can specify a different port by setting the GRADIO_SERVER_PORT environment variable or passing the `server_port` parameter to `launch()`.
Traceback (most recent call last):
  File "D:\HUAWEI\education_7\files\edu_assessment_system\edu_assessment_system\main.py", line 114, in main
    interface.launch(
  File "C:\Users\ASUS\AppData\Local\Packages\PythonSoftwareFoundation.Python.3.10_qbz5n2kfra8p0\LocalCache\local-packages\Python310\site-packages\gradio\blocks.py", line 2724, in launch
    ) = http_server.start_server(
  File "C:\Users\ASUS\AppData\Local\Packages\PythonSoftwareFoundation.Python.3.10_qbz5n2kfra8p0\LocalCache\local-packages\Python310\site-packages\gradio\http_server.py", line 156, in start_server
    raise OSError(
OSError: Cannot find empty port in range: 7860-7860. You can specify a different port by setting the GRADIO_SERVER_PORT environment variable or passing the `server_port` parameter to `launch()`.
2025-10-23 13:26:26,432 - __main__ - INFO - 系统已关闭
2025-10-23 13:26:26,851 - httpx - INFO - HTTP Request: GET https://api.gradio.app/pkg-version "HTTP/1.1 200 OK"
2025-10-23 13:28:10,225 - __main__ - INFO - 系统已关闭
2025-10-23 13:31:59,685 - __main__ - INFO - 系统启动中...
2025-10-23 13:31:59,685 - __main__ - INFO - 检测到模型文件,将使用真实模型
2025-10-23 13:31:59,685 - __main__ - INFO - 正在初始化系统...
2025-10-23 13:31:59,686 - system_core - INFO - 系统核心初始化完成
2025-10-23 13:31:59,686 - system_core - INFO - 正在初始化系统组件...
2025-10-23 13:32:03,628 - system_core - INFO - 初始化题库...
2025-10-23 13:32:03,628 - data_management.question_db - INFO - 加载题库成功,共 20 道题目
2025-10-23 13:32:03,629 - data_management.question_db - INFO - 题库数据库初始化完成,路径: D:\HUAWEI\education_7\files\edu_assessment_system\edu_assessment_system\data\question_database.json
2025-10-23 13:32:03,629 - system_core - INFO - 初始化模型...
2025-10-23 13:32:03,629 - models.embedding_model - INFO - 初始化BGE-M3嵌入模型: D:\HUAWEI\bgem3
2025-10-23 13:32:03,629 - models.llm_models - INFO - 初始化Qwen出题模型
2025-10-23 13:32:03,629 - models.llm_models - INFO - 初始化PanGu评估模型
2025-10-23 13:32:03,629 - system_core - INFO - 初始化功能组件...
2025-10-23 13:32:03,629 - utils.question_generator - INFO - 题目生成器初始化完成
2025-10-23 13:32:03,629 - utils.evaluator - INFO - 学生评估器初始化完成
2025-10-23 13:32:03,630 - visualization.kg_visualizer - INFO - 知识图谱可视化器初始化完成
2025-10-23 13:32:03,630 - system_core - INFO - 系统初始化完成
2025-10-23 13:32:03,630 - __main__ - INFO - 系统核心初始化完成
2025-10-23 13:32:03,630 - __main__ - INFO - 检查题库数据...
2025-10-23 13:32:03,630 - __main__ - INFO - 题库已有 20 道题目
2025-10-23 13:32:03,630 - __main__ - INFO - 正在创建UI界面...
2025-10-23 13:32:03,630 - ui.main_ui - INFO - UI界面初始化完成
2025-10-23 13:32:04,022 - __main__ - INFO - 系统启动成功!
2025-10-23 13:32:04,121 - httpx - INFO - HTTP Request: GET http://127.0.0.1:7860/gradio_api/startup-events "HTTP/1.1 200 OK"
2025-10-23 13:32:04,247 - httpx - INFO - HTTP Request: HEAD http://127.0.0.1:7860/ "HTTP/1.1 200 OK"
2025-10-23 13:32:04,852 - httpx - INFO - HTTP Request: GET https://api.gradio.app/pkg-version "HTTP/1.1 200 OK"
2025-10-23 13:33:24,070 - system_core - INFO - 开始测评: 代数, 难度: 混合, 数量: 3
2025-10-23 13:33:24,072 - utils.question_generator - INFO - 正在生成 2 道简单难度的代数题目...
2025-10-23 13:33:24,072 - utils.question_generator - INFO - 正在生成题目 (尝试 1/3)...
2025-10-23 13:33:24,073 - models.llm_models - INFO - 正在加载模型: D:\HUAWEI\qwen
2025-10-23 13:33:25,120 - models.llm_models - INFO - 模型加载成功,设备: cpu
2025-10-23 13:34:15,265 - utils.question_generator - INFO - 题目生成成功
2025-10-23 13:34:15,266 - utils.question_generator - INFO - 进度: 1/3
2025-10-23 13:34:15,267 - utils.question_generator - INFO - 正在生成题目 (尝试 1/3)...
2025-10-23 13:34:56,663 - utils.question_generator - INFO - 题目生成成功
2025-10-23 13:34:56,663 - utils.question_generator - INFO - 进度: 2/3
2025-10-23 13:34:56,663 - utils.question_generator - INFO - 正在生成 1 道中等难度的代数题目...
2025-10-23 13:34:56,665 - utils.question_generator - INFO - 正在生成题目 (尝试 1/3)...
2025-10-23 13:35:50,613 - utils.question_generator - ERROR - 生成的题目缺少字段: 问题
2025-10-23 13:35:50,613 - utils.question_generator - WARNING - 题目解析失败,重试...
2025-10-23 13:35:50,614 - utils.question_generator - INFO - 正在生成题目 (尝试 2/3)...
2025-10-23 13:36:19,871 - utils.question_generator - INFO - 题目生成成功
2025-10-23 13:36:19,871 - utils.question_generator - INFO - 进度: 3/3
2025-10-23 13:36:19,874 - utils.question_generator - INFO - 正在生成 0 道困难难度的代数题目...
2025-10-23 13:36:19,874 - utils.question_generator - INFO - 题目生成完成,成功 3/3 道
2025-10-23 13:37:23,056 - models.llm_models - INFO - 正在加载模型: D:\HUAWEI\pangu
2025-10-23 13:37:26,860 - models.llm_models - INFO - 模型加载成功,设备: cpu
2025-10-23 13:52:17,493 - __main__ - INFO - 系统启动中...
2025-10-23 13:52:17,493 - __main__ - INFO - 检测到模型文件,将使用真实模型
2025-10-23 13:52:17,494 - __main__ - INFO - 正在初始化系统...
2025-10-23 13:52:17,494 - system_core - INFO - 系统核心初始化完成
2025-10-23 13:52:17,494 - system_core - INFO - 正在初始化系统组件...
2025-10-23 13:52:22,944 - system_core - INFO - 初始化题库...
2025-10-23 13:52:22,945 - data_management.question_db - INFO - 加载题库成功,共 20 道题目
2025-10-23 13:52:22,946 - data_management.question_db - INFO - 题库数据库初始化完成,路径: D:\HUAWEI\education_7\files\edu_assessment_system\edu_assessment_system\data\question_database.json
2025-10-23 13:52:22,946 - system_core - INFO - 初始化模型...
2025-10-23 13:52:22,946 - models.embedding_model - INFO - 初始化BGE-M3嵌入模型: D:\HUAWEI\bgem3
2025-10-23 13:52:22,946 - models.llm_models - INFO - 初始化Qwen出题模型
2025-10-23 13:52:22,946 - models.llm_models - INFO - 初始化PanGu评估模型
2025-10-23 13:52:22,946 - system_core - INFO - 初始化功能组件...
2025-10-23 13:52:22,946 - utils.question_generator - INFO - 题目生成器初始化完成
2025-10-23 13:52:22,947 - utils.evaluator - INFO - 学生评估器初始化完成
2025-10-23 13:52:22,947 - visualization.kg_visualizer - INFO - 知识图谱可视化器初始化完成
2025-10-23 13:52:22,947 - system_core - INFO - 系统初始化完成
2025-10-23 13:52:22,947 - __main__ - INFO - 系统核心初始化完成
2025-10-23 13:52:22,947 - __main__ - INFO - 检查题库数据...
2025-10-23 13:52:22,947 - __main__ - INFO - 题库已有 20 道题目
2025-10-23 13:52:22,947 - __main__ - INFO - 正在创建UI界面...
2025-10-23 13:52:22,947 - ui.main_ui - INFO - UI界面初始化完成
2025-10-23 13:52:23,440 - __main__ - INFO - 系统启动成功!
2025-10-23 13:52:23,561 - httpx - INFO - HTTP Request: GET http://127.0.0.1:7860/gradio_api/startup-events "HTTP/1.1 200 OK"
2025-10-23 13:52:23,696 - httpx - INFO - HTTP Request: HEAD http://127.0.0.1:7860/ "HTTP/1.1 200 OK"
2025-10-23 13:52:24,963 - httpx - INFO - HTTP Request: GET https://api.gradio.app/pkg-version "HTTP/1.1 200 OK"
2025-10-23 13:52:35,626 - system_core - INFO - 开始测评: 代数, 难度: 混合, 数量: 3
2025-10-23 13:52:35,627 - system_core - INFO - 从题库抽取 3 道代数题目
2025-10-23 13:52:58,544 - system_core - INFO - 开始测评: 代数, 难度: 中等, 数量: 3
2025-10-23 13:52:58,544 - data_management.question_db - INFO - 筛选结果: 2 道题目
2025-10-23 13:52:58,545 - system_core - WARNING - 题库题目不足(2/3)，将生成新题目
2025-10-23 13:52:58,545 - utils.question_generator - INFO - 正在生成 2 道简单难度的代数题目...
2025-10-23 13:52:58,545 - utils.question_generator - INFO - 正在生成题目 (尝试 1/3)...
2025-10-23 13:52:58,546 - models.llm_models - INFO - 正在加载模型: D:\HUAWEI\qwen
2025-10-23 13:53:00,462 - models.llm_models - INFO - 模型加载成功,设备: cpu
2025-10-23 13:53:24,453 - utils.question_generator - INFO - 题目生成成功
2025-10-23 13:53:24,453 - utils.question_generator - INFO - 进度: 1/3
2025-10-23 13:53:24,454 - utils.question_generator - INFO - 正在生成题目 (尝试 1/3)...
2025-10-23 13:54:18,140 - utils.question_generator - ERROR - JSON解析失败: Invalid \escape: line 1 column 26 (char 25)
2025-10-23 13:54:18,141 - utils.question_generator - WARNING - 题目解析失败,重试...
2025-10-23 13:54:18,141 - utils.question_generator - INFO - 正在生成题目 (尝试 2/3)...
2025-10-23 13:54:57,166 - utils.question_generator - INFO - 题目生成成功
2025-10-23 13:54:57,168 - utils.question_generator - INFO - 进度: 2/3
2025-10-23 13:54:57,168 - utils.question_generator - INFO - 正在生成 1 道中等难度的代数题目...
2025-10-23 13:54:57,168 - utils.question_generator - INFO - 正在生成题目 (尝试 1/3)...
2025-10-23 13:55:35,429 - utils.question_generator - ERROR - JSON解析失败: Expecting ',' delimiter: line 1 column 222 (char 221)
2025-10-23 13:55:35,431 - utils.question_generator - WARNING - 题目解析失败,重试...
2025-10-23 13:55:35,431 - utils.question_generator - INFO - 正在生成题目 (尝试 2/3)...
2025-10-23 13:56:19,652 - utils.question_generator - ERROR - JSON解析失败: Invalid \escape: line 1 column 15 (char 14)
2025-10-23 13:56:19,653 - utils.question_generator - WARNING - 题目解析失败,重试...
2025-10-23 13:56:19,653 - utils.question_generator - INFO - 正在生成题目 (尝试 3/3)...
2025-10-23 13:57:39,151 - utils.question_generator - INFO - 题目生成成功
2025-10-23 13:57:39,152 - utils.question_generator - INFO - 进度: 3/3
2025-10-23 13:57:39,152 - utils.question_generator - INFO - 正在生成 0 道困难难度的代数题目...
2025-10-23 13:57:39,152 - utils.question_generator - INFO - 题目生成完成,成功 3/3 道
2025-10-23 13:59:03,152 - models.llm_models - INFO - 正在加载模型: D:\HUAWEI\pangu
2025-10-23 13:59:08,142 - models.llm_models - INFO - 模型加载成功,设备: cpu
2025-10-23 14:45:56,908 - system_core - INFO - 开始测评: 代数, 难度: 混合, 数量: 3
2025-10-23 14:45:56,922 - system_core - INFO - 从题库抽取 3 道代数题目
2025-10-23 14:47:36,624 - __main__ - INFO - 系统启动中...
2025-10-23 14:47:36,626 - __main__ - INFO - 检测到模型文件,将使用真实模型
2025-10-23 14:47:36,627 - __main__ - INFO - 正在初始化系统...
2025-10-23 14:47:36,627 - system_core - INFO - 系统核心初始化完成
2025-10-23 14:47:36,627 - system_core - INFO - 正在初始化系统组件...
2025-10-23 14:47:44,121 - system_core - INFO - 初始化题库...
2025-10-23 14:47:44,121 - data_management.question_db - INFO - 加载题库成功,共 20 道题目
2025-10-23 14:47:44,121 - data_management.question_db - INFO - 题库数据库初始化完成,路径: D:\HUAWEI\education_7\files\edu_assessment_system\edu_assessment_system\data\question_database.json
2025-10-23 14:47:44,121 - system_core - INFO - 初始化模型...
2025-10-23 14:47:44,123 - models.embedding_model - INFO - 初始化BGE-M3嵌入模型: D:\HUAWEI\bgem3
2025-10-23 14:47:44,123 - models.llm_models - INFO - 初始化Qwen出题模型
2025-10-23 14:47:44,123 - models.llm_models - INFO - 初始化PanGu评估模型
2025-10-23 14:47:44,123 - system_core - INFO - 初始化功能组件...
2025-10-23 14:47:44,124 - utils.question_generator - INFO - 题目生成器初始化完成
2025-10-23 14:47:44,124 - utils.evaluator - INFO - 学生评估器初始化完成
2025-10-23 14:47:44,124 - visualization.kg_visualizer - INFO - 知识图谱可视化器初始化完成
2025-10-23 14:47:44,124 - system_core - INFO - 系统初始化完成
2025-10-23 14:47:44,124 - __main__ - INFO - 系统核心初始化完成
2025-10-23 14:47:44,124 - __main__ - INFO - 检查题库数据...
2025-10-23 14:47:44,124 - __main__ - INFO - 题库已有 20 道题目
2025-10-23 14:47:44,124 - __main__ - INFO - 正在创建UI界面...
2025-10-23 14:47:44,124 - ui.main_ui - INFO - UI界面初始化完成
2025-10-23 14:47:44,671 - __main__ - INFO - 系统启动成功!
2025-10-23 14:47:44,805 - httpx - INFO - HTTP Request: GET http://127.0.0.1:7860/gradio_api/startup-events "HTTP/1.1 200 OK"
2025-10-23 14:47:44,946 - httpx - INFO - HTTP Request: HEAD http://127.0.0.1:7860/ "HTTP/1.1 200 OK"
2025-10-23 14:47:45,504 - httpx - INFO - HTTP Request: GET https://api.gradio.app/pkg-version "HTTP/1.1 200 OK"
2025-10-23 14:47:55,019 - system_core - INFO - 开始测评: 几何, 难度: 混合, 数量: 3
2025-10-23 14:47:55,019 - system_core - INFO - 从题库抽取 3 道几何题目
2025-10-23 14:48:03,446 - models.llm_models - INFO - 正在加载模型: D:\HUAWEI\pangu
2025-10-23 14:48:07,407 - models.llm_models - INFO - 模型加载成功,设备: cpu
2025-10-23 14:48:10,355 - __main__ - INFO - 系统已关闭
2025-10-23 14:57:44,335 - __main__ - INFO - 系统启动中...
2025-10-23 14:57:44,336 - __main__ - INFO - 检测到模型文件,将使用真实模型
2025-10-23 14:57:44,336 - __main__ - INFO - 正在初始化系统...
2025-10-23 14:57:44,336 - system_core - INFO - 系统核心初始化完成
2025-10-23 14:57:44,336 - system_core - INFO - 正在初始化系统组件...
2025-10-23 14:58:04,464 - __main__ - INFO - 系统启动中...
2025-10-23 14:58:04,464 - __main__ - INFO - 检测到模型文件,将使用真实模型
2025-10-23 14:58:04,464 - __main__ - INFO - 正在初始化系统...
2025-10-23 14:58:04,465 - system_core - INFO - 系统核心初始化完成
2025-10-23 14:58:04,465 - system_core - INFO - 正在初始化系统组件...
2025-10-23 14:58:08,995 - system_core - INFO - 初始化题库...
2025-10-23 14:58:08,996 - data_management.question_db - INFO - 加载题库成功,共 20 道题目
2025-10-23 14:58:08,996 - data_management.question_db - INFO - 题库数据库初始化完成,路径: D:\HUAWEI\education_7\files\edu_assessment_system\edu_assessment_system\data\question_database.json
2025-10-23 14:58:08,996 - system_core - INFO - 初始化模型...
2025-10-23 14:58:08,997 - models.embedding_model - INFO - 初始化BGE-M3嵌入模型: D:\HUAWEI\bgem3
2025-10-23 14:58:08,997 - models.llm_models - INFO - 初始化Qwen出题模型
2025-10-23 14:58:08,997 - models.llm_models - INFO - 初始化PanGu评估模型
2025-10-23 14:58:08,997 - system_core - INFO - 初始化功能组件...
2025-10-23 14:58:08,998 - utils.question_generator - INFO - 题目生成器初始化完成
2025-10-23 14:58:08,998 - utils.evaluator - INFO - 学生评估器初始化完成
2025-10-23 14:58:08,998 - visualization.kg_visualizer - INFO - 知识图谱可视化器初始化完成
2025-10-23 14:58:08,998 - system_core - INFO - 系统初始化完成
2025-10-23 14:58:08,998 - __main__ - INFO - 系统核心初始化完成
2025-10-23 14:58:08,998 - __main__ - INFO - 检查题库数据...
2025-10-23 14:58:08,998 - __main__ - INFO - 题库已有 20 道题目
2025-10-23 14:58:08,998 - __main__ - INFO - 正在创建UI界面...
2025-10-23 14:58:08,999 - ui.main_ui - INFO - UI界面初始化完成
2025-10-23 14:58:09,445 - __main__ - INFO - 系统启动成功!
2025-10-23 14:58:09,553 - httpx - INFO - HTTP Request: GET http://127.0.0.1:7860/gradio_api/startup-events "HTTP/1.1 200 OK"
2025-10-23 14:58:09,703 - httpx - INFO - HTTP Request: HEAD http://127.0.0.1:7860/ "HTTP/1.1 200 OK"
2025-10-23 14:58:09,946 - httpx - INFO - HTTP Request: GET https://api.gradio.app/pkg-version "HTTP/1.1 200 OK"
2025-10-23 14:58:31,184 - __main__ - INFO - 系统已关闭
2025-10-23 17:17:37,470 - __main__ - INFO - 系统启动中...
2025-10-23 17:17:37,470 - __main__ - INFO - 检测到模型文件,将使用真实模型
2025-10-23 17:17:37,471 - __main__ - INFO - 正在初始化系统...
2025-10-23 17:17:37,471 - system_core - INFO - 系统核心初始化完成
2025-10-23 17:17:37,471 - system_core - INFO - 正在初始化系统组件...
2025-10-23 17:17:42,748 - system_core - INFO - 初始化题库...
2025-10-23 17:17:42,750 - data_management.question_db - INFO - 加载题库成功,共 20 道题目
2025-10-23 17:17:42,750 - data_management.question_db - INFO - 题库数据库初始化完成,路径: D:\HUAWEI\education_7\files\edu_assessment_system\edu_assessment_system\data\question_database.json
2025-10-23 17:17:42,752 - system_core - INFO - 初始化模型...
2025-10-23 17:17:42,753 - models.embedding_model - INFO - 初始化BGE-M3嵌入模型: D:\HUAWEI\bgem3
2025-10-23 17:17:42,756 - models.llm_models - INFO - 初始化Qwen出题模型
2025-10-23 17:17:42,756 - models.llm_models - INFO - 初始化PanGu评估模型
2025-10-23 17:17:42,757 - system_core - INFO - 初始化功能组件...
2025-10-23 17:17:42,757 - utils.question_generator - INFO - 题目生成器初始化完成
2025-10-23 17:17:42,758 - utils.evaluator - INFO - 学生评估器初始化完成
2025-10-23 17:17:42,761 - visualization.kg_visualizer - INFO - 知识图谱可视化器初始化完成
2025-10-23 17:17:42,761 - system_core - INFO - 系统初始化完成
2025-10-23 17:17:42,762 - __main__ - INFO - 系统核心初始化完成
2025-10-23 17:17:42,762 - __main__ - INFO - 检查题库数据...
2025-10-23 17:17:42,763 - __main__ - INFO - 题库已有 20 道题目
2025-10-23 17:17:42,763 - __main__ - INFO - 正在创建UI界面...
2025-10-23 17:17:42,765 - ui.main_ui - INFO - UI界面初始化完成
2025-10-23 17:17:43,487 - __main__ - INFO - 系统启动成功!
2025-10-23 17:17:43,694 - httpx - INFO - HTTP Request: GET http://127.0.0.1:7860/gradio_api/startup-events "HTTP/1.1 200 OK"
2025-10-23 17:17:43,924 - httpx - INFO - HTTP Request: GET https://api.gradio.app/pkg-version "HTTP/1.1 200 OK"
2025-10-23 17:17:43,938 - httpx - INFO - HTTP Request: HEAD http://127.0.0.1:7860/ "HTTP/1.1 200 OK"
2025-10-23 17:18:13,102 - data_management.question_db - INFO - 筛选结果: 4 道题目
2025-10-23 17:18:33,021 - __main__ - INFO - 系统已关闭
2025-10-24 15:56:45,926 - __main__ - INFO - 系统启动中...
2025-10-24 15:56:45,927 - __main__ - INFO - 检测到模型文件,将使用真实模型
2025-10-24 15:56:45,928 - __main__ - INFO - 正在初始化系统...
2025-10-24 15:56:45,928 - system_core - INFO - 系统核心初始化完成
2025-10-24 15:56:45,928 - system_core - INFO - 正在初始化系统组件...
2025-10-24 15:59:24,525 - __main__ - INFO - 系统启动中...
2025-10-24 15:59:24,525 - __main__ - INFO - 检测到模型文件,将使用真实模型
2025-10-24 15:59:24,526 - __main__ - INFO - 正在初始化系统...
2025-10-24 15:59:24,527 - system_core - INFO - 系统核心初始化完成
2025-10-24 15:59:24,527 - system_core - INFO - 正在初始化系统组件...
2025-10-24 16:00:37,208 - __main__ - INFO - 系统启动中...
2025-10-24 16:00:37,209 - __main__ - INFO - 检测到模型文件,将使用真实模型
2025-10-24 16:00:37,209 - __main__ - INFO - 正在初始化系统...
2025-10-24 16:00:37,209 - system_core - INFO - 系统核心初始化完成
2025-10-24 16:00:37,209 - system_core - INFO - 正在初始化系统组件...
2025-10-24 16:01:11,063 - system_core - INFO - 初始化题库...
2025-10-24 16:01:11,063 - data_management.question_db - INFO - 加载题库成功,共 20 道题目
2025-10-24 16:01:11,063 - data_management.question_db - INFO - 题库数据库初始化完成,路径: D:\HUAWEI\education_7\files\edu_assessment_system\edu_assessment_system\data\question_database.json
2025-10-24 16:01:11,063 - system_core - INFO - 初始化模型...
2025-10-24 16:01:11,063 - models.embedding_model - INFO - 初始化BGE-M3嵌入模型: D:\HUAWEI\bgem3
2025-10-24 16:01:11,064 - models.llm_models - INFO - 初始化Qwen出题模型
2025-10-24 16:01:11,064 - models.llm_models - INFO - 初始化PanGu评估模型
2025-10-24 16:01:11,064 - system_core - INFO - 初始化功能组件...
2025-10-24 16:01:11,064 - utils.question_generator - INFO - 题目生成器初始化完成
2025-10-24 16:01:11,064 - utils.evaluator - INFO - 学生评估器初始化完成
2025-10-24 16:01:11,064 - visualization.kg_visualizer - INFO - 知识图谱可视化器初始化完成
2025-10-24 16:01:11,064 - system_core - INFO - 系统初始化完成
2025-10-24 16:01:11,064 - __main__ - INFO - 系统核心初始化完成
2025-10-24 16:01:11,065 - __main__ - INFO - 检查题库数据...
2025-10-24 16:01:11,065 - __main__ - INFO - 题库已有 20 道题目
2025-10-24 16:01:11,065 - __main__ - INFO - 正在创建UI界面...
2025-10-24 16:01:11,065 - ui.main_ui - INFO - UI界面初始化完成
2025-10-24 16:01:12,010 - httpx - INFO - HTTP Request: GET https://api.gradio.app/pkg-version "HTTP/1.1 200 OK"
2025-10-24 16:01:12,619 - __main__ - INFO - 系统启动成功!
2025-10-24 16:01:12,983 - httpx - INFO - HTTP Request: GET http://127.0.0.1:7860/gradio_api/startup-events "HTTP/1.1 200 OK"
2025-10-24 16:01:13,233 - httpx - INFO - HTTP Request: HEAD http://127.0.0.1:7860/ "HTTP/1.1 200 OK"
2025-10-24 16:01:18,166 - system_core - INFO - 开始测评: 代数, 难度: 混合, 数量: 3
2025-10-24 16:01:18,169 - system_core - INFO - 从题库抽取 3 道代数题目
2025-10-24 16:01:28,377 - models.llm_models - INFO - 正在加载模型: D:\HUAWEI\pangu
2025-10-24 16:01:34,935 - models.llm_models - INFO - 模型加载成功,设备: cpu
2025-10-24 16:13:45,600 - __main__ - INFO - 收到退出信号...
2025-10-24 16:13:45,601 - __main__ - INFO - 系统已关闭
2025-10-24 16:33:18,061 - __main__ - INFO - 系统启动中...
2025-10-24 16:33:18,061 - __main__ - INFO - 检测到模型文件,将使用真实模型
2025-10-24 16:33:18,061 - __main__ - INFO - 正在初始化系统...
2025-10-24 16:33:18,061 - system_core - INFO - 系统核心初始化完成
2025-10-24 16:33:18,062 - system_core - INFO - 正在初始化系统组件...
2025-10-24 16:33:22,613 - system_core - INFO - 初始化题库...
2025-10-24 16:33:22,613 - data_management.question_db - INFO - 加载题库成功,共 20 道题目
2025-10-24 16:33:22,614 - data_management.question_db - INFO - 题库数据库初始化完成,路径: D:\HUAWEI\education_7\files\edu_assessment_system\edu_assessment_system\data\question_database.json
2025-10-24 16:33:22,614 - system_core - INFO - 初始化模型...
2025-10-24 16:33:22,614 - models.embedding_model - INFO - 初始化BGE-M3嵌入模型: D:\HUAWEI\bgem3
2025-10-24 16:33:22,614 - models.llm_models - INFO - 初始化Qwen出题模型
2025-10-24 16:33:22,614 - models.llm_models - INFO - 初始化PanGu评估模型
2025-10-24 16:33:22,614 - system_core - INFO - 初始化功能组件...
2025-10-24 16:33:22,614 - utils.question_generator - INFO - 题目生成器初始化完成
2025-10-24 16:33:22,614 - utils.evaluator - INFO - 学生评估器初始化完成
2025-10-24 16:33:22,614 - visualization.kg_visualizer - INFO - 知识图谱可视化器初始化完成
2025-10-24 16:33:22,614 - system_core - INFO - 系统初始化完成
2025-10-24 16:33:22,615 - __main__ - INFO - 系统核心初始化完成
2025-10-24 16:33:22,615 - __main__ - INFO - 检查题库数据...
2025-10-24 16:33:22,615 - __main__ - INFO - 题库已有 20 道题目
2025-10-24 16:33:22,615 - __main__ - INFO - 正在创建UI界面...
2025-10-24 16:33:22,615 - ui.main_ui - INFO - UI界面初始化完成
2025-10-24 16:33:23,044 - __main__ - INFO - 系统启动成功!
2025-10-24 16:33:23,155 - httpx - INFO - HTTP Request: GET http://127.0.0.1:7860/gradio_api/startup-events "HTTP/1.1 200 OK"
2025-10-24 16:33:23,306 - httpx - INFO - HTTP Request: HEAD http://127.0.0.1:7860/ "HTTP/1.1 200 OK"
2025-10-24 16:33:23,569 - httpx - INFO - HTTP Request: GET https://api.gradio.app/pkg-version "HTTP/1.1 200 OK"
2025-10-24 16:33:25,377 - system_core - INFO - 开始测评: 代数, 难度: 混合, 数量: 5
2025-10-24 16:33:25,383 - system_core - INFO - 从题库抽取 5 道代数题目
2025-10-24 16:33:36,080 - models.llm_models - INFO - 正在加载模型: D:\HUAWEI\pangu
2025-10-24 16:33:39,223 - models.llm_models - INFO - 模型加载成功,设备: cpu
2025-10-24 16:53:08,108 - __main__ - INFO - 系统已关闭
2025-10-24 17:14:50,705 - __main__ - INFO - 系统启动中...
2025-10-24 17:14:50,706 - __main__ - INFO - 检测到模型文件,将使用真实模型
2025-10-24 17:14:50,706 - __main__ - INFO - 正在初始化系统...
2025-10-24 17:14:50,706 - system_core - INFO - 系统核心初始化完成
2025-10-24 17:14:50,706 - system_core - INFO - 正在初始化系统组件...
2025-10-24 17:14:58,590 - system_core - INFO - 初始化题库...
2025-10-24 17:14:58,591 - data_management.question_db - INFO - 加载题库成功,共 20 道题目
2025-10-24 17:14:58,591 - data_management.question_db - INFO - 题库数据库初始化完成,路径: D:\HUAWEI\education_7\files\edu_assessment_system\edu_assessment_system\data\question_database.json
2025-10-24 17:14:58,591 - system_core - INFO - 初始化模型...
2025-10-24 17:14:58,591 - models.embedding_model - INFO - 初始化BGE-M3嵌入模型: D:\HUAWEI\bgem3
2025-10-24 17:14:58,592 - models.llm_models - INFO - 初始化Qwen出题模型
2025-10-24 17:14:58,592 - models.llm_models - INFO - 初始化PanGu评估模型
2025-10-24 17:14:58,592 - system_core - INFO - 初始化功能组件...
2025-10-24 17:14:58,592 - utils.question_generator - INFO - 题目生成器初始化完成
2025-10-24 17:14:58,592 - utils.evaluator - INFO - 学生评估器初始化完成
2025-10-24 17:14:58,592 - visualization.kg_visualizer - INFO - 知识图谱可视化器初始化完成
2025-10-24 17:14:58,593 - system_core - INFO - 系统初始化完成
2025-10-24 17:14:58,593 - __main__ - INFO - 系统核心初始化完成
2025-10-24 17:14:58,593 - __main__ - INFO - 检查题库数据...
2025-10-24 17:14:58,593 - __main__ - INFO - 题库已有 20 道题目
2025-10-24 17:14:58,593 - __main__ - INFO - 正在创建UI界面...
2025-10-24 17:14:58,593 - ui.main_ui - INFO - UI界面初始化完成
2025-10-24 17:14:59,354 - __main__ - INFO - 系统启动成功!
2025-10-24 17:14:59,535 - httpx - INFO - HTTP Request: GET http://127.0.0.1:7860/gradio_api/startup-events "HTTP/1.1 200 OK"
2025-10-24 17:14:59,692 - httpx - INFO - HTTP Request: GET https://api.gradio.app/pkg-version "HTTP/1.1 200 OK"
2025-10-24 17:14:59,711 - httpx - INFO - HTTP Request: HEAD http://127.0.0.1:7860/ "HTTP/1.1 200 OK"
2025-10-24 17:15:06,558 - system_core - INFO - 开始测评: 代数, 难度: 混合, 数量: 4
2025-10-24 17:15:06,558 - system_core - INFO - 从题库抽取 4 道代数题目
2025-10-24 17:15:14,391 - models.llm_models - INFO - 正在加载模型: D:\HUAWEI\pangu
2025-10-24 17:15:18,422 - models.llm_models - INFO - 模型加载成功,设备: cpu
2025-10-24 17:26:53,409 - __main__ - INFO - 系统已关闭
2025-10-27 09:32:35,851 - __main__ - INFO - 系统启动中...
2025-10-27 09:32:35,851 - __main__ - INFO - 检测到模型文件,将使用真实模型
2025-10-27 09:32:35,852 - __main__ - INFO - 正在初始化系统...
2025-10-27 09:32:35,852 - system_core - INFO - 系统核心初始化完成
2025-10-27 09:32:35,852 - system_core - INFO - 正在初始化系统组件...
2025-10-27 09:33:11,265 - system_core - INFO - 初始化题库...
2025-10-27 09:33:11,265 - data_management.question_db - INFO - 加载题库成功,共 20 道题目
2025-10-27 09:33:11,266 - data_management.question_db - INFO - 题库数据库初始化完成,路径: D:\HUAWEI\education_7\files\edu_assessment_system\edu_assessment_system\data\question_database.json
2025-10-27 09:33:11,266 - system_core - INFO - 初始化模型...
2025-10-27 09:33:11,266 - models.embedding_model - INFO - 初始化BGE-M3嵌入模型: D:\HUAWEI\bgem3
2025-10-27 09:33:11,266 - models.llm_models - INFO - 初始化Qwen出题模型
2025-10-27 09:33:11,266 - models.llm_models - INFO - 初始化PanGu评估模型
2025-10-27 09:33:11,267 - system_core - INFO - 初始化功能组件...
2025-10-27 09:33:11,267 - utils.question_generator - INFO - 题目生成器初始化完成
2025-10-27 09:33:11,267 - utils.evaluator - INFO - 学生评估器初始化完成
2025-10-27 09:33:11,267 - visualization.kg_visualizer - INFO - 知识图谱可视化器初始化完成
2025-10-27 09:33:11,267 - system_core - INFO - 系统初始化完成
2025-10-27 09:33:11,267 - __main__ - INFO - 系统核心初始化完成
2025-10-27 09:33:11,267 - __main__ - INFO - 检查题库数据...
2025-10-27 09:33:11,267 - __main__ - INFO - 题库已有 20 道题目
2025-10-27 09:33:11,267 - __main__ - INFO - 正在创建UI界面...
2025-10-27 09:33:11,267 - ui.main_ui - INFO - UI界面初始化完成
2025-10-27 09:33:12,267 - httpx - INFO - HTTP Request: GET https://api.gradio.app/pkg-version "HTTP/1.1 200 OK"
2025-10-27 09:33:13,018 - __main__ - INFO - 系统启动成功!
2025-10-27 09:33:13,417 - httpx - INFO - HTTP Request: GET http://127.0.0.1:7860/gradio_api/startup-events "HTTP/1.1 200 OK"
2025-10-27 09:33:13,674 - httpx - INFO - HTTP Request: HEAD http://127.0.0.1:7860/ "HTTP/1.1 200 OK"
2025-10-27 09:37:55,153 - __main__ - INFO - 系统已关闭
2025-10-27 09:38:08,005 - __main__ - INFO - 系统启动中...
2025-10-27 09:38:08,005 - __main__ - INFO - 检测到模型文件,将使用真实模型
2025-10-27 09:38:08,005 - __main__ - INFO - 正在初始化系统...
2025-10-27 09:38:08,006 - system_core - INFO - 系统核心初始化完成
2025-10-27 09:38:08,006 - system_core - INFO - 正在初始化系统组件...
2025-10-27 09:38:12,381 - system_core - INFO - 初始化题库...
2025-10-27 09:38:12,382 - data_management.question_db - INFO - 加载题库成功,共 20 道题目
2025-10-27 09:38:12,382 - data_management.question_db - INFO - 题库数据库初始化完成,路径: D:\HUAWEI\education_7\files\edu_assessment_system\edu_assessment_system\data\question_database.json
2025-10-27 09:38:12,382 - system_core - INFO - 初始化模型...
2025-10-27 09:38:12,383 - models.embedding_model - INFO - 初始化BGE-M3嵌入模型: D:\HUAWEI\bgem3
2025-10-27 09:38:12,383 - models.llm_models - INFO - 初始化Qwen出题模型
2025-10-27 09:38:12,383 - models.llm_models - INFO - 初始化PanGu评估模型
2025-10-27 09:38:12,383 - system_core - INFO - 初始化功能组件...
2025-10-27 09:38:12,383 - utils.question_generator - INFO - 题目生成器初始化完成
2025-10-27 09:38:12,383 - utils.evaluator - INFO - 学生评估器初始化完成
2025-10-27 09:38:12,384 - visualization.kg_visualizer - INFO - 知识图谱可视化器初始化完成
2025-10-27 09:38:12,384 - system_core - INFO - 系统初始化完成
2025-10-27 09:38:12,384 - __main__ - INFO - 系统核心初始化完成
2025-10-27 09:38:12,384 - __main__ - INFO - 检查题库数据...
2025-10-27 09:38:12,384 - __main__ - INFO - 题库已有 20 道题目
2025-10-27 09:38:12,384 - __main__ - INFO - 正在创建UI界面...
2025-10-27 09:38:12,384 - ui.main_ui - INFO - UI界面初始化完成
2025-10-27 09:38:12,824 - __main__ - INFO - 系统启动成功!
2025-10-27 09:38:12,934 - httpx - INFO - HTTP Request: GET http://127.0.0.1:7860/gradio_api/startup-events "HTTP/1.1 200 OK"
2025-10-27 09:38:13,068 - httpx - INFO - HTTP Request: HEAD http://127.0.0.1:7860/ "HTTP/1.1 200 OK"
2025-10-27 09:38:13,493 - httpx - INFO - HTTP Request: GET https://api.gradio.app/pkg-version "HTTP/1.1 200 OK"
2025-10-27 09:43:49,689 - system_core - INFO - 开始测评: 代数, 难度: 混合, 数量: 3
2025-10-27 09:43:49,691 - system_core - INFO - 从题库抽取 3 道代数题目
2025-10-27 09:43:55,019 - models.llm_models - INFO - 正在加载模型: D:\HUAWEI\pangu
2025-10-27 09:44:00,562 - models.llm_models - INFO - 模型加载成功,设备: cpu
2025-10-27 10:27:10,164 - system_core - INFO - 开始测评: 代数, 难度: 混合, 数量: 3
2025-10-27 10:27:10,164 - system_core - INFO - 从题库抽取 3 道代数题目
2025-10-27 10:34:12,313 - visualization.kg_visualizer - INFO - 知识图谱构建完成: 27 个节点, 40 条边
2025-10-27 10:34:17,367 - visualization.kg_visualizer - INFO - 知识图谱构建完成: 27 个节点, 40 条边
2025-10-27 10:34:17,448 - visualization.kg_visualizer - INFO - 知识图谱已保存到: D:\HUAWEI\education_7\files\edu_assessment_system\edu_assessment_system\data\knowledge_graph.html
2025-10-27 10:41:36,464 - visualization.kg_visualizer - INFO - 知识图谱构建完成: 27 个节点, 40 条边
2025-10-28 09:21:52,190 - __main__ - INFO - 系统启动中...
2025-10-28 09:21:52,193 - __main__ - INFO - 检测到模型文件,将使用真实模型
2025-10-28 09:21:52,194 - __main__ - INFO - 正在初始化系统...
2025-10-28 09:21:52,195 - system_core - INFO - 系统核心初始化完成
2025-10-28 09:21:52,195 - system_core - INFO - 正在初始化系统组件...
2025-10-28 09:22:19,955 - system_core - INFO - 初始化题库...
2025-10-28 09:22:19,956 - data_management.question_db - INFO - 加载题库成功,共 20 道题目
2025-10-28 09:22:19,957 - data_management.question_db - INFO - 题库数据库初始化完成,路径: D:\HUAWEI\education_7\files\edu_assessment_system\edu_assessment_system\data\question_database.json
2025-10-28 09:22:19,957 - system_core - INFO - 初始化模型...
2025-10-28 09:22:19,957 - models.embedding_model - INFO - 初始化BGE-M3嵌入模型: D:\HUAWEI\bgem3
2025-10-28 09:22:19,958 - models.llm_models - INFO - 初始化Qwen出题模型
2025-10-28 09:22:19,958 - models.llm_models - INFO - 初始化PanGu评估模型
2025-10-28 09:22:19,959 - system_core - INFO - 初始化功能组件...
2025-10-28 09:22:19,959 - utils.question_generator - INFO - 题目生成器初始化完成
2025-10-28 09:22:19,976 - utils.evaluator - INFO - 学生评估器初始化完成
2025-10-28 09:22:19,977 - visualization.kg_visualizer - INFO - 知识图谱可视化器初始化完成
2025-10-28 09:22:19,977 - system_core - INFO - 系统初始化完成
2025-10-28 09:22:19,978 - __main__ - INFO - 系统核心初始化完成
2025-10-28 09:22:19,980 - __main__ - INFO - 检查题库数据...
2025-10-28 09:22:19,980 - __main__ - INFO - 题库已有 20 道题目
2025-10-28 09:22:19,980 - __main__ - INFO - 正在创建UI界面...
2025-10-28 09:22:19,980 - ui.main_ui - INFO - UI界面初始化完成
2025-10-28 09:22:21,053 - httpx - INFO - HTTP Request: GET https://api.gradio.app/pkg-version "HTTP/1.1 200 OK"
2025-10-28 09:22:22,150 - __main__ - INFO - 系统启动成功!
2025-10-28 09:22:22,918 - httpx - INFO - HTTP Request: GET http://127.0.0.1:7860/gradio_api/startup-events "HTTP/1.1 200 OK"
2025-10-28 09:22:23,077 - httpx - INFO - HTTP Request: HEAD http://127.0.0.1:7860/ "HTTP/1.1 200 OK"
2025-10-28 09:22:40,735 - visualization.kg_visualizer - INFO - 知识图谱构建完成: 27 个节点, 40 条边
2025-10-28 09:25:50,367 - __main__ - INFO - 系统已关闭
2025-10-28 11:06:09,487 - __main__ - INFO - 系统启动中...
2025-10-28 11:06:09,487 - __main__ - INFO - 检测到模型文件,将使用真实模型
2025-10-28 11:06:09,487 - __main__ - INFO - 正在初始化系统...
2025-10-28 11:06:09,487 - system_core - INFO - 系统核心初始化完成
2025-10-28 11:06:09,488 - system_core - INFO - 正在初始化系统组件...
2025-10-28 11:06:16,086 - system_core - INFO - 初始化题库...
2025-10-28 11:06:16,087 - data_management.question_db - INFO - 加载题库成功,共 20 道题目
2025-10-28 11:06:16,087 - data_management.question_db - INFO - 题库数据库初始化完成,路径: D:\HUAWEI\education_7\files\edu_assessment_system\edu_assessment_system\data\question_database.json
2025-10-28 11:06:16,088 - system_core - INFO - 初始化模型...
2025-10-28 11:06:16,088 - models.embedding_model - INFO - 初始化BGE-M3嵌入模型: D:\HUAWEI\bgem3
2025-10-28 11:06:16,089 - models.llm_models - INFO - 初始化Qwen出题模型
2025-10-28 11:06:16,089 - models.llm_models - INFO - 初始化PanGu评估模型
2025-10-28 11:06:16,089 - system_core - INFO - 初始化功能组件...
2025-10-28 11:06:16,089 - utils.question_generator - INFO - 题目生成器初始化完成
2025-10-28 11:06:16,090 - utils.evaluator - INFO - 学生评估器初始化完成
2025-10-28 11:06:16,090 - visualization.kg_visualizer - INFO - 知识图谱可视化器初始化完成
2025-10-28 11:06:16,103 - utils.bkt_algorithm - INFO - BKT算法初始化完成
2025-10-28 11:06:16,103 - system_core - INFO - 系统初始化完成
2025-10-28 11:06:16,104 - __main__ - INFO - 系统核心初始化完成
2025-10-28 11:06:16,104 - __main__ - INFO - 检查题库数据...
2025-10-28 11:06:16,104 - __main__ - INFO - 题库已有 20 道题目
2025-10-28 11:06:16,104 - __main__ - INFO - 正在创建UI界面...
2025-10-28 11:06:16,104 - ui.main_ui - INFO - UI界面初始化完成
2025-10-28 11:06:17,049 - httpx - INFO - HTTP Request: GET https://api.gradio.app/pkg-version "HTTP/1.1 200 OK"
2025-10-28 11:06:17,881 - __main__ - INFO - 系统启动成功!
2025-10-28 11:06:18,398 - httpx - INFO - HTTP Request: GET http://127.0.0.1:7860/gradio_api/startup-events "HTTP/1.1 200 OK"
2025-10-28 11:06:18,569 - httpx - INFO - HTTP Request: HEAD http://127.0.0.1:7860/ "HTTP/1.1 200 OK"
2025-10-28 11:06:26,093 - system_core - INFO - 开始自适应测评: 代数, 学生: 1, 数量: 5
2025-10-28 11:06:26,094 - utils.bkt_algorithm - INFO - 初始化学生 1 在知识点 代数 的状态
2025-10-28 11:06:26,095 - data_management.question_db - INFO - 筛选结果: 5 道题目
2025-10-28 11:06:26,095 - data_management.question_db - INFO - 筛选结果: 2 道题目
2025-10-28 11:06:26,095 - data_management.question_db - INFO - 筛选结果: 2 道题目
2025-10-28 11:06:26,095 - data_management.question_db - INFO - 筛选结果: 2 道题目
2025-10-28 11:06:26,096 - data_management.question_db - INFO - 筛选结果: 2 道题目
2025-10-28 11:06:26,096 - system_core - INFO - 自适应测评开始，题目序列难度: ['简单', '中等', '中等', '中等', '中等']
2025-10-28 11:06:36,589 - models.llm_models - INFO - 正在加载模型: D:\HUAWEI\pangu
2025-10-28 11:06:42,224 - models.llm_models - INFO - 模型加载成功,设备: cpu
2025-10-28 11:09:05,815 - utils.bkt_algorithm - INFO - 学生 1 在知识点 代数 答题记录: 掌握度 0.055, 正确: False
2025-10-28 11:09:05,815 - system_core - INFO - BKT算法更新: 掌握度 0.055
2025-10-28 11:19:10,515 - utils.bkt_algorithm - INFO - 学生 1 在知识点 代数 答题记录: 掌握度 0.010, 正确: False
2025-10-28 11:19:10,515 - system_core - INFO - BKT算法更新: 掌握度 0.010
2025-10-28 11:29:54,846 - utils.bkt_algorithm - INFO - 学生 1 在知识点 代数 答题记录: 掌握度 0.010, 正确: False
2025-10-28 11:29:54,848 - system_core - INFO - BKT算法更新: 掌握度 0.010
2025-10-28 12:54:31,295 - __main__ - INFO - 系统已关闭
2025-10-28 12:55:00,534 - __main__ - INFO - 系统启动中...
2025-10-28 12:55:00,535 - __main__ - INFO - 检测到模型文件,将使用真实模型
2025-10-28 12:55:00,535 - __main__ - INFO - 正在初始化系统...
2025-10-28 12:55:00,535 - system_core - INFO - 系统核心初始化完成
2025-10-28 12:55:00,535 - system_core - INFO - 正在初始化系统组件...
2025-10-28 12:55:16,945 - system_core - INFO - 初始化题库...
2025-10-28 12:55:16,947 - data_management.question_db - INFO - 加载题库成功,共 20 道题目
2025-10-28 12:55:16,947 - data_management.question_db - INFO - 题库数据库初始化完成,路径: D:\HUAWEI\education_7\files\edu_assessment_system\edu_assessment_system\data\question_database.json
2025-10-28 12:55:16,947 - system_core - INFO - 初始化模型...
2025-10-28 12:55:16,947 - models.embedding_model - INFO - 初始化BGE-M3嵌入模型: D:\HUAWEI\bgem3
2025-10-28 12:55:16,948 - models.llm_models - INFO - 初始化Qwen出题模型
2025-10-28 12:55:16,948 - models.llm_models - INFO - 初始化PanGu评估模型
2025-10-28 12:55:16,948 - system_core - INFO - 初始化功能组件...
2025-10-28 12:55:16,948 - utils.question_generator - INFO - 题目生成器初始化完成
2025-10-28 12:55:16,948 - utils.evaluator - INFO - 学生评估器初始化完成
2025-10-28 12:55:16,948 - visualization.kg_visualizer - INFO - 知识图谱可视化器初始化完成
2025-10-28 12:55:16,950 - utils.bkt_algorithm - INFO - BKT算法初始化完成
2025-10-28 12:55:16,950 - system_core - INFO - 系统初始化完成
2025-10-28 12:55:16,950 - __main__ - INFO - 系统核心初始化完成
2025-10-28 12:55:16,950 - __main__ - INFO - 检查题库数据...
2025-10-28 12:55:16,950 - __main__ - INFO - 题库已有 20 道题目
2025-10-28 12:55:16,950 - __main__ - INFO - 正在创建UI界面...
2025-10-28 12:55:16,950 - ui.main_ui - INFO - UI界面初始化完成
2025-10-28 12:55:17,382 - __main__ - INFO - 系统启动成功!
2025-10-28 12:55:17,601 - httpx - INFO - HTTP Request: GET http://127.0.0.1:7860/gradio_api/startup-events "HTTP/1.1 200 OK"
2025-10-28 12:55:17,617 - httpx - INFO - HTTP Request: HEAD http://127.0.0.1:7860/ "HTTP/1.1 200 OK"
2025-10-28 12:55:18,336 - httpx - INFO - HTTP Request: GET https://api.gradio.app/pkg-version "HTTP/1.1 200 OK"
2025-10-28 12:55:25,306 - system_core - INFO - 开始自适应测评: 代数, 学生: 002, 数量: 3
2025-10-28 12:55:25,306 - utils.bkt_algorithm - INFO - 初始化学生 002 在知识点 代数 的状态
2025-10-28 12:55:25,307 - data_management.question_db - INFO - 筛选结果: 5 道题目
2025-10-28 12:55:25,308 - data_management.question_db - INFO - 筛选结果: 2 道题目
2025-10-28 12:55:25,308 - data_management.question_db - INFO - 筛选结果: 2 道题目
2025-10-28 12:55:25,308 - system_core - INFO - 自适应测评开始，题目序列难度: ['简单', '中等', '中等']
2025-10-28 12:55:28,364 - models.llm_models - INFO - 正在加载模型: D:\HUAWEI\pangu
2025-10-28 12:55:32,589 - models.llm_models - INFO - 模型加载成功,设备: cpu
2025-10-28 13:05:02,901 - utils.bkt_algorithm - INFO - 学生 002 在知识点 代数 答题记录: 掌握度 0.055, 正确: False
2025-10-28 13:05:02,902 - system_core - INFO - BKT算法更新: 掌握度 0.055
2025-10-28 13:22:20,228 - utils.bkt_algorithm - INFO - 学生 002 在知识点 代数 答题记录: 掌握度 0.010, 正确: False
2025-10-28 13:22:20,229 - system_core - INFO - BKT算法更新: 掌握度 0.010
2025-10-28 13:37:03,589 - utils.bkt_algorithm - INFO - 学生 002 在知识点 代数 答题记录: 掌握度 0.224, 正确: True
2025-10-28 13:37:03,590 - system_core - INFO - BKT算法更新: 掌握度 0.224
2025-10-28 13:50:40,897 - __main__ - INFO - 系统已关闭
2025-10-28 14:04:59,132 - __main__ - INFO - 系统启动中...
2025-10-28 14:04:59,132 - __main__ - INFO - 检测到模型文件,将使用真实模型
2025-10-28 14:04:59,132 - __main__ - INFO - 正在初始化系统...
2025-10-28 14:04:59,132 - system_core - INFO - 系统核心初始化完成
2025-10-28 14:04:59,132 - system_core - INFO - 正在初始化系统组件...
2025-10-28 14:05:03,060 - system_core - INFO - 初始化题库...
2025-10-28 14:05:03,060 - data_management.question_db - INFO - 加载题库成功,共 20 道题目
2025-10-28 14:05:03,060 - data_management.question_db - INFO - 题库数据库初始化完成,路径: D:\HUAWEI\education_7\files\edu_assessment_system\edu_assessment_system\data\question_database.json
2025-10-28 14:05:03,061 - system_core - INFO - 初始化模型...
2025-10-28 14:05:03,061 - models.embedding_model - INFO - 初始化BGE-M3嵌入模型: D:\HUAWEI\bgem3
2025-10-28 14:05:03,061 - models.llm_models - INFO - 初始化Qwen出题模型
2025-10-28 14:05:03,061 - models.llm_models - INFO - 初始化PanGu评估模型
2025-10-28 14:05:03,061 - system_core - INFO - 初始化功能组件...
2025-10-28 14:05:03,061 - utils.question_generator - INFO - 题目生成器初始化完成
2025-10-28 14:05:03,061 - utils.evaluator - INFO - 学生评估器初始化完成
2025-10-28 14:05:03,062 - visualization.kg_visualizer - INFO - 知识图谱可视化器初始化完成
2025-10-28 14:05:03,063 - utils.bkt_algorithm - INFO - BKT算法初始化完成
2025-10-28 14:05:03,063 - system_core - INFO - 系统初始化完成
2025-10-28 14:05:03,063 - __main__ - INFO - 系统核心初始化完成
2025-10-28 14:05:03,063 - __main__ - INFO - 检查题库数据...
2025-10-28 14:05:03,063 - __main__ - INFO - 题库已有 20 道题目
2025-10-28 14:05:03,063 - __main__ - INFO - 正在创建UI界面...
2025-10-28 14:05:03,063 - ui.main_ui - INFO - UI界面初始化完成
2025-10-28 14:05:03,519 - __main__ - INFO - 系统启动成功!
2025-10-28 14:05:03,749 - httpx - INFO - HTTP Request: GET http://127.0.0.1:7860/gradio_api/startup-events "HTTP/1.1 200 OK"
2025-10-28 14:05:03,793 - httpx - INFO - HTTP Request: HEAD http://127.0.0.1:7860/ "HTTP/1.1 200 OK"
2025-10-28 14:05:03,981 - httpx - INFO - HTTP Request: GET https://api.gradio.app/pkg-version "HTTP/1.1 200 OK"
2025-10-28 14:05:38,663 - system_core - INFO - 开始自适应测评: 代数, 学生: 1, 数量: 3
2025-10-28 14:05:38,663 - utils.bkt_algorithm - INFO - 初始化学生 1 在知识点 代数 的状态
2025-10-28 14:05:38,664 - data_management.question_db - INFO - 筛选结果: 5 道题目
2025-10-28 14:05:38,664 - data_management.question_db - INFO - 筛选结果: 2 道题目
2025-10-28 14:05:38,664 - data_management.question_db - INFO - 筛选结果: 2 道题目
2025-10-28 14:05:38,664 - system_core - INFO - 自适应测评开始，题目序列难度: ['简单', '中等', '中等']
2025-10-28 14:05:45,157 - models.llm_models - INFO - 正在加载模型: D:\HUAWEI\pangu
2025-10-28 14:05:48,605 - models.llm_models - INFO - 模型加载成功,设备: cpu
2025-10-28 14:14:59,938 - utils.bkt_algorithm - INFO - 学生 1 在知识点 代数 答题记录: 掌握度 0.055, 正确: False
2025-10-28 14:14:59,942 - system_core - INFO - BKT算法更新: 掌握度 0.055
2025-10-28 14:24:15,067 - utils.bkt_algorithm - INFO - 学生 1 在知识点 代数 答题记录: 掌握度 0.010, 正确: False
2025-10-28 14:24:15,068 - system_core - INFO - BKT算法更新: 掌握度 0.010
2025-10-28 14:41:09,387 - utils.bkt_algorithm - INFO - 学生 1 在知识点 代数 答题记录: 掌握度 0.010, 正确: False
2025-10-28 14:41:09,391 - system_core - INFO - BKT算法更新: 掌握度 0.010
2025-10-28 14:47:07,914 - __main__ - INFO - 系统启动中...
2025-10-28 14:47:07,915 - __main__ - INFO - 检测到模型文件,将使用真实模型
2025-10-28 14:47:07,915 - __main__ - INFO - 正在初始化系统...
2025-10-28 14:47:07,915 - system_core - INFO - 系统核心初始化完成
2025-10-28 14:47:07,915 - system_core - INFO - 正在初始化系统组件...
2025-10-28 14:47:12,242 - system_core - INFO - 初始化题库...
2025-10-28 14:47:12,243 - data_management.question_db - INFO - 加载题库成功,共 20 道题目
2025-10-28 14:47:12,243 - data_management.question_db - INFO - 题库数据库初始化完成,路径: D:\HUAWEI\education_7\files\edu_assessment_system\edu_assessment_system\data\question_database.json
2025-10-28 14:47:12,243 - system_core - INFO - 初始化模型...
2025-10-28 14:47:12,244 - models.embedding_model - INFO - 初始化BGE-M3嵌入模型: D:\HUAWEI\bgem3
2025-10-28 14:47:12,244 - models.llm_models - INFO - 初始化Qwen出题模型
2025-10-28 14:47:12,244 - models.llm_models - INFO - 初始化PanGu评估模型
2025-10-28 14:47:12,244 - system_core - INFO - 初始化功能组件...
2025-10-28 14:47:12,244 - utils.question_generator - INFO - 题目生成器初始化完成
2025-10-28 14:47:12,244 - utils.evaluator - INFO - 学生评估器初始化完成
2025-10-28 14:47:12,245 - visualization.kg_visualizer - INFO - 知识图谱可视化器初始化完成
2025-10-28 14:47:12,246 - utils.bkt_algorithm - INFO - BKT算法初始化完成
2025-10-28 14:47:12,246 - system_core - INFO - 系统初始化完成
2025-10-28 14:47:12,246 - __main__ - INFO - 系统核心初始化完成
2025-10-28 14:47:12,247 - __main__ - INFO - 检查题库数据...
2025-10-28 14:47:12,247 - __main__ - INFO - 题库已有 20 道题目
2025-10-28 14:47:12,247 - __main__ - INFO - 正在创建UI界面...
2025-10-28 14:47:12,247 - ui.main_ui - INFO - UI界面初始化完成
2025-10-28 14:47:12,741 - __main__ - INFO - 系统启动成功!
2025-10-28 14:47:12,981 - httpx - INFO - HTTP Request: GET http://127.0.0.1:7860/gradio_api/startup-events "HTTP/1.1 200 OK"
2025-10-28 14:47:13,019 - httpx - INFO - HTTP Request: HEAD http://127.0.0.1:7860/ "HTTP/1.1 200 OK"
2025-10-28 14:47:13,334 - httpx - INFO - HTTP Request: GET https://api.gradio.app/pkg-version "HTTP/1.1 200 OK"
2025-10-28 14:55:39,829 - system_core - INFO - 开始自适应测评: 代数, 学生: 1, 数量: 3
2025-10-28 14:55:39,830 - utils.bkt_algorithm - INFO - 初始化学生 1 在知识点 代数 的状态
2025-10-28 14:55:39,830 - data_management.question_db - INFO - 筛选结果: 5 道题目
2025-10-28 14:55:39,830 - data_management.question_db - INFO - 筛选结果: 2 道题目
2025-10-28 14:55:39,831 - data_management.question_db - INFO - 筛选结果: 2 道题目
2025-10-28 14:55:39,831 - system_core - INFO - 自适应测评开始，题目序列难度: ['简单', '中等', '中等']
2025-10-28 14:55:45,267 - utils.bkt_algorithm - INFO - 学生 1 在知识点 代数 答题记录: 掌握度 0.055, 正确: False
2025-10-28 14:55:45,268 - system_core - INFO - BKT算法更新: 掌握度 0.055
2025-10-28 14:55:52,815 - utils.bkt_algorithm - INFO - 学生 1 在知识点 代数 答题记录: 掌握度 0.010, 正确: False
2025-10-28 14:55:52,817 - system_core - INFO - BKT算法更新: 掌握度 0.010
2025-10-28 14:55:58,691 - utils.bkt_algorithm - INFO - 学生 1 在知识点 代数 答题记录: 掌握度 0.010, 正确: False
2025-10-28 14:55:58,691 - system_core - INFO - BKT算法更新: 掌握度 0.010
2025-10-28 14:59:14,418 - __main__ - INFO - 系统启动中...
2025-10-28 14:59:14,418 - __main__ - INFO - 检测到模型文件,将使用真实模型
2025-10-28 14:59:14,420 - __main__ - INFO - 正在初始化系统...
2025-10-28 14:59:14,420 - system_core - INFO - 系统核心初始化完成
2025-10-28 14:59:14,424 - system_core - INFO - 正在初始化系统组件...
2025-10-28 14:59:21,872 - system_core - INFO - 初始化题库...
2025-10-28 14:59:21,874 - data_management.question_db - INFO - 加载题库成功,共 20 道题目
2025-10-28 14:59:21,874 - data_management.question_db - INFO - 题库数据库初始化完成,路径: D:\HUAWEI\education_7\files\edu_assessment_system\edu_assessment_system\data\question_database.json
2025-10-28 14:59:21,874 - system_core - INFO - 初始化模型...
2025-10-28 14:59:21,875 - models.embedding_model - INFO - 初始化BGE-M3嵌入模型: D:\HUAWEI\bgem3
2025-10-28 14:59:21,875 - models.llm_models - INFO - 初始化Qwen出题模型
2025-10-28 14:59:21,875 - models.llm_models - INFO - 初始化PanGu评估模型
2025-10-28 14:59:21,875 - system_core - INFO - 初始化功能组件...
2025-10-28 14:59:21,876 - utils.question_generator - INFO - 题目生成器初始化完成
2025-10-28 14:59:21,876 - utils.evaluator - INFO - 学生评估器初始化完成
2025-10-28 14:59:21,876 - visualization.kg_visualizer - INFO - 知识图谱可视化器初始化完成
2025-10-28 14:59:21,877 - utils.bkt_algorithm - INFO - BKT算法初始化完成
2025-10-28 14:59:21,877 - system_core - INFO - 系统初始化完成
2025-10-28 14:59:21,877 - __main__ - INFO - 系统核心初始化完成
2025-10-28 14:59:21,878 - __main__ - INFO - 检查题库数据...
2025-10-28 14:59:21,878 - __main__ - INFO - 题库已有 20 道题目
2025-10-28 14:59:21,878 - __main__ - INFO - 正在创建UI界面...
2025-10-28 14:59:21,878 - ui.main_ui - INFO - UI界面初始化完成
2025-10-28 14:59:22,367 - __main__ - INFO - 系统启动成功!
2025-10-28 14:59:22,603 - httpx - INFO - HTTP Request: GET http://127.0.0.1:7860/gradio_api/startup-events "HTTP/1.1 200 OK"
2025-10-28 14:59:22,640 - httpx - INFO - HTTP Request: HEAD http://127.0.0.1:7860/ "HTTP/1.1 200 OK"
2025-10-28 14:59:22,968 - httpx - INFO - HTTP Request: GET https://api.gradio.app/pkg-version "HTTP/1.1 200 OK"
2025-10-28 14:59:47,477 - system_core - INFO - 开始自适应测评: 代数, 学生: student_001, 数量: 3
2025-10-28 14:59:47,479 - utils.bkt_algorithm - INFO - 初始化学生 student_001 在知识点 代数 的状态
2025-10-28 14:59:47,479 - data_management.question_db - INFO - 筛选结果: 5 道题目
2025-10-28 14:59:47,480 - data_management.question_db - INFO - 筛选结果: 2 道题目
2025-10-28 14:59:47,480 - data_management.question_db - INFO - 筛选结果: 2 道题目
2025-10-28 14:59:47,480 - system_core - INFO - 自适应测评开始，题目序列难度: ['简单', '中等', '中等']
2025-10-28 14:59:52,472 - utils.bkt_algorithm - INFO - 学生 student_001 在知识点 代数 答题记录: 掌握度 0.650, 正确: True
2025-10-28 14:59:52,472 - system_core - INFO - BKT算法更新: 掌握度 0.650
2025-10-28 15:00:03,012 - utils.bkt_algorithm - INFO - 学生 student_001 在知识点 代数 答题记录: 掌握度 0.199, 正确: False
2025-10-28 15:00:03,013 - system_core - INFO - BKT算法更新: 掌握度 0.199
2025-10-28 15:00:11,169 - utils.bkt_algorithm - INFO - 学生 student_001 在知识点 代数 答题记录: 掌握度 0.033, 正确: False
2025-10-28 15:00:11,170 - system_core - INFO - BKT算法更新: 掌握度 0.033
2025-10-28 15:04:00,379 - __main__ - INFO - 系统启动中...
2025-10-28 15:04:00,379 - __main__ - INFO - 检测到模型文件,将使用真实模型
2025-10-28 15:04:00,380 - __main__ - INFO - 正在初始化系统...
2025-10-28 15:04:00,380 - system_core - INFO - 系统核心初始化完成
2025-10-28 15:04:00,380 - system_core - INFO - 正在初始化系统组件...
2025-10-28 15:04:04,397 - system_core - INFO - 初始化题库...
2025-10-28 15:04:04,398 - data_management.question_db - INFO - 加载题库成功,共 20 道题目
2025-10-28 15:04:04,398 - data_management.question_db - INFO - 题库数据库初始化完成,路径: D:\HUAWEI\education_7\files\edu_assessment_system\edu_assessment_system\data\question_database.json
2025-10-28 15:04:04,398 - system_core - INFO - 初始化模型...
2025-10-28 15:04:04,398 - models.embedding_model - INFO - 初始化BGE-M3嵌入模型: D:\HUAWEI\bgem3
2025-10-28 15:04:04,398 - models.llm_models - INFO - 初始化Qwen出题模型
2025-10-28 15:04:04,398 - models.llm_models - INFO - 初始化PanGu评估模型
2025-10-28 15:04:04,398 - system_core - INFO - 初始化功能组件...
2025-10-28 15:04:04,399 - utils.question_generator - INFO - 题目生成器初始化完成
2025-10-28 15:04:04,399 - utils.evaluator - INFO - 学生评估器初始化完成
2025-10-28 15:04:04,399 - visualization.kg_visualizer - INFO - 知识图谱可视化器初始化完成
2025-10-28 15:04:04,400 - utils.bkt_algorithm - INFO - BKT算法初始化完成
2025-10-28 15:04:04,400 - system_core - INFO - 系统初始化完成
2025-10-28 15:04:04,401 - __main__ - INFO - 系统核心初始化完成
2025-10-28 15:04:04,401 - __main__ - INFO - 检查题库数据...
2025-10-28 15:04:04,401 - __main__ - INFO - 题库已有 20 道题目
2025-10-28 15:04:04,401 - __main__ - INFO - 正在创建UI界面...
2025-10-28 15:04:04,401 - ui.main_ui - INFO - UI界面初始化完成
2025-10-28 15:04:04,803 - __main__ - INFO - 系统启动成功!
2025-10-28 15:04:05,007 - httpx - INFO - HTTP Request: GET http://127.0.0.1:7860/gradio_api/startup-events "HTTP/1.1 200 OK"
2025-10-28 15:04:05,042 - httpx - INFO - HTTP Request: HEAD http://127.0.0.1:7860/ "HTTP/1.1 200 OK"
2025-10-28 15:04:05,468 - httpx - INFO - HTTP Request: GET https://api.gradio.app/pkg-version "HTTP/1.1 200 OK"
2025-10-28 15:05:50,057 - __main__ - INFO - 系统启动中...
2025-10-28 15:05:50,058 - __main__ - INFO - 检测到模型文件,将使用真实模型
2025-10-28 15:05:50,058 - __main__ - INFO - 正在初始化系统...
2025-10-28 15:05:50,058 - system_core - INFO - 系统核心初始化完成
2025-10-28 15:05:50,058 - system_core - INFO - 正在初始化系统组件...
2025-10-28 15:05:56,586 - system_core - INFO - 初始化题库...
2025-10-28 15:05:56,587 - data_management.question_db - INFO - 加载题库成功,共 20 道题目
2025-10-28 15:05:56,588 - data_management.question_db - INFO - 题库数据库初始化完成,路径: D:\HUAWEI\education_7\files\edu_assessment_system\edu_assessment_system\data\question_database.json
2025-10-28 15:05:56,588 - system_core - INFO - 初始化模型...
2025-10-28 15:05:56,588 - models.embedding_model - INFO - 初始化BGE-M3嵌入模型: D:\HUAWEI\bgem3
2025-10-28 15:05:56,589 - models.llm_models - INFO - 初始化Qwen出题模型
2025-10-28 15:05:56,589 - models.llm_models - INFO - 初始化PanGu评估模型
2025-10-28 15:05:56,589 - system_core - INFO - 初始化功能组件...
2025-10-28 15:05:56,590 - utils.question_generator - INFO - 题目生成器初始化完成
2025-10-28 15:05:56,590 - utils.evaluator - INFO - 学生评估器初始化完成
2025-10-28 15:05:56,590 - visualization.kg_visualizer - INFO - 知识图谱可视化器初始化完成
2025-10-28 15:05:56,592 - utils.bkt_algorithm - INFO - BKT算法初始化完成
2025-10-28 15:05:56,593 - system_core - INFO - 系统初始化完成
2025-10-28 15:05:56,593 - __main__ - INFO - 系统核心初始化完成
2025-10-28 15:05:56,593 - __main__ - INFO - 检查题库数据...
2025-10-28 15:05:56,593 - __main__ - INFO - 题库已有 20 道题目
2025-10-28 15:05:56,594 - __main__ - INFO - 正在创建UI界面...
2025-10-28 15:05:56,594 - ui.main_ui - INFO - UI界面初始化完成
2025-10-28 15:05:57,266 - __main__ - INFO - 系统启动成功!
2025-10-28 15:05:57,585 - httpx - INFO - HTTP Request: GET http://127.0.0.1:7860/gradio_api/startup-events "HTTP/1.1 200 OK"
2025-10-28 15:05:57,618 - httpx - INFO - HTTP Request: HEAD http://127.0.0.1:7860/ "HTTP/1.1 200 OK"
2025-10-28 15:05:58,205 - httpx - INFO - HTTP Request: GET https://api.gradio.app/pkg-version "HTTP/1.1 200 OK"
2025-10-28 15:15:43,777 - __main__ - INFO - 系统启动中...
2025-10-28 15:15:43,778 - __main__ - INFO - 检测到模型文件,将使用真实模型
2025-10-28 15:15:43,779 - __main__ - INFO - 正在初始化系统...
2025-10-28 15:15:43,779 - system_core - INFO - 系统核心初始化完成
2025-10-28 15:15:43,779 - system_core - INFO - 正在初始化系统组件...
2025-10-28 15:15:48,635 - system_core - INFO - 初始化题库...
2025-10-28 15:15:48,636 - data_management.question_db - INFO - 加载题库成功,共 20 道题目
2025-10-28 15:15:48,636 - data_management.question_db - INFO - 题库数据库初始化完成,路径: D:\HUAWEI\education_7\files\edu_assessment_system\edu_assessment_system\data\question_database.json
2025-10-28 15:15:48,636 - system_core - INFO - 初始化模型...
2025-10-28 15:15:48,636 - models.embedding_model - INFO - 初始化BGE-M3嵌入模型: D:\HUAWEI\bgem3
2025-10-28 15:15:48,636 - models.llm_models - INFO - 初始化Qwen出题模型
2025-10-28 15:15:48,637 - models.llm_models - INFO - 初始化PanGu评估模型
2025-10-28 15:15:48,637 - system_core - INFO - 初始化功能组件...
2025-10-28 15:15:48,637 - utils.question_generator - INFO - 题目生成器初始化完成
2025-10-28 15:15:48,637 - utils.evaluator - INFO - 学生评估器初始化完成
2025-10-28 15:15:48,637 - visualization.kg_visualizer - INFO - 知识图谱可视化器初始化完成
2025-10-28 15:15:48,639 - utils.bkt_algorithm - INFO - BKT算法初始化完成
2025-10-28 15:15:48,639 - system_core - INFO - 系统初始化完成
2025-10-28 15:15:48,639 - __main__ - INFO - 系统核心初始化完成
2025-10-28 15:15:48,639 - __main__ - INFO - 检查题库数据...
2025-10-28 15:15:48,639 - __main__ - INFO - 题库已有 20 道题目
2025-10-28 15:15:48,639 - __main__ - INFO - 正在创建UI界面...
2025-10-28 15:15:48,640 - ui.main_ui - INFO - UI界面初始化完成
2025-10-28 15:15:49,095 - __main__ - INFO - 系统启动成功!
2025-10-28 15:15:49,307 - httpx - INFO - HTTP Request: GET http://127.0.0.1:7860/gradio_api/startup-events "HTTP/1.1 200 OK"
2025-10-28 15:15:49,344 - httpx - INFO - HTTP Request: HEAD http://127.0.0.1:7860/ "HTTP/1.1 200 OK"
2025-10-28 15:15:49,980 - httpx - INFO - HTTP Request: GET https://api.gradio.app/pkg-version "HTTP/1.1 200 OK"
2025-10-28 15:18:16,920 - __main__ - INFO - 系统启动中...
2025-10-28 15:18:16,920 - __main__ - INFO - 检测到模型文件,将使用真实模型
2025-10-28 15:18:16,921 - __main__ - INFO - 正在初始化系统...
2025-10-28 15:18:16,921 - system_core - INFO - 系统核心初始化完成
2025-10-28 15:18:16,921 - system_core - INFO - 正在初始化系统组件...
2025-10-28 15:18:20,844 - system_core - INFO - 初始化题库...
2025-10-28 15:18:20,845 - data_management.question_db - INFO - 加载题库成功,共 20 道题目
2025-10-28 15:18:20,845 - data_management.question_db - INFO - 题库数据库初始化完成,路径: D:\HUAWEI\education_7\files\edu_assessment_system\edu_assessment_system\data\question_database.json
2025-10-28 15:18:20,845 - system_core - INFO - 初始化模型...
2025-10-28 15:18:20,845 - models.embedding_model - INFO - 初始化BGE-M3嵌入模型: D:\HUAWEI\bgem3
2025-10-28 15:18:20,845 - models.llm_models - INFO - 初始化Qwen出题模型
2025-10-28 15:18:20,846 - models.llm_models - INFO - 初始化PanGu评估模型
2025-10-28 15:18:20,846 - system_core - INFO - 初始化功能组件...
2025-10-28 15:18:20,846 - utils.question_generator - INFO - 题目生成器初始化完成
2025-10-28 15:18:20,846 - utils.evaluator - INFO - 学生评估器初始化完成
2025-10-28 15:18:20,846 - visualization.kg_visualizer - INFO - 知识图谱可视化器初始化完成
2025-10-28 15:18:20,847 - utils.bkt_algorithm - INFO - BKT算法初始化完成
2025-10-28 15:18:20,847 - system_core - INFO - 系统初始化完成
2025-10-28 15:18:20,848 - __main__ - INFO - 系统核心初始化完成
2025-10-28 15:18:20,848 - __main__ - INFO - 检查题库数据...
2025-10-28 15:18:20,848 - __main__ - INFO - 题库已有 20 道题目
2025-10-28 15:18:20,849 - __main__ - INFO - 正在创建UI界面...
2025-10-28 15:18:20,849 - ui.main_ui - INFO - UI界面初始化完成
2025-10-28 15:18:21,275 - __main__ - INFO - 系统启动成功!
2025-10-28 15:18:21,481 - httpx - INFO - HTTP Request: GET http://127.0.0.1:7860/gradio_api/startup-events "HTTP/1.1 200 OK"
2025-10-28 15:18:21,497 - httpx - INFO - HTTP Request: HEAD http://127.0.0.1:7860/ "HTTP/1.1 200 OK"
2025-10-28 15:18:21,879 - httpx - INFO - HTTP Request: GET https://api.gradio.app/pkg-version "HTTP/1.1 200 OK"
2025-10-28 15:21:59,892 - __main__ - INFO - 系统启动中...
2025-10-28 15:21:59,892 - __main__ - INFO - 检测到模型文件,将使用真实模型
2025-10-28 15:21:59,893 - __main__ - INFO - 正在初始化系统...
2025-10-28 15:21:59,893 - system_core - INFO - 系统核心初始化完成
2025-10-28 15:21:59,893 - system_core - INFO - 正在初始化系统组件...
2025-10-28 15:22:03,754 - system_core - INFO - 初始化题库...
2025-10-28 15:22:03,755 - data_management.question_db - INFO - 加载题库成功,共 20 道题目
2025-10-28 15:22:03,755 - data_management.question_db - INFO - 题库数据库初始化完成,路径: D:\HUAWEI\education_7\files\edu_assessment_system\edu_assessment_system\data\question_database.json
2025-10-28 15:22:03,755 - system_core - INFO - 初始化模型...
2025-10-28 15:22:03,756 - models.embedding_model - INFO - 初始化BGE-M3嵌入模型: D:\HUAWEI\bgem3
2025-10-28 15:22:03,756 - models.llm_models - INFO - 初始化Qwen出题模型
2025-10-28 15:22:03,756 - models.llm_models - INFO - 初始化PanGu评估模型
2025-10-28 15:22:03,756 - system_core - INFO - 初始化功能组件...
2025-10-28 15:22:03,756 - utils.question_generator - INFO - 题目生成器初始化完成
2025-10-28 15:22:03,756 - utils.evaluator - INFO - 学生评估器初始化完成
2025-10-28 15:22:03,757 - visualization.kg_visualizer - INFO - 知识图谱可视化器初始化完成
2025-10-28 15:22:03,758 - utils.bkt_algorithm - INFO - BKT算法初始化完成
2025-10-28 15:22:03,758 - system_core - INFO - 系统初始化完成
2025-10-28 15:22:03,759 - __main__ - INFO - 系统核心初始化完成
2025-10-28 15:22:03,759 - __main__ - INFO - 检查题库数据...
2025-10-28 15:22:03,759 - __main__ - INFO - 题库已有 20 道题目
2025-10-28 15:22:03,759 - __main__ - INFO - 正在创建UI界面...
2025-10-28 15:22:03,759 - ui.main_ui - INFO - UI界面初始化完成
2025-10-28 15:22:04,173 - __main__ - INFO - 系统启动成功!
2025-10-28 15:22:04,390 - httpx - INFO - HTTP Request: GET http://127.0.0.1:7860/gradio_api/startup-events "HTTP/1.1 200 OK"
2025-10-28 15:22:04,407 - httpx - INFO - HTTP Request: HEAD http://127.0.0.1:7860/ "HTTP/1.1 200 OK"
2025-10-28 15:22:04,881 - httpx - INFO - HTTP Request: GET https://api.gradio.app/pkg-version "HTTP/1.1 200 OK"
2025-10-28 15:23:33,774 - system_core - INFO - 开始自适应测评: 代数, 学生: student_001, 数量: 3
2025-10-28 15:23:33,774 - utils.bkt_algorithm - INFO - 初始化学生 student_001 在知识点 代数 的状态
2025-10-28 15:23:33,775 - data_management.question_db - INFO - 筛选结果: 5 道题目
2025-10-28 15:23:33,775 - data_management.question_db - INFO - 筛选结果: 2 道题目
2025-10-28 15:23:33,775 - data_management.question_db - INFO - 筛选结果: 2 道题目
2025-10-28 15:23:33,775 - system_core - INFO - 自适应测评开始，题目序列难度: ['简单', '中等', '中等']
2025-10-28 15:23:36,939 - utils.evaluator - INFO - 使用盘古模型进行智能答案评估
2025-10-28 15:23:36,939 - models.llm_models - INFO - 正在加载模型: D:\HUAWEI\pangu
2025-10-28 15:23:36,940 - models.llm_models - INFO - 检测到盘古模型，使用特殊加载方式
2025-10-28 15:23:39,054 - models.llm_models - INFO - 模型加载成功,设备: cpu
2025-10-28 15:23:39,055 - models.llm_models - INFO - 测试模型生成功能...
2025-10-28 15:23:39,727 - models.llm_models - INFO - 模型测试响应: 根据分析，学生答案与标准答案一致。
2025-10-28 15:23:42,730 - utils.bkt_algorithm - INFO - 学生 student_001 在知识点 代数 答题记录: 掌握度 0.055, 正确: False
2025-10-28 15:23:42,730 - system_core - INFO - BKT算法更新: 掌握度 0.055
2025-10-28 15:32:00,065 - utils.evaluator - INFO - 使用盘古模型进行智能答案评估
2025-10-28 15:32:01,972 - utils.bkt_algorithm - INFO - 学生 student_001 在知识点 代数 答题记录: 掌握度 0.319, 正确: True
2025-10-28 15:32:01,972 - system_core - INFO - BKT算法更新: 掌握度 0.319
2025-10-28 15:32:09,354 - utils.evaluator - INFO - 使用盘古模型进行智能答案评估
2025-10-28 15:32:11,347 - utils.bkt_algorithm - INFO - 学生 student_001 在知识点 代数 答题记录: 掌握度 0.667, 正确: True
2025-10-28 15:32:11,348 - system_core - INFO - BKT算法更新: 掌握度 0.667
2025-10-28 15:34:31,573 - __main__ - INFO - 系统启动中...
2025-10-28 15:34:31,573 - __main__ - INFO - 检测到模型文件,将使用真实模型
2025-10-28 15:34:31,574 - __main__ - INFO - 正在初始化系统...
2025-10-28 15:34:31,574 - system_core - INFO - 系统核心初始化完成
2025-10-28 15:34:31,574 - system_core - INFO - 正在初始化系统组件...
2025-10-28 15:34:35,371 - system_core - INFO - 初始化题库...
2025-10-28 15:34:35,372 - data_management.question_db - INFO - 加载题库成功,共 20 道题目
2025-10-28 15:34:35,372 - data_management.question_db - INFO - 题库数据库初始化完成,路径: D:\HUAWEI\education_7\files\edu_assessment_system\edu_assessment_system\data\question_database.json
2025-10-28 15:34:35,372 - system_core - INFO - 初始化模型...
2025-10-28 15:34:35,372 - models.embedding_model - INFO - 初始化BGE-M3嵌入模型: D:\HUAWEI\bgem3
2025-10-28 15:34:35,372 - models.llm_models - INFO - 初始化Qwen出题模型
2025-10-28 15:34:35,372 - models.llm_models - INFO - 初始化PanGu评估模型
2025-10-28 15:34:35,372 - system_core - INFO - 初始化功能组件...
2025-10-28 15:34:35,373 - utils.question_generator - INFO - 题目生成器初始化完成
2025-10-28 15:34:35,373 - utils.evaluator - INFO - 学生评估器初始化完成
2025-10-28 15:34:35,373 - visualization.kg_visualizer - INFO - 知识图谱可视化器初始化完成
2025-10-28 15:34:35,374 - utils.bkt_algorithm - INFO - BKT算法初始化完成
2025-10-28 15:34:35,374 - system_core - INFO - 系统初始化完成
2025-10-28 15:34:35,374 - __main__ - INFO - 系统核心初始化完成
2025-10-28 15:34:35,375 - __main__ - INFO - 检查题库数据...
2025-10-28 15:34:35,375 - __main__ - INFO - 题库已有 20 道题目
2025-10-28 15:34:35,375 - __main__ - INFO - 正在创建UI界面...
2025-10-28 15:34:35,375 - ui.main_ui - INFO - UI界面初始化完成
2025-10-28 15:34:35,758 - __main__ - INFO - 系统启动成功!
2025-10-28 15:34:35,966 - httpx - INFO - HTTP Request: GET http://127.0.0.1:7860/gradio_api/startup-events "HTTP/1.1 200 OK"
2025-10-28 15:34:35,984 - httpx - INFO - HTTP Request: HEAD http://127.0.0.1:7860/ "HTTP/1.1 200 OK"
2025-10-28 15:34:36,533 - httpx - INFO - HTTP Request: GET https://api.gradio.app/pkg-version "HTTP/1.1 200 OK"
2025-10-28 15:35:49,714 - system_core - INFO - 开始自适应测评: 代数, 学生: student_001, 数量: 3
2025-10-28 15:35:49,714 - utils.bkt_algorithm - INFO - 初始化学生 student_001 在知识点 代数 的状态
2025-10-28 15:35:49,715 - data_management.question_db - INFO - 筛选结果: 5 道题目
2025-10-28 15:35:49,715 - data_management.question_db - INFO - 筛选结果: 2 道题目
2025-10-28 15:35:49,715 - data_management.question_db - INFO - 筛选结果: 2 道题目
2025-10-28 15:35:49,715 - system_core - INFO - 自适应测评开始，题目序列难度: ['简单', '中等', '中等']
2025-10-28 15:35:52,945 - utils.evaluator - INFO - 使用盘古模型进行智能答案评估
2025-10-28 15:35:52,945 - models.llm_models - INFO - 正在加载模型: D:\HUAWEI\pangu
2025-10-28 15:35:52,946 - models.llm_models - INFO - 检测到盘古模型，使用特殊加载方式
2025-10-28 15:35:55,016 - models.llm_models - INFO - 模型加载成功,设备: cpu
2025-10-28 15:35:55,016 - models.llm_models - INFO - 测试模型生成功能...
2025-10-28 15:35:55,615 - models.llm_models - INFO - 模型测试响应: 根据分析，学生答案与标准答案一致。
2025-10-28 15:35:57,829 - utils.bkt_algorithm - INFO - 学生 student_001 在知识点 代数 答题记录: 掌握度 0.650, 正确: True
2025-10-28 15:35:57,829 - system_core - INFO - BKT算法更新: 掌握度 0.650
2025-10-28 15:42:53,000 - utils.evaluator - INFO - 使用盘古模型进行智能答案评估
2025-10-28 15:42:55,158 - utils.bkt_algorithm - INFO - 学生 student_001 在知识点 代数 答题记录: 掌握度 0.199, 正确: False
2025-10-28 15:42:55,159 - system_core - INFO - BKT算法更新: 掌握度 0.199
2025-10-28 15:43:06,472 - utils.evaluator - INFO - 使用盘古模型进行智能答案评估
2025-10-28 15:43:08,401 - utils.bkt_algorithm - INFO - 学生 student_001 在知识点 代数 答题记录: 掌握度 0.542, 正确: True
2025-10-28 15:43:08,402 - system_core - INFO - BKT算法更新: 掌握度 0.542
2025-10-28 15:51:47,368 - __main__ - INFO - 系统启动中...
2025-10-28 15:51:47,368 - __main__ - INFO - 检测到模型文件,将使用真实模型
2025-10-28 15:51:47,368 - __main__ - INFO - 正在初始化系统...
2025-10-28 15:51:47,368 - system_core - INFO - 系统核心初始化完成
2025-10-28 15:51:47,369 - system_core - INFO - 正在初始化系统组件...
2025-10-28 15:51:52,118 - system_core - INFO - 初始化题库...
2025-10-28 15:51:52,118 - data_management.question_db - INFO - 加载题库成功,共 20 道题目
2025-10-28 15:51:52,118 - data_management.question_db - INFO - 题库数据库初始化完成,路径: D:\HUAWEI\education_7\files\edu_assessment_system\edu_assessment_system\data\question_database.json
2025-10-28 15:51:52,119 - system_core - INFO - 初始化模型...
2025-10-28 15:51:52,119 - models.embedding_model - INFO - 初始化BGE-M3嵌入模型: D:\HUAWEI\bgem3
2025-10-28 15:51:52,119 - models.llm_models - INFO - 初始化Qwen出题模型
2025-10-28 15:51:52,119 - models.llm_models - INFO - 初始化PanGu评估模型
2025-10-28 15:51:52,119 - system_core - INFO - 初始化功能组件...
2025-10-28 15:51:52,119 - utils.question_generator - INFO - 题目生成器初始化完成
2025-10-28 15:51:52,121 - utils.evaluator - INFO - 学生评估器初始化完成
2025-10-28 15:51:52,121 - visualization.kg_visualizer - INFO - 知识图谱可视化器初始化完成
2025-10-28 15:51:52,122 - utils.bkt_algorithm - INFO - BKT算法初始化完成
2025-10-28 15:51:52,122 - system_core - INFO - 系统初始化完成
2025-10-28 15:51:52,123 - __main__ - INFO - 系统核心初始化完成
2025-10-28 15:51:52,123 - __main__ - INFO - 检查题库数据...
2025-10-28 15:51:52,123 - __main__ - INFO - 题库已有 20 道题目
2025-10-28 15:51:52,123 - __main__ - INFO - 正在创建UI界面...
2025-10-28 15:51:52,123 - ui.main_ui - INFO - UI界面初始化完成
2025-10-28 15:51:52,554 - __main__ - INFO - 系统启动成功!
2025-10-28 15:51:52,781 - httpx - INFO - HTTP Request: GET http://127.0.0.1:7860/gradio_api/startup-events "HTTP/1.1 200 OK"
2025-10-28 15:51:52,798 - httpx - INFO - HTTP Request: HEAD http://127.0.0.1:7860/ "HTTP/1.1 200 OK"
2025-10-28 15:51:53,128 - httpx - INFO - HTTP Request: GET https://api.gradio.app/pkg-version "HTTP/1.1 200 OK"
2025-10-28 15:56:30,153 - system_core - INFO - 开始自适应测评: 代数, 学生: student_001, 数量: 3
2025-10-28 15:56:30,154 - utils.bkt_algorithm - INFO - 初始化学生 student_001 在知识点 代数 的状态
2025-10-28 15:56:30,154 - data_management.question_db - INFO - 筛选结果: 5 道题目
2025-10-28 15:56:30,154 - data_management.question_db - INFO - 筛选结果: 2 道题目
2025-10-28 15:56:30,154 - data_management.question_db - INFO - 筛选结果: 2 道题目
2025-10-28 15:56:30,154 - system_core - INFO - 自适应测评开始，题目序列难度: ['简单', '中等', '中等']
2025-10-28 15:56:34,863 - utils.evaluator - INFO - 使用盘古模型进行智能答案评估
2025-10-28 15:56:34,863 - models.llm_models - INFO - 正在加载模型: D:\HUAWEI\pangu
2025-10-28 15:56:34,864 - models.llm_models - INFO - 检测到盘古模型，使用特殊加载方式
2025-10-28 15:56:36,906 - models.llm_models - INFO - 模型加载成功,设备: cpu
2025-10-28 15:56:36,906 - models.llm_models - INFO - 测试模型生成功能...
2025-10-28 15:56:36,906 - models.llm_models - ERROR - 盘古模型生成失败: The current model class (LlamaModel) is not compatible with `.generate()`, as it doesn't have a language model head. Classes that support generation often end in one of these names: ['ForCausalLM', 'ForConditionalGeneration', 'ForSpeechSeq2Seq', 'ForVision2Seq'].
2025-10-28 15:56:36,907 - models.llm_models - INFO - 模型测试响应: 需要更多信息来判断答案是否正确。
2025-10-28 15:56:36,909 - models.llm_models - ERROR - 盘古模型生成失败: The current model class (LlamaModel) is not compatible with `.generate()`, as it doesn't have a language model head. Classes that support generation often end in one of these names: ['ForCausalLM', 'ForConditionalGeneration', 'ForSpeechSeq2Seq', 'ForVision2Seq'].
2025-10-28 15:56:36,909 - utils.bkt_algorithm - INFO - 学生 student_001 在知识点 代数 答题记录: 掌握度 0.055, 正确: False
2025-10-28 15:56:36,909 - system_core - INFO - BKT算法更新: 掌握度 0.055
2025-10-28 15:56:46,262 - utils.evaluator - INFO - 使用盘古模型进行智能答案评估
2025-10-28 15:56:46,264 - models.llm_models - ERROR - 盘古模型生成失败: The current model class (LlamaModel) is not compatible with `.generate()`, as it doesn't have a language model head. Classes that support generation often end in one of these names: ['ForCausalLM', 'ForConditionalGeneration', 'ForSpeechSeq2Seq', 'ForVision2Seq'].
2025-10-28 15:56:46,264 - utils.bkt_algorithm - INFO - 学生 student_001 在知识点 代数 答题记录: 掌握度 0.010, 正确: False
2025-10-28 15:56:46,264 - system_core - INFO - BKT算法更新: 掌握度 0.010
2025-10-28 15:56:51,743 - utils.evaluator - INFO - 使用盘古模型进行智能答案评估
2025-10-28 15:56:51,744 - models.llm_models - ERROR - 盘古模型生成失败: The current model class (LlamaModel) is not compatible with `.generate()`, as it doesn't have a language model head. Classes that support generation often end in one of these names: ['ForCausalLM', 'ForConditionalGeneration', 'ForSpeechSeq2Seq', 'ForVision2Seq'].
2025-10-28 15:56:51,745 - utils.bkt_algorithm - INFO - 学生 student_001 在知识点 代数 答题记录: 掌握度 0.224, 正确: True
2025-10-28 15:56:51,745 - system_core - INFO - BKT算法更新: 掌握度 0.224
2025-10-28 15:56:53,864 - models.llm_models - ERROR - 盘古模型生成失败: The current model class (LlamaModel) is not compatible with `.generate()`, as it doesn't have a language model head. Classes that support generation often end in one of these names: ['ForCausalLM', 'ForConditionalGeneration', 'ForSpeechSeq2Seq', 'ForVision2Seq'].
2025-10-30 16:46:59,075 - __main__ - INFO - 系统启动中...
2025-10-30 16:46:59,077 - __main__ - INFO - 检测到模型文件,将使用真实模型
2025-10-30 16:46:59,077 - __main__ - INFO - 正在初始化系统...
2025-10-30 16:46:59,077 - system_core - INFO - 系统核心初始化完成
2025-10-30 16:46:59,077 - system_core - INFO - 正在初始化系统组件...
2025-10-30 16:47:35,320 - system_core - INFO - 初始化题库...
2025-10-30 16:47:35,321 - data_management.question_db - INFO - 加载题库成功,共 20 道题目
2025-10-30 16:47:35,321 - data_management.question_db - INFO - 题库数据库初始化完成,路径: D:\HUAWEI\education_7\files\edu_assessment_system\edu_assessment_system\data\question_database.json
2025-10-30 16:47:35,321 - system_core - INFO - 初始化模型...
2025-10-30 16:47:35,321 - models.embedding_model - INFO - 初始化BGE-M3嵌入模型: D:\HUAWEI\bgem3
2025-10-30 16:47:35,321 - models.llm_models - INFO - 初始化Qwen出题模型
2025-10-30 16:47:35,321 - models.llm_models - INFO - 初始化PanGu评估模型
2025-10-30 16:47:35,322 - system_core - INFO - 初始化功能组件...
2025-10-30 16:47:35,322 - utils.question_generator - INFO - 题目生成器初始化完成
2025-10-30 16:47:35,322 - utils.evaluator - INFO - 学生评估器初始化完成
2025-10-30 16:47:35,322 - visualization.kg_visualizer - INFO - 知识图谱可视化器初始化完成
2025-10-30 16:47:35,331 - utils.bkt_algorithm - INFO - BKT算法初始化完成
2025-10-30 16:47:35,331 - system_core - INFO - 系统初始化完成
2025-10-30 16:47:35,331 - __main__ - INFO - 系统核心初始化完成
2025-10-30 16:47:35,331 - __main__ - INFO - 检查题库数据...
2025-10-30 16:47:35,332 - __main__ - INFO - 题库已有 20 道题目
2025-10-30 16:47:35,332 - __main__ - INFO - 正在创建UI界面...
2025-10-30 16:47:35,332 - ui.main_ui - INFO - UI界面初始化完成
2025-10-30 16:47:37,063 - __main__ - INFO - 系统启动成功!
2025-10-30 16:47:37,461 - httpx - INFO - HTTP Request: GET https://api.gradio.app/pkg-version "HTTP/1.1 200 OK"
2025-10-30 16:47:37,592 - httpx - INFO - HTTP Request: GET http://127.0.0.1:7860/gradio_api/startup-events "HTTP/1.1 200 OK"
2025-10-30 16:47:37,770 - httpx - INFO - HTTP Request: HEAD http://127.0.0.1:7860/ "HTTP/1.1 200 OK"
2025-10-30 16:47:41,620 - visualization.kg_visualizer - INFO - 知识图谱构建完成: 27 个节点, 40 条边
2025-10-30 16:56:02,361 - __main__ - INFO - 系统已关闭
2025-10-31 09:56:10,829 - __main__ - INFO - 系统启动中...
2025-10-31 09:56:10,831 - __main__ - INFO - 检测到模型文件,将使用真实模型
2025-10-31 09:56:10,832 - __main__ - INFO - 正在初始化系统...
2025-10-31 09:56:10,832 - system_core - INFO - 系统核心初始化完成
2025-10-31 09:56:10,832 - system_core - INFO - 正在初始化系统组件...
2025-10-31 09:56:43,659 - system_core - INFO - 初始化题库...
2025-10-31 09:56:43,660 - data_management.question_db - INFO - 加载题库成功,共 20 道题目
2025-10-31 09:56:43,660 - data_management.question_db - INFO - 题库数据库初始化完成,路径: D:\HUAWEI\education_7\files\edu_assessment_system\edu_assessment_system\data\question_database.json
2025-10-31 09:56:43,661 - system_core - INFO - 初始化模型...
2025-10-31 09:56:43,661 - models.embedding_model - INFO - 初始化BGE-M3嵌入模型: D:\HUAWEI\bgem3
2025-10-31 09:56:43,661 - models.llm_models - INFO - 初始化Qwen出题模型
2025-10-31 09:56:43,661 - models.llm_models - INFO - 初始化PanGu评估模型
2025-10-31 09:56:43,661 - system_core - INFO - 初始化功能组件...
2025-10-31 09:56:43,661 - utils.question_generator - INFO - 题目生成器初始化完成
2025-10-31 09:56:43,661 - utils.evaluator - INFO - 学生评估器初始化完成
2025-10-31 09:56:43,661 - visualization.kg_visualizer - INFO - 知识图谱可视化器初始化完成
2025-10-31 09:56:43,669 - utils.bkt_algorithm - INFO - BKT算法初始化完成
2025-10-31 09:56:43,670 - system_core - INFO - 系统初始化完成
2025-10-31 09:56:43,670 - __main__ - INFO - 系统核心初始化完成
2025-10-31 09:56:43,670 - __main__ - INFO - 检查题库数据...
2025-10-31 09:56:43,670 - __main__ - INFO - 题库已有 20 道题目
2025-10-31 09:56:43,670 - __main__ - INFO - 正在创建UI界面...
2025-10-31 09:56:43,670 - ui.main_ui - INFO - UI界面初始化完成
2025-10-31 09:56:44,742 - httpx - INFO - HTTP Request: GET https://api.gradio.app/pkg-version "HTTP/1.1 200 OK"
2025-10-31 09:56:45,281 - __main__ - INFO - 系统启动成功!
2025-10-31 09:56:45,914 - httpx - INFO - HTTP Request: GET http://127.0.0.1:7860/gradio_api/startup-events "HTTP/1.1 200 OK"
2025-10-31 09:56:46,032 - httpx - INFO - HTTP Request: HEAD http://127.0.0.1:7860/ "HTTP/1.1 200 OK"
2025-10-31 09:58:12,235 - __main__ - INFO - 系统已关闭
2025-11-03 14:52:26,923 - __main__ - INFO - 系统启动中...
2025-11-03 14:52:26,924 - __main__ - INFO - ✅ 检测到盘古7B模型文件
2025-11-03 14:52:26,924 - __main__ - INFO - 正在初始化系统...
2025-11-03 14:52:26,924 - system_core - INFO - 系统核心初始化完成
2025-11-03 14:52:26,924 - system_core - INFO - 正在初始化系统组件...
2025-11-03 14:52:34,054 - system_core - ERROR - 系统初始化失败: cannot import name 'BaseLLM' from 'models.llm_models' (/home/weitianyu/teach_system/models/llm_models.py)
2025-11-03 14:52:34,054 - __main__ - ERROR - 系统运行出错: cannot import name 'BaseLLM' from 'models.llm_models' (/home/weitianyu/teach_system/models/llm_models.py)
Traceback (most recent call last):
  File "/home/weitianyu/teach_system/main.py", line 55, in main
    system_core = create_system_core(config, use_mock=use_mock)
                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/weitianyu/teach_system/system_core.py", line 417, in create_system_core
    core.initialize(use_mock=use_mock)
  File "/home/weitianyu/teach_system/system_core.py", line 54, in initialize
    from models import create_llm_model, create_embedding_model
  File "/home/weitianyu/teach_system/models/__init__.py", line 6, in <module>
    from .llm_models import (
ImportError: cannot import name 'BaseLLM' from 'models.llm_models' (/home/weitianyu/teach_system/models/llm_models.py)
2025-11-03 14:52:34,055 - __main__ - INFO - 系统已关闭
2025-11-03 14:54:13,258 - __main__ - INFO - 系统启动中...
2025-11-03 14:54:13,258 - __main__ - INFO - ✅ 检测到盘古7B模型文件
2025-11-03 14:54:13,259 - __main__ - INFO - 正在初始化系统...
2025-11-03 14:54:13,259 - system_core - INFO - 系统核心初始化完成
2025-11-03 14:54:13,259 - system_core - INFO - 正在初始化系统组件...
2025-11-03 14:54:20,351 - system_core - ERROR - 系统初始化失败: cannot import name 'BaseLLM' from 'models.llm_models' (/home/weitianyu/teach_system/models/llm_models.py)
2025-11-03 14:54:20,351 - __main__ - ERROR - 系统运行出错: cannot import name 'BaseLLM' from 'models.llm_models' (/home/weitianyu/teach_system/models/llm_models.py)
Traceback (most recent call last):
  File "/home/weitianyu/teach_system/main.py", line 55, in main
    system_core = create_system_core(config, use_mock=use_mock)
                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/weitianyu/teach_system/system_core.py", line 417, in create_system_core
    core.initialize(use_mock=use_mock)
  File "/home/weitianyu/teach_system/system_core.py", line 54, in initialize
    from models import create_llm_model, create_embedding_model
  File "/home/weitianyu/teach_system/models/__init__.py", line 6, in <module>
    from .llm_models import (
ImportError: cannot import name 'BaseLLM' from 'models.llm_models' (/home/weitianyu/teach_system/models/llm_models.py)
2025-11-03 14:54:20,352 - __main__ - INFO - 系统已关闭
2025-11-03 14:55:46,859 - __main__ - INFO - 系统启动中...
2025-11-03 14:55:46,859 - __main__ - INFO - ✅ 检测到盘古7B模型文件
2025-11-03 14:55:46,859 - __main__ - INFO - 正在初始化系统...
2025-11-03 14:55:46,859 - system_core - INFO - 系统核心初始化完成
2025-11-03 14:55:46,859 - system_core - INFO - 正在初始化系统组件...
2025-11-03 14:55:54,198 - system_core - INFO - 初始化题库...
2025-11-03 14:55:54,198 - data_management.question_db - INFO - 加载题库成功,共 20 道题目
2025-11-03 14:55:54,198 - data_management.question_db - INFO - 题库数据库初始化完成,路径: /home/weitianyu/teach_system/data/question_database.json
2025-11-03 14:55:54,199 - system_core - INFO - 初始化盘古7B模型...
2025-11-03 14:55:54,199 - models.embedding_model - INFO - 尝试使用盘古7B的嵌入功能...
2025-11-03 14:55:54,199 - models.embedding_model - INFO - 初始化盘古7B嵌入模型: /opt/pangu/openPangu-Embedded-7B-V1.1
2025-11-03 14:55:54,199 - models.llm_models - INFO - 创建盘古7B模型实例（任务类型: pangu）
2025-11-03 14:55:54,199 - models.llm_models - INFO - 检测到 8 个NPU设备
2025-11-03 14:55:54,199 - models.llm_models - INFO - 盘古7B模型设备配置: npu:0
2025-11-03 14:55:54,199 - system_core - INFO - 初始化功能组件...
2025-11-03 14:55:54,199 - utils.question_generator - INFO - 题目生成器初始化完成
2025-11-03 14:55:54,200 - utils.evaluator - INFO - 学生评估器初始化完成
2025-11-03 14:55:54,200 - visualization.kg_visualizer - INFO - 知识图谱可视化器初始化完成
2025-11-03 14:55:54,206 - utils.bkt_algorithm - INFO - BKT算法初始化完成
2025-11-03 14:55:54,206 - system_core - INFO - ✅ 系统初始化完成 - 使用盘古7B统一模型
2025-11-03 14:55:54,206 - __main__ - INFO - 系统核心初始化完成
2025-11-03 14:55:54,206 - __main__ - INFO - 检查题库数据...
2025-11-03 14:55:54,206 - __main__ - INFO - 题库已有 20 道题目
2025-11-03 14:55:54,206 - __main__ - INFO - 正在创建UI界面...
2025-11-03 14:55:54,206 - ui.main_ui - INFO - UI界面初始化完成
2025-11-03 14:55:55,269 - httpx - INFO - HTTP Request: GET https://api.gradio.app/pkg-version "HTTP/1.1 200 OK"
2025-11-03 14:55:55,805 - matplotlib.font_manager - INFO - generated new fontManager
2025-11-03 14:55:56,306 - __main__ - INFO - 系统启动成功!
2025-11-03 14:55:56,492 - httpx - INFO - HTTP Request: GET http://127.0.0.1:7860/gradio_api/startup-events "HTTP/1.1 200 OK"
2025-11-03 14:55:56,526 - httpx - INFO - HTTP Request: HEAD http://127.0.0.1:7860/ "HTTP/1.1 200 OK"
2025-11-03 14:57:55,416 - __main__ - INFO - 系统已关闭
2025-11-03 14:58:28,023 - __main__ - INFO - 系统启动中...
2025-11-03 14:58:28,024 - __main__ - INFO - ✅ 检测到盘古7B模型文件
2025-11-03 14:58:28,024 - __main__ - INFO - 正在初始化系统...
2025-11-03 14:58:28,024 - system_core - INFO - 系统核心初始化完成
2025-11-03 14:58:28,024 - system_core - INFO - 正在初始化系统组件...
2025-11-03 14:58:35,376 - system_core - INFO - 初始化题库...
2025-11-03 14:58:35,377 - data_management.question_db - INFO - 加载题库成功,共 20 道题目
2025-11-03 14:58:35,377 - data_management.question_db - INFO - 题库数据库初始化完成,路径: /home/weitianyu/teach_system/data/question_database.json
2025-11-03 14:58:35,377 - system_core - INFO - 初始化盘古7B模型...
2025-11-03 14:58:35,377 - models.embedding_model - INFO - 尝试使用盘古7B的嵌入功能...
2025-11-03 14:58:35,377 - models.embedding_model - INFO - 初始化盘古7B嵌入模型: /opt/pangu/openPangu-Embedded-7B-V1.1
2025-11-03 14:58:35,377 - models.llm_models - INFO - 创建盘古7B模型实例（任务类型: pangu）
2025-11-03 14:58:35,377 - models.llm_models - INFO - 检测到 8 个NPU设备
2025-11-03 14:58:35,378 - models.llm_models - INFO - 盘古7B模型设备配置: npu:0
2025-11-03 14:58:35,378 - system_core - INFO - 初始化功能组件...
2025-11-03 14:58:35,378 - utils.question_generator - INFO - 题目生成器初始化完成
2025-11-03 14:58:35,378 - utils.evaluator - INFO - 学生评估器初始化完成
2025-11-03 14:58:35,378 - visualization.kg_visualizer - INFO - 知识图谱可视化器初始化完成
2025-11-03 14:58:35,380 - utils.bkt_algorithm - INFO - BKT算法初始化完成
2025-11-03 14:58:35,380 - system_core - INFO - ✅ 系统初始化完成 - 使用盘古7B统一模型
2025-11-03 14:58:35,380 - __main__ - INFO - 系统核心初始化完成
2025-11-03 14:58:35,380 - __main__ - INFO - 检查题库数据...
2025-11-03 14:58:35,381 - __main__ - INFO - 题库已有 20 道题目
2025-11-03 14:58:35,381 - __main__ - INFO - 正在创建UI界面...
2025-11-03 14:58:35,381 - ui.main_ui - INFO - UI界面初始化完成
2025-11-03 14:58:36,450 - httpx - INFO - HTTP Request: GET https://api.gradio.app/pkg-version "HTTP/1.1 200 OK"
2025-11-03 14:58:36,826 - __main__ - INFO - 系统启动成功!
2025-11-03 14:58:37,020 - httpx - INFO - HTTP Request: GET http://127.0.0.1:7860/gradio_api/startup-events "HTTP/1.1 200 OK"
2025-11-03 14:58:37,050 - httpx - INFO - HTTP Request: HEAD http://127.0.0.1:7860/ "HTTP/1.1 200 OK"
2025-11-03 14:58:38,094 - httpx - INFO - HTTP Request: GET https://api.gradio.app/v3/tunnel-request "HTTP/1.1 200 OK"
2025-11-03 15:03:04,433 - __main__ - INFO - 系统已关闭
2025-11-03 15:04:30,176 - __main__ - INFO - 系统启动中...
2025-11-03 15:04:30,177 - __main__ - INFO - ✅ 检测到盘古7B模型文件
2025-11-03 15:04:30,177 - __main__ - INFO - 正在初始化系统...
2025-11-03 15:04:30,177 - system_core - INFO - 系统核心初始化完成
2025-11-03 15:04:30,177 - system_core - INFO - 正在初始化系统组件...
2025-11-03 15:04:37,474 - system_core - INFO - 初始化题库...
2025-11-03 15:04:37,474 - data_management.question_db - INFO - 加载题库成功,共 20 道题目
2025-11-03 15:04:37,475 - data_management.question_db - INFO - 题库数据库初始化完成,路径: /home/weitianyu/teach_system/data/question_database.json
2025-11-03 15:04:37,475 - system_core - INFO - 初始化盘古7B模型...
2025-11-03 15:04:37,475 - models.embedding_model - INFO - 尝试使用盘古7B的嵌入功能...
2025-11-03 15:04:37,475 - models.embedding_model - INFO - 初始化盘古7B嵌入模型: /opt/pangu/openPangu-Embedded-7B-V1.1
2025-11-03 15:04:37,475 - models.llm_models - INFO - 创建盘古7B模型实例（任务类型: pangu）
2025-11-03 15:04:37,475 - models.llm_models - INFO - 检测到 8 个NPU设备
2025-11-03 15:04:37,475 - models.llm_models - INFO - 盘古7B模型设备配置: npu:0
2025-11-03 15:04:37,476 - system_core - INFO - 初始化功能组件...
2025-11-03 15:04:37,476 - utils.question_generator - INFO - 题目生成器初始化完成
2025-11-03 15:04:37,476 - utils.evaluator - INFO - 学生评估器初始化完成
2025-11-03 15:04:37,476 - visualization.kg_visualizer - INFO - 知识图谱可视化器初始化完成
2025-11-03 15:04:37,478 - utils.bkt_algorithm - INFO - BKT算法初始化完成
2025-11-03 15:04:37,478 - system_core - INFO - ✅ 系统初始化完成 - 使用盘古7B统一模型
2025-11-03 15:04:37,478 - __main__ - INFO - 系统核心初始化完成
2025-11-03 15:04:37,478 - __main__ - INFO - 检查题库数据...
2025-11-03 15:04:37,478 - __main__ - INFO - 题库已有 20 道题目
2025-11-03 15:04:37,479 - __main__ - INFO - 正在创建UI界面...
2025-11-03 15:04:37,479 - ui.main_ui - INFO - UI界面初始化完成
2025-11-03 15:04:38,766 - httpx - INFO - HTTP Request: GET https://api.gradio.app/pkg-version "HTTP/1.1 200 OK"
2025-11-03 15:04:38,966 - __main__ - INFO - 系统启动成功!
2025-11-03 15:04:39,156 - httpx - INFO - HTTP Request: GET http://localhost:7860/gradio_api/startup-events "HTTP/1.1 200 OK"
2025-11-03 15:04:39,185 - httpx - INFO - HTTP Request: HEAD http://localhost:7860/ "HTTP/1.1 200 OK"
2025-11-03 15:05:17,466 - __main__ - INFO - 系统已关闭
2025-11-03 15:08:43,927 - __main__ - INFO - 系统启动中...
2025-11-03 15:08:43,927 - __main__ - INFO - ✅ 检测到盘古7B模型文件
2025-11-03 15:08:43,927 - __main__ - INFO - 正在初始化系统...
2025-11-03 15:08:43,927 - system_core - INFO - 系统核心初始化完成
2025-11-03 15:08:43,927 - system_core - INFO - 正在初始化系统组件...
2025-11-03 15:08:51,200 - system_core - INFO - 初始化题库...
2025-11-03 15:08:51,200 - data_management.question_db - INFO - 加载题库成功,共 20 道题目
2025-11-03 15:08:51,200 - data_management.question_db - INFO - 题库数据库初始化完成,路径: /home/weitianyu/teach_system/data/question_database.json
2025-11-03 15:08:51,200 - system_core - INFO - 初始化盘古7B模型...
2025-11-03 15:08:51,200 - models.embedding_model - INFO - 尝试使用盘古7B的嵌入功能...
2025-11-03 15:08:51,201 - models.embedding_model - INFO - 初始化盘古7B嵌入模型: /opt/pangu/openPangu-Embedded-7B-V1.1
2025-11-03 15:08:51,201 - models.llm_models - INFO - 创建盘古7B模型实例（任务类型: pangu）
2025-11-03 15:08:51,201 - models.llm_models - INFO - 检测到 8 个NPU设备
2025-11-03 15:08:51,201 - models.llm_models - INFO - 盘古7B模型设备配置: npu:0
2025-11-03 15:08:51,201 - system_core - INFO - 初始化功能组件...
2025-11-03 15:08:51,201 - utils.question_generator - INFO - 题目生成器初始化完成
2025-11-03 15:08:51,201 - utils.evaluator - INFO - 学生评估器初始化完成
2025-11-03 15:08:51,201 - visualization.kg_visualizer - INFO - 知识图谱可视化器初始化完成
2025-11-03 15:08:51,204 - utils.bkt_algorithm - INFO - BKT算法初始化完成
2025-11-03 15:08:51,204 - system_core - INFO - ✅ 系统初始化完成 - 使用盘古7B统一模型
2025-11-03 15:08:51,204 - __main__ - INFO - 系统核心初始化完成
2025-11-03 15:08:51,204 - __main__ - INFO - 检查题库数据...
2025-11-03 15:08:51,204 - __main__ - INFO - 题库已有 20 道题目
2025-11-03 15:08:51,204 - __main__ - INFO - 正在创建UI界面...
2025-11-03 15:08:51,204 - ui.main_ui - INFO - UI界面初始化完成
2025-11-03 15:08:52,264 - httpx - INFO - HTTP Request: GET https://api.gradio.app/pkg-version "HTTP/1.1 200 OK"
2025-11-03 15:08:52,688 - __main__ - INFO - 系统启动成功!
2025-11-03 15:08:52,878 - httpx - INFO - HTTP Request: GET http://localhost:7860/gradio_api/startup-events "HTTP/1.1 200 OK"
2025-11-03 15:08:52,908 - httpx - INFO - HTTP Request: HEAD http://localhost:7860/ "HTTP/1.1 200 OK"
2025-11-03 15:10:08,348 - __main__ - INFO - 系统已关闭
2025-11-03 15:11:19,661 - __main__ - INFO - 系统启动中...
2025-11-03 15:11:19,661 - __main__ - INFO - ✅ 检测到盘古7B模型文件
2025-11-03 15:11:19,661 - __main__ - INFO - 正在初始化系统...
2025-11-03 15:11:19,662 - system_core - INFO - 系统核心初始化完成
2025-11-03 15:11:19,662 - system_core - INFO - 正在初始化系统组件...
2025-11-03 15:11:19,666 - system_core - ERROR - 系统初始化失败: No module named 'torch'
2025-11-03 15:11:19,666 - __main__ - ERROR - 系统运行出错: No module named 'torch'
Traceback (most recent call last):
  File "/home/weitianyu/teach_system/main.py", line 55, in main
    system_core = create_system_core(config, use_mock=use_mock)
  File "/home/weitianyu/teach_system/system_core.py", line 417, in create_system_core
    core.initialize(use_mock=use_mock)
  File "/home/weitianyu/teach_system/system_core.py", line 54, in initialize
    from models import create_llm_model, create_embedding_model
  File "/home/weitianyu/teach_system/models/__init__.py", line 6, in <module>
    from .llm_models import create_llm_model, PanGuModel
  File "/home/weitianyu/teach_system/models/llm_models.py", line 6, in <module>
    import torch
ModuleNotFoundError: No module named 'torch'
2025-11-03 15:11:19,667 - __main__ - INFO - 系统已关闭
2025-11-03 15:12:56,656 - __main__ - INFO - 系统启动中...
2025-11-03 15:12:56,656 - __main__ - INFO - ✅ 检测到盘古7B模型文件
2025-11-03 15:12:56,657 - __main__ - INFO - 正在初始化系统...
2025-11-03 15:12:56,657 - system_core - INFO - 系统核心初始化完成
2025-11-03 15:12:56,657 - system_core - INFO - 正在初始化系统组件...
2025-11-03 15:13:04,236 - system_core - INFO - 初始化题库...
2025-11-03 15:13:04,237 - data_management.question_db - INFO - 加载题库成功,共 20 道题目
2025-11-03 15:13:04,237 - data_management.question_db - INFO - 题库数据库初始化完成,路径: /home/weitianyu/teach_system/data/question_database.json
2025-11-03 15:13:04,237 - system_core - INFO - 初始化盘古7B模型...
2025-11-03 15:13:04,237 - models.embedding_model - INFO - 尝试使用盘古7B的嵌入功能...
2025-11-03 15:13:04,237 - models.embedding_model - INFO - 初始化盘古7B嵌入模型: /opt/pangu/openPangu-Embedded-7B-V1.1
2025-11-03 15:13:04,237 - models.llm_models - INFO - 创建盘古7B模型实例（任务类型: pangu）
2025-11-03 15:13:04,237 - models.llm_models - INFO - 检测到 8 个NPU设备
2025-11-03 15:13:04,238 - models.llm_models - INFO - 盘古7B模型设备配置: npu:0
2025-11-03 15:13:04,238 - system_core - INFO - 初始化功能组件...
2025-11-03 15:13:04,238 - utils.question_generator - INFO - 题目生成器初始化完成
2025-11-03 15:13:04,238 - utils.evaluator - INFO - 学生评估器初始化完成
2025-11-03 15:13:04,238 - visualization.kg_visualizer - INFO - 知识图谱可视化器初始化完成
2025-11-03 15:13:04,240 - utils.bkt_algorithm - INFO - BKT算法初始化完成
2025-11-03 15:13:04,240 - system_core - INFO - ✅ 系统初始化完成 - 使用盘古7B统一模型
2025-11-03 15:13:04,241 - __main__ - INFO - 系统核心初始化完成
2025-11-03 15:13:04,241 - __main__ - INFO - 检查题库数据...
2025-11-03 15:13:04,241 - __main__ - INFO - 题库已有 20 道题目
2025-11-03 15:13:04,241 - __main__ - INFO - 正在创建UI界面...
2025-11-03 15:13:04,241 - ui.main_ui - INFO - UI界面初始化完成
2025-11-03 15:13:05,528 - httpx - INFO - HTTP Request: GET https://api.gradio.app/pkg-version "HTTP/1.1 200 OK"
2025-11-03 15:13:05,727 - __main__ - INFO - 系统启动成功!
2025-11-03 15:13:05,877 - __main__ - ERROR - 系统运行出错: Cannot find empty port in range: 7860-7860. You can specify a different port by setting the GRADIO_SERVER_PORT environment variable or passing the `server_port` parameter to `launch()`.
Traceback (most recent call last):
  File "/home/weitianyu/teach_system/main.py", line 93, in main
    interface.launch(
  File "/root/miniconda3/envs/pangu/lib/python3.11/site-packages/gradio/blocks.py", line 2635, in launch
    ) = http_server.start_server(
        ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/root/miniconda3/envs/pangu/lib/python3.11/site-packages/gradio/http_server.py", line 157, in start_server
    raise OSError(
OSError: Cannot find empty port in range: 7860-7860. You can specify a different port by setting the GRADIO_SERVER_PORT environment variable or passing the `server_port` parameter to `launch()`.
2025-11-03 15:13:05,879 - __main__ - INFO - 系统已关闭
2025-11-03 15:16:21,888 - __main__ - INFO - 系统启动中...
2025-11-03 15:16:21,888 - __main__ - INFO - ✅ 检测到盘古7B模型文件
2025-11-03 15:16:21,888 - __main__ - INFO - 正在初始化系统...
2025-11-03 15:16:21,888 - system_core - INFO - 系统核心初始化完成
2025-11-03 15:16:21,888 - system_core - INFO - 正在初始化系统组件...
2025-11-03 15:16:29,217 - system_core - INFO - 初始化题库...
2025-11-03 15:16:29,217 - data_management.question_db - INFO - 加载题库成功,共 20 道题目
2025-11-03 15:16:29,217 - data_management.question_db - INFO - 题库数据库初始化完成,路径: /home/weitianyu/teach_system/data/question_database.json
2025-11-03 15:16:29,218 - system_core - INFO - 初始化盘古7B模型...
2025-11-03 15:16:29,218 - models.embedding_model - INFO - 尝试使用盘古7B的嵌入功能...
2025-11-03 15:16:29,218 - models.embedding_model - INFO - 初始化盘古7B嵌入模型: /opt/pangu/openPangu-Embedded-7B-V1.1
2025-11-03 15:16:29,218 - models.llm_models - INFO - 创建盘古7B模型实例（任务类型: pangu）
2025-11-03 15:16:29,218 - models.llm_models - INFO - 检测到 8 个NPU设备
2025-11-03 15:16:29,218 - models.llm_models - INFO - 盘古7B模型设备配置: npu:0
2025-11-03 15:16:29,218 - system_core - INFO - 初始化功能组件...
2025-11-03 15:16:29,218 - utils.question_generator - INFO - 题目生成器初始化完成
2025-11-03 15:16:29,219 - utils.evaluator - INFO - 学生评估器初始化完成
2025-11-03 15:16:29,219 - visualization.kg_visualizer - INFO - 知识图谱可视化器初始化完成
2025-11-03 15:16:29,221 - utils.bkt_algorithm - INFO - BKT算法初始化完成
2025-11-03 15:16:29,221 - system_core - INFO - ✅ 系统初始化完成 - 使用盘古7B统一模型
2025-11-03 15:16:29,221 - __main__ - INFO - 系统核心初始化完成
2025-11-03 15:16:29,221 - __main__ - INFO - 检查题库数据...
2025-11-03 15:16:29,221 - __main__ - INFO - 题库已有 20 道题目
2025-11-03 15:16:29,221 - __main__ - INFO - 正在创建UI界面...
2025-11-03 15:16:29,221 - ui.main_ui - INFO - UI界面初始化完成
2025-11-03 15:16:30,256 - httpx - INFO - HTTP Request: GET https://api.gradio.app/pkg-version "HTTP/1.1 200 OK"
2025-11-03 15:16:30,671 - __main__ - INFO - 系统启动成功!
2025-11-03 15:16:30,854 - httpx - INFO - HTTP Request: GET http://localhost:7860/gradio_api/startup-events "HTTP/1.1 200 OK"
2025-11-03 15:16:30,883 - httpx - INFO - HTTP Request: HEAD http://localhost:7860/ "HTTP/1.1 200 OK"
2025-11-03 15:17:13,704 - __main__ - INFO - 系统已关闭
2025-11-03 15:20:23,389 - __main__ - INFO - 系统启动中...
2025-11-03 15:20:23,389 - __main__ - INFO - ✅ 检测到盘古7B模型文件
2025-11-03 15:20:23,390 - __main__ - INFO - 正在初始化系统...
2025-11-03 15:20:23,390 - system_core - INFO - 系统核心初始化完成
2025-11-03 15:20:23,390 - system_core - INFO - 正在初始化系统组件...
2025-11-03 15:20:30,697 - system_core - INFO - 初始化题库...
2025-11-03 15:20:30,697 - data_management.question_db - INFO - 加载题库成功,共 20 道题目
2025-11-03 15:20:30,698 - data_management.question_db - INFO - 题库数据库初始化完成,路径: /home/weitianyu/teach_system/data/question_database.json
2025-11-03 15:20:30,698 - system_core - INFO - 初始化盘古7B模型...
2025-11-03 15:20:30,698 - models.embedding_model - INFO - 尝试使用盘古7B的嵌入功能...
2025-11-03 15:20:30,698 - models.embedding_model - INFO - 初始化盘古7B嵌入模型: /opt/pangu/openPangu-Embedded-7B-V1.1
2025-11-03 15:20:30,698 - models.llm_models - INFO - 创建盘古7B模型实例（任务类型: pangu）
2025-11-03 15:20:30,698 - models.llm_models - INFO - 检测到 8 个NPU设备
2025-11-03 15:20:30,698 - models.llm_models - INFO - 盘古7B模型设备配置: npu:0
2025-11-03 15:20:30,698 - system_core - INFO - 初始化功能组件...
2025-11-03 15:20:30,698 - utils.question_generator - INFO - 题目生成器初始化完成
2025-11-03 15:20:30,699 - utils.evaluator - INFO - 学生评估器初始化完成
2025-11-03 15:20:30,699 - visualization.kg_visualizer - INFO - 知识图谱可视化器初始化完成
2025-11-03 15:20:30,701 - utils.bkt_algorithm - INFO - BKT算法初始化完成
2025-11-03 15:20:30,701 - system_core - INFO - ✅ 系统初始化完成 - 使用盘古7B统一模型
2025-11-03 15:20:30,701 - __main__ - INFO - 系统核心初始化完成
2025-11-03 15:20:30,701 - __main__ - INFO - 检查题库数据...
2025-11-03 15:20:30,701 - __main__ - INFO - 题库已有 20 道题目
2025-11-03 15:20:30,701 - __main__ - INFO - 正在创建UI界面...
2025-11-03 15:20:30,701 - ui.main_ui - INFO - UI界面初始化完成
2025-11-03 15:20:32,154 - __main__ - INFO - 系统启动成功!
2025-11-03 15:20:32,346 - httpx - INFO - HTTP Request: GET http://127.0.0.1:7860/gradio_api/startup-events "HTTP/1.1 200 OK"
2025-11-03 15:20:32,376 - httpx - INFO - HTTP Request: HEAD http://127.0.0.1:7860/ "HTTP/1.1 200 OK"
2025-11-03 15:20:33,155 - httpx - INFO - HTTP Request: GET https://api.gradio.app/pkg-version "HTTP/1.1 200 OK"
2025-11-03 15:20:33,433 - httpx - INFO - HTTP Request: GET https://api.gradio.app/v3/tunnel-request "HTTP/1.1 200 OK"
2025-11-03 15:25:11,945 - __main__ - INFO - 系统已关闭
2025-11-03 15:27:01,369 - __main__ - INFO - 系统启动中...
2025-11-03 15:27:01,370 - __main__ - INFO - ✅ 检测到盘古7B模型文件
2025-11-03 15:27:01,370 - __main__ - INFO - 正在初始化系统...
2025-11-03 15:27:01,370 - system_core - INFO - 系统核心初始化完成
2025-11-03 15:27:01,370 - system_core - INFO - 正在初始化系统组件...
2025-11-03 15:27:08,655 - system_core - INFO - 初始化题库...
2025-11-03 15:27:08,655 - data_management.question_db - INFO - 加载题库成功,共 20 道题目
2025-11-03 15:27:08,656 - data_management.question_db - INFO - 题库数据库初始化完成,路径: /home/weitianyu/teach_system/data/question_database.json
2025-11-03 15:27:08,656 - system_core - INFO - 初始化盘古7B模型...
2025-11-03 15:27:08,656 - models.embedding_model - INFO - 尝试使用盘古7B的嵌入功能...
2025-11-03 15:27:08,656 - models.embedding_model - INFO - 初始化盘古7B嵌入模型: /opt/pangu/openPangu-Embedded-7B-V1.1
2025-11-03 15:27:08,656 - models.llm_models - INFO - 创建盘古7B模型实例（任务类型: pangu）
2025-11-03 15:27:08,656 - models.llm_models - INFO - 检测到 8 个NPU设备
2025-11-03 15:27:08,656 - models.llm_models - INFO - 盘古7B模型设备配置: npu:0
2025-11-03 15:27:08,656 - system_core - INFO - 初始化功能组件...
2025-11-03 15:27:08,657 - utils.question_generator - INFO - 题目生成器初始化完成
2025-11-03 15:27:08,657 - utils.evaluator - INFO - 学生评估器初始化完成
2025-11-03 15:27:08,657 - visualization.kg_visualizer - INFO - 知识图谱可视化器初始化完成
2025-11-03 15:27:08,659 - utils.bkt_algorithm - INFO - BKT算法初始化完成
2025-11-03 15:27:08,659 - system_core - INFO - ✅ 系统初始化完成 - 使用盘古7B统一模型
2025-11-03 15:27:08,659 - __main__ - INFO - 系统核心初始化完成
2025-11-03 15:27:08,659 - __main__ - INFO - 检查题库数据...
2025-11-03 15:27:08,659 - __main__ - INFO - 题库已有 20 道题目
2025-11-03 15:27:08,659 - __main__ - INFO - 正在创建UI界面...
2025-11-03 15:27:08,659 - ui.main_ui - INFO - UI界面初始化完成
2025-11-03 15:27:10,132 - __main__ - INFO - 系统启动成功!
2025-11-03 15:27:10,318 - httpx - INFO - HTTP Request: GET http://localhost:7860/gradio_api/startup-events "HTTP/1.1 200 OK"
2025-11-03 15:27:10,347 - httpx - INFO - HTTP Request: HEAD http://localhost:7860/ "HTTP/1.1 200 OK"
2025-11-03 15:27:11,445 - httpx - INFO - HTTP Request: GET https://api.gradio.app/pkg-version "HTTP/1.1 200 OK"
2025-11-03 15:28:07,916 - __main__ - INFO - 系统已关闭
2025-11-03 15:30:26,879 - __main__ - INFO - 系统启动中...
2025-11-03 15:30:26,880 - __main__ - INFO - ✅ 检测到盘古7B模型文件
2025-11-03 15:30:26,880 - __main__ - INFO - 正在初始化系统...
2025-11-03 15:30:26,880 - system_core - INFO - 系统核心初始化完成
2025-11-03 15:30:26,880 - system_core - INFO - 正在初始化系统组件...
2025-11-03 15:30:34,171 - system_core - INFO - 初始化题库...
2025-11-03 15:30:34,172 - data_management.question_db - INFO - 加载题库成功,共 20 道题目
2025-11-03 15:30:34,172 - data_management.question_db - INFO - 题库数据库初始化完成,路径: /home/weitianyu/teach_system/data/question_database.json
2025-11-03 15:30:34,172 - system_core - INFO - 初始化盘古7B模型...
2025-11-03 15:30:34,172 - models.embedding_model - INFO - 尝试使用盘古7B的嵌入功能...
2025-11-03 15:30:34,172 - models.embedding_model - INFO - 初始化盘古7B嵌入模型: /opt/pangu/openPangu-Embedded-7B-V1.1
2025-11-03 15:30:34,172 - models.llm_models - INFO - 创建盘古7B模型实例（任务类型: pangu）
2025-11-03 15:30:34,173 - models.llm_models - INFO - 检测到 8 个NPU设备
2025-11-03 15:30:34,173 - models.llm_models - INFO - 盘古7B模型设备配置: npu:0
2025-11-03 15:30:34,173 - system_core - INFO - 初始化功能组件...
2025-11-03 15:30:34,173 - utils.question_generator - INFO - 题目生成器初始化完成
2025-11-03 15:30:34,173 - utils.evaluator - INFO - 学生评估器初始化完成
2025-11-03 15:30:34,173 - visualization.kg_visualizer - INFO - 知识图谱可视化器初始化完成
2025-11-03 15:30:34,175 - utils.bkt_algorithm - INFO - BKT算法初始化完成
2025-11-03 15:30:34,176 - system_core - INFO - ✅ 系统初始化完成 - 使用盘古7B统一模型
2025-11-03 15:30:34,176 - __main__ - INFO - 系统核心初始化完成
2025-11-03 15:30:34,176 - __main__ - INFO - 检查题库数据...
2025-11-03 15:30:34,176 - __main__ - INFO - 题库已有 20 道题目
2025-11-03 15:30:34,176 - __main__ - INFO - 正在创建UI界面...
2025-11-03 15:30:34,176 - ui.main_ui - INFO - UI界面初始化完成
2025-11-03 15:30:35,459 - httpx - INFO - HTTP Request: GET https://api.gradio.app/pkg-version "HTTP/1.1 200 OK"
2025-11-03 15:30:35,656 - __main__ - INFO - 系统启动成功!
2025-11-03 15:30:35,842 - httpx - INFO - HTTP Request: GET http://localhost:7860/gradio_api/startup-events "HTTP/1.1 200 OK"
2025-11-03 15:30:35,871 - httpx - INFO - HTTP Request: HEAD http://localhost:7860/ "HTTP/1.1 200 OK"
2025-11-03 15:39:25,309 - __main__ - INFO - 系统已关闭
2025-11-03 15:39:41,023 - __main__ - INFO - 系统启动中...
2025-11-03 15:39:41,023 - __main__ - INFO - ✅ 检测到盘古7B模型文件
2025-11-03 15:39:41,024 - __main__ - INFO - 正在初始化系统...
2025-11-03 15:39:41,024 - system_core - INFO - 系统核心初始化完成
2025-11-03 15:39:41,024 - system_core - INFO - 正在初始化系统组件...
2025-11-03 15:39:48,313 - system_core - INFO - 初始化题库...
2025-11-03 15:39:48,314 - data_management.question_db - INFO - 加载题库成功,共 20 道题目
2025-11-03 15:39:48,314 - data_management.question_db - INFO - 题库数据库初始化完成,路径: /home/weitianyu/teach_system/data/question_database.json
2025-11-03 15:39:48,314 - system_core - INFO - 初始化盘古7B模型...
2025-11-03 15:39:48,314 - models.embedding_model - INFO - 尝试使用盘古7B的嵌入功能...
2025-11-03 15:39:48,314 - models.embedding_model - INFO - 初始化盘古7B嵌入模型: /opt/pangu/openPangu-Embedded-7B-V1.1
2025-11-03 15:39:48,314 - models.llm_models - INFO - 创建盘古7B模型实例（任务类型: pangu）
2025-11-03 15:39:48,315 - models.llm_models - INFO - 检测到 8 个NPU设备
2025-11-03 15:39:48,315 - models.llm_models - INFO - 盘古7B模型设备配置: npu:0
2025-11-03 15:39:48,315 - system_core - INFO - 初始化功能组件...
2025-11-03 15:39:48,315 - utils.question_generator - INFO - 题目生成器初始化完成
2025-11-03 15:39:48,315 - utils.evaluator - INFO - 学生评估器初始化完成
2025-11-03 15:39:48,315 - visualization.kg_visualizer - INFO - 知识图谱可视化器初始化完成
2025-11-03 15:39:48,317 - utils.bkt_algorithm - INFO - BKT算法初始化完成
2025-11-03 15:39:48,318 - system_core - INFO - ✅ 系统初始化完成 - 使用盘古7B统一模型
2025-11-03 15:39:48,318 - __main__ - INFO - 系统核心初始化完成
2025-11-03 15:39:48,318 - __main__ - INFO - 检查题库数据...
2025-11-03 15:39:48,318 - __main__ - INFO - 题库已有 20 道题目
2025-11-03 15:39:48,318 - __main__ - INFO - 正在创建UI界面...
2025-11-03 15:39:48,318 - ui.main_ui - INFO - UI界面初始化完成
2025-11-03 15:39:49,798 - __main__ - INFO - 系统启动成功!
2025-11-03 15:39:49,986 - httpx - INFO - HTTP Request: GET http://localhost:7860/gradio_api/startup-events "HTTP/1.1 200 OK"
2025-11-03 15:39:50,015 - httpx - INFO - HTTP Request: HEAD http://localhost:7860/ "HTTP/1.1 200 OK"
2025-11-03 15:39:50,020 - httpx - INFO - HTTP Request: GET https://api.gradio.app/pkg-version "HTTP/1.1 200 OK"
2025-11-03 15:40:06,014 - system_core - INFO - 开始自适应测评: 代数, 学生: student_001, 数量: 5
2025-11-03 15:40:06,014 - utils.bkt_algorithm - INFO - 初始化学生 student_001 在知识点 代数 的状态
2025-11-03 15:40:06,015 - data_management.question_db - INFO - 筛选结果: 5 道题目
2025-11-03 15:40:06,015 - data_management.question_db - INFO - 筛选结果: 2 道题目
2025-11-03 15:40:06,015 - data_management.question_db - INFO - 筛选结果: 2 道题目
2025-11-03 15:40:06,015 - data_management.question_db - INFO - 筛选结果: 2 道题目
2025-11-03 15:40:06,015 - data_management.question_db - INFO - 筛选结果: 2 道题目
2025-11-03 15:40:06,015 - system_core - INFO - 自适应测评开始，题目序列难度: ['简单', '中等', '中等', '中等', '中等']
2025-11-03 15:40:11,866 - utils.evaluator - INFO - 使用盘古模型进行智能答案评估
2025-11-03 15:40:11,866 - models.llm_models - INFO - 正在加载盘古7B模型: /opt/pangu/openPangu-Embedded-7B-V1.1
2025-11-03 15:40:14,072 - datasets - INFO - PyTorch version 2.5.1 available.
2025-11-03 15:40:50,028 - models.llm_models - ERROR - 盘古7B模型加载失败: NPU out of memory. Tried to allocate 14.96 GiB (NPU 0; 60.97 GiB total capacity; 0 bytes already allocated; 0 bytes current active; 5.63 GiB free; 0 bytes reserved in total by PyTorch) If reserved memory is >> allocated memory try setting max_split_size_mb to avoid fragmentation.
2025-11-03 15:40:50,028 - models.llm_models - WARNING - 将使用模拟模式
2025-11-03 15:40:50,030 - utils.bkt_algorithm - INFO - 学生 student_001 在知识点 代数 答题记录: 掌握度 0.650, 正确: True
2025-11-03 15:40:50,030 - system_core - INFO - BKT算法更新: 掌握度 0.650
2025-11-03 15:50:11,489 - __main__ - INFO - 收到退出信号...
2025-11-03 15:50:11,489 - __main__ - INFO - 系统已关闭
2025-11-03 15:52:46,318 - __main__ - INFO - 系统启动中...
2025-11-03 15:52:46,319 - __main__ - INFO - ✅ 检测到盘古7B模型文件
2025-11-03 15:52:46,319 - __main__ - INFO - 正在初始化系统...
2025-11-03 15:52:46,319 - system_core - INFO - 系统核心初始化完成
2025-11-03 15:52:46,319 - system_core - INFO - 正在初始化系统组件...
2025-11-03 15:52:53,678 - system_core - INFO - 初始化题库...
2025-11-03 15:52:53,679 - data_management.question_db - INFO - 加载题库成功,共 20 道题目
2025-11-03 15:52:53,679 - data_management.question_db - INFO - 题库数据库初始化完成,路径: /home/weitianyu/teach_system/data/question_database.json
2025-11-03 15:52:53,679 - system_core - INFO - 初始化盘古7B模型...
2025-11-03 15:52:53,679 - models.embedding_model - INFO - 尝试使用盘古7B的嵌入功能...
2025-11-03 15:52:53,679 - models.embedding_model - INFO - 初始化盘古7B嵌入模型: /opt/pangu/openPangu-Embedded-7B-V1.1
2025-11-03 15:52:53,679 - models.llm_models - INFO - 创建盘古7B模型实例（任务类型: pangu）
2025-11-03 15:52:53,679 - models.llm_models - INFO - 检测到 8 个NPU设备
2025-11-03 15:52:53,680 - models.llm_models - INFO - 盘古7B模型设备配置: npu:0
2025-11-03 15:52:53,680 - system_core - INFO - 初始化功能组件...
2025-11-03 15:52:53,680 - utils.evaluator - INFO - 学生评估器初始化完成
2025-11-03 15:52:53,680 - visualization.kg_visualizer - INFO - 知识图谱可视化器初始化完成
2025-11-03 15:52:53,682 - utils.bkt_algorithm - INFO - BKT算法初始化完成
2025-11-03 15:52:53,682 - system_core - INFO - ✅ 系统初始化完成 - 使用盘古7B统一模型
2025-11-03 15:52:53,682 - __main__ - INFO - 系统核心初始化完成
2025-11-03 15:52:53,682 - __main__ - INFO - 检查题库数据...
2025-11-03 15:52:53,682 - __main__ - INFO - 题库已有 20 道题目
2025-11-03 15:52:53,682 - __main__ - INFO - 正在创建UI界面...
2025-11-03 15:52:53,683 - ui.main_ui - INFO - UI界面初始化完成
2025-11-03 15:52:55,128 - __main__ - INFO - 系统启动成功!
2025-11-03 15:52:55,322 - httpx - INFO - HTTP Request: GET http://localhost:7860/gradio_api/startup-events "HTTP/1.1 200 OK"
2025-11-03 15:52:55,352 - httpx - INFO - HTTP Request: HEAD http://localhost:7860/ "HTTP/1.1 200 OK"
2025-11-03 15:52:55,837 - httpx - INFO - HTTP Request: GET https://api.gradio.app/pkg-version "HTTP/1.1 200 OK"
2025-11-03 15:53:15,048 - system_core - INFO - 开始自适应测评: 代数, 学生: student_001, 数量: 4
2025-11-03 15:53:15,048 - data_management.question_db - INFO - 筛选结果: 13 道题目
2025-11-03 15:53:15,049 - utils.bkt_algorithm - INFO - 初始化学生 student_001 在知识点 代数 的状态
2025-11-03 15:53:15,049 - data_management.question_db - INFO - 筛选结果: 11 道题目
2025-11-03 15:53:15,049 - data_management.question_db - INFO - 筛选结果: 2 道题目
2025-11-03 15:53:15,049 - data_management.question_db - INFO - 筛选结果: 2 道题目
2025-11-03 15:53:15,049 - data_management.question_db - INFO - 筛选结果: 2 道题目
2025-11-03 15:53:15,049 - system_core - INFO - 题库中没有更多中等难度的代数题目，从其他难度中选择
2025-11-03 15:53:15,049 - system_core - INFO - 从其他难度中选择了题目(实际难度: 简单)
2025-11-03 15:53:15,049 - system_core - INFO - 自适应测评开始，共4道题目，难度序列: ['简单', '中等', '中等', '中等']
2025-11-03 15:53:19,604 - utils.evaluator - INFO - 使用盘古模型进行智能答案评估
2025-11-03 15:53:19,604 - models.llm_models - INFO - 正在加载盘古7B模型: /opt/pangu/openPangu-Embedded-7B-V1.1
2025-11-03 15:53:21,808 - datasets - INFO - PyTorch version 2.5.1 available.
2025-11-03 15:53:56,769 - models.llm_models - ERROR - 盘古7B模型加载失败: NPU out of memory. Tried to allocate 14.96 GiB (NPU 0; 60.97 GiB total capacity; 0 bytes already allocated; 0 bytes current active; 5.63 GiB free; 0 bytes reserved in total by PyTorch) If reserved memory is >> allocated memory try setting max_split_size_mb to avoid fragmentation.
2025-11-03 15:53:56,769 - models.llm_models - WARNING - 将使用模拟模式
2025-11-03 15:53:56,771 - utils.bkt_algorithm - INFO - 学生 student_001 在知识点 代数 答题记录: 掌握度 0.650, 正确: True
2025-11-03 15:53:56,772 - system_core - INFO - BKT算法更新: 掌握度 0.650
2025-11-03 15:59:48,822 - __main__ - INFO - 系统已关闭
2025-11-03 16:13:29,432 - __main__ - INFO - 系统启动中...
2025-11-03 16:13:29,432 - __main__ - INFO - ✅ 检测到盘古7B模型文件
2025-11-03 16:13:29,432 - __main__ - INFO - 正在初始化系统...
2025-11-03 16:13:29,432 - system_core - INFO - 系统核心初始化完成
2025-11-03 16:13:29,432 - system_core - INFO - 正在初始化系统组件...
2025-11-03 16:13:36,750 - system_core - INFO - 初始化题库...
2025-11-03 16:13:36,750 - data_management.question_db - INFO - 加载题库成功,共 20 道题目
2025-11-03 16:13:36,751 - data_management.question_db - INFO - 题库数据库初始化完成,路径: /home/weitianyu/teach_system/data/question_database.json
2025-11-03 16:13:36,751 - system_core - INFO - 初始化盘古7B模型...
2025-11-03 16:13:36,751 - models.embedding_model - INFO - 尝试使用盘古7B的嵌入功能...
2025-11-03 16:13:36,751 - models.embedding_model - INFO - 初始化盘古7B嵌入模型: /opt/pangu/openPangu-Embedded-7B-V1.1
2025-11-03 16:13:36,751 - models.llm_models - INFO - 创建盘古7B模型实例（任务类型: pangu）
2025-11-03 16:13:44,725 - models.llm_models - INFO - 检测到NPU设备，可用设备数: 8
2025-11-03 16:13:44,725 - models.llm_models - INFO - 盘古7B模型设备配置: npu:0
2025-11-03 16:13:44,726 - system_core - INFO - 初始化功能组件...
2025-11-03 16:13:44,726 - utils.evaluator - INFO - 学生评估器初始化完成
2025-11-03 16:13:44,726 - visualization.kg_visualizer - INFO - 知识图谱可视化器初始化完成
2025-11-03 16:13:44,729 - utils.bkt_algorithm - INFO - BKT算法初始化完成
2025-11-03 16:13:44,729 - system_core - INFO - ✅ 系统初始化完成 - 使用盘古7B统一模型
2025-11-03 16:13:44,729 - __main__ - INFO - 系统核心初始化完成
2025-11-03 16:13:44,729 - __main__ - INFO - 检查题库数据...
2025-11-03 16:13:44,730 - __main__ - INFO - 题库已有 20 道题目
2025-11-03 16:13:44,730 - __main__ - INFO - 正在创建UI界面...
2025-11-03 16:13:44,730 - ui.main_ui - INFO - UI界面初始化完成
2025-11-03 16:13:46,179 - httpx - INFO - HTTP Request: GET https://api.gradio.app/pkg-version "HTTP/1.1 200 OK"
2025-11-03 16:13:46,493 - __main__ - INFO - 系统启动成功!
2025-11-03 16:13:46,685 - httpx - INFO - HTTP Request: GET http://localhost:7860/gradio_api/startup-events "HTTP/1.1 200 OK"
2025-11-03 16:13:46,715 - httpx - INFO - HTTP Request: HEAD http://localhost:7860/ "HTTP/1.1 200 OK"
2025-11-03 16:13:59,557 - system_core - INFO - 开始自适应测评: 代数, 学生: student_001, 数量: 3
2025-11-03 16:13:59,557 - data_management.question_db - INFO - 筛选结果: 13 道题目
2025-11-03 16:13:59,558 - utils.bkt_algorithm - INFO - 初始化学生 student_001 在知识点 代数 的状态
2025-11-03 16:13:59,558 - data_management.question_db - INFO - 筛选结果: 11 道题目
2025-11-03 16:13:59,558 - data_management.question_db - INFO - 筛选结果: 2 道题目
2025-11-03 16:13:59,558 - data_management.question_db - INFO - 筛选结果: 2 道题目
2025-11-03 16:13:59,558 - system_core - INFO - 自适应测评开始，共3道题目，难度序列: ['简单', '中等', '中等']
2025-11-03 16:14:03,157 - utils.evaluator - INFO - 使用盘古模型进行智能答案评估
2025-11-03 16:14:03,157 - models.llm_models - INFO - 首次使用，正在加载模型...
2025-11-03 16:14:03,157 - models.llm_models - INFO - 正在加载盘古7B模型: /opt/pangu/openPangu-Embedded-7B-V1.1
2025-11-03 16:14:03,507 - models.llm_models - INFO - NPU内存已清理
2025-11-03 16:14:04,607 - models.llm_models - INFO - 开始加载模型权重...
2025-11-03 16:14:05,610 - datasets - INFO - PyTorch version 2.5.1 available.
2025-11-03 16:14:33,524 - models.llm_models - ERROR - ❌ NPU内存不足: NPU out of memory. Tried to allocate 14.96 GiB (NPU 0; 60.97 GiB total capacity; 0 bytes already allocated; 0 bytes current active; 5.63 GiB free; 0 bytes reserved in total by PyTorch) If reserved memory is >> allocated memory try setting max_split_size_mb to avoid fragmentation.
2025-11-03 16:14:33,524 - models.llm_models - WARNING - 💡 建议：1) 减少batch_size 2) 使用CPU模式 3) 关闭其他占用NPU的程序
2025-11-03 16:14:33,996 - models.llm_models - INFO - NPU内存已清理
2025-11-03 16:14:33,996 - models.llm_models - WARNING - ⚠️ 已切换到模拟模式
2025-11-03 16:14:33,998 - utils.bkt_algorithm - INFO - 学生 student_001 在知识点 代数 答题记录: 掌握度 0.650, 正确: True
2025-11-03 16:14:33,998 - system_core - INFO - BKT算法更新: 掌握度 0.650
2025-11-03 16:15:05,141 - utils.evaluator - INFO - 使用备用判断逻辑（模拟模式）
2025-11-03 16:15:05,142 - utils.bkt_algorithm - INFO - 学生 student_001 在知识点 代数 答题记录: 掌握度 0.199, 正确: False
2025-11-03 16:15:05,142 - system_core - INFO - BKT算法更新: 掌握度 0.199
2025-11-03 16:15:13,603 - utils.evaluator - INFO - 使用备用判断逻辑（模拟模式）
2025-11-03 16:15:13,604 - utils.bkt_algorithm - INFO - 学生 student_001 在知识点 代数 答题记录: 掌握度 0.542, 正确: True
2025-11-03 16:15:13,604 - system_core - INFO - BKT算法更新: 掌握度 0.542
2025-11-03 16:16:21,143 - __main__ - INFO - 系统已关闭
2025-11-03 16:30:16,300 - __main__ - INFO - 系统启动中...
2025-11-03 16:30:16,300 - __main__ - INFO - ✅ 检测到盘古7B模型文件
2025-11-03 16:30:16,300 - __main__ - INFO - 正在初始化系统...
2025-11-03 16:30:16,300 - __main__ - ERROR - 系统运行出错: create_system_core() got an unexpected keyword argument 'use_mock'
Traceback (most recent call last):
  File "/home/weitianyu/teach_system/main.py", line 55, in main
    system_core = create_system_core(config, use_mock=use_mock)
                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: create_system_core() got an unexpected keyword argument 'use_mock'
2025-11-03 16:30:16,301 - __main__ - INFO - 系统已关闭
2025-11-03 16:44:39,258 - __main__ - INFO - 系统启动中...
2025-11-03 16:44:39,258 - __main__ - INFO - ✅ 检测到盘古7B模型文件
2025-11-03 16:44:39,258 - __main__ - INFO - 正在初始化系统...
2025-11-03 16:44:39,258 - system_core - INFO - 系统核心初始化完成
2025-11-03 16:44:39,258 - system_core - INFO - 正在初始化系统组件...
2025-11-03 16:44:41,993 - system_core - INFO - 初始化题库...
2025-11-03 16:44:41,993 - data_management.question_db - INFO - 加载题库成功,共 49 道题目
2025-11-03 16:44:41,993 - data_management.question_db - INFO - 题库数据库初始化完成,路径: /home/weitianyu/teach_system/data/question_database.json
2025-11-03 16:44:41,994 - system_core - INFO - 初始化盘古7B模型...
2025-11-03 16:44:41,994 - models.embedding_model - INFO - 尝试使用盘古7B的嵌入功能...
2025-11-03 16:44:41,994 - models.embedding_model - INFO - 初始化盘古7B嵌入模型: /opt/pangu/openPangu-Embedded-7B-V1.1
2025-11-03 16:44:41,994 - models.llm_models - INFO - 创建盘古7B模型实例（任务类型: pangu）
2025-11-03 16:44:41,994 - models.llm_models - INFO - 检测到 8 个NPU设备
2025-11-03 16:44:41,994 - models.llm_models - INFO - 盘古7B模型设备配置: npu:0
2025-11-03 16:44:41,994 - system_core - INFO - 初始化功能组件...
2025-11-03 16:44:41,994 - utils.evaluator - INFO - 答案评估器初始化完成
2025-11-03 16:44:41,994 - visualization.kg_visualizer - INFO - 知识图谱可视化器初始化完成
2025-11-03 16:44:42,001 - utils.bkt_algorithm - INFO - BKT算法初始化完成
2025-11-03 16:44:42,001 - system_core - INFO - ✅ 系统初始化完成 - 使用盘古7B统一模型
2025-11-03 16:44:42,001 - __main__ - INFO - 系统核心初始化完成
2025-11-03 16:44:42,001 - __main__ - INFO - 检查题库数据...
2025-11-03 16:44:42,001 - __main__ - INFO - 题库已有 49 道题目
2025-11-03 16:44:42,001 - __main__ - INFO - 正在创建UI界面...
2025-11-03 16:44:42,001 - ui.main_ui - INFO - UI界面初始化完成
2025-11-03 16:44:43,304 - httpx - INFO - HTTP Request: GET https://api.gradio.app/pkg-version "HTTP/1.1 200 OK"
2025-11-03 16:44:43,459 - __main__ - INFO - 系统启动成功!
2025-11-03 16:44:43,648 - httpx - INFO - HTTP Request: GET http://localhost:7860/gradio_api/startup-events "HTTP/1.1 200 OK"
2025-11-03 16:44:43,677 - httpx - INFO - HTTP Request: HEAD http://localhost:7860/ "HTTP/1.1 200 OK"
2025-11-03 16:45:06,693 - models.llm_models - INFO - 模型内存已清理
2025-11-03 16:45:07,022 - system_core - INFO - 开始自适应测评: 代数, 学生: student_001, 数量: 5
2025-11-03 16:45:07,022 - data_management.question_db - INFO - 筛选结果: 12 道题目
2025-11-03 16:45:07,022 - utils.bkt_algorithm - INFO - 初始化学生 student_001 在知识点 代数 的状态
2025-11-03 16:45:07,022 - data_management.question_db - INFO - 筛选结果: 10 道题目
2025-11-03 16:45:07,023 - data_management.question_db - INFO - 筛选结果: 2 道题目
2025-11-03 16:45:07,023 - data_management.question_db - INFO - 筛选结果: 2 道题目
2025-11-03 16:45:07,023 - data_management.question_db - INFO - 筛选结果: 2 道题目
2025-11-03 16:45:07,023 - system_core - INFO - 题库中没有更多中等难度的代数题目，从其他难度中选择
2025-11-03 16:45:07,023 - system_core - INFO - 从其他难度中选择了题目(实际难度: 简单)
2025-11-03 16:45:07,023 - data_management.question_db - INFO - 筛选结果: 2 道题目
2025-11-03 16:45:07,023 - system_core - INFO - 题库中没有更多中等难度的代数题目，从其他难度中选择
2025-11-03 16:45:07,023 - system_core - INFO - 从其他难度中选择了题目(实际难度: 简单)
2025-11-03 16:45:07,023 - system_core - INFO - 自适应测评开始，共5道题目，难度序列: ['简单', '中等', '中等', '中等', '中等']
2025-11-03 16:45:28,751 - utils.evaluator - INFO - 使用盘古模型进行智能答案评估
2025-11-03 16:45:28,751 - utils.evaluator - ERROR - 答案评估失败: 'correct_answer'
2025-11-03 16:45:28,752 - utils.bkt_algorithm - INFO - 学生 student_001 在知识点 代数 答题记录: 掌握度 0.055, 正确: False
2025-11-03 16:45:28,752 - system_core - INFO - BKT算法更新: 掌握度 0.055
2025-11-03 16:45:29,077 - models.llm_models - INFO - 模型内存已清理
2025-11-03 16:45:58,604 - utils.evaluator - INFO - 使用盘古模型进行智能答案评估
2025-11-03 16:45:58,604 - utils.evaluator - ERROR - 答案评估失败: 'correct_answer'
2025-11-03 16:45:58,605 - utils.bkt_algorithm - INFO - 学生 student_001 在知识点 代数 答题记录: 掌握度 0.010, 正确: False
2025-11-03 16:45:58,605 - system_core - INFO - BKT算法更新: 掌握度 0.010
2025-11-03 16:45:58,935 - models.llm_models - INFO - 模型内存已清理
2025-11-03 16:46:08,129 - utils.evaluator - INFO - 使用盘古模型进行智能答案评估
2025-11-03 16:46:08,129 - utils.evaluator - ERROR - 答案评估失败: 'correct_answer'
2025-11-03 16:46:08,130 - utils.bkt_algorithm - INFO - 学生 student_001 在知识点 代数 答题记录: 掌握度 0.010, 正确: False
2025-11-03 16:46:08,130 - system_core - INFO - BKT算法更新: 掌握度 0.010
2025-11-03 16:46:08,462 - models.llm_models - INFO - 模型内存已清理
2025-11-03 16:46:21,360 - __main__ - INFO - 系统已关闭
2025-11-03 16:54:31,460 - __main__ - INFO - 系统启动中...
2025-11-03 16:54:31,460 - __main__ - INFO - ✅ 检测到盘古7B模型文件
2025-11-03 16:54:31,461 - __main__ - INFO - 正在初始化系统...
2025-11-03 16:54:31,461 - system_core - INFO - 系统核心初始化完成
2025-11-03 16:54:31,461 - system_core - INFO - 正在初始化系统组件...
2025-11-03 16:54:38,773 - system_core - INFO - 初始化题库...
2025-11-03 16:54:38,774 - data_management.question_db - INFO - 加载题库成功,共 49 道题目
2025-11-03 16:54:38,774 - data_management.question_db - INFO - 题库数据库初始化完成,路径: /home/weitianyu/teach_system/data/question_database.json
2025-11-03 16:54:38,774 - system_core - INFO - 初始化盘古7B模型...
2025-11-03 16:54:38,774 - models.embedding_model - INFO - 尝试使用盘古7B的嵌入功能...
2025-11-03 16:54:38,774 - models.embedding_model - INFO - 初始化盘古7B嵌入模型: /opt/pangu/openPangu-Embedded-7B-V1.1
2025-11-03 16:54:38,774 - models.llm_models - INFO - 创建盘古7B模型实例（任务类型: pangu）
2025-11-03 16:54:38,774 - models.llm_models - INFO - 检测到 8 个NPU设备
2025-11-03 16:54:38,774 - models.llm_models - INFO - 盘古7B模型设备配置: npu:0
2025-11-03 16:54:38,775 - system_core - INFO - 🔄 正在预加载盘古7B模型...
2025-11-03 16:54:38,775 - models.llm_models - INFO - 正在加载盘古7B模型: /opt/pangu/openPangu-Embedded-7B-V1.1
2025-11-03 16:54:41,264 - datasets - INFO - PyTorch version 2.5.1 available.
2025-11-03 16:55:16,614 - models.llm_models - ERROR - ❌ 盘古7B模型加载失败: NPU out of memory. Tried to allocate 14.96 GiB (NPU 0; 60.97 GiB total capacity; 0 bytes already allocated; 0 bytes current active; 5.63 GiB free; 0 bytes reserved in total by PyTorch) If reserved memory is >> allocated memory try setting max_split_size_mb to avoid fragmentation.
2025-11-03 16:55:16,614 - models.llm_models - WARNING - 将使用模拟模式
2025-11-03 16:55:17,216 - system_core - WARNING - ⚠️ 盘古7B模型预加载失败，将使用模拟模式
2025-11-03 16:55:17,217 - system_core - INFO - 初始化功能组件...
2025-11-03 16:55:17,217 - utils.evaluator - INFO - 使用模拟评估器
2025-11-03 16:55:17,217 - visualization.kg_visualizer - INFO - 知识图谱可视化器初始化完成
2025-11-03 16:55:17,224 - utils.bkt_algorithm - INFO - BKT算法初始化完成
2025-11-03 16:55:17,224 - system_core - INFO - ✅ 系统初始化完成 - 使用盘古7B统一模型
2025-11-03 16:55:17,224 - __main__ - INFO - 系统核心初始化完成
2025-11-03 16:55:17,224 - __main__ - INFO - 检查题库数据...
2025-11-03 16:55:17,224 - __main__ - INFO - 题库已有 49 道题目
2025-11-03 16:55:17,224 - __main__ - INFO - 正在创建UI界面...
2025-11-03 16:55:17,224 - ui.main_ui - INFO - UI界面初始化完成
2025-11-03 16:55:18,096 - __main__ - INFO - 系统启动成功!
2025-11-03 16:55:18,154 - httpx - INFO - HTTP Request: GET https://api.gradio.app/pkg-version "HTTP/1.1 200 OK"
2025-11-03 16:55:18,301 - httpx - INFO - HTTP Request: GET http://localhost:7860/gradio_api/startup-events "HTTP/1.1 200 OK"
2025-11-03 16:55:18,331 - httpx - INFO - HTTP Request: HEAD http://localhost:7860/ "HTTP/1.1 200 OK"
2025-11-03 17:09:27,355 - system_core - INFO - 开始自适应测评: 代数, 学生: student_001, 数量: 5
2025-11-03 17:09:27,356 - data_management.question_db - INFO - 筛选结果: 12 道题目
2025-11-03 17:09:27,356 - utils.bkt_algorithm - INFO - 初始化学生 student_001 在知识点 代数 的状态
2025-11-03 17:09:27,356 - data_management.question_db - INFO - 筛选结果: 10 道题目
2025-11-03 17:09:27,356 - data_management.question_db - INFO - 筛选结果: 2 道题目
2025-11-03 17:09:27,356 - data_management.question_db - INFO - 筛选结果: 2 道题目
2025-11-03 17:09:27,356 - data_management.question_db - INFO - 筛选结果: 2 道题目
2025-11-03 17:09:27,356 - system_core - INFO - 题库中没有更多中等难度的代数题目，从其他难度中选择
2025-11-03 17:09:27,356 - system_core - INFO - 从其他难度中选择了题目(实际难度: 简单)
2025-11-03 17:09:27,356 - data_management.question_db - INFO - 筛选结果: 2 道题目
2025-11-03 17:09:27,357 - system_core - INFO - 题库中没有更多中等难度的代数题目，从其他难度中选择
2025-11-03 17:09:27,357 - system_core - INFO - 从其他难度中选择了题目(实际难度: 简单)
2025-11-03 17:09:27,357 - system_core - INFO - 自适应测评开始，共5道题目，难度序列: ['简单', '中等', '中等', '中等', '中等']
2025-11-03 17:09:40,579 - __main__ - INFO - 系统已关闭
2025-11-03 17:39:39,627 - __main__ - INFO - 系统启动中...
2025-11-03 17:39:44,196 - __main__ - INFO - ✅ NPU环境正常，检测到 8 块NPU设备
2025-11-03 17:39:52,478 - __main__ - INFO -   NPU 0: 总内存 60.97 GiB
2025-11-03 17:39:52,479 - __main__ - INFO -   NPU 1: 总内存 60.97 GiB
2025-11-03 17:39:52,480 - __main__ - INFO -   NPU 2: 总内存 60.97 GiB
2025-11-03 17:39:52,480 - __main__ - INFO -   NPU 3: 总内存 60.97 GiB
2025-11-03 17:39:52,480 - __main__ - INFO -   NPU 4: 总内存 60.97 GiB
2025-11-03 17:39:52,481 - __main__ - INFO -   NPU 5: 总内存 60.97 GiB
2025-11-03 17:39:52,481 - __main__ - INFO -   NPU 6: 总内存 60.97 GiB
2025-11-03 17:39:52,481 - __main__ - INFO -   NPU 7: 总内存 60.97 GiB
2025-11-03 17:39:52,481 - __main__ - INFO - ✅ 检测到盘古7B模型文件
2025-11-03 17:39:52,482 - __main__ - INFO - 正在初始化系统...
2025-11-03 17:39:52,482 - system_core - INFO - 系统核心初始化完成
2025-11-03 17:39:52,482 - system_core - INFO - 正在初始化系统组件...
2025-11-03 17:39:55,052 - system_core - INFO - 初始化题库...
2025-11-03 17:39:55,053 - data_management.question_db - INFO - 加载题库成功,共 49 道题目
2025-11-03 17:39:55,053 - data_management.question_db - INFO - 题库数据库初始化完成,路径: /home/weitianyu/teach_system/data/question_database.json
2025-11-03 17:39:55,053 - system_core - INFO - 初始化盘古7B模型...
2025-11-03 17:39:55,053 - system_core - INFO - 初始化嵌入模型（CPU）...
2025-11-03 17:39:55,053 - models.embedding_model - INFO - 初始化BGE-M3嵌入模型: /home/weitianyu/bgem3
2025-11-03 17:39:55,053 - system_core - INFO - 创建盘古7B模型实例（NPU 0）...
2025-11-03 17:39:55,053 - models.llm_models - INFO - 创建盘古7B模型实例（任务类型: pangu）
2025-11-03 17:39:55,053 - models.llm_models - INFO - 检测到 8 个NPU设备，使用 NPU 0
2025-11-03 17:39:55,054 - models.llm_models - INFO - NPU 0 内存状态:
2025-11-03 17:39:55,054 - models.llm_models - INFO -   总内存: 60.97 GiB
2025-11-03 17:39:55,054 - models.llm_models - INFO -   已分配: 0.00 GiB
2025-11-03 17:39:55,055 - models.llm_models - INFO -   已缓存: 0.00 GiB
2025-11-03 17:39:55,055 - models.llm_models - INFO -   可用: 60.97 GiB
2025-11-03 17:39:55,055 - models.llm_models - INFO - 盘古7B模型设备配置: npu:0
2025-11-03 17:39:55,055 - system_core - INFO - 加载盘古7B模型到NPU内存...
2025-11-03 17:39:55,055 - models.llm_models - INFO - 正在加载盘古7B模型: /opt/pangu/openPangu-Embedded-7B-V1.1
2025-11-03 17:39:56,397 - models.llm_models - INFO - 加载模型到设备: npu:0, 数据类型: torch.float16
2025-11-03 17:39:57,797 - datasets - INFO - PyTorch version 2.5.1 available.
2025-11-03 17:41:11,006 - models.llm_models - ERROR - ❌ 盘古7B模型加载失败: NPU out of memory. Tried to allocate 102.00 MiB (NPU 0; 60.97 GiB total capacity; 5.43 GiB already allocated; 5.43 GiB current active; 22.58 MiB free; 5.59 GiB reserved in total by PyTorch) If reserved memory is >> allocated memory try setting max_split_size_mb to avoid fragmentation.
2025-11-03 17:41:11,007 - system_core - ERROR - ❌ 系统初始化失败: 模型加载失败，请检查模型路径和NPU内存: NPU out of memory. Tried to allocate 102.00 MiB (NPU 0; 60.97 GiB total capacity; 5.43 GiB already allocated; 5.43 GiB current active; 22.58 MiB free; 5.59 GiB reserved in total by PyTorch) If reserved memory is >> allocated memory try setting max_split_size_mb to avoid fragmentation.
2025-11-03 17:41:11,007 - __main__ - ERROR - 系统运行出错: 系统初始化失败，请检查模型路径和NPU配置: 模型加载失败，请检查模型路径和NPU内存: NPU out of memory. Tried to allocate 102.00 MiB (NPU 0; 60.97 GiB total capacity; 5.43 GiB already allocated; 5.43 GiB current active; 22.58 MiB free; 5.59 GiB reserved in total by PyTorch) If reserved memory is >> allocated memory try setting max_split_size_mb to avoid fragmentation.
Traceback (most recent call last):
  File "/home/weitianyu/teach_system/models/llm_models.py", line 150, in load_model
    self.model = self.model.to(self.device)
                 ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/root/miniconda3/envs/pangu/lib/python3.11/site-packages/transformers/modeling_utils.py", line 4110, in to
    return super().to(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/root/miniconda3/envs/pangu/lib/python3.11/site-packages/torch_npu/contrib/transfer_to_npu.py", line 161, in decorated
    return fn(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^
  File "/root/miniconda3/envs/pangu/lib/python3.11/site-packages/torch_npu/utils/_module.py", line 79, in to
    return self._apply(convert)
           ^^^^^^^^^^^^^^^^^^^^
  File "/root/miniconda3/envs/pangu/lib/python3.11/site-packages/torch/nn/modules/module.py", line 900, in _apply
    module._apply(fn)
  File "/root/miniconda3/envs/pangu/lib/python3.11/site-packages/torch/nn/modules/module.py", line 900, in _apply
    module._apply(fn)
  File "/root/miniconda3/envs/pangu/lib/python3.11/site-packages/torch/nn/modules/module.py", line 900, in _apply
    module._apply(fn)
  [Previous line repeated 2 more times]
  File "/root/miniconda3/envs/pangu/lib/python3.11/site-packages/torch/nn/modules/module.py", line 927, in _apply
    param_applied = fn(param)
                    ^^^^^^^^^
  File "/root/miniconda3/envs/pangu/lib/python3.11/site-packages/torch_npu/utils/_module.py", line 77, in convert
    return t.to(device, dtype if t.is_floating_point() or t.is_complex() else None, non_blocking)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/root/miniconda3/envs/pangu/lib/python3.11/site-packages/torch_npu/contrib/transfer_to_npu.py", line 161, in decorated
    return fn(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^
RuntimeError: NPU out of memory. Tried to allocate 102.00 MiB (NPU 0; 60.97 GiB total capacity; 5.43 GiB already allocated; 5.43 GiB current active; 22.58 MiB free; 5.59 GiB reserved in total by PyTorch) If reserved memory is >> allocated memory try setting max_split_size_mb to avoid fragmentation.

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/weitianyu/teach_system/system_core.py", line 82, in initialize
    self.pangu_model.load_model()
  File "/home/weitianyu/teach_system/models/llm_models.py", line 169, in load_model
    raise RuntimeError(f"模型加载失败，请检查模型路径和NPU内存: {e}")
RuntimeError: 模型加载失败，请检查模型路径和NPU内存: NPU out of memory. Tried to allocate 102.00 MiB (NPU 0; 60.97 GiB total capacity; 5.43 GiB already allocated; 5.43 GiB current active; 22.58 MiB free; 5.59 GiB reserved in total by PyTorch) If reserved memory is >> allocated memory try setting max_split_size_mb to avoid fragmentation.

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/weitianyu/teach_system/main.py", line 97, in main
    system_core = create_system_core(config)
                  ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/weitianyu/teach_system/system_core.py", line 475, in create_system_core
    core.initialize()
  File "/home/weitianyu/teach_system/system_core.py", line 107, in initialize
    raise RuntimeError(f"系统初始化失败，请检查模型路径和NPU配置: {e}")
RuntimeError: 系统初始化失败，请检查模型路径和NPU配置: 模型加载失败，请检查模型路径和NPU内存: NPU out of memory. Tried to allocate 102.00 MiB (NPU 0; 60.97 GiB total capacity; 5.43 GiB already allocated; 5.43 GiB current active; 22.58 MiB free; 5.59 GiB reserved in total by PyTorch) If reserved memory is >> allocated memory try setting max_split_size_mb to avoid fragmentation.
2025-11-03 17:41:11,015 - __main__ - INFO - 系统已关闭
2025-11-03 17:41:11,912 - models.llm_models - INFO - 模型已卸载，内存已释放
2025-11-03 18:59:37,981 - __main__ - INFO - 系统启动中...
2025-11-03 18:59:50,899 - __main__ - INFO - ✅ 检测到盘古7B模型文件
2025-11-03 18:59:50,900 - __main__ - INFO - 正在初始化系统...
2025-11-03 18:59:50,900 - system_core - INFO - 系统核心初始化完成
2025-11-03 18:59:50,900 - system_core - INFO - 正在初始化系统组件...
2025-11-03 18:59:53,522 - system_core - INFO - 初始化题库...
2025-11-03 18:59:53,523 - data_management.question_db - INFO - 加载题库成功,共 49 道题目
2025-11-03 18:59:53,523 - data_management.question_db - INFO - 题库数据库初始化完成,路径: /home/weitianyu/teach_system/data/question_database.json
2025-11-03 18:59:53,523 - system_core - INFO - 初始化嵌入模型...
2025-11-03 18:59:53,523 - models.embedding_model - INFO - 初始化BGE-M3嵌入模型: /home/weitianyu/bgem3
2025-11-03 18:59:53,524 - system_core - INFO - ============================================================
2025-11-03 18:59:53,524 - system_core - INFO - 正在加载盘古7B模型（这可能需要几分钟）...
2025-11-03 18:59:53,524 - system_core - INFO - ============================================================
2025-11-03 18:59:53,524 - models.llm_models - INFO - 创建盘古7B模型实例（任务类型: pangu）
2025-11-03 18:59:53,524 - models.llm_models - INFO - 检测到 8 个NPU设备
2025-11-03 18:59:53,526 - models.llm_models - INFO - NPU 0: 总显存=65.46GB, 已用=0.00GB, 可用=65.46GB
2025-11-03 18:59:53,714 - models.llm_models - INFO - NPU 1: 总显存=65.46GB, 已用=0.00GB, 可用=65.46GB
2025-11-03 18:59:53,905 - models.llm_models - INFO - NPU 2: 总显存=65.46GB, 已用=0.00GB, 可用=65.46GB
2025-11-03 18:59:54,095 - models.llm_models - INFO - NPU 3: 总显存=65.46GB, 已用=0.00GB, 可用=65.46GB
2025-11-03 18:59:54,283 - models.llm_models - INFO - NPU 4: 总显存=65.46GB, 已用=0.00GB, 可用=65.46GB
2025-11-03 18:59:54,462 - models.llm_models - INFO - NPU 5: 总显存=65.46GB, 已用=0.00GB, 可用=65.46GB
2025-11-03 18:59:54,642 - models.llm_models - INFO - NPU 6: 总显存=65.46GB, 已用=0.00GB, 可用=65.46GB
2025-11-03 18:59:54,819 - models.llm_models - INFO - NPU 7: 总显存=65.46GB, 已用=0.00GB, 可用=65.46GB
2025-11-03 18:59:54,819 - models.llm_models - INFO - 选择NPU设备: npu:0 (可用显存: 65.46GB)
2025-11-03 18:59:54,819 - models.llm_models - INFO - 盘古7B模型设备配置: npu:0
2025-11-03 18:59:54,819 - models.llm_models - INFO - 正在加载盘古7B模型: /opt/pangu/openPangu-Embedded-7B-V1.1
2025-11-03 18:59:56,215 - models.llm_models - INFO - 开始加载模型权重...
2025-11-03 18:59:57,603 - datasets - INFO - PyTorch version 2.5.1 available.
2025-11-03 19:00:00,275 - models.llm_models - INFO - 将模型移动到设备: npu:0
2025-11-03 19:00:01,000 - models.llm_models - ERROR - ❌ 盘古7B模型加载失败: NPU out of memory. Tried to allocate 102.00 MiB (NPU 0; 60.97 GiB total capacity; 5.43 GiB already allocated; 5.43 GiB current active; 22.25 MiB free; 5.59 GiB reserved in total by PyTorch) If reserved memory is >> allocated memory try setting max_split_size_mb to avoid fragmentation.
2025-11-03 19:00:01,000 - system_core - ERROR - ❌ 系统初始化失败: 模型加载失败: NPU out of memory. Tried to allocate 102.00 MiB (NPU 0; 60.97 GiB total capacity; 5.43 GiB already allocated; 5.43 GiB current active; 22.25 MiB free; 5.59 GiB reserved in total by PyTorch) If reserved memory is >> allocated memory try setting max_split_size_mb to avoid fragmentation.
2025-11-03 19:00:01,000 - __main__ - ERROR - 系统运行出错: 模型加载失败: NPU out of memory. Tried to allocate 102.00 MiB (NPU 0; 60.97 GiB total capacity; 5.43 GiB already allocated; 5.43 GiB current active; 22.25 MiB free; 5.59 GiB reserved in total by PyTorch) If reserved memory is >> allocated memory try setting max_split_size_mb to avoid fragmentation.
Traceback (most recent call last):
  File "/home/weitianyu/teach_system/models/llm_models.py", line 146, in load_model
    self.model = self.model.to(self.device)
                 ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/root/miniconda3/envs/pangu/lib/python3.11/site-packages/transformers/modeling_utils.py", line 4110, in to
    return super().to(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/root/miniconda3/envs/pangu/lib/python3.11/site-packages/torch_npu/contrib/transfer_to_npu.py", line 161, in decorated
    return fn(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^
  File "/root/miniconda3/envs/pangu/lib/python3.11/site-packages/torch_npu/utils/_module.py", line 79, in to
    return self._apply(convert)
           ^^^^^^^^^^^^^^^^^^^^
  File "/root/miniconda3/envs/pangu/lib/python3.11/site-packages/torch/nn/modules/module.py", line 900, in _apply
    module._apply(fn)
  File "/root/miniconda3/envs/pangu/lib/python3.11/site-packages/torch/nn/modules/module.py", line 900, in _apply
    module._apply(fn)
  File "/root/miniconda3/envs/pangu/lib/python3.11/site-packages/torch/nn/modules/module.py", line 900, in _apply
    module._apply(fn)
  [Previous line repeated 2 more times]
  File "/root/miniconda3/envs/pangu/lib/python3.11/site-packages/torch/nn/modules/module.py", line 927, in _apply
    param_applied = fn(param)
                    ^^^^^^^^^
  File "/root/miniconda3/envs/pangu/lib/python3.11/site-packages/torch_npu/utils/_module.py", line 77, in convert
    return t.to(device, dtype if t.is_floating_point() or t.is_complex() else None, non_blocking)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/root/miniconda3/envs/pangu/lib/python3.11/site-packages/torch_npu/contrib/transfer_to_npu.py", line 161, in decorated
    return fn(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^
RuntimeError: NPU out of memory. Tried to allocate 102.00 MiB (NPU 0; 60.97 GiB total capacity; 5.43 GiB already allocated; 5.43 GiB current active; 22.25 MiB free; 5.59 GiB reserved in total by PyTorch) If reserved memory is >> allocated memory try setting max_split_size_mb to avoid fragmentation.

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/weitianyu/teach_system/main.py", line 96, in main
    system_core = create_system_core(config)
                  ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/weitianyu/teach_system/system_core.py", line 494, in create_system_core
    core.initialize()
  File "/home/weitianyu/teach_system/system_core.py", line 78, in initialize
    self.pangu_model.load_model()
  File "/home/weitianyu/teach_system/models/llm_models.py", line 161, in load_model
    raise RuntimeError(f"模型加载失败: {e}")
RuntimeError: 模型加载失败: NPU out of memory. Tried to allocate 102.00 MiB (NPU 0; 60.97 GiB total capacity; 5.43 GiB already allocated; 5.43 GiB current active; 22.25 MiB free; 5.59 GiB reserved in total by PyTorch) If reserved memory is >> allocated memory try setting max_split_size_mb to avoid fragmentation.
2025-11-03 19:00:01,006 - __main__ - INFO - 系统已关闭
2025-11-03 19:21:18,559 - __main__ - INFO - 系统启动中...
2025-11-03 19:21:23,171 - __main__ - INFO - 检测到 8 个NPU设备
2025-11-03 19:21:31,195 - __main__ - INFO - 正在初始化系统...
2025-11-03 19:21:31,195 - system_core - INFO - 系统核心初始化完成
2025-11-03 19:21:31,195 - system_core - INFO - 正在初始化系统组件...
2025-11-03 19:21:33,555 - system_core - ERROR - 系统初始化失败: cannot import name 'MockEmbedding' from 'models.embedding_model' (/home/weitianyu/teach_system/models/embedding_model.py)
2025-11-03 19:21:33,555 - __main__ - ERROR - 系统核心初始化失败: 系统初始化失败: cannot import name 'MockEmbedding' from 'models.embedding_model' (/home/weitianyu/teach_system/models/embedding_model.py)
Traceback (most recent call last):
  File "/home/weitianyu/teach_system/system_core.py", line 48, in initialize
    from models import create_llm_model, create_embedding_model
  File "/home/weitianyu/teach_system/models/__init__.py", line 7, in <module>
    from .embedding_model import create_embedding_model, PanGuEmbedding, BGE_M3_Embedding, MockEmbedding
ImportError: cannot import name 'MockEmbedding' from 'models.embedding_model' (/home/weitianyu/teach_system/models/embedding_model.py)

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/weitianyu/teach_system/main.py", line 101, in main
    system_core = create_system_core(config)
                  ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/weitianyu/teach_system/system_core.py", line 439, in create_system_core
    core.initialize()
  File "/home/weitianyu/teach_system/system_core.py", line 101, in initialize
    raise RuntimeError(f"系统初始化失败: {e}")
RuntimeError: 系统初始化失败: cannot import name 'MockEmbedding' from 'models.embedding_model' (/home/weitianyu/teach_system/models/embedding_model.py)
2025-11-03 19:21:33,557 - __main__ - INFO - 清理系统资源...
2025-11-03 19:21:33,557 - __main__ - INFO - 系统已关闭
2025-11-03 19:34:19,275 - __main__ - INFO - 🚀 系统启动中...
2025-11-03 19:34:19,276 - __main__ - INFO - ✅ 检测到盘古7B模型文件
2025-11-03 19:34:19,276 - __main__ - INFO - ⚙️  正在初始化系统...
2025-11-03 19:34:19,276 - system_core - INFO - ✅ 系统核心初始化完成
2025-11-03 19:34:19,276 - system_core - INFO - 🔄 正在初始化系统组件...
2025-11-03 19:34:26,594 - system_core - INFO - 📚 初始化题库...
2025-11-03 19:34:26,595 - data_management.question_db - INFO - 加载题库成功,共 49 道题目
2025-11-03 19:34:26,595 - data_management.question_db - INFO - 题库数据库初始化完成,路径: /home/weitianyu/teach_system/data/question_database.json
2025-11-03 19:34:26,595 - system_core - INFO - 🚀 初始化盘古7B模型（单例模式）...
2025-11-03 19:34:26,596 - models.embedding_model - INFO - 尝试使用盘古7B的嵌入功能...
2025-11-03 19:34:26,596 - models.embedding_model - INFO - 初始化盘古7B嵌入模型: /opt/pangu/openPangu-Embedded-7B-V1.1
2025-11-03 19:34:26,596 - models.llm_models - INFO - 🆕 创建新的盘古7B模型实例（任务类型: pangu）
2025-11-03 19:34:26,596 - models.llm_models - INFO - ✅ 检测到 8 个NPU设备
2025-11-03 19:34:34,214 - models.llm_models - INFO -   NPU 0: Ascend910B2, 总显存: 60.97 GB
2025-11-03 19:34:34,215 - models.llm_models - INFO -   NPU 1: Ascend910B2, 总显存: 60.97 GB
2025-11-03 19:34:34,215 - models.llm_models - INFO -   NPU 2: Ascend910B2, 总显存: 60.97 GB
2025-11-03 19:34:34,216 - models.llm_models - INFO -   NPU 3: Ascend910B2, 总显存: 60.97 GB
2025-11-03 19:34:34,216 - models.llm_models - INFO -   NPU 4: Ascend910B2, 总显存: 60.97 GB
2025-11-03 19:34:34,216 - models.llm_models - INFO -   NPU 5: Ascend910B2, 总显存: 60.97 GB
2025-11-03 19:34:34,217 - models.llm_models - INFO -   NPU 6: Ascend910B2, 总显存: 60.97 GB
2025-11-03 19:34:34,217 - models.llm_models - INFO -   NPU 7: Ascend910B2, 总显存: 60.97 GB
2025-11-03 19:34:34,217 - models.llm_models - INFO - 盘古7B模型设备配置: ['npu:0', 'npu:1', 'npu:2', 'npu:3', 'npu:4', 'npu:5', 'npu:6', 'npu:7']
2025-11-03 19:34:34,217 - system_core - INFO - 🔄 预加载盘古7B模型...
2025-11-03 19:34:34,217 - models.llm_models - INFO - 🔄 正在加载盘古7B模型: /opt/pangu/openPangu-Embedded-7B-V1.1
2025-11-03 19:34:35,292 - models.llm_models - INFO - 🚀 使用多NPU模式，跨8个设备分布模型
2025-11-03 19:34:37,076 - datasets - INFO - PyTorch version 2.5.1 available.
2025-11-03 19:34:37,474 - accelerate.utils.modeling - INFO - Based on the current allocation process, no modules could be assigned to the following devices due to insufficient memory:
  - 0: 2512912384 bytes required
These minimum requirements are specific to this allocation attempt and may vary. Consider increasing the available memory for these devices to at least the specified minimum, or adjusting the model config.
2025-11-03 19:34:42,603 - models.llm_models - INFO - 📊 模型分布情况: {'model.embed_tokens': 1, 'model.layers.0': 1, 'model.layers.1': 1, 'model.layers.2': 1, 'model.layers.3': 2, 'model.layers.4': 2, 'model.layers.5': 2, 'model.layers.6': 2, 'model.layers.7': 2, 'model.layers.8': 2, 'model.layers.9': 3, 'model.layers.10': 3, 'model.layers.11': 3, 'model.layers.12': 3, 'model.layers.13': 3, 'model.layers.14': 3, 'model.layers.15': 4, 'model.layers.16': 4, 'model.layers.17': 4, 'model.layers.18': 4, 'model.layers.19': 4, 'model.layers.20': 4, 'model.layers.21': 5, 'model.layers.22': 5, 'model.layers.23': 5, 'model.layers.24': 5, 'model.layers.25': 5, 'model.layers.26': 5, 'model.layers.27': 6, 'model.layers.28': 6, 'model.layers.29': 6, 'model.layers.30': 6, 'model.layers.31': 6, 'model.layers.32': 6, 'model.layers.33': 7, 'model.norm': 7, 'model.rotary_emb': 7, 'lm_head': 7}
2025-11-03 19:34:42,603 - models.llm_models - INFO - ✅ 盘古7B模型加载成功
2025-11-03 19:34:42,603 - system_core - INFO - ✅ 盘古7B模型预加载完成
2025-11-03 19:34:42,603 - system_core - INFO - ⚙️  初始化功能组件...
2025-11-03 19:34:42,603 - utils.evaluator - INFO - ✅ 学生评估器初始化完成（使用盘古7B模型）
2025-11-03 19:34:42,603 - visualization.kg_visualizer - INFO - 知识图谱可视化器初始化完成
2025-11-03 19:34:42,610 - utils.bkt_algorithm - INFO - BKT算法初始化完成
2025-11-03 19:34:42,610 - system_core - INFO - ✅ 系统初始化完成 - 使用盘古7B统一模型（多NPU支持）
2025-11-03 19:34:42,610 - __main__ - INFO - ✅ 系统核心初始化完成
2025-11-03 19:34:42,610 - __main__ - INFO - 📚 检查题库数据...
2025-11-03 19:34:42,611 - __main__ - INFO - ✅ 题库已有 49 道题目
2025-11-03 19:34:42,611 - __main__ - INFO - 🎨 正在创建UI界面...
2025-11-03 19:34:42,611 - ui.main_ui - INFO - UI界面初始化完成
2025-11-03 19:34:43,835 - __main__ - INFO - ✅ 系统启动成功!
2025-11-03 19:34:44,044 - httpx - INFO - HTTP Request: GET http://localhost:7860/gradio_api/startup-events "HTTP/1.1 200 OK"
2025-11-03 19:34:44,075 - httpx - INFO - HTTP Request: HEAD http://localhost:7860/ "HTTP/1.1 200 OK"
2025-11-03 19:34:44,149 - httpx - INFO - HTTP Request: GET https://api.gradio.app/pkg-version "HTTP/1.1 200 OK"
2025-11-03 19:35:04,226 - system_core - INFO - 🎯 开始自适应测评: 代数, 学生: student_001, 数量: 3
2025-11-03 19:35:04,226 - data_management.question_db - INFO - 筛选结果: 12 道题目
2025-11-03 19:35:04,227 - utils.bkt_algorithm - INFO - 初始化学生 student_001 在知识点 代数 的状态
2025-11-03 19:35:04,228 - data_management.question_db - INFO - 筛选结果: 10 道题目
2025-11-03 19:35:04,228 - data_management.question_db - INFO - 筛选结果: 2 道题目
2025-11-03 19:35:04,228 - data_management.question_db - INFO - 筛选结果: 2 道题目
2025-11-03 19:35:04,228 - system_core - INFO - ✅ 自适应测评开始，共3道题目，难度序列: ['简单', '中等', '中等']
2025-11-03 19:35:14,488 - system_core - INFO - ✍️  评估答案（使用预加载的盘古7B模型）...
2025-11-03 19:35:14,488 - utils.evaluator - INFO - 🤖 使用盘古7B模型进行智能答案评估
2025-11-03 19:35:25,191 - models.llm_models - ERROR - ❌ 文本生成失败: 'dict' object has no attribute 'input_ids'
2025-11-03 19:35:25,191 - utils.evaluator - ERROR - ❌ 答案检查失败: 生成失败: 'dict' object has no attribute 'input_ids'
2025-11-03 19:35:25,192 - system_core - INFO - ✅ 答案评估完成: 错误
2025-11-03 19:35:25,192 - utils.bkt_algorithm - INFO - 学生 student_001 在知识点 代数 答题记录: 掌握度 0.055, 正确: False
2025-11-03 19:35:25,192 - system_core - INFO - 📊 BKT算法更新: 掌握度 0.055
2025-11-03 19:35:58,861 - system_core - INFO - ✍️  评估答案（使用预加载的盘古7B模型）...
2025-11-03 19:35:58,861 - utils.evaluator - INFO - 🤖 使用盘古7B模型进行智能答案评估
2025-11-03 19:36:04,127 - models.llm_models - ERROR - ❌ 文本生成失败: 'dict' object has no attribute 'input_ids'
2025-11-03 19:36:04,128 - utils.evaluator - ERROR - ❌ 答案检查失败: 生成失败: 'dict' object has no attribute 'input_ids'
2025-11-03 19:36:04,128 - system_core - INFO - ✅ 答案评估完成: 错误
2025-11-03 19:36:04,128 - utils.bkt_algorithm - INFO - 学生 student_001 在知识点 代数 答题记录: 掌握度 0.010, 正确: False
2025-11-03 19:36:04,128 - system_core - INFO - 📊 BKT算法更新: 掌握度 0.010
2025-11-03 19:37:01,706 - system_core - INFO - ✍️  评估答案（使用预加载的盘古7B模型）...
2025-11-03 19:37:01,707 - utils.evaluator - INFO - 🤖 使用盘古7B模型进行智能答案评估
2025-11-03 19:37:08,191 - models.llm_models - ERROR - ❌ 文本生成失败: 'dict' object has no attribute 'input_ids'
2025-11-03 19:37:08,191 - utils.evaluator - ERROR - ❌ 答案检查失败: 生成失败: 'dict' object has no attribute 'input_ids'
2025-11-03 19:37:08,192 - system_core - INFO - ✅ 答案评估完成: 错误
2025-11-03 19:37:08,192 - utils.bkt_algorithm - INFO - 学生 student_001 在知识点 代数 答题记录: 掌握度 0.010, 正确: False
2025-11-03 19:37:08,192 - system_core - INFO - 📊 BKT算法更新: 掌握度 0.010
2025-11-03 19:37:11,218 - system_core - INFO - 📝 生成评估报告...
2025-11-03 19:37:11,218 - utils.evaluator - INFO - 🤖 使用盘古7B生成个性化学习建议...
2025-11-03 19:37:36,065 - models.llm_models - ERROR - ❌ 文本生成失败: 'dict' object has no attribute 'input_ids'
2025-11-03 19:37:36,066 - utils.evaluator - WARNING - ⚠️  生成个性化建议失败: 生成失败: 'dict' object has no attribute 'input_ids'
2025-11-03 19:37:36,066 - system_core - INFO - ✅ 评估报告生成完成
2025-11-03 19:39:33,787 - __main__ - INFO - 👋 系统已关闭
2025-11-03 19:39:54,310 - __main__ - INFO - 🚀 系统启动中...
2025-11-03 19:39:54,311 - __main__ - INFO - ✅ 检测到盘古7B模型文件
2025-11-03 19:39:54,311 - __main__ - INFO - ⚙️  正在初始化系统...
2025-11-03 19:39:54,311 - system_core - INFO - ✅ 系统核心初始化完成
2025-11-03 19:39:54,311 - system_core - INFO - 🔄 正在初始化系统组件...
2025-11-03 19:40:01,632 - system_core - INFO - 📚 初始化题库...
2025-11-03 19:40:01,632 - data_management.question_db - INFO - 加载题库成功,共 49 道题目
2025-11-03 19:40:01,633 - data_management.question_db - INFO - 题库数据库初始化完成,路径: /home/weitianyu/teach_system/data/question_database.json
2025-11-03 19:40:01,633 - system_core - INFO - 🚀 初始化盘古7B模型（单例模式）...
2025-11-03 19:40:01,633 - models.embedding_model - INFO - 尝试使用盘古7B的嵌入功能...
2025-11-03 19:40:01,633 - models.embedding_model - INFO - 初始化盘古7B嵌入模型: /opt/pangu/openPangu-Embedded-7B-V1.1
2025-11-03 19:40:01,633 - models.llm_models - INFO - 🆕 创建新的盘古7B模型实例（任务类型: pangu）
2025-11-03 19:40:01,633 - models.llm_models - INFO - ✅ 检测到 8 个NPU设备
2025-11-03 19:40:09,247 - models.llm_models - INFO -    NPU 0: Ascend910B2, 总显存: 60.97 GB
2025-11-03 19:40:09,248 - models.llm_models - INFO -    NPU 1: Ascend910B2, 总显存: 60.97 GB
2025-11-03 19:40:09,248 - models.llm_models - INFO -    NPU 2: Ascend910B2, 总显存: 60.97 GB
2025-11-03 19:40:09,249 - models.llm_models - INFO -    NPU 3: Ascend910B2, 总显存: 60.97 GB
2025-11-03 19:40:09,249 - models.llm_models - INFO -    NPU 4: Ascend910B2, 总显存: 60.97 GB
2025-11-03 19:40:09,249 - models.llm_models - INFO -    NPU 5: Ascend910B2, 总显存: 60.97 GB
2025-11-03 19:40:09,250 - models.llm_models - INFO -    NPU 6: Ascend910B2, 总显存: 60.97 GB
2025-11-03 19:40:09,250 - models.llm_models - INFO -    NPU 7: Ascend910B2, 总显存: 60.97 GB
2025-11-03 19:40:09,252 - models.llm_models - INFO - 📍 使用单NPU模式: npu:0 (显存最大)
2025-11-03 19:40:09,252 - models.llm_models - INFO - 盘古7B模型设备配置: npu:0 (共8个NPU)
2025-11-03 19:40:09,253 - system_core - INFO - 🔄 预加载盘古7B模型...
2025-11-03 19:40:09,253 - models.llm_models - INFO - 🔄 正在加载盘古7B模型: /opt/pangu/openPangu-Embedded-7B-V1.1
2025-11-03 19:40:09,253 - models.llm_models - INFO - 📍 目标设备: npu:0
2025-11-03 19:40:09,253 - models.llm_models - INFO - 🔤 加载tokenizer...
2025-11-03 19:40:10,313 - models.llm_models - INFO - ✅ Tokenizer加载完成
2025-11-03 19:40:10,313 - models.llm_models - INFO - 🤖 加载模型到 npu:0...
2025-11-03 19:40:12,117 - datasets - INFO - PyTorch version 2.5.1 available.
2025-11-03 19:40:14,720 - models.llm_models - INFO - 🔄 移动模型到 npu:0...
2025-11-03 19:40:15,414 - models.llm_models - ERROR - ❌ 盘古7B模型加载失败: NPU out of memory. Tried to allocate 102.00 MiB (NPU 0; 60.97 GiB total capacity; 5.43 GiB already allocated; 5.43 GiB current active; 22.16 MiB free; 5.59 GiB reserved in total by PyTorch) If reserved memory is >> allocated memory try setting max_split_size_mb to avoid fragmentation.
2025-11-03 19:40:15,418 - models.llm_models - ERROR - Traceback (most recent call last):
  File "/home/weitianyu/teach_system/models/llm_models.py", line 123, in load_model
    self.model = self.model.to(self.device)
                 ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/root/miniconda3/envs/pangu/lib/python3.11/site-packages/transformers/modeling_utils.py", line 4110, in to
    return super().to(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/root/miniconda3/envs/pangu/lib/python3.11/site-packages/torch_npu/contrib/transfer_to_npu.py", line 161, in decorated
    return fn(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^
  File "/root/miniconda3/envs/pangu/lib/python3.11/site-packages/torch_npu/utils/_module.py", line 79, in to
    return self._apply(convert)
           ^^^^^^^^^^^^^^^^^^^^
  File "/root/miniconda3/envs/pangu/lib/python3.11/site-packages/torch/nn/modules/module.py", line 900, in _apply
    module._apply(fn)
  File "/root/miniconda3/envs/pangu/lib/python3.11/site-packages/torch/nn/modules/module.py", line 900, in _apply
    module._apply(fn)
  File "/root/miniconda3/envs/pangu/lib/python3.11/site-packages/torch/nn/modules/module.py", line 900, in _apply
    module._apply(fn)
  [Previous line repeated 2 more times]
  File "/root/miniconda3/envs/pangu/lib/python3.11/site-packages/torch/nn/modules/module.py", line 927, in _apply
    param_applied = fn(param)
                    ^^^^^^^^^
  File "/root/miniconda3/envs/pangu/lib/python3.11/site-packages/torch_npu/utils/_module.py", line 77, in convert
    return t.to(device, dtype if t.is_floating_point() or t.is_complex() else None, non_blocking)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/root/miniconda3/envs/pangu/lib/python3.11/site-packages/torch_npu/contrib/transfer_to_npu.py", line 161, in decorated
    return fn(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^
RuntimeError: NPU out of memory. Tried to allocate 102.00 MiB (NPU 0; 60.97 GiB total capacity; 5.43 GiB already allocated; 5.43 GiB current active; 22.16 MiB free; 5.59 GiB reserved in total by PyTorch) If reserved memory is >> allocated memory try setting max_split_size_mb to avoid fragmentation.

2025-11-03 19:40:15,418 - system_core - ERROR - ❌ 系统初始化失败: 模型加载失败: NPU out of memory. Tried to allocate 102.00 MiB (NPU 0; 60.97 GiB total capacity; 5.43 GiB already allocated; 5.43 GiB current active; 22.16 MiB free; 5.59 GiB reserved in total by PyTorch) If reserved memory is >> allocated memory try setting max_split_size_mb to avoid fragmentation.
2025-11-03 19:40:15,419 - __main__ - ERROR - ❌ 系统运行出错: 系统初始化失败: 模型加载失败: NPU out of memory. Tried to allocate 102.00 MiB (NPU 0; 60.97 GiB total capacity; 5.43 GiB already allocated; 5.43 GiB current active; 22.16 MiB free; 5.59 GiB reserved in total by PyTorch) If reserved memory is >> allocated memory try setting max_split_size_mb to avoid fragmentation.
Traceback (most recent call last):
  File "/home/weitianyu/teach_system/models/llm_models.py", line 123, in load_model
    self.model = self.model.to(self.device)
                 ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/root/miniconda3/envs/pangu/lib/python3.11/site-packages/transformers/modeling_utils.py", line 4110, in to
    return super().to(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/root/miniconda3/envs/pangu/lib/python3.11/site-packages/torch_npu/contrib/transfer_to_npu.py", line 161, in decorated
    return fn(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^
  File "/root/miniconda3/envs/pangu/lib/python3.11/site-packages/torch_npu/utils/_module.py", line 79, in to
    return self._apply(convert)
           ^^^^^^^^^^^^^^^^^^^^
  File "/root/miniconda3/envs/pangu/lib/python3.11/site-packages/torch/nn/modules/module.py", line 900, in _apply
    module._apply(fn)
  File "/root/miniconda3/envs/pangu/lib/python3.11/site-packages/torch/nn/modules/module.py", line 900, in _apply
    module._apply(fn)
  File "/root/miniconda3/envs/pangu/lib/python3.11/site-packages/torch/nn/modules/module.py", line 900, in _apply
    module._apply(fn)
  [Previous line repeated 2 more times]
  File "/root/miniconda3/envs/pangu/lib/python3.11/site-packages/torch/nn/modules/module.py", line 927, in _apply
    param_applied = fn(param)
                    ^^^^^^^^^
  File "/root/miniconda3/envs/pangu/lib/python3.11/site-packages/torch_npu/utils/_module.py", line 77, in convert
    return t.to(device, dtype if t.is_floating_point() or t.is_complex() else None, non_blocking)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/root/miniconda3/envs/pangu/lib/python3.11/site-packages/torch_npu/contrib/transfer_to_npu.py", line 161, in decorated
    return fn(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^
RuntimeError: NPU out of memory. Tried to allocate 102.00 MiB (NPU 0; 60.97 GiB total capacity; 5.43 GiB already allocated; 5.43 GiB current active; 22.16 MiB free; 5.59 GiB reserved in total by PyTorch) If reserved memory is >> allocated memory try setting max_split_size_mb to avoid fragmentation.

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/weitianyu/teach_system/system_core.py", line 78, in initialize
    self.pangu_model.load_model()
  File "/home/weitianyu/teach_system/models/llm_models.py", line 140, in load_model
    raise RuntimeError(f"模型加载失败: {e}")
RuntimeError: 模型加载失败: NPU out of memory. Tried to allocate 102.00 MiB (NPU 0; 60.97 GiB total capacity; 5.43 GiB already allocated; 5.43 GiB current active; 22.16 MiB free; 5.59 GiB reserved in total by PyTorch) If reserved memory is >> allocated memory try setting max_split_size_mb to avoid fragmentation.

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/weitianyu/teach_system/main.py", line 54, in main
    system_core = create_system_core(config)
                  ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/weitianyu/teach_system/system_core.py", line 445, in create_system_core
    core.initialize()
  File "/home/weitianyu/teach_system/system_core.py", line 104, in initialize
    raise RuntimeError(f"系统初始化失败: {e}")
RuntimeError: 系统初始化失败: 模型加载失败: NPU out of memory. Tried to allocate 102.00 MiB (NPU 0; 60.97 GiB total capacity; 5.43 GiB already allocated; 5.43 GiB current active; 22.16 MiB free; 5.59 GiB reserved in total by PyTorch) If reserved memory is >> allocated memory try setting max_split_size_mb to avoid fragmentation.
2025-11-03 19:40:15,421 - __main__ - INFO - 👋 系统已关闭
2025-11-03 19:41:46,432 - __main__ - INFO - 🚀 系统启动中...
2025-11-03 19:41:46,432 - __main__ - INFO - ✅ 检测到盘古7B模型文件
2025-11-03 19:41:46,433 - __main__ - INFO - ⚙️  正在初始化系统...
2025-11-03 19:41:46,433 - system_core - INFO - ✅ 系统核心初始化完成
2025-11-03 19:41:46,433 - system_core - INFO - 🔄 正在初始化系统组件...
2025-11-03 19:41:53,701 - system_core - INFO - 📚 初始化题库...
2025-11-03 19:41:53,702 - data_management.question_db - INFO - 加载题库成功,共 49 道题目
2025-11-03 19:41:53,702 - data_management.question_db - INFO - 题库数据库初始化完成,路径: /home/weitianyu/teach_system/data/question_database.json
2025-11-03 19:41:53,702 - system_core - INFO - 🚀 初始化盘古7B模型（单例模式）...
2025-11-03 19:41:53,703 - models.embedding_model - INFO - 尝试使用盘古7B的嵌入功能...
2025-11-03 19:41:53,703 - models.embedding_model - INFO - 初始化盘古7B嵌入模型: /opt/pangu/openPangu-Embedded-7B-V1.1
2025-11-03 19:41:53,703 - models.llm_models - INFO - 🆕 创建新的盘古7B模型实例（任务类型: pangu）
2025-11-03 19:41:53,703 - models.llm_models - INFO - ✅ 检测到 8 个NPU设备
2025-11-03 19:42:01,418 - models.llm_models - INFO -   NPU 0: Ascend910B2, 总显存: 60.97 GB
2025-11-03 19:42:01,419 - models.llm_models - INFO -   NPU 1: Ascend910B2, 总显存: 60.97 GB
2025-11-03 19:42:01,419 - models.llm_models - INFO -   NPU 2: Ascend910B2, 总显存: 60.97 GB
2025-11-03 19:42:01,420 - models.llm_models - INFO -   NPU 3: Ascend910B2, 总显存: 60.97 GB
2025-11-03 19:42:01,420 - models.llm_models - INFO -   NPU 4: Ascend910B2, 总显存: 60.97 GB
2025-11-03 19:42:01,420 - models.llm_models - INFO -   NPU 5: Ascend910B2, 总显存: 60.97 GB
2025-11-03 19:42:01,421 - models.llm_models - INFO -   NPU 6: Ascend910B2, 总显存: 60.97 GB
2025-11-03 19:42:01,421 - models.llm_models - INFO -   NPU 7: Ascend910B2, 总显存: 60.97 GB
2025-11-03 19:42:01,421 - models.llm_models - INFO - 盘古7B模型设备配置: ['npu:0', 'npu:1', 'npu:2', 'npu:3', 'npu:4', 'npu:5', 'npu:6', 'npu:7']
2025-11-03 19:42:01,422 - system_core - INFO - 🔄 预加载盘古7B模型...
2025-11-03 19:42:01,422 - models.llm_models - INFO - 🔄 正在加载盘古7B模型: /opt/pangu/openPangu-Embedded-7B-V1.1
2025-11-03 19:42:02,520 - models.llm_models - INFO - 🚀 使用多NPU模式，跨8个设备分布模型
2025-11-03 19:42:04,382 - datasets - INFO - PyTorch version 2.5.1 available.
2025-11-03 19:42:04,783 - accelerate.utils.modeling - INFO - Based on the current allocation process, no modules could be assigned to the following devices due to insufficient memory:
  - 0: 2512912384 bytes required
These minimum requirements are specific to this allocation attempt and may vary. Consider increasing the available memory for these devices to at least the specified minimum, or adjusting the model config.
2025-11-03 19:42:09,951 - models.llm_models - INFO - ✅ 使用device_map='auto'模式成功加载
2025-11-03 19:42:09,954 - models.llm_models - INFO - 📊 模型分布情况:
2025-11-03 19:42:09,954 - models.llm_models - INFO -    1: 4 层
2025-11-03 19:42:09,954 - models.llm_models - INFO -    2: 6 层
2025-11-03 19:42:09,954 - models.llm_models - INFO -    3: 6 层
2025-11-03 19:42:09,954 - models.llm_models - INFO -    4: 6 层
2025-11-03 19:42:09,954 - models.llm_models - INFO -    5: 6 层
2025-11-03 19:42:09,954 - models.llm_models - INFO -    6: 6 层
2025-11-03 19:42:09,954 - models.llm_models - INFO -    7: 4 层
2025-11-03 19:42:09,954 - models.llm_models - INFO - ✅ 盘古7B模型加载成功
2025-11-03 19:42:09,954 - system_core - INFO - ✅ 盘古7B模型预加载完成
2025-11-03 19:42:09,954 - system_core - INFO - ⚙️  初始化功能组件...
2025-11-03 19:42:09,955 - utils.evaluator - INFO - ✅ 学生评估器初始化完成（使用盘古7B模型）
2025-11-03 19:42:09,955 - visualization.kg_visualizer - INFO - 知识图谱可视化器初始化完成
2025-11-03 19:42:09,957 - utils.bkt_algorithm - INFO - BKT算法初始化完成
2025-11-03 19:42:09,958 - system_core - INFO - ✅ 系统初始化完成 - 使用盘古7B统一模型（多NPU支持）
2025-11-03 19:42:09,958 - __main__ - INFO - ✅ 系统核心初始化完成
2025-11-03 19:42:09,958 - __main__ - INFO - 📚 检查题库数据...
2025-11-03 19:42:09,958 - __main__ - INFO - ✅ 题库已有 49 道题目
2025-11-03 19:42:09,958 - __main__ - INFO - 🎨 正在创建UI界面...
2025-11-03 19:42:09,958 - ui.main_ui - INFO - UI界面初始化完成
2025-11-03 19:42:11,204 - __main__ - INFO - ✅ 系统启动成功!
2025-11-03 19:42:11,411 - httpx - INFO - HTTP Request: GET http://localhost:7860/gradio_api/startup-events "HTTP/1.1 200 OK"
2025-11-03 19:42:11,441 - httpx - INFO - HTTP Request: HEAD http://localhost:7860/ "HTTP/1.1 200 OK"
2025-11-03 19:42:11,595 - httpx - INFO - HTTP Request: GET https://api.gradio.app/pkg-version "HTTP/1.1 200 OK"
2025-11-03 19:42:32,805 - system_core - INFO - 🎯 开始自适应测评: 代数, 学生: student_001, 数量: 3
2025-11-03 19:42:32,805 - data_management.question_db - INFO - 筛选结果: 12 道题目
2025-11-03 19:42:32,805 - utils.bkt_algorithm - INFO - 初始化学生 student_001 在知识点 代数 的状态
2025-11-03 19:42:32,805 - data_management.question_db - INFO - 筛选结果: 10 道题目
2025-11-03 19:42:32,805 - data_management.question_db - INFO - 筛选结果: 2 道题目
2025-11-03 19:42:32,806 - data_management.question_db - INFO - 筛选结果: 2 道题目
2025-11-03 19:42:32,806 - system_core - INFO - ✅ 自适应测评开始，共3道题目，难度序列: ['简单', '中等', '中等']
2025-11-03 19:42:39,358 - system_core - INFO - ✍️  评估答案（使用预加载的盘古7B模型）...
2025-11-03 19:42:39,359 - utils.evaluator - INFO - 🤖 使用盘古7B模型进行智能答案评估
2025-11-03 19:42:45,871 - system_core - INFO - ✅ 答案评估完成: 正确
2025-11-03 19:42:45,872 - utils.bkt_algorithm - INFO - 学生 student_001 在知识点 代数 答题记录: 掌握度 0.650, 正确: True
2025-11-03 19:42:45,872 - system_core - INFO - 📊 BKT算法更新: 掌握度 0.650
2025-11-03 19:43:18,106 - system_core - INFO - ✍️  评估答案（使用预加载的盘古7B模型）...
2025-11-03 19:43:18,106 - utils.evaluator - INFO - 🤖 使用盘古7B模型进行智能答案评估
2025-11-03 19:43:23,099 - system_core - INFO - ✅ 答案评估完成: 错误
2025-11-03 19:43:23,099 - utils.bkt_algorithm - INFO - 学生 student_001 在知识点 代数 答题记录: 掌握度 0.199, 正确: False
2025-11-03 19:43:23,099 - system_core - INFO - 📊 BKT算法更新: 掌握度 0.199
2025-11-03 19:43:42,238 - system_core - INFO - ✍️  评估答案（使用预加载的盘古7B模型）...
2025-11-03 19:43:42,238 - utils.evaluator - INFO - 🤖 使用盘古7B模型进行智能答案评估
2025-11-03 19:43:48,871 - system_core - INFO - ✅ 答案评估完成: 正确
2025-11-03 19:43:48,872 - utils.bkt_algorithm - INFO - 学生 student_001 在知识点 代数 答题记录: 掌握度 0.542, 正确: True
2025-11-03 19:43:48,872 - system_core - INFO - 📊 BKT算法更新: 掌握度 0.542
2025-11-03 19:43:57,321 - system_core - INFO - 📝 生成评估报告...
2025-11-03 19:43:57,322 - utils.evaluator - INFO - 🤖 使用盘古7B生成个性化学习建议...
2025-11-03 19:44:29,808 - system_core - INFO - ✅ 评估报告生成完成
2025-11-03 19:45:16,425 - visualization.kg_visualizer - INFO - 知识图谱构建完成: 79 个节点, 286 条边
2025-11-03 19:55:08,340 - __main__ - INFO - 👋 系统已关闭
2025-11-03 19:57:30,604 - __main__ - INFO - 🚀 系统启动中...
2025-11-03 19:57:30,604 - __main__ - INFO - ✅ 检测到盘古7B模型文件
2025-11-03 19:57:30,605 - __main__ - INFO - ⚙️  正在初始化系统...
2025-11-03 19:57:30,605 - system_core - INFO - ✅ 系统核心初始化完成
2025-11-03 19:57:30,605 - system_core - INFO - 🔄 正在初始化系统组件...
2025-11-03 19:57:37,922 - system_core - INFO - 📚 初始化题库...
2025-11-03 19:57:37,922 - data_management.question_db - INFO - 加载题库成功,共 49 道题目
2025-11-03 19:57:37,923 - data_management.question_db - INFO - 题库数据库初始化完成,路径: /home/weitianyu/teach_system/data/question_database.json
2025-11-03 19:57:37,923 - system_core - INFO - 🚀 初始化盘古7B模型（单例模式）...
2025-11-03 19:57:37,923 - models.embedding_model - INFO - 尝试使用盘古7B的嵌入功能...
2025-11-03 19:57:37,923 - models.embedding_model - INFO - 初始化盘古7B嵌入模型: /opt/pangu/openPangu-Embedded-7B-V1.1
2025-11-03 19:57:37,923 - models.llm_models - INFO - 🆕 创建新的盘古7B模型实例（任务类型: pangu）
2025-11-03 19:57:37,923 - models.llm_models - INFO - ✅ 检测到 8 个NPU设备
2025-11-03 19:57:45,597 - models.llm_models - INFO -   NPU 0: Ascend910B2, 总显存: 60.97 GB
2025-11-03 19:57:45,598 - models.llm_models - INFO -   NPU 1: Ascend910B2, 总显存: 60.97 GB
2025-11-03 19:57:45,598 - models.llm_models - INFO -   NPU 2: Ascend910B2, 总显存: 60.97 GB
2025-11-03 19:57:45,599 - models.llm_models - INFO -   NPU 3: Ascend910B2, 总显存: 60.97 GB
2025-11-03 19:57:45,599 - models.llm_models - INFO -   NPU 4: Ascend910B2, 总显存: 60.97 GB
2025-11-03 19:57:45,599 - models.llm_models - INFO -   NPU 5: Ascend910B2, 总显存: 60.97 GB
2025-11-03 19:57:45,600 - models.llm_models - INFO -   NPU 6: Ascend910B2, 总显存: 60.97 GB
2025-11-03 19:57:45,600 - models.llm_models - INFO -   NPU 7: Ascend910B2, 总显存: 60.97 GB
2025-11-03 19:57:45,600 - models.llm_models - INFO - 盘古7B模型设备配置: ['npu:0', 'npu:1', 'npu:2', 'npu:3', 'npu:4', 'npu:5', 'npu:6', 'npu:7']
2025-11-03 19:57:45,601 - system_core - INFO - 🔄 预加载盘古7B模型...
2025-11-03 19:57:45,601 - models.llm_models - INFO - 🔄 正在加载盘古7B模型: /opt/pangu/openPangu-Embedded-7B-V1.1
2025-11-03 19:57:46,677 - models.llm_models - INFO - 🚀 使用多NPU模式，跨8个设备分布模型
2025-11-03 19:57:48,471 - datasets - INFO - PyTorch version 2.5.1 available.
2025-11-03 19:57:48,869 - accelerate.utils.modeling - INFO - Based on the current allocation process, no modules could be assigned to the following devices due to insufficient memory:
  - 0: 2512912384 bytes required
These minimum requirements are specific to this allocation attempt and may vary. Consider increasing the available memory for these devices to at least the specified minimum, or adjusting the model config.
2025-11-03 19:57:54,072 - models.llm_models - INFO - ✅ 使用device_map='auto'模式成功加载
2025-11-03 19:57:54,075 - models.llm_models - INFO - 📊 模型分布情况:
2025-11-03 19:57:54,075 - models.llm_models - INFO -    1: 4 层
2025-11-03 19:57:54,075 - models.llm_models - INFO -    2: 6 层
2025-11-03 19:57:54,075 - models.llm_models - INFO -    3: 6 层
2025-11-03 19:57:54,075 - models.llm_models - INFO -    4: 6 层
2025-11-03 19:57:54,075 - models.llm_models - INFO -    5: 6 层
2025-11-03 19:57:54,076 - models.llm_models - INFO -    6: 6 层
2025-11-03 19:57:54,076 - models.llm_models - INFO -    7: 4 层
2025-11-03 19:57:54,076 - models.llm_models - INFO - ✅ 盘古7B模型加载成功
2025-11-03 19:57:54,076 - system_core - INFO - ✅ 盘古7B模型预加载完成
2025-11-03 19:57:54,076 - system_core - INFO - ⚙️  初始化功能组件...
2025-11-03 19:57:54,076 - utils.evaluator - INFO - ✅ 学生评估器初始化完成（使用盘古7B模型，优化版）
2025-11-03 19:57:54,076 - visualization.kg_visualizer - INFO - 知识图谱可视化器初始化完成
2025-11-03 19:57:54,079 - utils.bkt_algorithm - INFO - BKT算法初始化完成
2025-11-03 19:57:54,079 - system_core - INFO - ✅ 系统初始化完成 - 使用盘古7B统一模型（多NPU支持）
2025-11-03 19:57:54,079 - __main__ - INFO - ✅ 系统核心初始化完成
2025-11-03 19:57:54,079 - __main__ - INFO - 📚 检查题库数据...
2025-11-03 19:57:54,079 - __main__ - INFO - ✅ 题库已有 49 道题目
2025-11-03 19:57:54,079 - __main__ - INFO - 🎨 正在创建UI界面...
2025-11-03 19:57:54,079 - ui.main_ui - INFO - UI界面初始化完成
2025-11-03 19:57:55,160 - httpx - INFO - HTTP Request: GET https://api.gradio.app/pkg-version "HTTP/1.1 200 OK"
2025-11-03 19:57:55,287 - __main__ - INFO - ✅ 系统启动成功!
2025-11-03 19:57:55,479 - httpx - INFO - HTTP Request: GET http://localhost:7860/gradio_api/startup-events "HTTP/1.1 200 OK"
2025-11-03 19:57:55,509 - httpx - INFO - HTTP Request: HEAD http://localhost:7860/ "HTTP/1.1 200 OK"
2025-11-03 19:59:20,002 - system_core - INFO - 🎯 开始自适应测评: 代数, 学生: student_001, 数量: 5
2025-11-03 19:59:20,002 - data_management.question_db - INFO - 筛选结果: 12 道题目
2025-11-03 19:59:20,002 - utils.bkt_algorithm - INFO - 初始化学生 student_001 在知识点 代数 的状态
2025-11-03 19:59:20,003 - data_management.question_db - INFO - 筛选结果: 10 道题目
2025-11-03 19:59:20,003 - data_management.question_db - INFO - 筛选结果: 2 道题目
2025-11-03 19:59:20,003 - data_management.question_db - INFO - 筛选结果: 2 道题目
2025-11-03 19:59:20,003 - data_management.question_db - INFO - 筛选结果: 2 道题目
2025-11-03 19:59:20,003 - system_core - INFO - 题库中没有更多中等难度的代数题目，从其他难度中选择
2025-11-03 19:59:20,003 - system_core - INFO - 从其他难度中选择了题目(实际难度: 简单)
2025-11-03 19:59:20,003 - data_management.question_db - INFO - 筛选结果: 2 道题目
2025-11-03 19:59:20,003 - system_core - INFO - 题库中没有更多中等难度的代数题目，从其他难度中选择
2025-11-03 19:59:20,003 - system_core - INFO - 从其他难度中选择了题目(实际难度: 简单)
2025-11-03 19:59:20,003 - system_core - INFO - ✅ 自适应测评开始，共5道题目，难度序列: ['简单', '中等', '中等', '中等', '中等']
2025-11-03 19:59:23,748 - system_core - INFO - ✍️  评估答案（使用预加载的盘古7B模型）...
2025-11-03 19:59:23,749 - utils.evaluator - INFO - 🤖 使用盘古7B模型进行智能答案评估（严格模式）
2025-11-03 19:59:39,850 - utils.evaluator - INFO - 📝 模型响应: 判定结果: 错误  
理由: 学生答案遗漏了标准答案中关于极限当 x → −∞ 时 f(x) → −∞ 的关键信息，未说明函数在实数域上无下界的结论，仅给出 f(0) 和 f(2) 的值，未完整回答题目要求。虽然学生正确求出临界点并计算了函数值，但未结合极限分析得出“无最小值”的结论，信息不完整，不符合评判标准。...
2025-11-03 19:59:39,851 - utils.evaluator - INFO - ✅ 成功解析模型响应: 错误
2025-11-03 19:59:39,851 - system_core - INFO - ✅ 答案评估完成: 错误
2025-11-03 19:59:39,851 - utils.bkt_algorithm - INFO - 学生 student_001 在知识点 代数 答题记录: 掌握度 0.055, 正确: False
2025-11-03 19:59:39,851 - system_core - INFO - 📊 BKT算法更新: 掌握度 0.055
2025-11-03 19:59:54,145 - system_core - INFO - ✍️  评估答案（使用预加载的盘古7B模型）...
2025-11-03 19:59:54,145 - utils.evaluator - INFO - 🤖 使用盘古7B模型进行智能答案评估（严格模式）
2025-11-03 20:00:03,702 - utils.evaluator - INFO - 📝 模型响应: 判定结果: 错误  
理由: 学生答案遗漏了标准答案中的一部分关键信息。标准答案要求解出所有满足不等式的区间，即 x < -1 或 x > 4，而学生答案只给出了 x < -1，遗漏了 x > 4 的部分。因此，学生答案不完整，不符合评判标准。...
2025-11-03 20:00:03,702 - utils.evaluator - INFO - ✅ 成功解析模型响应: 错误
2025-11-03 20:00:03,702 - system_core - INFO - ✅ 答案评估完成: 错误
2025-11-03 20:00:03,702 - utils.bkt_algorithm - INFO - 学生 student_001 在知识点 代数 答题记录: 掌握度 0.010, 正确: False
2025-11-03 20:00:03,702 - system_core - INFO - 📊 BKT算法更新: 掌握度 0.010
2025-11-03 20:00:36,316 - system_core - INFO - ✍️  评估答案（使用预加载的盘古7B模型）...
2025-11-03 20:00:36,316 - utils.evaluator - INFO - 🤖 使用盘古7B模型进行智能答案评估（严格模式）
2025-11-03 20:00:49,633 - utils.evaluator - INFO - 📝 模型响应: 判定结果: 正确  
理由: 学生答案完整地给出了通项公式 \( a_n = \frac{2}{2n-1} \) 的推导过程，并通过数学归纳法验证了其正确性，与标准答案一致。虽然学生答案未直接写出 \( a_n = 2/(2n-1) \)，但以文字形式表达了相同的意思，且信息完整、准确，符合等价性要求。...
2025-11-03 20:00:49,633 - utils.evaluator - INFO - ✅ 成功解析模型响应: 正确
2025-11-03 20:00:49,633 - system_core - INFO - ✅ 答案评估完成: 正确
2025-11-03 20:00:49,633 - utils.bkt_algorithm - INFO - 学生 student_001 在知识点 代数 答题记录: 掌握度 0.224, 正确: True
2025-11-03 20:00:49,634 - system_core - INFO - 📊 BKT算法更新: 掌握度 0.224
2025-11-03 20:01:15,528 - system_core - INFO - ✍️  评估答案（使用预加载的盘古7B模型）...
2025-11-03 20:01:15,528 - utils.evaluator - INFO - 🤖 使用盘古7B模型进行智能答案评估（严格模式）
2025-11-03 20:01:22,021 - utils.evaluator - INFO - 📝 模型响应: 判定结果: 正确  
理由: 学生答案与标准答案完全一致，正确解出 x = 5，并给出了完整的解题过程和检验步骤，信息完整且准确，符合评判标准。...
2025-11-03 20:01:22,022 - utils.evaluator - INFO - ✅ 成功解析模型响应: 正确
2025-11-03 20:01:22,022 - system_core - INFO - ✅ 答案评估完成: 正确
2025-11-03 20:01:22,022 - utils.bkt_algorithm - INFO - 学生 student_001 在知识点 代数 答题记录: 掌握度 0.571, 正确: True
2025-11-03 20:01:22,022 - system_core - INFO - 📊 BKT算法更新: 掌握度 0.571
2025-11-03 20:01:32,208 - system_core - INFO - ✍️  评估答案（使用预加载的盘古7B模型）...
2025-11-03 20:01:32,208 - utils.evaluator - INFO - 🤖 使用盘古7B模型进行智能答案评估（严格模式）
2025-11-03 20:01:43,208 - utils.evaluator - INFO - 📝 模型响应: 判定结果: 错误  
理由: 学生答案“k<1”不完整且不准确。标准答案要求的是“-1/2 < k < 0”，而学生答案仅给出“k<1”，遗漏了下界限制“k > -1/2”，且未体现k必须为负的条件。此外，学生答案未提及判别式条件，导致关键信息缺失，不符合完整性要求。...
2025-11-03 20:01:43,208 - utils.evaluator - INFO - ✅ 成功解析模型响应: 错误
2025-11-03 20:01:43,208 - system_core - INFO - ✅ 答案评估完成: 错误
2025-11-03 20:01:43,208 - utils.bkt_algorithm - INFO - 学生 student_001 在知识点 代数 答题记录: 掌握度 0.152, 正确: False
2025-11-03 20:01:43,208 - system_core - INFO - 📊 BKT算法更新: 掌握度 0.152
2025-11-03 20:01:50,481 - system_core - INFO - 📝 生成评估报告...
2025-11-03 20:01:50,482 - utils.evaluator - INFO - 🤖 使用盘古7B生成个性化学习建议...
2025-11-03 20:02:34,231 - system_core - INFO - ✅ 评估报告生成完成
2025-11-03 20:12:40,616 - __main__ - INFO - 👋 系统已关闭
2025-11-03 20:20:41,710 - __main__ - INFO - 🚀 系统启动中...
2025-11-03 20:20:41,710 - __main__ - INFO - ✅ 检测到盘古7B模型文件
2025-11-03 20:20:41,710 - __main__ - INFO - ⚙️  正在初始化系统...
2025-11-03 20:20:41,710 - system_core - INFO - ✅ 系统核心初始化完成（自适应增强版）
2025-11-03 20:20:41,710 - system_core - INFO - 🔄 正在初始化系统组件...
2025-11-03 20:20:49,017 - system_core - INFO - 📚 初始化题库...
2025-11-03 20:20:49,017 - data_management.question_db - INFO - 加载题库成功,共 49 道题目
2025-11-03 20:20:49,018 - data_management.question_db - INFO - 题库数据库初始化完成,路径: /home/weitianyu/teach_system/data/question_database.json
2025-11-03 20:20:49,018 - system_core - INFO - 🚀 初始化盘古7B模型（单例模式）...
2025-11-03 20:20:49,018 - models.embedding_model - INFO - 尝试使用盘古7B的嵌入功能...
2025-11-03 20:20:49,018 - models.embedding_model - INFO - 初始化盘古7B嵌入模型: /opt/pangu/openPangu-Embedded-7B-V1.1
2025-11-03 20:20:49,018 - models.llm_models - INFO - 🆕 创建新的盘古7B模型实例（任务类型: pangu）
2025-11-03 20:20:49,018 - models.llm_models - INFO - ✅ 检测到 8 个NPU设备
2025-11-03 20:20:56,635 - models.llm_models - INFO -   NPU 0: Ascend910B2, 总显存: 60.97 GB
2025-11-03 20:20:56,635 - models.llm_models - INFO -   NPU 1: Ascend910B2, 总显存: 60.97 GB
2025-11-03 20:20:56,636 - models.llm_models - INFO -   NPU 2: Ascend910B2, 总显存: 60.97 GB
2025-11-03 20:20:56,636 - models.llm_models - INFO -   NPU 3: Ascend910B2, 总显存: 60.97 GB
2025-11-03 20:20:56,636 - models.llm_models - INFO -   NPU 4: Ascend910B2, 总显存: 60.97 GB
2025-11-03 20:20:56,637 - models.llm_models - INFO -   NPU 5: Ascend910B2, 总显存: 60.97 GB
2025-11-03 20:20:56,637 - models.llm_models - INFO -   NPU 6: Ascend910B2, 总显存: 60.97 GB
2025-11-03 20:20:56,638 - models.llm_models - INFO -   NPU 7: Ascend910B2, 总显存: 60.97 GB
2025-11-03 20:20:56,638 - models.llm_models - INFO - 盘古7B模型设备配置: ['npu:0', 'npu:1', 'npu:2', 'npu:3', 'npu:4', 'npu:5', 'npu:6', 'npu:7']
2025-11-03 20:20:56,638 - system_core - INFO - 🔄 预加载盘古7B模型...
2025-11-03 20:20:56,638 - models.llm_models - INFO - 🔄 正在加载盘古7B模型: /opt/pangu/openPangu-Embedded-7B-V1.1
2025-11-03 20:20:57,705 - models.llm_models - INFO - 🚀 使用多NPU模式，跨8个设备分布模型
2025-11-03 20:20:59,489 - datasets - INFO - PyTorch version 2.5.1 available.
2025-11-03 20:20:59,886 - accelerate.utils.modeling - INFO - Based on the current allocation process, no modules could be assigned to the following devices due to insufficient memory:
  - 0: 2512912384 bytes required
These minimum requirements are specific to this allocation attempt and may vary. Consider increasing the available memory for these devices to at least the specified minimum, or adjusting the model config.
2025-11-03 20:21:05,100 - models.llm_models - INFO - ✅ 使用device_map='auto'模式成功加载
2025-11-03 20:21:05,103 - models.llm_models - INFO - 📊 模型分布情况:
2025-11-03 20:21:05,103 - models.llm_models - INFO -    1: 4 层
2025-11-03 20:21:05,103 - models.llm_models - INFO -    2: 6 层
2025-11-03 20:21:05,103 - models.llm_models - INFO -    3: 6 层
2025-11-03 20:21:05,103 - models.llm_models - INFO -    4: 6 层
2025-11-03 20:21:05,104 - models.llm_models - INFO -    5: 6 层
2025-11-03 20:21:05,104 - models.llm_models - INFO -    6: 6 层
2025-11-03 20:21:05,104 - models.llm_models - INFO -    7: 4 层
2025-11-03 20:21:05,104 - models.llm_models - INFO - ✅ 盘古7B模型加载成功
2025-11-03 20:21:05,104 - system_core - INFO - ✅ 盘古7B模型预加载完成
2025-11-03 20:21:05,104 - system_core - INFO - ⚙️  初始化功能组件...
2025-11-03 20:21:05,107 - utils.bkt_algorithm - INFO - ✅ 加载学生状态成功: 3 个学生, 3 条记录
2025-11-03 20:21:05,107 - utils.bkt_algorithm - INFO - ✅ BKT算法初始化完成（持久化模式，存储路径: /home/weitianyu/teach_system/data/student_states.json）
2025-11-03 20:21:05,107 - utils.evaluator - INFO - ✅ 个性化学生评估器初始化完成
2025-11-03 20:21:05,108 - visualization.kg_visualizer - INFO - 知识图谱可视化器初始化完成
2025-11-03 20:21:05,108 - system_core - INFO - ✅ 系统初始化完成 - 深度个性化自适应学习版
2025-11-03 20:21:05,108 - __main__ - INFO - ✅ 系统核心初始化完成
2025-11-03 20:21:05,108 - __main__ - INFO - 📚 检查题库数据...
2025-11-03 20:21:05,108 - __main__ - INFO - ✅ 题库已有 49 道题目
2025-11-03 20:21:05,108 - __main__ - INFO - 🎨 正在创建UI界面...
2025-11-03 20:21:05,108 - ui.main_ui - INFO - UI界面初始化完成
2025-11-03 20:21:06,336 - __main__ - INFO - ✅ 系统启动成功!
2025-11-03 20:21:06,528 - httpx - INFO - HTTP Request: GET http://localhost:7860/gradio_api/startup-events "HTTP/1.1 200 OK"
2025-11-03 20:21:06,558 - httpx - INFO - HTTP Request: HEAD http://localhost:7860/ "HTTP/1.1 200 OK"
2025-11-03 20:21:07,217 - httpx - INFO - HTTP Request: GET https://api.gradio.app/pkg-version "HTTP/1.1 200 OK"
2025-11-03 20:21:30,165 - system_core - INFO - 🎯 开始自适应测评: 代数, 学生: 老铁, 数量: 5
2025-11-03 20:21:30,165 - data_management.question_db - INFO - 筛选结果: 12 道题目
2025-11-03 20:21:30,166 - utils.bkt_algorithm - INFO - 🆕 初始化学生 老铁 在知识点 代数 的状态 (初始掌握度: 0.300)
2025-11-03 20:21:30,166 - system_core - INFO - 📊 学生 老铁 在 代数 的当前掌握度: 0.300
2025-11-03 20:21:30,167 - system_core - INFO - ✅ 选中题目 8 (难度: 中等)
2025-11-03 20:21:30,167 - system_core - INFO - ✅ 测评开始，第1题: 解不等式 (2x−3)/(x+1) > 1。... (难度: 中等)
2025-11-03 20:21:36,823 - system_core - INFO - ✍️  评估答案（题目 1/5）...
2025-11-03 20:21:36,823 - utils.evaluator - INFO - 🤖 使用盘古7B模型进行智能答案评估（严格模式）
2025-11-03 20:21:48,837 - system_core - INFO - ✅ 答案评估完成: ✗ 错误
2025-11-03 20:21:48,839 - utils.bkt_algorithm - INFO - 📝 学生 老铁 在知识点 代数 答题记录: 掌握度 0.300 → 0.055 (✗)
2025-11-03 20:21:48,839 - system_core - INFO - 📊 BKT更新: 掌握度 0.300 → 0.055 (变化: -0.245), 推荐难度: 简单
2025-11-03 20:21:48,839 - system_core - INFO - 🔄 根据新掌握度 0.055 动态选择下一题...
2025-11-03 20:21:48,839 - system_core - INFO - ✅ 选中题目 3 (难度: 简单)
2025-11-03 20:21:48,839 - system_core - INFO - ✅ 已准备下一题 (难度: 简单)
2025-11-03 20:21:53,614 - system_core - INFO - 📄 加载第 2 题: 求函数 f(x) = x^3 − 3x^2 + 4 在实数域上的最小值（如果有下界）。...
2025-11-03 20:22:12,240 - system_core - INFO - ✍️  评估答案（题目 2/5）...
2025-11-03 20:22:12,241 - utils.evaluator - INFO - 🤖 使用盘古7B模型进行智能答案评估（严格模式）
2025-11-03 20:22:24,697 - system_core - INFO - ✅ 答案评估完成: ✓ 正确
2025-11-03 20:22:24,699 - utils.bkt_algorithm - INFO - 📝 学生 老铁 在知识点 代数 答题记录: 掌握度 0.055 → 0.319 (✓)
2025-11-03 20:22:24,699 - system_core - INFO - 📊 BKT更新: 掌握度 0.055 → 0.319 (变化: +0.264), 推荐难度: 中等
2025-11-03 20:22:24,699 - system_core - INFO - 🔄 根据新掌握度 0.319 动态选择下一题...
2025-11-03 20:22:24,699 - system_core - INFO - ✅ 选中题目 2 (难度: 中等)
2025-11-03 20:22:24,699 - system_core - INFO - ✅ 已准备下一题 (难度: 中等)
2025-11-03 20:22:31,778 - system_core - INFO - 📄 加载第 3 题: 已知数列 {a_n} 满足 a_1 = 2，且对 n ≥ 1，有 a_{n+1} = a_n / (...
2025-11-03 20:22:37,585 - system_core - INFO - ✍️  评估答案（题目 3/5）...
2025-11-03 20:22:37,585 - utils.evaluator - INFO - 🤖 使用盘古7B模型进行智能答案评估（严格模式）
2025-11-03 20:22:48,641 - system_core - INFO - ✅ 答案评估完成: ✓ 正确
2025-11-03 20:22:48,643 - utils.bkt_algorithm - INFO - 📝 学生 老铁 在知识点 代数 答题记录: 掌握度 0.319 → 0.667 (✓)
2025-11-03 20:22:48,643 - system_core - INFO - 📊 BKT更新: 掌握度 0.319 → 0.667 (变化: +0.348), 推荐难度: 中等
2025-11-03 20:22:48,643 - system_core - INFO - 🔄 根据新掌握度 0.667 动态选择下一题...
2025-11-03 20:22:48,643 - system_core - INFO - ✅ 使用备选难度，选中题目 1 (难度: 简单)
2025-11-03 20:22:48,643 - system_core - INFO - ✅ 已准备下一题 (难度: 简单)
2025-11-03 20:22:55,068 - system_core - INFO - 📄 加载第 4 题: 设实数 x 满足 sqrt(x+4) - sqrt(x-1) = 1。求 x。...
2025-11-03 20:22:58,522 - system_core - INFO - ✍️  评估答案（题目 4/5）...
2025-11-03 20:22:58,522 - utils.evaluator - INFO - 🤖 使用盘古7B模型进行智能答案评估（严格模式）
2025-11-03 20:23:03,763 - system_core - INFO - ✅ 答案评估完成: ✓ 正确
2025-11-03 20:23:03,765 - utils.bkt_algorithm - INFO - 📝 学生 老铁 在知识点 代数 答题记录: 掌握度 0.667 → 0.886 (✓)
2025-11-03 20:23:03,765 - system_core - INFO - 📊 BKT更新: 掌握度 0.667 → 0.886 (变化: +0.219), 推荐难度: 困难
2025-11-03 20:23:03,765 - system_core - INFO - 🔄 根据新掌握度 0.886 动态选择下一题...
2025-11-03 20:23:03,765 - system_core - WARNING - ⚠️  无法按难度筛选，随机选择题目
2025-11-03 20:23:03,765 - system_core - INFO - ✅ 随机选中题目 16 (难度: 简单)
2025-11-03 20:23:03,765 - system_core - INFO - ✅ 已准备下一题 (难度: 简单)
2025-11-03 20:23:07,037 - system_core - INFO - 📄 加载第 5 题: 在平面直角坐标系中，点 A(1,0)、B(0,1)。求直线 AB 关于直线 y = x 的对称直线的...
2025-11-03 20:23:13,494 - system_core - INFO - ✍️  评估答案（题目 5/5）...
2025-11-03 20:23:13,494 - utils.evaluator - INFO - 🤖 使用盘古7B模型进行智能答案评估（严格模式）
2025-11-03 20:23:23,986 - system_core - INFO - ✅ 答案评估完成: ✓ 正确
2025-11-03 20:23:23,988 - utils.bkt_algorithm - INFO - 📝 学生 老铁 在知识点 代数 答题记录: 掌握度 0.886 → 0.967 (✓)
2025-11-03 20:23:23,988 - system_core - INFO - 📊 BKT更新: 掌握度 0.886 → 0.967 (变化: +0.081), 推荐难度: 困难
2025-11-03 20:23:29,769 - system_core - INFO - 📝 生成深度个性化评估报告...
2025-11-03 20:23:29,770 - utils.evaluator - INFO - 📝 正在生成学生 老铁 的综合个性化评估报告...
2025-11-03 20:23:29,770 - utils.evaluator - INFO - 🤖 正在使用盘古7B生成深度个性化学习建议...
2025-11-03 20:24:45,770 - utils.evaluator - INFO - ✅ 综合个性化评估报告生成完成
2025-11-03 20:24:45,771 - system_core - INFO - ✅ 深度个性化评估报告生成完成
2025-11-03 20:26:41,190 - system_core - INFO - 🎯 开始自适应测评: 代数, 学生: 老铁, 数量: 5
2025-11-03 20:26:41,190 - data_management.question_db - INFO - 筛选结果: 12 道题目
2025-11-03 20:26:41,190 - system_core - INFO - 📊 学生 老铁 在 代数 的当前掌握度: 0.967
2025-11-03 20:26:41,190 - system_core - INFO - ✅ 使用备选难度，选中题目 2 (难度: 中等)
2025-11-03 20:26:41,190 - system_core - INFO - ✅ 测评开始，第1题: 已知数列 {a_n} 满足 a_1 = 2，且对 n ≥ 1，有 a_{n+1} = a_n / (... (难度: 中等)
2025-11-03 20:27:08,674 - system_core - INFO - 🎯 开始自适应测评: 代数, 学生: 老铁, 数量: 5
2025-11-03 20:27:08,675 - data_management.question_db - INFO - 筛选结果: 12 道题目
2025-11-03 20:27:08,675 - system_core - INFO - 📊 学生 老铁 在 代数 的当前掌握度: 0.967
2025-11-03 20:27:08,675 - system_core - INFO - ✅ 使用备选难度，选中题目 2 (难度: 中等)
2025-11-03 20:27:08,676 - system_core - INFO - ✅ 测评开始，第1题: 已知数列 {a_n} 满足 a_1 = 2，且对 n ≥ 1，有 a_{n+1} = a_n / (... (难度: 中等)
2025-11-03 20:27:12,533 - system_core - INFO - ✍️  评估答案（题目 1/5）...
2025-11-03 20:27:12,533 - utils.evaluator - INFO - 🤖 使用盘古7B模型进行智能答案评估（严格模式）
2025-11-03 20:27:27,109 - system_core - INFO - ✅ 答案评估完成: ✓ 正确
2025-11-03 20:27:27,111 - utils.bkt_algorithm - INFO - 📝 学生 老铁 在知识点 代数 答题记录: 掌握度 0.967 → 0.990 (✓)
2025-11-03 20:27:27,111 - system_core - INFO - 📊 BKT更新: 掌握度 0.967 → 0.990 (变化: +0.023), 推荐难度: 困难
2025-11-03 20:27:27,111 - system_core - INFO - 🔄 根据新掌握度 0.990 动态选择下一题...
2025-11-03 20:27:27,111 - system_core - INFO - ✅ 使用备选难度，选中题目 8 (难度: 中等)
2025-11-03 20:27:27,112 - system_core - INFO - ✅ 已准备下一题 (难度: 中等)
2025-11-03 20:28:12,619 - system_core - INFO - 📄 加载第 2 题: 解不等式 (2x−3)/(x+1) > 1。...
2025-11-03 20:28:16,326 - system_core - INFO - ✍️  评估答案（题目 2/5）...
2025-11-03 20:28:16,326 - utils.evaluator - INFO - 🤖 使用盘古7B模型进行智能答案评估（严格模式）
2025-11-03 20:28:24,116 - system_core - INFO - ✅ 答案评估完成: ✗ 错误
2025-11-03 20:28:24,118 - utils.bkt_algorithm - INFO - 📝 学生 老铁 在知识点 代数 答题记录: 掌握度 0.990 → 0.887 (✗)
2025-11-03 20:28:24,118 - system_core - INFO - 📊 BKT更新: 掌握度 0.990 → 0.887 (变化: -0.103), 推荐难度: 困难
2025-11-03 20:28:24,118 - system_core - INFO - 🔄 根据新掌握度 0.887 动态选择下一题...
2025-11-03 20:28:24,118 - system_core - WARNING - ⚠️  无法按难度筛选，随机选择题目
2025-11-03 20:28:24,118 - system_core - INFO - ✅ 随机选中题目 19 (难度: 简单)
2025-11-03 20:28:24,119 - system_core - INFO - ✅ 已准备下一题 (难度: 简单)
2025-11-03 20:28:26,046 - system_core - INFO - 📄 加载第 3 题: 已知函数 h(x) = |x −1| + |2x +3|。求 h(x) 的最小值。...
2025-11-03 20:28:29,051 - system_core - INFO - ✍️  评估答案（题目 3/5）...
2025-11-03 20:28:29,051 - utils.evaluator - INFO - 🤖 使用盘古7B模型进行智能答案评估（严格模式）
2025-11-03 20:28:38,647 - system_core - INFO - ✅ 答案评估完成: ✓ 正确
2025-11-03 20:28:38,649 - utils.bkt_algorithm - INFO - 📝 学生 老铁 在知识点 代数 答题记录: 掌握度 0.887 → 0.967 (✓)
2025-11-03 20:28:38,649 - system_core - INFO - 📊 BKT更新: 掌握度 0.887 → 0.967 (变化: +0.080), 推荐难度: 困难
2025-11-03 20:28:38,649 - system_core - INFO - 🔄 根据新掌握度 0.967 动态选择下一题...
2025-11-03 20:28:38,649 - system_core - WARNING - ⚠️  无法按难度筛选，随机选择题目
2025-11-03 20:28:38,649 - system_core - INFO - ✅ 随机选中题目 3 (难度: 简单)
2025-11-03 20:28:38,649 - system_core - INFO - ✅ 已准备下一题 (难度: 简单)
2025-11-03 20:30:15,600 - system_core - INFO - 📄 加载第 4 题: 求函数 f(x) = x^3 − 3x^2 + 4 在实数域上的最小值（如果有下界）。...
2025-11-03 20:30:21,058 - system_core - INFO - ✍️  评估答案（题目 4/5）...
2025-11-03 20:30:21,058 - utils.evaluator - INFO - 🤖 使用盘古7B模型进行智能答案评估（严格模式）
2025-11-03 20:30:32,582 - system_core - INFO - ✅ 答案评估完成: ✓ 正确
2025-11-03 20:30:32,584 - utils.bkt_algorithm - INFO - 📝 学生 老铁 在知识点 代数 答题记录: 掌握度 0.967 → 0.990 (✓)
2025-11-03 20:30:32,584 - system_core - INFO - 📊 BKT更新: 掌握度 0.967 → 0.990 (变化: +0.023), 推荐难度: 困难
2025-11-03 20:30:32,584 - system_core - INFO - 🔄 根据新掌握度 0.990 动态选择下一题...
2025-11-03 20:30:32,584 - system_core - WARNING - ⚠️  无法按难度筛选，随机选择题目
2025-11-03 20:30:32,584 - system_core - INFO - ✅ 随机选中题目 15 (难度: 简单)
2025-11-03 20:30:32,585 - system_core - INFO - ✅ 已准备下一题 (难度: 简单)
2025-11-03 20:31:23,006 - system_core - INFO - 📄 加载第 5 题: 已知两个正实数 a,b 满足 a + b =1。求表达式 E = a^2 b + a b^2 的最大...
2025-11-03 20:31:34,022 - system_core - INFO - ✍️  评估答案（题目 5/5）...
2025-11-03 20:31:34,022 - utils.evaluator - INFO - 🤖 使用盘古7B模型进行智能答案评估（严格模式）
2025-11-03 20:31:43,572 - system_core - INFO - ✅ 答案评估完成: ✗ 错误
2025-11-03 20:31:43,575 - utils.bkt_algorithm - INFO - 📝 学生 老铁 在知识点 代数 答题记录: 掌握度 0.990 → 0.887 (✗)
2025-11-03 20:31:43,575 - system_core - INFO - 📊 BKT更新: 掌握度 0.990 → 0.887 (变化: -0.103), 推荐难度: 困难
2025-11-03 20:31:47,951 - system_core - INFO - 📝 生成深度个性化评估报告...
2025-11-03 20:31:47,951 - utils.evaluator - INFO - 📝 正在生成学生 老铁 的综合个性化评估报告...
2025-11-03 20:31:47,951 - utils.evaluator - INFO - 🤖 正在使用盘古7B生成深度个性化学习建议...
2025-11-03 20:33:24,921 - utils.evaluator - INFO - ✅ 综合个性化评估报告生成完成
2025-11-03 20:33:24,922 - system_core - INFO - ✅ 深度个性化评估报告生成完成
2025-11-03 20:35:20,112 - __main__ - INFO - 👋 系统已关闭
2025-11-04 09:33:28,679 - __main__ - INFO - 🚀 系统启动中...
2025-11-04 09:33:28,679 - __main__ - INFO - ✅ 检测到盘古7B模型文件
2025-11-04 09:33:28,679 - __main__ - INFO - ⚙️  正在初始化系统...
2025-11-04 09:33:28,679 - system_core - INFO - ✅ 系统核心初始化完成（自适应增强版）
2025-11-04 09:33:28,679 - system_core - INFO - 🔄 正在初始化系统组件...
2025-11-04 09:33:35,976 - system_core - INFO - 📚 初始化题库...
2025-11-04 09:33:35,976 - data_management.question_db - INFO - 加载题库成功,共 49 道题目
2025-11-04 09:33:35,976 - data_management.question_db - INFO - 题库数据库初始化完成,路径: /home/weitianyu/teach_system/data/question_database.json
2025-11-04 09:33:35,977 - system_core - INFO - 🚀 初始化盘古7B模型（单例模式）...
2025-11-04 09:33:35,977 - models.embedding_model - INFO - 尝试使用盘古7B的嵌入功能...
2025-11-04 09:33:35,977 - models.embedding_model - INFO - 初始化盘古7B嵌入模型: /opt/pangu/openPangu-Embedded-7B-V1.1
2025-11-04 09:33:35,977 - models.llm_models - INFO - 🆕 创建新的盘古7B模型实例（任务类型: pangu）
2025-11-04 09:33:35,977 - models.llm_models - INFO - ✅ 检测到 8 个NPU设备
2025-11-04 09:33:43,611 - models.llm_models - INFO -   NPU 0: Ascend910B2, 总显存: 60.97 GB
2025-11-04 09:33:43,612 - models.llm_models - INFO -   NPU 1: Ascend910B2, 总显存: 60.97 GB
2025-11-04 09:33:43,612 - models.llm_models - INFO -   NPU 2: Ascend910B2, 总显存: 60.97 GB
2025-11-04 09:33:43,613 - models.llm_models - INFO -   NPU 3: Ascend910B2, 总显存: 60.97 GB
2025-11-04 09:33:43,613 - models.llm_models - INFO -   NPU 4: Ascend910B2, 总显存: 60.97 GB
2025-11-04 09:33:43,613 - models.llm_models - INFO -   NPU 5: Ascend910B2, 总显存: 60.97 GB
2025-11-04 09:33:43,614 - models.llm_models - INFO -   NPU 6: Ascend910B2, 总显存: 60.97 GB
2025-11-04 09:33:43,614 - models.llm_models - INFO -   NPU 7: Ascend910B2, 总显存: 60.97 GB
2025-11-04 09:33:43,614 - models.llm_models - INFO - 盘古7B模型设备配置: ['npu:0', 'npu:1', 'npu:2', 'npu:3', 'npu:4', 'npu:5', 'npu:6', 'npu:7']
2025-11-04 09:33:43,614 - system_core - INFO - 🔄 预加载盘古7B模型...
2025-11-04 09:33:43,614 - models.llm_models - INFO - 🔄 正在加载盘古7B模型: /opt/pangu/openPangu-Embedded-7B-V1.1
2025-11-04 09:33:44,674 - models.llm_models - INFO - 🚀 使用多NPU模式，跨8个设备分布模型
2025-11-04 09:33:46,490 - datasets - INFO - PyTorch version 2.5.1 available.
2025-11-04 09:33:46,888 - accelerate.utils.modeling - INFO - Based on the current allocation process, no modules could be assigned to the following devices due to insufficient memory:
  - 0: 2512912384 bytes required
These minimum requirements are specific to this allocation attempt and may vary. Consider increasing the available memory for these devices to at least the specified minimum, or adjusting the model config.
2025-11-04 09:33:52,095 - models.llm_models - INFO - ✅ 使用device_map='auto'模式成功加载
2025-11-04 09:33:52,098 - models.llm_models - INFO - 📊 模型分布情况:
2025-11-04 09:33:52,098 - models.llm_models - INFO -    1: 4 层
2025-11-04 09:33:52,098 - models.llm_models - INFO -    2: 6 层
2025-11-04 09:33:52,098 - models.llm_models - INFO -    3: 6 层
2025-11-04 09:33:52,098 - models.llm_models - INFO -    4: 6 层
2025-11-04 09:33:52,098 - models.llm_models - INFO -    5: 6 层
2025-11-04 09:33:52,098 - models.llm_models - INFO -    6: 6 层
2025-11-04 09:33:52,098 - models.llm_models - INFO -    7: 4 层
2025-11-04 09:33:52,098 - models.llm_models - INFO - ✅ 盘古7B模型加载成功
2025-11-04 09:33:52,099 - system_core - INFO - ✅ 盘古7B模型预加载完成
2025-11-04 09:33:52,099 - system_core - INFO - ⚙️  初始化功能组件...
2025-11-04 09:33:52,102 - utils.bkt_algorithm - INFO - ✅ 加载学生状态成功: 4 个学生, 4 条记录
2025-11-04 09:33:52,102 - utils.bkt_algorithm - INFO - ✅ BKT算法初始化完成（持久化模式，存储路径: /home/weitianyu/teach_system/data/student_states.json）
2025-11-04 09:33:52,102 - utils.evaluator - INFO - ✅ 个性化学生评估器初始化完成
2025-11-04 09:33:52,102 - visualization.kg_visualizer - INFO - 知识图谱可视化器初始化完成
2025-11-04 09:33:52,102 - system_core - INFO - ✅ 系统初始化完成 - 深度个性化自适应学习版
2025-11-04 09:33:52,103 - __main__ - INFO - ✅ 系统核心初始化完成
2025-11-04 09:33:52,103 - __main__ - INFO - 📚 检查题库数据...
2025-11-04 09:33:52,103 - __main__ - INFO - ✅ 题库已有 49 道题目
2025-11-04 09:33:52,103 - __main__ - INFO - 🎨 正在创建UI界面...
2025-11-04 09:33:52,103 - ui.main_ui - INFO - UI界面初始化完成
2025-11-04 09:33:53,351 - __main__ - INFO - ✅ 系统启动成功!
2025-11-04 09:33:53,483 - httpx - INFO - HTTP Request: GET https://api.gradio.app/pkg-version "HTTP/1.1 200 OK"
2025-11-04 09:33:53,552 - httpx - INFO - HTTP Request: GET http://localhost:7860/gradio_api/startup-events "HTTP/1.1 200 OK"
2025-11-04 09:33:53,582 - httpx - INFO - HTTP Request: HEAD http://localhost:7860/ "HTTP/1.1 200 OK"
2025-11-04 09:35:17,717 - system_core - INFO - 🎯 开始自适应测评: 代数, 学生: student_001, 数量: 3
2025-11-04 09:35:17,717 - data_management.question_db - INFO - 筛选结果: 12 道题目
2025-11-04 09:35:17,720 - utils.bkt_algorithm - INFO - 🆕 初始化学生 student_001 在知识点 代数 的状态 (初始掌握度: 0.300)
2025-11-04 09:35:17,720 - system_core - INFO - 📊 学生 student_001 在 代数 的当前掌握度: 0.300
2025-11-04 09:35:17,720 - system_core - INFO - ✅ 选中题目 8 (难度: 中等)
2025-11-04 09:35:17,720 - system_core - INFO - ✅ 测评开始，第1题: 解不等式 (2x−3)/(x+1) > 1。... (难度: 中等)
2025-11-04 09:35:25,320 - system_core - INFO - ✍️  评估答案（题目 1/3）...
2025-11-04 09:35:25,320 - utils.evaluator - INFO - 🤖 使用盘古7B模型进行智能答案评估（严格模式）
2025-11-04 09:35:35,031 - system_core - INFO - ✅ 答案评估完成: ✗ 错误
2025-11-04 09:35:35,034 - utils.bkt_algorithm - INFO - 📝 学生 student_001 在知识点 代数 答题记录: 掌握度 0.300 → 0.055 (✗)
2025-11-04 09:35:35,034 - system_core - INFO - 📊 BKT更新: 掌握度 0.300 → 0.055 (变化: -0.245), 推荐难度: 简单
2025-11-04 09:35:35,034 - system_core - INFO - 🔄 根据新掌握度 0.055 动态选择下一题...
2025-11-04 09:35:35,034 - system_core - INFO - ✅ 选中题目 19 (难度: 简单)
2025-11-04 09:35:35,034 - system_core - INFO - ✅ 已准备下一题 (难度: 简单)
2025-11-04 09:36:01,969 - system_core - INFO - 📄 加载第 2 题: 已知函数 h(x) = |x −1| + |2x +3|。求 h(x) 的最小值。...
2025-11-04 09:36:27,504 - system_core - INFO - ✍️  评估答案（题目 2/3）...
2025-11-04 09:36:27,504 - utils.evaluator - INFO - 🤖 使用盘古7B模型进行智能答案评估（严格模式）
2025-11-04 09:36:37,657 - system_core - INFO - ✅ 答案评估完成: ✗ 错误
2025-11-04 09:36:37,659 - utils.bkt_algorithm - INFO - 📝 学生 student_001 在知识点 代数 答题记录: 掌握度 0.055 → 0.010 (✗)
2025-11-04 09:36:37,659 - system_core - INFO - 📊 BKT更新: 掌握度 0.055 → 0.010 (变化: -0.045), 推荐难度: 简单
2025-11-04 09:36:37,659 - system_core - INFO - 🔄 根据新掌握度 0.010 动态选择下一题...
2025-11-04 09:36:37,659 - system_core - INFO - ✅ 选中题目 17 (难度: 简单)
2025-11-04 09:36:37,659 - system_core - INFO - ✅ 已准备下一题 (难度: 简单)
2025-11-04 09:36:39,781 - system_core - INFO - 📄 加载第 3 题: 求方程 x^4 −10x^2 +9 =0 的实数解。...
2025-11-04 09:36:43,785 - system_core - INFO - ✍️  评估答案（题目 3/3）...
2025-11-04 09:36:43,786 - utils.evaluator - INFO - 🤖 使用盘古7B模型进行智能答案评估（严格模式）
2025-11-04 09:36:53,521 - system_core - INFO - ✅ 答案评估完成: ✓ 正确
2025-11-04 09:36:53,524 - utils.bkt_algorithm - INFO - 📝 学生 student_001 在知识点 代数 答题记录: 掌握度 0.010 → 0.224 (✓)
2025-11-04 09:36:53,524 - system_core - INFO - 📊 BKT更新: 掌握度 0.010 → 0.224 (变化: +0.214), 推荐难度: 简单
2025-11-04 09:36:55,162 - system_core - INFO - 📝 生成深度个性化评估报告...
2025-11-04 09:36:55,162 - utils.evaluator - INFO - 📝 正在生成学生 student_001 的综合个性化评估报告...
2025-11-04 09:36:55,162 - utils.evaluator - INFO - 🤖 正在使用盘古7B生成深度个性化学习建议...
2025-11-04 09:38:19,117 - utils.evaluator - INFO - ✅ 综合个性化评估报告生成完成
2025-11-04 09:38:19,118 - system_core - INFO - ✅ 深度个性化评估报告生成完成
2025-11-04 09:50:29,029 - visualization.kg_visualizer - INFO - 知识图谱构建完成: 79 个节点, 286 条边
2025-11-04 09:59:09,602 - system_core - INFO - 🎯 开始自适应测评: 代数, 学生: student_001, 数量: 3
2025-11-04 09:59:09,603 - data_management.question_db - INFO - 筛选结果: 12 道题目
2025-11-04 09:59:09,603 - system_core - INFO - 📊 学生 student_001 在 代数 的当前掌握度: 0.224
2025-11-04 09:59:09,603 - system_core - INFO - ✅ 选中题目 15 (难度: 简单)
2025-11-04 09:59:09,603 - system_core - INFO - ✅ 测评开始，第1题: 已知两个正实数 a,b 满足 a + b =1。求表达式 E = a^2 b + a b^2 的最大... (难度: 简单)
2025-11-04 09:59:21,875 - system_core - INFO - 🎯 开始自适应测评: 代数, 学生: student_001, 数量: 5
2025-11-04 09:59:21,875 - data_management.question_db - INFO - 筛选结果: 12 道题目
2025-11-04 09:59:21,875 - system_core - INFO - 📊 学生 student_001 在 代数 的当前掌握度: 0.224
2025-11-04 09:59:21,875 - system_core - INFO - ✅ 选中题目 12 (难度: 简单)
2025-11-04 09:59:21,876 - system_core - INFO - ✅ 测评开始，第1题: 在平面直角坐标系中，设直线 y = kx +1 与曲线 y = 2/x 有两个不同交点。求 k 的取... (难度: 简单)
2025-11-04 09:59:26,084 - system_core - INFO - ✍️  评估答案（题目 1/5）...
2025-11-04 09:59:26,084 - utils.evaluator - INFO - 🤖 使用盘古7B模型进行智能答案评估（严格模式）
2025-11-04 09:59:35,955 - system_core - INFO - ✅ 答案评估完成: ✗ 错误
2025-11-04 09:59:35,957 - utils.bkt_algorithm - INFO - 📝 学生 student_001 在知识点 代数 答题记录: 掌握度 0.224 → 0.038 (✗)
2025-11-04 09:59:35,957 - system_core - INFO - 📊 BKT更新: 掌握度 0.224 → 0.038 (变化: -0.186), 推荐难度: 简单
2025-11-04 09:59:35,957 - system_core - INFO - 🔄 根据新掌握度 0.038 动态选择下一题...
2025-11-04 09:59:35,958 - system_core - INFO - ✅ 选中题目 10 (难度: 简单)
2025-11-04 09:59:35,958 - system_core - INFO - ✅ 已准备下一题 (难度: 简单)
2025-11-04 10:03:23,032 - system_core - INFO - 📄 加载第 2 题: 求方程 ln(x^2 − x +1) = x −1 的实数解。...
2025-11-04 10:03:25,537 - system_core - INFO - ✍️  评估答案（题目 2/5）...
2025-11-04 10:03:25,537 - utils.evaluator - INFO - 🤖 使用盘古7B模型进行智能答案评估（严格模式）
2025-11-04 10:03:36,545 - system_core - INFO - ✅ 答案评估完成: ✗ 错误
2025-11-04 10:03:36,548 - utils.bkt_algorithm - INFO - 📝 学生 student_001 在知识点 代数 答题记录: 掌握度 0.038 → 0.010 (✗)
2025-11-04 10:03:36,548 - system_core - INFO - 📊 BKT更新: 掌握度 0.038 → 0.010 (变化: -0.028), 推荐难度: 简单
2025-11-04 10:03:36,548 - system_core - INFO - 🔄 根据新掌握度 0.010 动态选择下一题...
2025-11-04 10:03:36,548 - system_core - INFO - ✅ 选中题目 1 (难度: 简单)
2025-11-04 10:03:36,548 - system_core - INFO - ✅ 已准备下一题 (难度: 简单)
2025-11-04 10:05:34,635 - __main__ - INFO - 👋 系统已关闭
2025-11-04 11:23:03,649 - __main__ - INFO - 🚀 系统启动中...
2025-11-04 11:23:03,649 - __main__ - INFO - ✅ 检测到盘古7B模型文件
2025-11-04 11:23:03,649 - __main__ - INFO - ⚙️  正在初始化系统...
2025-11-04 11:23:03,650 - system_core - INFO - ✅ 系统核心初始化完成（数值难度自适应版）
2025-11-04 11:23:03,650 - system_core - INFO - 🔄 正在初始化系统组件...
2025-11-04 11:23:11,071 - system_core - INFO - 📚 初始化题库...
2025-11-04 11:23:11,071 - data_management.question_db - WARNING - 题库文件不存在: /home/weitianyu/teach_system/data/question_database_2.json
2025-11-04 11:23:11,072 - data_management.question_db - INFO - 题库已保存,共 0 道题目
2025-11-04 11:23:11,072 - data_management.question_db - INFO - 题库数据库初始化完成,路径: /home/weitianyu/teach_system/data/question_database_2.json
2025-11-04 11:23:11,072 - system_core - INFO - 🚀 初始化盘古7B模型...
2025-11-04 11:23:11,072 - models.embedding_model - INFO - 尝试使用盘古7B的嵌入功能...
2025-11-04 11:23:11,072 - models.embedding_model - INFO - 初始化盘古7B嵌入模型: /opt/pangu/openPangu-Embedded-7B-V1.1
2025-11-04 11:23:11,072 - models.llm_models - INFO - 🆕 创建新的盘古7B模型实例（任务类型: pangu）
2025-11-04 11:23:11,072 - models.llm_models - INFO - ✅ 检测到 8 个NPU设备
2025-11-04 11:23:18,799 - models.llm_models - INFO -   NPU 0: Ascend910B2, 总显存: 60.97 GB
2025-11-04 11:23:18,800 - models.llm_models - INFO -   NPU 1: Ascend910B2, 总显存: 60.97 GB
2025-11-04 11:23:18,801 - models.llm_models - INFO -   NPU 2: Ascend910B2, 总显存: 60.97 GB
2025-11-04 11:23:18,801 - models.llm_models - INFO -   NPU 3: Ascend910B2, 总显存: 60.97 GB
2025-11-04 11:23:18,801 - models.llm_models - INFO -   NPU 4: Ascend910B2, 总显存: 60.97 GB
2025-11-04 11:23:18,802 - models.llm_models - INFO -   NPU 5: Ascend910B2, 总显存: 60.97 GB
2025-11-04 11:23:18,802 - models.llm_models - INFO -   NPU 6: Ascend910B2, 总显存: 60.97 GB
2025-11-04 11:23:18,802 - models.llm_models - INFO -   NPU 7: Ascend910B2, 总显存: 60.97 GB
2025-11-04 11:23:18,803 - models.llm_models - INFO - 盘古7B模型设备配置: ['npu:0', 'npu:1', 'npu:2', 'npu:3', 'npu:4', 'npu:5', 'npu:6', 'npu:7']
2025-11-04 11:23:18,803 - system_core - INFO - 🔄 预加载盘古7B模型...
2025-11-04 11:23:18,803 - models.llm_models - INFO - 🔄 正在加载盘古7B模型: /opt/pangu/openPangu-Embedded-7B-V1.1
2025-11-04 11:23:19,879 - models.llm_models - INFO - 🚀 使用多NPU模式，跨8个设备分布模型
2025-11-04 11:23:21,763 - datasets - INFO - PyTorch version 2.5.1 available.
2025-11-04 11:23:22,171 - accelerate.utils.modeling - INFO - Based on the current allocation process, no modules could be assigned to the following devices due to insufficient memory:
  - 0: 2512912384 bytes required
These minimum requirements are specific to this allocation attempt and may vary. Consider increasing the available memory for these devices to at least the specified minimum, or adjusting the model config.
2025-11-04 11:23:27,361 - models.llm_models - INFO - ✅ 使用device_map='auto'模式成功加载
2025-11-04 11:23:27,364 - models.llm_models - INFO - 📊 模型分布情况:
2025-11-04 11:23:27,364 - models.llm_models - INFO -    1: 4 层
2025-11-04 11:23:27,364 - models.llm_models - INFO -    2: 6 层
2025-11-04 11:23:27,364 - models.llm_models - INFO -    3: 6 层
2025-11-04 11:23:27,364 - models.llm_models - INFO -    4: 6 层
2025-11-04 11:23:27,365 - models.llm_models - INFO -    5: 6 层
2025-11-04 11:23:27,365 - models.llm_models - INFO -    6: 6 层
2025-11-04 11:23:27,365 - models.llm_models - INFO -    7: 4 层
2025-11-04 11:23:27,365 - models.llm_models - INFO - ✅ 盘古7B模型加载成功
2025-11-04 11:23:27,365 - system_core - INFO - ✅ 盘古7B模型预加载完成
2025-11-04 11:23:27,365 - system_core - INFO - ⚙️  初始化功能组件...
2025-11-04 11:23:27,376 - utils.bkt_algorithm - INFO - ✅ 加载学生状态成功: 5 个学生, 5 条记录
2025-11-04 11:23:27,376 - utils.bkt_algorithm - INFO - ✅ BKT算法初始化完成（持久化模式+数值难度支持）
2025-11-04 11:23:27,376 - utils.evaluator - INFO - ✅ 个性化学生评估器初始化完成
2025-11-04 11:23:27,377 - visualization.kg_visualizer - INFO - 知识图谱可视化器初始化完成
2025-11-04 11:23:27,377 - system_core - INFO - ✅ 系统初始化完成 - 数值难度自适应学习版
2025-11-04 11:23:27,377 - __main__ - INFO - ✅ 系统核心初始化完成
2025-11-04 11:23:27,377 - __main__ - INFO - 📚 检查题库数据...
2025-11-04 11:23:27,377 - __main__ - INFO - 题库为空,尝试导入示例数据...
2025-11-04 11:23:27,378 - __main__ - WARNING - ⚠️  未找到示例数据文件
2025-11-04 11:23:27,378 - __main__ - INFO - 🎨 正在创建UI界面...
2025-11-04 11:23:27,378 - ui.main_ui - INFO - UI界面初始化完成
2025-11-04 11:23:29,205 - __main__ - INFO - ✅ 系统启动成功!
2025-11-04 11:23:29,410 - httpx - INFO - HTTP Request: GET http://localhost:7860/gradio_api/startup-events "HTTP/1.1 200 OK"
2025-11-04 11:23:29,441 - httpx - INFO - HTTP Request: HEAD http://localhost:7860/ "HTTP/1.1 200 OK"
2025-11-04 11:23:29,668 - httpx - INFO - HTTP Request: GET https://api.gradio.app/pkg-version "HTTP/1.1 200 OK"
2025-11-04 11:24:11,989 - system_core - INFO - 🎯 开始自适应测评: 代数, 学生: 哈哈, 数量: 5
2025-11-04 11:24:11,989 - data_management.question_db - INFO - 筛选结果: 0 道题目
2025-11-04 11:24:11,989 - system_core - ERROR - ❌ 题库中没有关于'代数'的题目
2025-11-04 11:24:28,757 - system_core - INFO - 🎯 开始自适应测评: 代数, 学生: 哈哈, 数量: 5
2025-11-04 11:24:28,757 - data_management.question_db - INFO - 筛选结果: 0 道题目
2025-11-04 11:24:28,757 - system_core - ERROR - ❌ 题库中没有关于'代数'的题目
2025-11-04 11:24:39,071 - system_core - INFO - 🎯 开始自适应测评: 分析, 学生: 哈哈, 数量: 5
2025-11-04 11:24:39,071 - data_management.question_db - INFO - 筛选结果: 0 道题目
2025-11-04 11:24:39,071 - system_core - ERROR - ❌ 题库中没有关于'分析'的题目
2025-11-04 11:25:07,714 - __main__ - INFO - 👋 系统已关闭
2025-11-04 14:08:29,190 - __main__ - INFO - 🚀 系统启动中...
2025-11-04 14:08:29,190 - __main__ - INFO - ✅ 检测到盘古7B模型文件
2025-11-04 14:08:29,191 - __main__ - INFO - ⚙️  正在初始化系统...
2025-11-04 14:08:29,191 - system_core - INFO - ✅ 系统核心初始化完成（细粒度个性化版）
2025-11-04 14:08:29,191 - system_core - INFO - 🔄 正在初始化系统组件...
2025-11-04 14:08:36,491 - system_core - INFO - 📚 初始化题库...
2025-11-04 14:08:36,492 - data_management.question_db - INFO - 加载题库成功,共 0 道题目
2025-11-04 14:08:36,492 - data_management.question_db - INFO - 题库数据库初始化完成,路径: /home/weitianyu/teach_system/data/question_database_2.json
2025-11-04 14:08:36,492 - system_core - INFO - 🚀 初始化盘古7B模型...
2025-11-04 14:08:36,492 - models.embedding_model - INFO - 尝试使用盘古7B的嵌入功能...
2025-11-04 14:08:36,492 - models.embedding_model - INFO - 初始化盘古7B嵌入模型: /opt/pangu/openPangu-Embedded-7B-V1.1
2025-11-04 14:08:36,492 - models.llm_models - INFO - 🆕 创建新的盘古7B模型实例（任务类型: pangu）
2025-11-04 14:08:36,493 - models.llm_models - INFO - ✅ 检测到 8 个NPU设备
2025-11-04 14:08:44,170 - models.llm_models - INFO -   NPU 0: Ascend910B2, 总显存: 60.97 GB
2025-11-04 14:08:44,171 - models.llm_models - INFO -   NPU 1: Ascend910B2, 总显存: 60.97 GB
2025-11-04 14:08:44,171 - models.llm_models - INFO -   NPU 2: Ascend910B2, 总显存: 60.97 GB
2025-11-04 14:08:44,172 - models.llm_models - INFO -   NPU 3: Ascend910B2, 总显存: 60.97 GB
2025-11-04 14:08:44,172 - models.llm_models - INFO -   NPU 4: Ascend910B2, 总显存: 60.97 GB
2025-11-04 14:08:44,173 - models.llm_models - INFO -   NPU 5: Ascend910B2, 总显存: 60.97 GB
2025-11-04 14:08:44,173 - models.llm_models - INFO -   NPU 6: Ascend910B2, 总显存: 60.97 GB
2025-11-04 14:08:44,173 - models.llm_models - INFO -   NPU 7: Ascend910B2, 总显存: 60.97 GB
2025-11-04 14:08:44,173 - models.llm_models - INFO - 盘古7B模型设备配置: ['npu:0', 'npu:1', 'npu:2', 'npu:3', 'npu:4', 'npu:5', 'npu:6', 'npu:7']
2025-11-04 14:08:44,174 - system_core - INFO - 🔄 预加载盘古7B模型...
2025-11-04 14:08:44,174 - models.llm_models - INFO - 🔄 正在加载盘古7B模型: /opt/pangu/openPangu-Embedded-7B-V1.1
2025-11-04 14:08:45,241 - models.llm_models - INFO - 🚀 使用多NPU模式，跨8个设备分布模型
2025-11-04 14:08:47,032 - datasets - INFO - PyTorch version 2.5.1 available.
2025-11-04 14:08:47,428 - accelerate.utils.modeling - INFO - Based on the current allocation process, no modules could be assigned to the following devices due to insufficient memory:
  - 0: 2512912384 bytes required
These minimum requirements are specific to this allocation attempt and may vary. Consider increasing the available memory for these devices to at least the specified minimum, or adjusting the model config.
2025-11-04 14:08:52,586 - models.llm_models - INFO - ✅ 使用device_map='auto'模式成功加载
2025-11-04 14:08:52,589 - models.llm_models - INFO - 📊 模型分布情况:
2025-11-04 14:08:52,589 - models.llm_models - INFO -    1: 4 层
2025-11-04 14:08:52,589 - models.llm_models - INFO -    2: 6 层
2025-11-04 14:08:52,589 - models.llm_models - INFO -    3: 6 层
2025-11-04 14:08:52,589 - models.llm_models - INFO -    4: 6 层
2025-11-04 14:08:52,590 - models.llm_models - INFO -    5: 6 层
2025-11-04 14:08:52,590 - models.llm_models - INFO -    6: 6 层
2025-11-04 14:08:52,590 - models.llm_models - INFO -    7: 4 层
2025-11-04 14:08:52,590 - models.llm_models - INFO - ✅ 盘古7B模型加载成功
2025-11-04 14:08:52,590 - system_core - INFO - ✅ 盘古7B模型预加载完成
2025-11-04 14:08:52,591 - utils.bkt_algorithm - INFO - ✅ 加载学生状态成功: 5 个学生, 5 条记录
2025-11-04 14:08:52,591 - utils.bkt_algorithm - INFO - ✅ BKT算法初始化完成（持久化模式，存储路径: /home/weitianyu/teach_system/data/student_states.json）
2025-11-04 14:08:52,591 - utils.evaluator - INFO - ✅ 个性化学生评估器初始化完成
2025-11-04 14:08:52,591 - visualization.kg_visualizer - INFO - 知识图谱可视化器初始化完成
2025-11-04 14:08:52,591 - system_core - INFO - ✅ 系统初始化完成 - 细粒度个性化学习
2025-11-04 14:08:52,591 - __main__ - INFO - ✅ 系统核心初始化完成
2025-11-04 14:08:52,591 - __main__ - INFO - 📚 检查题库数据...
2025-11-04 14:08:52,591 - __main__ - INFO - 题库为空,尝试导入数据...
2025-11-04 14:08:52,592 - data_management.question_db - INFO - 批量插入完成,成功 0/0 道题目
2025-11-04 14:08:52,592 - __main__ - INFO - ✅ 导入了 0 道题目
2025-11-04 14:08:52,592 - __main__ - INFO - 🎨 正在创建UI界面...
2025-11-04 14:08:52,592 - ui.main_ui - INFO - UI界面初始化完成（细粒度个性化版）
2025-11-04 14:08:53,830 - __main__ - INFO - ✅ 系统启动成功!
2025-11-04 14:08:54,028 - httpx - INFO - HTTP Request: GET http://localhost:7860/gradio_api/startup-events "HTTP/1.1 200 OK"
2025-11-04 14:08:54,060 - httpx - INFO - HTTP Request: HEAD http://localhost:7860/ "HTTP/1.1 200 OK"
2025-11-04 14:08:54,151 - httpx - INFO - HTTP Request: GET https://api.gradio.app/pkg-version "HTTP/1.1 200 OK"
2025-11-04 14:09:28,575 - system_core - INFO - 🎯 开始个性化测评: None（智能选择）, 学生: student_001
2025-11-04 14:09:28,576 - system_core - INFO - 💡 为学生 student_001 推荐练习: []
2025-11-04 14:09:28,576 - data_management.question_db - INFO - 筛选结果: 0 道题目
2025-11-04 14:09:28,576 - system_core - ERROR - ❌ 没有找到相关题目
2025-11-04 14:09:31,829 - system_core - INFO - 🎯 开始个性化测评: None（智能选择）, 学生: student_001
2025-11-04 14:09:31,829 - system_core - INFO - 💡 为学生 student_001 推荐练习: []
2025-11-04 14:09:31,829 - data_management.question_db - INFO - 筛选结果: 0 道题目
2025-11-04 14:09:31,829 - system_core - ERROR - ❌ 没有找到相关题目
2025-11-04 14:09:33,181 - system_core - INFO - 🎯 开始个性化测评: None（智能选择）, 学生: student_001
2025-11-04 14:09:33,181 - system_core - INFO - 💡 为学生 student_001 推荐练习: []
2025-11-04 14:09:33,181 - data_management.question_db - INFO - 筛选结果: 0 道题目
2025-11-04 14:09:33,181 - system_core - ERROR - ❌ 没有找到相关题目
2025-11-04 14:09:55,812 - system_core - INFO - 🎯 开始个性化测评: None（智能选择）, 学生: 老铁
2025-11-04 14:09:55,813 - system_core - INFO - 💡 为学生 老铁 推荐练习: []
2025-11-04 14:09:55,813 - data_management.question_db - INFO - 筛选结果: 0 道题目
2025-11-04 14:09:55,813 - system_core - ERROR - ❌ 没有找到相关题目
2025-11-04 14:09:58,664 - system_core - INFO - 🎯 开始个性化测评: None（智能选择）, 学生: 老铁
2025-11-04 14:09:58,665 - system_core - INFO - 💡 为学生 老铁 推荐练习: []
2025-11-04 14:09:58,665 - data_management.question_db - INFO - 筛选结果: 0 道题目
2025-11-04 14:09:58,665 - system_core - ERROR - ❌ 没有找到相关题目
2025-11-04 14:10:01,820 - system_core - INFO - 🎯 开始个性化测评: None（智能选择）, 学生: 老铁
2025-11-04 14:10:01,820 - system_core - INFO - 💡 为学生 老铁 推荐练习: []
2025-11-04 14:10:01,820 - data_management.question_db - INFO - 筛选结果: 0 道题目
2025-11-04 14:10:01,820 - system_core - ERROR - ❌ 没有找到相关题目
2025-11-04 14:10:27,555 - system_core - INFO - 🎯 开始个性化测评: None（智能选择）, 学生: 老铁
2025-11-04 14:10:27,555 - system_core - INFO - 💡 为学生 老铁 推荐练习: []
2025-11-04 14:10:27,556 - data_management.question_db - INFO - 筛选结果: 0 道题目
2025-11-04 14:10:27,556 - system_core - ERROR - ❌ 没有找到相关题目
2025-11-04 14:11:07,364 - __main__ - INFO - 👋 系统已关闭
2025-11-04 14:53:12,292 - __main__ - INFO - 🚀 系统启动中...
2025-11-04 14:53:12,292 - __main__ - INFO - ✅ 检测到盘古7B模型文件
2025-11-04 14:53:12,292 - __main__ - INFO - ✅ 检测到题库文件
2025-11-04 14:53:12,292 - __main__ - INFO - ⚙️  正在初始化智能系统核心...
2025-11-04 14:53:12,292 - system_core - INFO - ✅ 智能教育系统核心初始化
2025-11-04 14:53:12,292 - system_core - INFO - 🔄 初始化系统组件...
2025-11-04 14:53:19,637 - system_core - INFO - 📚 初始化题库...
2025-11-04 14:53:19,637 - data_management.question_db - INFO - ✅ 加载题库成功: 0 道题目
2025-11-04 14:53:19,637 - data_management.question_db - INFO - ✅ 增强版题库初始化完成: /home/weitianyu/teach_system/data/question_database_2.json
2025-11-04 14:53:19,637 - system_core - INFO - 🚀 初始化模型...
2025-11-04 14:53:19,637 - models.embedding_model - INFO - 尝试使用盘古7B的嵌入功能...
2025-11-04 14:53:19,637 - models.embedding_model - INFO - 初始化盘古7B嵌入模型: /opt/pangu/openPangu-Embedded-7B-V1.1
2025-11-04 14:53:19,637 - models.llm_models - INFO - 🆕 创建新的盘古7B模型实例（任务类型: pangu）
2025-11-04 14:53:19,638 - models.llm_models - INFO - ✅ 检测到 8 个NPU设备
2025-11-04 14:53:27,281 - models.llm_models - INFO -   NPU 0: Ascend910B2, 总显存: 60.97 GB
2025-11-04 14:53:27,282 - models.llm_models - INFO -   NPU 1: Ascend910B2, 总显存: 60.97 GB
2025-11-04 14:53:27,283 - models.llm_models - INFO -   NPU 2: Ascend910B2, 总显存: 60.97 GB
2025-11-04 14:53:27,283 - models.llm_models - INFO -   NPU 3: Ascend910B2, 总显存: 60.97 GB
2025-11-04 14:53:27,283 - models.llm_models - INFO -   NPU 4: Ascend910B2, 总显存: 60.97 GB
2025-11-04 14:53:27,284 - models.llm_models - INFO -   NPU 5: Ascend910B2, 总显存: 60.97 GB
2025-11-04 14:53:27,284 - models.llm_models - INFO -   NPU 6: Ascend910B2, 总显存: 60.97 GB
2025-11-04 14:53:27,284 - models.llm_models - INFO -   NPU 7: Ascend910B2, 总显存: 60.97 GB
2025-11-04 14:53:27,285 - models.llm_models - INFO - 盘古7B模型设备配置: ['npu:0', 'npu:1', 'npu:2', 'npu:3', 'npu:4', 'npu:5', 'npu:6', 'npu:7']
2025-11-04 14:53:27,285 - system_core - INFO - 🔄 预加载盘古7B模型...
2025-11-04 14:53:27,285 - models.llm_models - INFO - 🔄 正在加载盘古7B模型: /opt/pangu/openPangu-Embedded-7B-V1.1
2025-11-04 14:53:28,347 - models.llm_models - INFO - 🚀 使用多NPU模式，跨8个设备分布模型
2025-11-04 14:53:30,185 - datasets - INFO - PyTorch version 2.5.1 available.
2025-11-04 14:53:30,585 - accelerate.utils.modeling - INFO - Based on the current allocation process, no modules could be assigned to the following devices due to insufficient memory:
  - 0: 2512912384 bytes required
These minimum requirements are specific to this allocation attempt and may vary. Consider increasing the available memory for these devices to at least the specified minimum, or adjusting the model config.
2025-11-04 14:53:35,693 - models.llm_models - INFO - ✅ 使用device_map='auto'模式成功加载
2025-11-04 14:53:35,697 - models.llm_models - INFO - 📊 模型分布情况:
2025-11-04 14:53:35,697 - models.llm_models - INFO -    1: 4 层
2025-11-04 14:53:35,697 - models.llm_models - INFO -    2: 6 层
2025-11-04 14:53:35,697 - models.llm_models - INFO -    3: 6 层
2025-11-04 14:53:35,697 - models.llm_models - INFO -    4: 6 层
2025-11-04 14:53:35,697 - models.llm_models - INFO -    5: 6 层
2025-11-04 14:53:35,697 - models.llm_models - INFO -    6: 6 层
2025-11-04 14:53:35,697 - models.llm_models - INFO -    7: 4 层
2025-11-04 14:53:35,697 - models.llm_models - INFO - ✅ 盘古7B模型加载成功
2025-11-04 14:53:35,697 - system_core - INFO - 🧠 初始化BKT算法...
2025-11-04 14:53:35,698 - utils.bkt_algorithm - ERROR - ❌ 加载学生状态失败: 'str' object has no attribute 'get'
2025-11-04 14:53:35,698 - utils.bkt_algorithm - INFO - ✅ 增强版BKT算法初始化完成（细粒度知识点追踪）
2025-11-04 14:53:35,698 - utils.evaluator - INFO - ✅ 个性化学生评估器初始化完成
2025-11-04 14:53:35,698 - visualization.kg_visualizer - INFO - 知识图谱可视化器初始化完成
2025-11-04 14:53:35,699 - system_core - INFO - ✅ 系统初始化完成 - 智能个性化自适应学习版
2025-11-04 14:53:35,699 - __main__ - INFO - ✅ 系统核心初始化完成
2025-11-04 14:53:35,699 - __main__ - INFO - 📚 题库统计: 总题目 0
2025-11-04 14:53:35,699 - __main__ - INFO - 📊 知识点大类: 0 个
2025-11-04 14:53:35,699 - __main__ - INFO - 📋 知识点小类: 0 个
2025-11-04 14:53:35,699 - __main__ - INFO - 🎨 正在创建UI界面...
2025-11-04 14:53:35,699 - ui.main_ui - INFO - ✅ 智能教育UI初始化完成
2025-11-04 14:53:36,010 - __main__ - INFO - ✅ 系统启动成功!
2025-11-04 14:53:36,211 - httpx - INFO - HTTP Request: GET http://localhost:7860/gradio_api/startup-events "HTTP/1.1 200 OK"
2025-11-04 14:53:36,239 - httpx - INFO - HTTP Request: HEAD http://localhost:7860/ "HTTP/1.1 200 OK"
2025-11-04 14:53:36,834 - httpx - INFO - HTTP Request: GET https://api.gradio.app/pkg-version "HTTP/1.1 200 OK"
2025-11-04 14:54:06,434 - system_core - INFO - 🚀 开始智能测评: 学生 student_001, 题数 10
2025-11-04 14:54:06,434 - system_core - ERROR - ❌ 开始测评失败: 'total_knowledge_points'
2025-11-04 14:54:06,435 - system_core - ERROR - Traceback (most recent call last):
  File "/home/weitianyu/teach_system/system_core.py", line 236, in start_smart_assessment
    f"已学知识点 {profile['total_knowledge_points']}")
             ~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^
KeyError: 'total_knowledge_points'

2025-11-04 14:54:13,542 - system_core - INFO - 🚀 开始智能测评: 学生 student_001, 题数 10
2025-11-04 14:54:13,542 - system_core - ERROR - ❌ 开始测评失败: 'total_knowledge_points'
2025-11-04 14:54:13,543 - system_core - ERROR - Traceback (most recent call last):
  File "/home/weitianyu/teach_system/system_core.py", line 236, in start_smart_assessment
    f"已学知识点 {profile['total_knowledge_points']}")
             ~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^
KeyError: 'total_knowledge_points'

2025-11-04 14:58:28,575 - __main__ - INFO - 👋 系统已关闭
2025-11-04 15:14:26,081 - __main__ - INFO - 🚀 系统启动中...
2025-11-04 15:14:26,081 - __main__ - ERROR - ❌ 盘古7B模型文件不存在: /opt/pangu/openPanGu-Embedded-7B-V1.1
2025-11-04 15:14:26,082 - __main__ - INFO - 👋 系统已关闭
2025-11-04 15:22:34,132 - __main__ - INFO - 🚀 系统启动中...
2025-11-04 15:22:34,132 - __main__ - INFO - ✅ 检测到盘古7B模型文件
2025-11-04 15:22:34,132 - __main__ - INFO - ⚙️  正在初始化系统...
2025-11-04 15:22:34,132 - system_core - INFO - ✅ 系统核心初始化完成（自适应增强版）
2025-11-04 15:22:34,133 - system_core - INFO - 🔄 正在初始化系统组件...
2025-11-04 15:22:41,421 - system_core - INFO - 📚 初始化题库...
2025-11-04 15:22:41,421 - data_management.question_db - INFO - 加载题库成功,共 49 道题目
2025-11-04 15:22:41,421 - data_management.question_db - INFO - 题库数据库初始化完成,路径: /home/weitianyu/teach_system/data/question_database.json
2025-11-04 15:22:41,422 - system_core - INFO - 🚀 初始化盘古7B模型（单例模式）...
2025-11-04 15:22:41,422 - models.embedding_model - INFO - 尝试使用盘古7B的嵌入功能...
2025-11-04 15:22:41,422 - models.embedding_model - INFO - 初始化盘古7B嵌入模型: /opt/pangu/openPangu-Embedded-7B-V1.1
2025-11-04 15:22:41,422 - models.llm_models - INFO - 🆕 创建新的盘古7B模型实例（任务类型: pangu）
2025-11-04 15:22:41,422 - models.llm_models - INFO - ✅ 检测到 8 个NPU设备
2025-11-04 15:22:49,095 - models.llm_models - INFO -   NPU 0: Ascend910B2, 总显存: 60.97 GB
2025-11-04 15:22:49,096 - models.llm_models - INFO -   NPU 1: Ascend910B2, 总显存: 60.97 GB
2025-11-04 15:22:49,096 - models.llm_models - INFO -   NPU 2: Ascend910B2, 总显存: 60.97 GB
2025-11-04 15:22:49,097 - models.llm_models - INFO -   NPU 3: Ascend910B2, 总显存: 60.97 GB
2025-11-04 15:22:49,097 - models.llm_models - INFO -   NPU 4: Ascend910B2, 总显存: 60.97 GB
2025-11-04 15:22:49,097 - models.llm_models - INFO -   NPU 5: Ascend910B2, 总显存: 60.97 GB
2025-11-04 15:22:49,098 - models.llm_models - INFO -   NPU 6: Ascend910B2, 总显存: 60.97 GB
2025-11-04 15:22:49,098 - models.llm_models - INFO -   NPU 7: Ascend910B2, 总显存: 60.97 GB
2025-11-04 15:22:49,098 - models.llm_models - INFO - 盘古7B模型设备配置: ['npu:0', 'npu:1', 'npu:2', 'npu:3', 'npu:4', 'npu:5', 'npu:6', 'npu:7']
2025-11-04 15:22:49,099 - system_core - INFO - 🔄 预加载盘古7B模型...
2025-11-04 15:22:49,099 - models.llm_models - INFO - 🔄 正在加载盘古7B模型: /opt/pangu/openPangu-Embedded-7B-V1.1
2025-11-04 15:22:50,178 - models.llm_models - INFO - 🚀 使用多NPU模式，跨8个设备分布模型
2025-11-04 15:22:52,033 - datasets - INFO - PyTorch version 2.5.1 available.
2025-11-04 15:22:52,433 - accelerate.utils.modeling - INFO - Based on the current allocation process, no modules could be assigned to the following devices due to insufficient memory:
  - 0: 2512912384 bytes required
These minimum requirements are specific to this allocation attempt and may vary. Consider increasing the available memory for these devices to at least the specified minimum, or adjusting the model config.
2025-11-04 15:22:57,529 - models.llm_models - INFO - ✅ 使用device_map='auto'模式成功加载
2025-11-04 15:22:57,532 - models.llm_models - INFO - 📊 模型分布情况:
2025-11-04 15:22:57,532 - models.llm_models - INFO -    1: 4 层
2025-11-04 15:22:57,532 - models.llm_models - INFO -    2: 6 层
2025-11-04 15:22:57,532 - models.llm_models - INFO -    3: 6 层
2025-11-04 15:22:57,532 - models.llm_models - INFO -    4: 6 层
2025-11-04 15:22:57,532 - models.llm_models - INFO -    5: 6 层
2025-11-04 15:22:57,532 - models.llm_models - INFO -    6: 6 层
2025-11-04 15:22:57,532 - models.llm_models - INFO -    7: 4 层
2025-11-04 15:22:57,532 - models.llm_models - INFO - ✅ 盘古7B模型加载成功
2025-11-04 15:22:57,533 - system_core - INFO - ✅ 盘古7B模型预加载完成
2025-11-04 15:22:57,533 - system_core - INFO - ⚙️  初始化功能组件...
2025-11-04 15:22:57,543 - utils.bkt_algorithm - INFO - ✅ 加载学生状态成功: 5 个学生, 5 条记录
2025-11-04 15:22:57,543 - utils.bkt_algorithm - INFO - ✅ BKT算法初始化完成（持久化模式，存储路径: /home/weitianyu/teach_system/data/student_states.json）
2025-11-04 15:22:57,543 - utils.evaluator - INFO - ✅ 个性化学生评估器初始化完成
2025-11-04 15:22:57,543 - visualization.kg_visualizer - INFO - 知识图谱可视化器初始化完成
2025-11-04 15:22:57,543 - system_core - INFO - ✅ 系统初始化完成 - 深度个性化自适应学习版
2025-11-04 15:22:57,543 - __main__ - INFO - ✅ 系统核心初始化完成
2025-11-04 15:22:57,543 - __main__ - INFO - 📚 检查题库数据...
2025-11-04 15:22:57,543 - __main__ - INFO - ✅ 题库已有 49 道题目
2025-11-04 15:22:57,543 - __main__ - INFO - 🎨 正在创建UI界面...
2025-11-04 15:22:57,543 - ui.main_ui - INFO - UI界面初始化完成
2025-11-04 15:22:58,778 - __main__ - INFO - ✅ 系统启动成功!
2025-11-04 15:22:58,972 - httpx - INFO - HTTP Request: GET http://localhost:7860/gradio_api/startup-events "HTTP/1.1 200 OK"
2025-11-04 15:22:59,003 - httpx - INFO - HTTP Request: HEAD http://localhost:7860/ "HTTP/1.1 200 OK"
2025-11-04 15:22:59,636 - httpx - INFO - HTTP Request: GET https://api.gradio.app/pkg-version "HTTP/1.1 200 OK"
2025-11-04 16:11:36,272 - __main__ - INFO - 👋 系统已关闭
2025-11-04 16:44:30,714 - __main__ - INFO - 🚀 系统启动中...
2025-11-04 16:44:30,714 - __main__ - INFO - ✅ 检测到盘古7B模型文件
2025-11-04 16:44:30,714 - __main__ - INFO - ✅ 检测到题库文件
2025-11-04 16:44:30,714 - __main__ - INFO - ⚙️  正在初始化智能系统核心...
2025-11-04 16:44:30,714 - system_core - INFO - ✅ 智能教育系统核心初始化
2025-11-04 16:44:30,714 - system_core - INFO - 🔄 初始化系统组件...
2025-11-04 16:44:38,047 - system_core - INFO - 📚 初始化题库...
2025-11-04 16:44:38,048 - data_management.question_db - INFO - ✅ 加载题库成功: 49 道题目
2025-11-04 16:44:38,048 - data_management.question_db - INFO - ✅ 增强版题库初始化完成: /home/weitianyu/teach_system/data/question_database_2.json
2025-11-04 16:44:38,048 - system_core - INFO - 🚀 初始化模型...
2025-11-04 16:44:38,048 - models.embedding_model - INFO - 尝试使用盘古7B的嵌入功能...
2025-11-04 16:44:38,049 - models.embedding_model - INFO - 初始化盘古7B嵌入模型: /opt/pangu/openPangu-Embedded-7B-V1.1
2025-11-04 16:44:38,049 - models.llm_models - INFO - 🆕 创建新的盘古7B模型实例（任务类型: pangu）
2025-11-04 16:44:38,049 - models.llm_models - INFO - ✅ 检测到 8 个NPU设备
2025-11-04 16:44:45,680 - models.llm_models - INFO -   NPU 0: Ascend910B2, 总显存: 60.97 GB
2025-11-04 16:44:45,681 - models.llm_models - INFO -   NPU 1: Ascend910B2, 总显存: 60.97 GB
2025-11-04 16:44:45,681 - models.llm_models - INFO -   NPU 2: Ascend910B2, 总显存: 60.97 GB
2025-11-04 16:44:45,681 - models.llm_models - INFO -   NPU 3: Ascend910B2, 总显存: 60.97 GB
2025-11-04 16:44:45,682 - models.llm_models - INFO -   NPU 4: Ascend910B2, 总显存: 60.97 GB
2025-11-04 16:44:45,682 - models.llm_models - INFO -   NPU 5: Ascend910B2, 总显存: 60.97 GB
2025-11-04 16:44:45,682 - models.llm_models - INFO -   NPU 6: Ascend910B2, 总显存: 60.97 GB
2025-11-04 16:44:45,683 - models.llm_models - INFO -   NPU 7: Ascend910B2, 总显存: 60.97 GB
2025-11-04 16:44:45,683 - models.llm_models - INFO - 盘古7B模型设备配置: ['npu:0', 'npu:1', 'npu:2', 'npu:3', 'npu:4', 'npu:5', 'npu:6', 'npu:7']
2025-11-04 16:44:45,683 - system_core - INFO - 🔄 预加载盘古7B模型...
2025-11-04 16:44:45,683 - models.llm_models - INFO - 🔄 正在加载盘古7B模型: /opt/pangu/openPangu-Embedded-7B-V1.1
2025-11-04 16:44:46,756 - models.llm_models - INFO - 🚀 使用多NPU模式，跨8个设备分布模型
2025-11-04 16:44:48,541 - datasets - INFO - PyTorch version 2.5.1 available.
2025-11-04 16:44:48,935 - accelerate.utils.modeling - INFO - Based on the current allocation process, no modules could be assigned to the following devices due to insufficient memory:
  - 0: 2512912384 bytes required
These minimum requirements are specific to this allocation attempt and may vary. Consider increasing the available memory for these devices to at least the specified minimum, or adjusting the model config.
2025-11-04 16:44:54,032 - models.llm_models - INFO - ✅ 使用device_map='auto'模式成功加载
2025-11-04 16:44:54,035 - models.llm_models - INFO - 📊 模型分布情况:
2025-11-04 16:44:54,035 - models.llm_models - INFO -    1: 4 层
2025-11-04 16:44:54,035 - models.llm_models - INFO -    2: 6 层
2025-11-04 16:44:54,035 - models.llm_models - INFO -    3: 6 层
2025-11-04 16:44:54,035 - models.llm_models - INFO -    4: 6 层
2025-11-04 16:44:54,035 - models.llm_models - INFO -    5: 6 层
2025-11-04 16:44:54,035 - models.llm_models - INFO -    6: 6 层
2025-11-04 16:44:54,035 - models.llm_models - INFO -    7: 4 层
2025-11-04 16:44:54,035 - models.llm_models - INFO - ✅ 盘古7B模型加载成功
2025-11-04 16:44:54,035 - system_core - INFO - 🧠 初始化BKT算法...
2025-11-04 16:44:54,036 - utils.bkt_algorithm - ERROR - ❌ 加载学生状态失败: 'str' object has no attribute 'get'
2025-11-04 16:44:54,036 - utils.bkt_algorithm - INFO - ✅ 增强版BKT算法初始化完成（细粒度知识点追踪）
2025-11-04 16:44:54,036 - utils.evaluator - INFO - ✅ 个性化学生评估器初始化完成
2025-11-04 16:44:54,037 - visualization.kg_visualizer - INFO - 知识图谱可视化器初始化完成
2025-11-04 16:44:54,037 - system_core - INFO - ✅ 系统初始化完成 - 智能个性化自适应学习版
2025-11-04 16:44:54,037 - __main__ - INFO - ✅ 系统核心初始化完成
2025-11-04 16:44:54,037 - __main__ - INFO - 📚 题库统计: 总题目 49
2025-11-04 16:44:54,037 - __main__ - INFO - 📊 知识点大类: 4 个
2025-11-04 16:44:54,037 - __main__ - INFO - 📋 知识点小类: 38 个
2025-11-04 16:44:54,037 - __main__ - INFO - 🎨 正在创建UI界面...
2025-11-04 16:44:54,037 - ui.main_ui - INFO - ✅ 智能教育UI初始化完成
2025-11-04 16:44:54,336 - __main__ - INFO - ✅ 系统启动成功!
2025-11-04 16:44:54,526 - httpx - INFO - HTTP Request: GET http://localhost:7860/gradio_api/startup-events "HTTP/1.1 200 OK"
2025-11-04 16:44:54,554 - httpx - INFO - HTTP Request: HEAD http://localhost:7860/ "HTTP/1.1 200 OK"
2025-11-04 16:44:55,041 - httpx - INFO - HTTP Request: GET https://api.gradio.app/pkg-version "HTTP/1.1 200 OK"
2025-11-04 16:45:39,862 - system_core - INFO - 🚀 开始智能测评: 学生 student_001, 题数 5
2025-11-04 16:45:39,862 - system_core - ERROR - ❌ 开始测评失败: 'total_knowledge_points'
2025-11-04 16:45:39,863 - system_core - ERROR - Traceback (most recent call last):
  File "/home/weitianyu/teach_system/system_core.py", line 236, in start_smart_assessment
    f"已学知识点 {profile['total_knowledge_points']}")
             ~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^
KeyError: 'total_knowledge_points'

2025-11-04 16:46:01,891 - system_core - INFO - 🚀 开始智能测评: 学生 老铁, 题数 5
2025-11-04 16:46:01,892 - system_core - ERROR - ❌ 开始测评失败: 'total_knowledge_points'
2025-11-04 16:46:01,892 - system_core - ERROR - Traceback (most recent call last):
  File "/home/weitianyu/teach_system/system_core.py", line 236, in start_smart_assessment
    f"已学知识点 {profile['total_knowledge_points']}")
             ~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^
KeyError: 'total_knowledge_points'

2025-11-04 16:46:20,682 - __main__ - INFO - 👋 系统已关闭
2025-11-04 17:05:48,766 - __main__ - INFO - 🚀 系统启动中...
2025-11-04 17:05:48,766 - __main__ - INFO - ✅ 检测到盘古7B模型文件
2025-11-04 17:05:48,766 - __main__ - INFO - ✅ 检测到题库文件
2025-11-04 17:05:48,766 - __main__ - INFO - ⚙️  正在初始化智能系统核心...
2025-11-04 17:05:48,766 - system_core - INFO - ✅ 智能教育系统核心初始化
2025-11-04 17:05:48,766 - system_core - INFO - 🔄 初始化系统组件...
2025-11-04 17:05:56,099 - system_core - INFO - 📚 初始化题库...
2025-11-04 17:05:56,099 - data_management.question_db - INFO - ✅ 加载题库成功: 49 道题目
2025-11-04 17:05:56,099 - data_management.question_db - INFO - ✅ 增强版题库初始化完成: /home/weitianyu/teach_system/data/question_database_2.json
2025-11-04 17:05:56,099 - system_core - INFO - 🚀 初始化模型...
2025-11-04 17:05:56,100 - models.embedding_model - INFO - 尝试使用盘古7B的嵌入功能...
2025-11-04 17:05:56,100 - models.embedding_model - INFO - 初始化盘古7B嵌入模型: /opt/pangu/openPangu-Embedded-7B-V1.1
2025-11-04 17:05:56,100 - models.llm_models - INFO - 🆕 创建新的盘古7B模型实例（任务类型: pangu）
2025-11-04 17:05:56,100 - models.llm_models - INFO - ✅ 检测到 8 个NPU设备
2025-11-04 17:06:03,761 - models.llm_models - INFO -   NPU 0: Ascend910B2, 总显存: 60.97 GB
2025-11-04 17:06:03,762 - models.llm_models - INFO -   NPU 1: Ascend910B2, 总显存: 60.97 GB
2025-11-04 17:06:03,762 - models.llm_models - INFO -   NPU 2: Ascend910B2, 总显存: 60.97 GB
2025-11-04 17:06:03,762 - models.llm_models - INFO -   NPU 3: Ascend910B2, 总显存: 60.97 GB
2025-11-04 17:06:03,763 - models.llm_models - INFO -   NPU 4: Ascend910B2, 总显存: 60.97 GB
2025-11-04 17:06:03,763 - models.llm_models - INFO -   NPU 5: Ascend910B2, 总显存: 60.97 GB
2025-11-04 17:06:03,763 - models.llm_models - INFO -   NPU 6: Ascend910B2, 总显存: 60.97 GB
2025-11-04 17:06:03,764 - models.llm_models - INFO -   NPU 7: Ascend910B2, 总显存: 60.97 GB
2025-11-04 17:06:03,764 - models.llm_models - INFO - 盘古7B模型设备配置: ['npu:0', 'npu:1', 'npu:2', 'npu:3', 'npu:4', 'npu:5', 'npu:6', 'npu:7']
2025-11-04 17:06:03,764 - system_core - INFO - 🔄 预加载盘古7B模型...
2025-11-04 17:06:03,764 - models.llm_models - INFO - 🔄 正在加载盘古7B模型: /opt/pangu/openPangu-Embedded-7B-V1.1
2025-11-04 17:06:04,932 - models.llm_models - INFO - 🚀 使用多NPU模式，跨8个设备分布模型
2025-11-04 17:06:06,826 - datasets - INFO - PyTorch version 2.5.1 available.
2025-11-04 17:06:07,235 - accelerate.utils.modeling - INFO - Based on the current allocation process, no modules could be assigned to the following devices due to insufficient memory:
  - 0: 2512912384 bytes required
These minimum requirements are specific to this allocation attempt and may vary. Consider increasing the available memory for these devices to at least the specified minimum, or adjusting the model config.
2025-11-04 17:06:12,449 - models.llm_models - INFO - ✅ 使用device_map='auto'模式成功加载
2025-11-04 17:06:12,452 - models.llm_models - INFO - 📊 模型分布情况:
2025-11-04 17:06:12,452 - models.llm_models - INFO -    1: 4 层
2025-11-04 17:06:12,452 - models.llm_models - INFO -    2: 6 层
2025-11-04 17:06:12,452 - models.llm_models - INFO -    3: 6 层
2025-11-04 17:06:12,453 - models.llm_models - INFO -    4: 6 层
2025-11-04 17:06:12,453 - models.llm_models - INFO -    5: 6 层
2025-11-04 17:06:12,453 - models.llm_models - INFO -    6: 6 层
2025-11-04 17:06:12,453 - models.llm_models - INFO -    7: 4 层
2025-11-04 17:06:12,453 - models.llm_models - INFO - ✅ 盘古7B模型加载成功
2025-11-04 17:06:12,453 - system_core - INFO - 🧠 初始化BKT算法...
2025-11-04 17:06:12,454 - utils.bkt_algorithm - ERROR - ❌ 加载学生状态失败: 'str' object has no attribute 'get'
2025-11-04 17:06:12,454 - utils.bkt_algorithm - INFO - ✅ 增强版BKT算法初始化完成（细粒度知识点追踪）
2025-11-04 17:06:12,454 - utils.evaluator - INFO - ✅ 个性化学生评估器初始化完成
2025-11-04 17:06:12,454 - visualization.kg_visualizer - INFO - 知识图谱可视化器初始化完成
2025-11-04 17:06:12,454 - system_core - INFO - ✅ 系统初始化完成 - 智能个性化自适应学习版
2025-11-04 17:06:12,454 - __main__ - INFO - ✅ 系统核心初始化完成
2025-11-04 17:06:12,455 - __main__ - INFO - 📚 题库统计: 总题目 49
2025-11-04 17:06:12,455 - __main__ - INFO - 📊 知识点大类: 4 个
2025-11-04 17:06:12,455 - __main__ - INFO - 📋 知识点小类: 38 个
2025-11-04 17:06:12,455 - __main__ - INFO - 🎨 正在创建UI界面...
2025-11-04 17:06:12,455 - ui.main_ui - INFO - ✅ 智能教育UI初始化完成
2025-11-04 17:06:12,757 - __main__ - INFO - ✅ 系统启动成功!
2025-11-04 17:06:12,954 - httpx - INFO - HTTP Request: GET http://localhost:7860/gradio_api/startup-events "HTTP/1.1 200 OK"
2025-11-04 17:06:12,983 - httpx - INFO - HTTP Request: HEAD http://localhost:7860/ "HTTP/1.1 200 OK"
2025-11-04 17:06:13,330 - httpx - INFO - HTTP Request: GET https://api.gradio.app/pkg-version "HTTP/1.1 200 OK"
2025-11-04 17:06:34,309 - system_core - INFO - 🚀 开始智能测评: 学生 student_001, 题数 5
2025-11-04 17:06:34,310 - system_core - INFO - 📊 学生档案: 整体掌握度 0.000, 已学知识点 0
2025-11-04 17:06:34,310 - system_core - INFO - 📊 学生 student_001 无历史数据或无明显薄弱点
2025-11-04 17:06:34,311 - system_core - INFO - 🔍 探索新知识点: 代数/分式不等式
2025-11-04 17:06:34,312 - utils.bkt_algorithm - INFO - 🆕 初始化学生状态: student_001 - 代数/分式不等式
2025-11-04 17:06:34,312 - system_core - INFO - ✅ 选中题目 29 (难度: 0.50)
2025-11-04 17:06:34,312 - system_core - INFO - ✅ 测评开始 - 第1题: 代数/分式不等式
2025-11-04 17:06:41,870 - system_core - INFO - ✍️  评估答案 (题目 1/5)
2025-11-04 17:06:41,871 - utils.evaluator - INFO - 🤖 使用盘古7B模型进行智能答案评估（严格模式）
2025-11-04 17:06:57,399 - utils.bkt_algorithm - INFO - 📝 答题记录: student_001 - 分式不等式: 0.300 → 0.055 (✗)
2025-11-04 17:06:57,400 - system_core - INFO - 🤔 智能选择下一题...
2025-11-04 17:06:57,400 - system_core - INFO - 📊 识别到 1 个薄弱知识点:
2025-11-04 17:06:57,400 - system_core - INFO -   - 代数/分式不等式: 0.055
2025-11-04 17:06:57,401 - system_core - INFO - 🎯 选择薄弱知识点: 代数/分式不等式
2025-11-04 17:06:57,401 - system_core - WARNING - ⚠️  无合适难度题目，随机选择
2025-11-04 17:06:57,401 - system_core - INFO - ✅ 选中题目 31 (难度: 0.55)
2025-11-04 17:06:57,401 - system_core - INFO - ✅ 准备下一题: 代数/分式不等式
2025-11-04 17:08:48,152 - __main__ - INFO - 👋 系统已关闭
2025-11-04 17:15:27,122 - __main__ - INFO - 🚀 系统启动中...
2025-11-04 17:15:27,122 - __main__ - INFO - ✅ 检测到盘古7B模型文件
2025-11-04 17:15:27,122 - __main__ - INFO - ✅ 检测到题库文件
2025-11-04 17:15:27,122 - __main__ - INFO - ⚙️  正在初始化智能系统核心...
2025-11-04 17:15:27,122 - system_core - INFO - ✅ 智能教育系统核心初始化
2025-11-04 17:15:27,122 - system_core - INFO - 🔄 初始化系统组件...
2025-11-04 17:15:34,418 - system_core - INFO - 📚 初始化题库...
2025-11-04 17:15:34,418 - data_management.question_db - INFO - ✅ 加载题库成功: 49 道题目
2025-11-04 17:15:34,418 - data_management.question_db - INFO - ✅ 增强版题库初始化完成: /home/weitianyu/teach_system/data/question_database_2.json
2025-11-04 17:15:34,418 - system_core - INFO - 🚀 初始化模型...
2025-11-04 17:15:34,419 - models.embedding_model - INFO - 尝试使用盘古7B的嵌入功能...
2025-11-04 17:15:34,419 - models.embedding_model - INFO - 初始化盘古7B嵌入模型: /opt/pangu/openPangu-Embedded-7B-V1.1
2025-11-04 17:15:34,419 - models.llm_models - INFO - 🆕 创建新的盘古7B模型实例（任务类型: pangu）
2025-11-04 17:15:34,419 - models.llm_models - INFO - ✅ 检测到 8 个NPU设备
2025-11-04 17:15:42,056 - models.llm_models - INFO -   NPU 0: Ascend910B2, 总显存: 60.97 GB
2025-11-04 17:15:42,057 - models.llm_models - INFO -   NPU 1: Ascend910B2, 总显存: 60.97 GB
2025-11-04 17:15:42,057 - models.llm_models - INFO -   NPU 2: Ascend910B2, 总显存: 60.97 GB
2025-11-04 17:15:42,058 - models.llm_models - INFO -   NPU 3: Ascend910B2, 总显存: 60.97 GB
2025-11-04 17:15:42,058 - models.llm_models - INFO -   NPU 4: Ascend910B2, 总显存: 60.97 GB
2025-11-04 17:15:42,058 - models.llm_models - INFO -   NPU 5: Ascend910B2, 总显存: 60.97 GB
2025-11-04 17:15:42,059 - models.llm_models - INFO -   NPU 6: Ascend910B2, 总显存: 60.97 GB
2025-11-04 17:15:42,059 - models.llm_models - INFO -   NPU 7: Ascend910B2, 总显存: 60.97 GB
2025-11-04 17:15:42,059 - models.llm_models - INFO - 盘古7B模型设备配置: ['npu:0', 'npu:1', 'npu:2', 'npu:3', 'npu:4', 'npu:5', 'npu:6', 'npu:7']
2025-11-04 17:15:42,059 - system_core - INFO - 🔄 预加载盘古7B模型...
2025-11-04 17:15:42,060 - models.llm_models - INFO - 🔄 正在加载盘古7B模型: /opt/pangu/openPangu-Embedded-7B-V1.1
2025-11-04 17:15:43,134 - models.llm_models - INFO - 🚀 使用多NPU模式，跨8个设备分布模型
2025-11-04 17:15:44,960 - datasets - INFO - PyTorch version 2.5.1 available.
2025-11-04 17:15:45,360 - accelerate.utils.modeling - INFO - Based on the current allocation process, no modules could be assigned to the following devices due to insufficient memory:
  - 0: 2512912384 bytes required
These minimum requirements are specific to this allocation attempt and may vary. Consider increasing the available memory for these devices to at least the specified minimum, or adjusting the model config.
2025-11-04 17:15:50,493 - models.llm_models - INFO - ✅ 使用device_map='auto'模式成功加载
2025-11-04 17:15:50,496 - models.llm_models - INFO - 📊 模型分布情况:
2025-11-04 17:15:50,496 - models.llm_models - INFO -    1: 4 层
2025-11-04 17:15:50,496 - models.llm_models - INFO -    2: 6 层
2025-11-04 17:15:50,496 - models.llm_models - INFO -    3: 6 层
2025-11-04 17:15:50,496 - models.llm_models - INFO -    4: 6 层
2025-11-04 17:15:50,496 - models.llm_models - INFO -    5: 6 层
2025-11-04 17:15:50,496 - models.llm_models - INFO -    6: 6 层
2025-11-04 17:15:50,496 - models.llm_models - INFO -    7: 4 层
2025-11-04 17:15:50,496 - models.llm_models - INFO - ✅ 盘古7B模型加载成功
2025-11-04 17:15:50,497 - system_core - INFO - 🧠 初始化BKT算法...
2025-11-04 17:15:50,497 - utils.bkt_algorithm - INFO - ✅ 加载学生状态: 1 个学生, 1 条细粒度记录
2025-11-04 17:15:50,497 - utils.bkt_algorithm - INFO - ✅ 增强版BKT算法初始化完成（细粒度知识点追踪）
2025-11-04 17:15:50,497 - utils.evaluator - INFO - ✅ 个性化学生评估器初始化完成
2025-11-04 17:15:50,497 - visualization.kg_visualizer - INFO - 知识图谱可视化器初始化完成
2025-11-04 17:15:50,497 - system_core - INFO - ✅ 系统初始化完成 - 智能个性化自适应学习版
2025-11-04 17:15:50,498 - __main__ - INFO - ✅ 系统核心初始化完成
2025-11-04 17:15:50,498 - __main__ - INFO - 📚 题库统计: 总题目 49
2025-11-04 17:15:50,498 - __main__ - INFO - 📊 知识点大类: 4 个
2025-11-04 17:15:50,498 - __main__ - INFO - 📋 知识点小类: 38 个
2025-11-04 17:15:50,498 - __main__ - INFO - 🎨 正在创建UI界面...
2025-11-04 17:15:50,498 - ui.main_ui - INFO - ✅ 智能教育UI初始化完成
2025-11-04 17:15:50,794 - __main__ - INFO - ✅ 系统启动成功!
2025-11-04 17:15:50,985 - httpx - INFO - HTTP Request: GET http://localhost:7860/gradio_api/startup-events "HTTP/1.1 200 OK"
2025-11-04 17:15:51,013 - httpx - INFO - HTTP Request: HEAD http://localhost:7860/ "HTTP/1.1 200 OK"
2025-11-04 17:15:52,449 - httpx - INFO - HTTP Request: GET https://api.gradio.app/pkg-version "HTTP/1.1 200 OK"
2025-11-04 17:16:05,891 - system_core - INFO - 🚀 开始智能测评: 学生 student_001, 题数 6
2025-11-04 17:16:05,892 - system_core - INFO - 📊 学生档案: 整体掌握度 0.055, 已学知识点 1
2025-11-04 17:16:05,892 - system_core - INFO - 📊 识别到 1 个薄弱知识点:
2025-11-04 17:16:05,893 - system_core - INFO -   - 代数/分式不等式: 0.055
2025-11-04 17:16:05,893 - system_core - INFO - 🎯 选择薄弱知识点: 代数/分式不等式
2025-11-04 17:16:05,893 - system_core - WARNING - ⚠️  无合适难度题目，随机选择
2025-11-04 17:16:05,894 - system_core - INFO - ✅ 选中题目 31 (难度: 0.55)
2025-11-04 17:16:05,894 - system_core - INFO - ✅ 测评开始 - 第1题: 代数/分式不等式
2025-11-04 17:16:11,800 - system_core - INFO - ✍️  评估答案 (题目 1/6)
2025-11-04 17:16:11,800 - utils.evaluator - INFO - 🤖 使用盘古7B模型进行智能答案评估（严格模式）
2025-11-04 17:16:20,493 - utils.bkt_algorithm - INFO - 📝 答题记录: student_001 - 分式不等式: 0.055 → 0.010 (✗)
2025-11-04 17:16:20,494 - system_core - INFO - 🤔 智能选择下一题...
2025-11-04 17:16:20,494 - system_core - INFO - 📊 识别到 1 个薄弱知识点:
2025-11-04 17:16:20,494 - system_core - INFO -   - 代数/分式不等式: 0.010
2025-11-04 17:16:20,494 - system_core - INFO - 🎯 选择薄弱知识点: 代数/分式不等式
2025-11-04 17:16:20,494 - system_core - WARNING - ⚠️  无合适难度题目，随机选择
2025-11-04 17:16:20,494 - system_core - INFO - ✅ 选中题目 29 (难度: 0.50)
2025-11-04 17:16:20,494 - system_core - INFO - ✅ 准备下一题: 代数/分式不等式
2025-11-04 17:16:26,111 - system_core - INFO - 📄 加载第 2 题
2025-11-04 17:16:32,018 - system_core - INFO - ✍️  评估答案 (题目 2/6)
2025-11-04 17:16:32,019 - utils.evaluator - INFO - 🤖 使用盘古7B模型进行智能答案评估（严格模式）
2025-11-04 17:16:40,137 - utils.bkt_algorithm - INFO - 📝 答题记录: student_001 - 分式不等式: 0.010 → 0.010 (✗)
2025-11-04 17:16:40,137 - system_core - INFO - 🤔 智能选择下一题...
2025-11-04 17:16:40,137 - system_core - INFO - 📊 识别到 1 个薄弱知识点:
2025-11-04 17:16:40,137 - system_core - INFO -   - 代数/分式不等式: 0.010
2025-11-04 17:16:40,137 - system_core - INFO - 🎯 选择薄弱知识点: 代数/分式不等式
2025-11-04 17:16:40,137 - system_core - WARNING - ⚠️  无合适难度题目，随机选择
2025-11-04 17:16:40,138 - system_core - INFO - ✅ 选中题目 8 (难度: 0.50)
2025-11-04 17:16:40,138 - system_core - INFO - ✅ 准备下一题: 代数/分式不等式
2025-11-04 17:16:48,450 - system_core - INFO - 📄 加载第 3 题
2025-11-04 17:17:03,627 - system_core - INFO - ✍️  评估答案 (题目 3/6)
2025-11-04 17:17:03,628 - utils.evaluator - INFO - 🤖 使用盘古7B模型进行智能答案评估（严格模式）
2025-11-04 17:17:11,296 - utils.bkt_algorithm - INFO - 📝 答题记录: student_001 - 分式不等式: 0.010 → 0.010 (✗)
2025-11-04 17:17:11,296 - system_core - INFO - 🤔 智能选择下一题...
2025-11-04 17:17:11,296 - system_core - INFO - 📊 识别到 1 个薄弱知识点:
2025-11-04 17:17:11,296 - system_core - INFO -   - 代数/分式不等式: 0.010
2025-11-04 17:17:11,296 - system_core - INFO - 🔍 探索新知识点: 分析/函数单调性
2025-11-04 17:17:11,297 - utils.bkt_algorithm - INFO - 🆕 初始化学生状态: student_001 - 分析/函数单调性
2025-11-04 17:17:11,297 - system_core - INFO - ✅ 选中题目 5 (难度: 0.45)
2025-11-04 17:17:11,298 - system_core - INFO - ✅ 准备下一题: 分析/函数单调性
2025-11-04 17:17:18,503 - system_core - INFO - 📄 加载第 4 题
2025-11-04 17:17:28,312 - system_core - INFO - ✍️  评估答案 (题目 4/6)
2025-11-04 17:17:28,312 - utils.evaluator - INFO - 🤖 使用盘古7B模型进行智能答案评估（严格模式）
2025-11-04 17:17:37,120 - utils.bkt_algorithm - INFO - 📝 答题记录: student_001 - 函数单调性: 0.300 → 0.055 (✗)
2025-11-04 17:17:37,120 - system_core - INFO - 🤔 智能选择下一题...
2025-11-04 17:17:37,120 - system_core - INFO - 📊 识别到 2 个薄弱知识点:
2025-11-04 17:17:37,121 - system_core - INFO -   - 代数/分式不等式: 0.010
2025-11-04 17:17:37,121 - system_core - INFO -   - 分析/函数单调性: 0.055
2025-11-04 17:17:37,121 - system_core - INFO - 🎯 选择薄弱知识点: 代数/分式不等式
2025-11-04 17:17:37,121 - system_core - WARNING - ⚠️  知识点 代数/分式不等式 无可用题目
2025-11-04 17:17:37,121 - system_core - WARNING - ⚠️  无法选择下一题，提前结束
2025-11-04 17:17:48,202 - system_core - INFO - 📝 生成智能评估报告...
2025-11-04 17:17:48,202 - utils.evaluator - INFO - 📝 正在生成学生 student_001 的综合个性化评估报告...
2025-11-04 17:17:48,203 - utils.evaluator - ERROR - ❌ 生成AI建议失败: sequence item 0: expected str instance, tuple found
2025-11-04 17:17:48,203 - utils.evaluator - INFO - ✅ 综合个性化评估报告生成完成
2025-11-04 17:18:32,912 - system_core - INFO - 🚀 开始智能测评: 学生 student_001, 题数 6
2025-11-04 17:18:32,913 - system_core - INFO - 📊 学生档案: 整体掌握度 0.032, 已学知识点 2
2025-11-04 17:18:32,913 - system_core - INFO - 📊 识别到 2 个薄弱知识点:
2025-11-04 17:18:32,913 - system_core - INFO -   - 代数/分式不等式: 0.010
2025-11-04 17:18:32,913 - system_core - INFO -   - 分析/函数单调性: 0.055
2025-11-04 17:18:32,913 - system_core - INFO - 🎯 选择薄弱知识点: 代数/分式不等式
2025-11-04 17:18:32,913 - system_core - WARNING - ⚠️  无合适难度题目，随机选择
2025-11-04 17:18:32,913 - system_core - INFO - ✅ 选中题目 8 (难度: 0.50)
2025-11-04 17:18:32,913 - system_core - INFO - ✅ 测评开始 - 第1题: 代数/分式不等式
2025-11-04 17:20:50,050 - __main__ - INFO - 👋 系统已关闭
2025-11-04 17:46:42,669 - __main__ - INFO - 🚀 系统启动中...
2025-11-04 17:46:42,669 - __main__ - INFO - ✅ 检测到盘古7B模型文件
2025-11-04 17:46:42,669 - __main__ - INFO - ✅ 检测到题库文件
2025-11-04 17:46:42,669 - __main__ - INFO - ⚙️  正在初始化智能系统核心...
2025-11-04 17:46:42,669 - system_core - INFO - ✅ 智能教育系统核心初始化（增强版）
2025-11-04 17:46:42,669 - system_core - INFO - 🔄 初始化系统组件...
2025-11-04 17:46:49,966 - system_core - ERROR - ❌ 系统初始化失败: No module named 'knowledge_management'
2025-11-04 17:46:49,966 - system_core - ERROR - Traceback (most recent call last):
  File "/home/weitianyu/teach_system/system_core.py", line 43, in initialize
    from knowledge_management.rag_engine import create_rag_engine
ModuleNotFoundError: No module named 'knowledge_management'

2025-11-04 17:46:49,967 - __main__ - ERROR - ❌ 系统运行出错: 系统初始化失败: No module named 'knowledge_management'
Traceback (most recent call last):
  File "/home/weitianyu/teach_system/system_core.py", line 43, in initialize
    from knowledge_management.rag_engine import create_rag_engine
ModuleNotFoundError: No module named 'knowledge_management'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/weitianyu/teach_system/main.py", line 69, in main
    system_core = create_system_core(config)
                  ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/weitianyu/teach_system/system_core.py", line 507, in create_system_core
    core.initialize()
  File "/home/weitianyu/teach_system/system_core.py", line 131, in initialize
    raise RuntimeError(f"系统初始化失败: {e}")
RuntimeError: 系统初始化失败: No module named 'knowledge_management'
2025-11-04 17:46:49,967 - __main__ - INFO - 👋 系统已关闭
2025-11-05 09:28:06,082 - __main__ - INFO - 🚀 系统启动中...
2025-11-05 09:28:06,082 - __main__ - INFO - ✅ 检测到盘古7B模型文件
2025-11-05 09:28:06,083 - __main__ - INFO - ✅ 检测到题库文件
2025-11-05 09:28:06,083 - __main__ - INFO - ⚙️  正在初始化智能系统核心...
2025-11-05 09:28:06,083 - system_core - INFO - ✅ 智能教育系统核心初始化（增强版）
2025-11-05 09:28:06,083 - system_core - INFO - 🔄 初始化系统组件...
2025-11-05 09:28:13,441 - knowledge_management.rag_engine - WARNING - LightRAG未安装,将使用模拟模式
2025-11-05 09:28:13,442 - system_core - INFO - 📚 初始化题库...
2025-11-05 09:28:13,442 - data_management.question_db - INFO - ✅ 加载题库成功: 49 道题目
2025-11-05 09:28:13,442 - data_management.question_db - INFO - ✅ 增强版题库初始化完成: /home/weitianyu/teach_system/data/question_database_2.json
2025-11-05 09:28:13,442 - system_core - INFO - 🔤 初始化嵌入模型...
2025-11-05 09:28:13,443 - models.embedding_model - INFO - 尝试使用盘古7B的嵌入功能...
2025-11-05 09:28:13,443 - models.embedding_model - INFO - 初始化盘古7B嵌入模型: /opt/pangu/openPangu-Embedded-7B-V1.1
2025-11-05 09:28:13,443 - system_core - INFO - 🧠 初始化RAG引擎...
2025-11-05 09:28:13,443 - knowledge_management.rag_engine - INFO - 初始化RAG引擎,工作目录: /home/weitianyu/teach_system/rag_storage
2025-11-05 09:28:13,443 - knowledge_management.rag_engine - WARNING - LightRAG不可用,使用模拟模式
2025-11-05 09:28:13,443 - system_core - INFO - ✅ RAG引擎初始化成功
2025-11-05 09:28:13,443 - system_core - INFO - 🔄 正在构建知识图谱...
2025-11-05 09:28:13,444 - knowledge_management.rag_engine - INFO - 初始化题库知识图谱管理器
2025-11-05 09:28:13,444 - knowledge_management.rag_engine - WARNING - LightRAG不可用,使用模拟模式
2025-11-05 09:28:13,444 - knowledge_management.rag_engine - WARNING - LightRAG不可用,跳过文档插入
2025-11-05 09:28:13,444 - knowledge_management.rag_engine - INFO - 已构建 49 道题目的知识图谱
2025-11-05 09:28:13,444 - system_core - INFO - ✅ 知识图谱构建完成
2025-11-05 09:28:13,444 - system_core - INFO - 🚀 初始化盘古7B模型...
2025-11-05 09:28:13,444 - models.llm_models - INFO - 🆕 创建新的盘古7B模型实例（任务类型: pangu）
2025-11-05 09:28:13,445 - models.llm_models - INFO - ✅ 检测到 8 个NPU设备
2025-11-05 09:28:21,404 - models.llm_models - INFO -   NPU 0: Ascend910B2, 总显存: 60.97 GB
2025-11-05 09:28:21,405 - models.llm_models - INFO -   NPU 1: Ascend910B2, 总显存: 60.97 GB
2025-11-05 09:28:21,405 - models.llm_models - INFO -   NPU 2: Ascend910B2, 总显存: 60.97 GB
2025-11-05 09:28:21,406 - models.llm_models - INFO -   NPU 3: Ascend910B2, 总显存: 60.97 GB
2025-11-05 09:28:21,406 - models.llm_models - INFO -   NPU 4: Ascend910B2, 总显存: 60.97 GB
2025-11-05 09:28:21,406 - models.llm_models - INFO -   NPU 5: Ascend910B2, 总显存: 60.97 GB
2025-11-05 09:28:21,407 - models.llm_models - INFO -   NPU 6: Ascend910B2, 总显存: 60.97 GB
2025-11-05 09:28:21,407 - models.llm_models - INFO -   NPU 7: Ascend910B2, 总显存: 60.97 GB
2025-11-05 09:28:21,407 - models.llm_models - INFO - 盘古7B模型设备配置: ['npu:0', 'npu:1', 'npu:2', 'npu:3', 'npu:4', 'npu:5', 'npu:6', 'npu:7']
2025-11-05 09:28:21,407 - system_core - INFO - 🔄 预加载盘古7B模型...
2025-11-05 09:28:21,408 - models.llm_models - INFO - 🔄 正在加载盘古7B模型: /opt/pangu/openPangu-Embedded-7B-V1.1
2025-11-05 09:28:22,472 - models.llm_models - INFO - 🚀 使用多NPU模式，跨8个设备分布模型
2025-11-05 09:28:24,366 - datasets - INFO - PyTorch version 2.5.1 available.
2025-11-05 09:28:24,788 - accelerate.utils.modeling - INFO - Based on the current allocation process, no modules could be assigned to the following devices due to insufficient memory:
  - 0: 2512912384 bytes required
These minimum requirements are specific to this allocation attempt and may vary. Consider increasing the available memory for these devices to at least the specified minimum, or adjusting the model config.
2025-11-05 09:28:29,910 - models.llm_models - INFO - ✅ 使用device_map='auto'模式成功加载
2025-11-05 09:28:29,913 - models.llm_models - INFO - 📊 模型分布情况:
2025-11-05 09:28:29,913 - models.llm_models - INFO -    1: 4 层
2025-11-05 09:28:29,913 - models.llm_models - INFO -    2: 6 层
2025-11-05 09:28:29,913 - models.llm_models - INFO -    3: 6 层
2025-11-05 09:28:29,913 - models.llm_models - INFO -    4: 6 层
2025-11-05 09:28:29,913 - models.llm_models - INFO -    5: 6 层
2025-11-05 09:28:29,913 - models.llm_models - INFO -    6: 6 层
2025-11-05 09:28:29,913 - models.llm_models - INFO -    7: 4 层
2025-11-05 09:28:29,913 - models.llm_models - INFO - ✅ 盘古7B模型加载成功
2025-11-05 09:28:29,914 - system_core - INFO - ✅ 盘古7B模型加载完成
2025-11-05 09:28:29,914 - system_core - INFO - 🧠 初始化BKT算法...
2025-11-05 09:28:29,914 - utils.bkt_algorithm - INFO - ✅ 加载学生状态: 1 个学生, 2 条细粒度记录
2025-11-05 09:28:29,914 - utils.bkt_algorithm - INFO - ✅ 增强版BKT算法初始化完成（细粒度知识点追踪）
2025-11-05 09:28:29,914 - system_core - INFO - 📊 初始化评估器（盘古7B驱动）...
2025-11-05 09:28:29,915 - utils.evaluator - INFO - ✅ 个性化学生评估器初始化完成
2025-11-05 09:28:29,915 - system_core - INFO - 📝 初始化题目生成器（盘古7B + LightRAG）...
2025-11-05 09:28:29,915 - utils.question_generator - INFO - ✅ 增强版题目生成器初始化完成（盘古7B + LightRAG）
2025-11-05 09:28:29,915 - system_core - INFO - 🎨 初始化可视化组件...
2025-11-05 09:28:29,915 - visualization.kg_visualizer - INFO - 知识图谱可视化器初始化完成
2025-11-05 09:28:29,915 - system_core - INFO - ✅ 系统初始化完成 - 智能个性化自适应学习版（盘古7B驱动）
2025-11-05 09:28:29,915 - __main__ - INFO - ✅ 系统核心初始化完成
2025-11-05 09:28:29,915 - __main__ - INFO - 📚 题库统计: 总题目 49
2025-11-05 09:28:29,915 - __main__ - INFO - 📊 知识点大类: 4 个
2025-11-05 09:28:29,916 - __main__ - INFO - 📋 知识点小类: 38 个
2025-11-05 09:28:29,916 - __main__ - INFO - 🎨 正在创建UI界面...
2025-11-05 09:28:29,916 - ui.main_ui - INFO - ✅ 智能教育UI初始化完成
2025-11-05 09:28:30,215 - __main__ - INFO - ✅ 系统启动成功!
2025-11-05 09:28:30,406 - httpx - INFO - HTTP Request: GET http://localhost:7860/gradio_api/startup-events "HTTP/1.1 200 OK"
2025-11-05 09:28:30,434 - httpx - INFO - HTTP Request: HEAD http://localhost:7860/ "HTTP/1.1 200 OK"
2025-11-05 09:28:30,840 - httpx - INFO - HTTP Request: GET https://api.gradio.app/pkg-version "HTTP/1.1 200 OK"
2025-11-05 09:33:26,680 - ui.main_ui - INFO - 🚀 学生 student_001 开始测评
2025-11-05 09:33:26,680 - system_core - INFO - 🚀 开始智能测评: 学生 student_001, 题数 6
2025-11-05 09:33:26,681 - system_core - INFO - 📊 使用BKT算法进行自适应题目选择...
2025-11-05 09:33:26,682 - system_core - INFO - 📊 学生档案: 整体掌握度 0.032, 已学知识点 2
2025-11-05 09:33:26,682 - system_core - INFO - 📊 识别到 2 个薄弱知识点:
2025-11-05 09:33:26,682 - system_core - INFO -   - 代数/分式不等式: 0.010
2025-11-05 09:33:26,682 - system_core - INFO -   - 分析/函数单调性: 0.055
2025-11-05 09:33:26,683 - system_core - INFO - 🔍 探索新知识点: 代数/二次不等式
2025-11-05 09:33:26,684 - utils.bkt_algorithm - INFO - 🆕 初始化学生状态: student_001 - 代数/二次不等式
2025-11-05 09:33:26,684 - system_core - WARNING - ⚠️  无合适难度题目，随机选择
2025-11-05 09:33:26,684 - system_core - INFO - ✅ 选中题目 45 (难度: 0.20)
2025-11-05 09:33:26,684 - system_core - INFO - ✅ 测评开始 - 第1题: 代数/二次不等式
2025-11-05 09:33:59,374 - ui.main_ui - INFO - 📝 提交答案，正在使用盘古7B评估...
2025-11-05 09:33:59,374 - system_core - INFO - ✍️  评估答案 (题目 1/6)
2025-11-05 09:33:59,374 - system_core - INFO - 🤖 使用盘古7B进行严格答案评估...
2025-11-05 09:33:59,374 - utils.evaluator - INFO - 🤖 使用盘古7B模型进行智能答案评估（严格模式）
2025-11-05 09:34:12,985 - system_core - INFO - 📊 盘古7B判定: ❌ 错误
2025-11-05 09:34:12,987 - utils.bkt_algorithm - INFO - 📝 答题记录: student_001 - 二次不等式: 0.300 → 0.055 (✗)
2025-11-05 09:34:12,987 - system_core - INFO - 🤔 基于BKT算法智能选择下一题...
2025-11-05 09:34:12,987 - system_core - INFO - 📊 识别到 3 个薄弱知识点:
2025-11-05 09:34:12,987 - system_core - INFO -   - 代数/分式不等式: 0.010
2025-11-05 09:34:12,987 - system_core - INFO -   - 代数/二次不等式: 0.055
2025-11-05 09:34:12,987 - system_core - INFO -   - 分析/函数单调性: 0.055
2025-11-05 09:34:12,987 - system_core - INFO - 🔍 探索新知识点: 几何/立体几何
2025-11-05 09:34:12,988 - utils.bkt_algorithm - INFO - 🆕 初始化学生状态: student_001 - 几何/立体几何
2025-11-05 09:34:12,989 - system_core - INFO - ✅ 选中题目 13 (难度: 0.45)
2025-11-05 09:34:12,989 - system_core - INFO - ✅ 准备下一题: 几何/立体几何
2025-11-05 09:34:45,573 - system_core - INFO - 📄 加载第 2 题
2025-11-05 09:34:50,283 - ui.main_ui - INFO - 📝 提交答案，正在使用盘古7B评估...
2025-11-05 09:34:50,283 - system_core - INFO - ✍️  评估答案 (题目 2/6)
2025-11-05 09:34:50,283 - system_core - INFO - 🤖 使用盘古7B进行严格答案评估...
2025-11-05 09:34:50,283 - utils.evaluator - INFO - 🤖 使用盘古7B模型进行智能答案评估（严格模式）
2025-11-05 09:35:00,461 - system_core - INFO - 📊 盘古7B判定: ❌ 错误
2025-11-05 09:35:00,463 - utils.bkt_algorithm - INFO - 📝 答题记录: student_001 - 立体几何: 0.300 → 0.055 (✗)
2025-11-05 09:35:00,463 - system_core - INFO - 🤔 基于BKT算法智能选择下一题...
2025-11-05 09:35:00,463 - system_core - INFO - 📊 识别到 4 个薄弱知识点:
2025-11-05 09:35:00,463 - system_core - INFO -   - 代数/分式不等式: 0.010
2025-11-05 09:35:00,463 - system_core - INFO -   - 代数/二次不等式: 0.055
2025-11-05 09:35:00,463 - system_core - INFO -   - 分析/函数单调性: 0.055
2025-11-05 09:35:00,463 - system_core - INFO - 🎯 选择薄弱知识点: 代数/分式不等式
2025-11-05 09:35:00,463 - system_core - WARNING - ⚠️  无合适难度题目，随机选择
2025-11-05 09:35:00,464 - system_core - INFO - ✅ 选中题目 8 (难度: 0.50)
2025-11-05 09:35:00,464 - system_core - INFO - ✅ 准备下一题: 代数/分式不等式
2025-11-05 09:35:10,359 - system_core - INFO - 📄 加载第 3 题
2025-11-05 09:35:15,765 - ui.main_ui - INFO - 📝 提交答案，正在使用盘古7B评估...
2025-11-05 09:35:15,765 - system_core - INFO - ✍️  评估答案 (题目 3/6)
2025-11-05 09:35:15,765 - system_core - INFO - 🤖 使用盘古7B进行严格答案评估...
2025-11-05 09:35:15,766 - utils.evaluator - INFO - 🤖 使用盘古7B模型进行智能答案评估（严格模式）
2025-11-05 09:35:28,467 - system_core - INFO - 📊 盘古7B判定: ❌ 错误
2025-11-05 09:35:28,468 - utils.bkt_algorithm - INFO - 📝 答题记录: student_001 - 分式不等式: 0.010 → 0.010 (✗)
2025-11-05 09:35:28,469 - system_core - INFO - 🤔 基于BKT算法智能选择下一题...
2025-11-05 09:35:28,469 - system_core - INFO - 📊 识别到 4 个薄弱知识点:
2025-11-05 09:35:28,469 - system_core - INFO -   - 代数/分式不等式: 0.010
2025-11-05 09:35:28,469 - system_core - INFO -   - 代数/二次不等式: 0.055
2025-11-05 09:35:28,469 - system_core - INFO -   - 分析/函数单调性: 0.055
2025-11-05 09:35:28,469 - system_core - INFO - 🎯 选择薄弱知识点: 代数/分式不等式
2025-11-05 09:35:28,469 - system_core - WARNING - ⚠️  无合适难度题目，随机选择
2025-11-05 09:35:28,469 - system_core - INFO - ✅ 选中题目 29 (难度: 0.50)
2025-11-05 09:35:28,469 - system_core - INFO - ✅ 准备下一题: 代数/分式不等式
2025-11-05 09:35:44,453 - system_core - INFO - 📄 加载第 4 题
2025-11-05 09:36:33,610 - ui.main_ui - INFO - 📝 提交答案，正在使用盘古7B评估...
2025-11-05 09:36:33,611 - system_core - INFO - ✍️  评估答案 (题目 4/6)
2025-11-05 09:36:33,611 - system_core - INFO - 🤖 使用盘古7B进行严格答案评估...
2025-11-05 09:36:33,611 - utils.evaluator - INFO - 🤖 使用盘古7B模型进行智能答案评估（严格模式）
2025-11-05 09:36:44,929 - system_core - INFO - 📊 盘古7B判定: ❌ 错误
2025-11-05 09:36:44,931 - utils.bkt_algorithm - INFO - 📝 答题记录: student_001 - 分式不等式: 0.010 → 0.010 (✗)
2025-11-05 09:36:44,931 - system_core - INFO - 🤔 基于BKT算法智能选择下一题...
2025-11-05 09:36:44,931 - system_core - INFO - 📊 识别到 4 个薄弱知识点:
2025-11-05 09:36:44,932 - system_core - INFO -   - 代数/分式不等式: 0.010
2025-11-05 09:36:44,932 - system_core - INFO -   - 代数/二次不等式: 0.055
2025-11-05 09:36:44,932 - system_core - INFO -   - 分析/函数单调性: 0.055
2025-11-05 09:36:44,932 - system_core - INFO - 🎯 选择薄弱知识点: 代数/分式不等式
2025-11-05 09:36:44,932 - system_core - WARNING - ⚠️  无合适难度题目，随机选择
2025-11-05 09:36:44,932 - system_core - INFO - ✅ 选中题目 31 (难度: 0.55)
2025-11-05 09:36:44,932 - system_core - INFO - ✅ 准备下一题: 代数/分式不等式
2025-11-05 09:38:38,671 - system_core - INFO - 📄 加载第 5 题
2025-11-05 09:39:35,240 - ui.main_ui - INFO - 📝 提交答案，正在使用盘古7B评估...
2025-11-05 09:39:35,241 - system_core - INFO - ✍️  评估答案 (题目 5/6)
2025-11-05 09:39:35,241 - system_core - INFO - 🤖 使用盘古7B进行严格答案评估...
2025-11-05 09:39:35,241 - utils.evaluator - INFO - 🤖 使用盘古7B模型进行智能答案评估（严格模式）
2025-11-05 09:39:43,706 - system_core - INFO - 📊 盘古7B判定: ✅ 正确
2025-11-05 09:39:43,708 - utils.bkt_algorithm - INFO - 📝 答题记录: student_001 - 分式不等式: 0.010 → 0.224 (✓)
2025-11-05 09:39:43,708 - system_core - INFO - 🤔 基于BKT算法智能选择下一题...
2025-11-05 09:39:43,708 - system_core - INFO - 📊 识别到 4 个薄弱知识点:
2025-11-05 09:39:43,708 - system_core - INFO -   - 代数/二次不等式: 0.055
2025-11-05 09:39:43,708 - system_core - INFO -   - 分析/函数单调性: 0.055
2025-11-05 09:39:43,708 - system_core - INFO -   - 几何/立体几何: 0.055
2025-11-05 09:39:43,708 - system_core - INFO - 🎯 选择薄弱知识点: 代数/二次不等式
2025-11-05 09:39:43,709 - system_core - WARNING - ⚠️  知识点 代数/二次不等式 无可用题目
2025-11-05 09:39:43,709 - system_core - WARNING - ⚠️  无法选择下一题，提前结束
2025-11-05 09:39:50,018 - ui.main_ui - INFO - 📊 测评完成，正在生成报告...
2025-11-05 09:39:50,018 - system_core - INFO - 📝 正在使用盘古7B生成智能评估报告...
2025-11-05 09:39:50,018 - system_core - INFO - 🤖 盘古7B将分析学习模式并生成个性化建议...
2025-11-05 09:39:50,018 - utils.evaluator - INFO - 📝 正在生成学生 student_001 的综合个性化评估报告...
2025-11-05 09:39:50,019 - utils.evaluator - ERROR - ❌ 生成AI建议失败: sequence item 0: expected str instance, tuple found
2025-11-05 09:39:50,019 - utils.evaluator - INFO - ✅ 综合个性化评估报告生成完成
2025-11-05 09:39:50,019 - system_core - INFO - ✅ 盘古7B报告生成完成
2025-11-05 09:43:57,512 - ui.main_ui - INFO - 🔄 重置测评状态
2025-11-05 09:43:59,864 - ui.main_ui - INFO - 🚀 学生 student_001 开始测评
2025-11-05 09:43:59,865 - system_core - INFO - 🚀 开始智能测评: 学生 student_001, 题数 6
2025-11-05 09:43:59,865 - system_core - INFO - 📊 使用BKT算法进行自适应题目选择...
2025-11-05 09:43:59,865 - system_core - INFO - 📊 学生档案: 整体掌握度 0.097, 已学知识点 4
2025-11-05 09:43:59,865 - system_core - INFO - 📊 识别到 4 个薄弱知识点:
2025-11-05 09:43:59,865 - system_core - INFO -   - 代数/二次不等式: 0.055
2025-11-05 09:43:59,865 - system_core - INFO -   - 分析/函数单调性: 0.055
2025-11-05 09:43:59,865 - system_core - INFO -   - 几何/立体几何: 0.055
2025-11-05 09:43:59,866 - system_core - INFO - 🎯 选择薄弱知识点: 代数/二次不等式
2025-11-05 09:43:59,866 - system_core - INFO - ✅ 选中题目 45 (难度: 0.20)
2025-11-05 09:43:59,867 - system_core - INFO - ✅ 测评开始 - 第1题: 代数/二次不等式
2025-11-05 09:44:02,919 - ui.main_ui - INFO - 📝 提交答案，正在使用盘古7B评估...
2025-11-05 09:44:02,919 - system_core - INFO - ✍️  评估答案 (题目 1/6)
2025-11-05 09:44:02,919 - system_core - INFO - 🤖 使用盘古7B进行严格答案评估...
2025-11-05 09:44:02,919 - utils.evaluator - INFO - 🤖 使用盘古7B模型进行智能答案评估（严格模式）
2025-11-05 09:44:09,054 - system_core - INFO - 📊 盘古7B判定: ✅ 正确
2025-11-05 09:44:09,056 - utils.bkt_algorithm - INFO - 📝 答题记录: student_001 - 二次不等式: 0.055 → 0.319 (✓)
2025-11-05 09:44:09,056 - system_core - INFO - 🤔 基于BKT算法智能选择下一题...
2025-11-05 09:44:09,057 - system_core - INFO - 📊 识别到 4 个薄弱知识点:
2025-11-05 09:44:09,057 - system_core - INFO -   - 分析/函数单调性: 0.055
2025-11-05 09:44:09,057 - system_core - INFO -   - 几何/立体几何: 0.055
2025-11-05 09:44:09,057 - system_core - INFO -   - 代数/分式不等式: 0.224
2025-11-05 09:44:09,057 - system_core - INFO - 🎯 选择薄弱知识点: 分析/函数单调性
2025-11-05 09:44:09,057 - system_core - WARNING - ⚠️  无合适难度题目，随机选择
2025-11-05 09:44:09,057 - system_core - INFO - ✅ 选中题目 5 (难度: 0.45)
2025-11-05 09:44:09,057 - system_core - INFO - ✅ 准备下一题: 分析/函数单调性
2025-11-05 09:45:43,820 - __main__ - INFO - 👋 系统已关闭
2025-11-05 10:06:52,161 - __main__ - INFO - 🚀 系统启动中...
2025-11-05 10:06:52,162 - __main__ - INFO - ✅ 检测到盘古7B模型文件
2025-11-05 10:06:52,162 - __main__ - INFO - ✅ 检测到题库文件
2025-11-05 10:06:52,162 - __main__ - INFO - ⚙️  正在初始化智能系统核心...
2025-11-05 10:06:52,162 - system_core - INFO - ✅ 智能教育系统核心初始化（增强版）
2025-11-05 10:06:52,162 - system_core - INFO - 🔄 初始化系统组件...
2025-11-05 10:06:59,478 - knowledge_management.rag_engine - WARNING - LightRAG未安装,将使用模拟模式
2025-11-05 10:06:59,479 - system_core - INFO - 📚 初始化题库...
2025-11-05 10:06:59,479 - data_management.question_db - INFO - ✅ 加载题库成功: 49 道题目
2025-11-05 10:06:59,479 - data_management.question_db - INFO - ✅ 增强版题库初始化完成: /home/weitianyu/teach_system/data/question_database_2.json
2025-11-05 10:06:59,480 - system_core - INFO - 🔤 初始化嵌入模型...
2025-11-05 10:06:59,480 - models.embedding_model - INFO - 尝试使用盘古7B的嵌入功能...
2025-11-05 10:06:59,480 - models.embedding_model - INFO - 初始化盘古7B嵌入模型: /opt/pangu/openPangu-Embedded-7B-V1.1
2025-11-05 10:06:59,480 - system_core - INFO - 🧠 初始化RAG引擎...
2025-11-05 10:06:59,480 - knowledge_management.rag_engine - INFO - 初始化RAG引擎,工作目录: /home/weitianyu/teach_system/rag_storage
2025-11-05 10:06:59,480 - knowledge_management.rag_engine - WARNING - LightRAG不可用,使用模拟模式
2025-11-05 10:06:59,480 - system_core - INFO - ✅ RAG引擎初始化成功
2025-11-05 10:06:59,481 - system_core - INFO - 🔄 正在构建知识图谱...
2025-11-05 10:06:59,481 - knowledge_management.rag_engine - INFO - 初始化题库知识图谱管理器
2025-11-05 10:06:59,481 - knowledge_management.rag_engine - WARNING - LightRAG不可用,使用模拟模式
2025-11-05 10:06:59,481 - knowledge_management.rag_engine - WARNING - LightRAG不可用,跳过文档插入
2025-11-05 10:06:59,481 - knowledge_management.rag_engine - INFO - 已构建 49 道题目的知识图谱
2025-11-05 10:06:59,481 - system_core - INFO - ✅ 知识图谱构建完成
2025-11-05 10:06:59,481 - system_core - INFO - 🚀 初始化盘古7B模型...
2025-11-05 10:06:59,481 - models.llm_models - INFO - 🆕 创建新的盘古7B模型实例（任务类型: pangu）
2025-11-05 10:06:59,482 - models.llm_models - INFO - ✅ 检测到 8 个NPU设备
2025-11-05 10:07:07,435 - models.llm_models - INFO -   NPU 0: Ascend910B2, 总显存: 60.97 GB
2025-11-05 10:07:07,435 - models.llm_models - INFO -   NPU 1: Ascend910B2, 总显存: 60.97 GB
2025-11-05 10:07:07,436 - models.llm_models - INFO -   NPU 2: Ascend910B2, 总显存: 60.97 GB
2025-11-05 10:07:07,436 - models.llm_models - INFO -   NPU 3: Ascend910B2, 总显存: 60.97 GB
2025-11-05 10:07:07,437 - models.llm_models - INFO -   NPU 4: Ascend910B2, 总显存: 60.97 GB
2025-11-05 10:07:07,437 - models.llm_models - INFO -   NPU 5: Ascend910B2, 总显存: 60.97 GB
2025-11-05 10:07:07,437 - models.llm_models - INFO -   NPU 6: Ascend910B2, 总显存: 60.97 GB
2025-11-05 10:07:07,438 - models.llm_models - INFO -   NPU 7: Ascend910B2, 总显存: 60.97 GB
2025-11-05 10:07:07,438 - models.llm_models - INFO - 盘古7B模型设备配置: ['npu:0', 'npu:1', 'npu:2', 'npu:3', 'npu:4', 'npu:5', 'npu:6', 'npu:7']
2025-11-05 10:07:07,438 - system_core - INFO - 🔄 预加载盘古7B模型...
2025-11-05 10:07:07,438 - models.llm_models - INFO - 🔄 正在加载盘古7B模型: /opt/pangu/openPangu-Embedded-7B-V1.1
2025-11-05 10:07:08,494 - models.llm_models - INFO - 🚀 使用多NPU模式，跨8个设备分布模型
2025-11-05 10:07:10,344 - datasets - INFO - PyTorch version 2.5.1 available.
2025-11-05 10:07:10,747 - accelerate.utils.modeling - INFO - Based on the current allocation process, no modules could be assigned to the following devices due to insufficient memory:
  - 0: 2512912384 bytes required
These minimum requirements are specific to this allocation attempt and may vary. Consider increasing the available memory for these devices to at least the specified minimum, or adjusting the model config.
2025-11-05 10:07:15,795 - models.llm_models - INFO - ✅ 使用device_map='auto'模式成功加载
2025-11-05 10:07:15,798 - models.llm_models - INFO - 📊 模型分布情况:
2025-11-05 10:07:15,798 - models.llm_models - INFO -    1: 4 层
2025-11-05 10:07:15,798 - models.llm_models - INFO -    2: 6 层
2025-11-05 10:07:15,798 - models.llm_models - INFO -    3: 6 层
2025-11-05 10:07:15,798 - models.llm_models - INFO -    4: 6 层
2025-11-05 10:07:15,798 - models.llm_models - INFO -    5: 6 层
2025-11-05 10:07:15,798 - models.llm_models - INFO -    6: 6 层
2025-11-05 10:07:15,798 - models.llm_models - INFO -    7: 4 层
2025-11-05 10:07:15,798 - models.llm_models - INFO - ✅ 盘古7B模型加载成功
2025-11-05 10:07:15,798 - system_core - INFO - ✅ 盘古7B模型加载完成
2025-11-05 10:07:15,798 - system_core - INFO - 🧠 初始化BKT算法...
2025-11-05 10:07:15,799 - utils.bkt_algorithm - INFO - ✅ 加载学生状态: 1 个学生, 4 条细粒度记录
2025-11-05 10:07:15,799 - utils.bkt_algorithm - INFO - ✅ 增强版BKT算法初始化完成（细粒度知识点追踪）
2025-11-05 10:07:15,799 - system_core - INFO - 📊 初始化评估器（盘古7B驱动）...
2025-11-05 10:07:15,799 - utils.evaluator - INFO - ✅ 个性化学生评估器初始化完成
2025-11-05 10:07:15,800 - system_core - INFO - 📝 初始化题目生成器（盘古7B + LightRAG）...
2025-11-05 10:07:15,800 - utils.question_generator - INFO - ✅ 增强版题目生成器初始化完成（盘古7B + LightRAG）
2025-11-05 10:07:15,800 - system_core - INFO - 🎨 初始化可视化组件...
2025-11-05 10:07:15,800 - visualization.kg_visualizer - INFO - 知识图谱可视化器初始化完成
2025-11-05 10:07:15,800 - system_core - INFO - ✅ 系统初始化完成 - 智能个性化自适应学习版（盘古7B驱动）
2025-11-05 10:07:15,800 - __main__ - INFO - ✅ 系统核心初始化完成
2025-11-05 10:07:15,800 - __main__ - INFO - 📚 题库统计: 总题目 49
2025-11-05 10:07:15,800 - __main__ - INFO - 📊 知识点大类: 4 个
2025-11-05 10:07:15,800 - __main__ - INFO - 📋 知识点小类: 38 个
2025-11-05 10:07:15,800 - __main__ - INFO - 🎨 正在创建UI界面...
2025-11-05 10:07:15,801 - visualization.kg_visualizer - INFO - 知识图谱可视化器初始化完成
2025-11-05 10:07:15,801 - ui.main_ui - INFO - ✅ 知识图谱可视化器初始化成功
2025-11-05 10:07:15,801 - ui.main_ui - INFO - ✅ 智能教育UI初始化完成
2025-11-05 10:07:16,121 - __main__ - INFO - ✅ 系统启动成功!
2025-11-05 10:07:16,320 - httpx - INFO - HTTP Request: GET http://localhost:7860/gradio_api/startup-events "HTTP/1.1 200 OK"
2025-11-05 10:07:16,352 - httpx - INFO - HTTP Request: HEAD http://localhost:7860/ "HTTP/1.1 200 OK"
2025-11-05 10:07:16,859 - httpx - INFO - HTTP Request: GET https://api.gradio.app/pkg-version "HTTP/1.1 200 OK"
2025-11-05 10:07:58,273 - ui.main_ui - INFO - 🔨 开始构建知识图谱，布局算法: spring
2025-11-05 10:07:58,273 - ui.main_ui - ERROR - ❌ 构建知识图谱失败: 'SmartEducationSystem' object has no attribute 'question_database'
2025-11-05 10:07:58,276 - ui.main_ui - ERROR - Traceback (most recent call last):
  File "/home/weitianyu/teach_system/ui/main_ui.py", line 625, in _build_knowledge_graph
    questions = self.system.question_database.get_all_questions()
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: 'SmartEducationSystem' object has no attribute 'question_database'

2025-11-05 10:08:03,680 - ui.main_ui - INFO - 🚀 开始智能测评: 学生=student_001, 题目数=6
2025-11-05 10:08:03,681 - system_core - INFO - 🚀 开始智能测评: 学生 student_001, 题数 6
2025-11-05 10:08:03,681 - system_core - INFO - 📊 使用BKT算法进行自适应题目选择...
2025-11-05 10:08:03,681 - system_core - INFO - 📊 学生档案: 整体掌握度 0.163, 已学知识点 4
2025-11-05 10:08:03,681 - system_core - INFO - 📊 识别到 4 个薄弱知识点:
2025-11-05 10:08:03,681 - system_core - INFO -   - 分析/函数单调性: 0.055
2025-11-05 10:08:03,681 - system_core - INFO -   - 几何/立体几何: 0.055
2025-11-05 10:08:03,681 - system_core - INFO -   - 代数/分式不等式: 0.224
2025-11-05 10:08:03,681 - system_core - INFO - 🎯 选择薄弱知识点: 分析/函数单调性
2025-11-05 10:08:03,682 - system_core - WARNING - ⚠️  无合适难度题目，随机选择
2025-11-05 10:08:03,682 - system_core - INFO - ✅ 选中题目 5 (难度: 0.45)
2025-11-05 10:08:03,682 - system_core - INFO - ✅ 测评开始 - 第1题: 分析/函数单调性
2025-11-05 10:08:03,682 - ui.main_ui - INFO - ✅ 测评会话创建成功，第一题加载完成
2025-11-05 10:08:10,893 - ui.main_ui - INFO - ⏳ 正在评估答案...
2025-11-05 10:08:10,894 - system_core - INFO - ✍️  评估答案 (题目 1/6)
2025-11-05 10:08:10,894 - system_core - INFO - 🤖 使用盘古7B进行严格答案评估...
2025-11-05 10:08:10,895 - utils.evaluator - INFO - 🤖 使用盘古7B模型进行智能答案评估（严格模式）
2025-11-05 10:08:23,974 - system_core - INFO - 📊 盘古7B判定: ❌ 错误
2025-11-05 10:08:23,976 - utils.bkt_algorithm - INFO - 📝 答题记录: student_001 - 函数单调性: 0.055 → 0.010 (✗)
2025-11-05 10:08:23,977 - system_core - INFO - 🤔 基于BKT算法智能选择下一题...
2025-11-05 10:08:23,977 - system_core - INFO - 📊 识别到 4 个薄弱知识点:
2025-11-05 10:08:23,977 - system_core - INFO -   - 分析/函数单调性: 0.010
2025-11-05 10:08:23,977 - system_core - INFO -   - 几何/立体几何: 0.055
2025-11-05 10:08:23,977 - system_core - INFO -   - 代数/分式不等式: 0.224
2025-11-05 10:08:23,977 - system_core - INFO - 🎯 选择薄弱知识点: 分析/函数单调性
2025-11-05 10:08:23,977 - system_core - WARNING - ⚠️  知识点 分析/函数单调性 无可用题目
2025-11-05 10:08:23,977 - system_core - WARNING - ⚠️  无法选择下一题，提前结束
2025-11-05 10:08:23,977 - ui.main_ui - ERROR - ❌ 提交答案失败: too many values to unpack (expected 2)
2025-11-05 10:08:23,978 - ui.main_ui - ERROR - Traceback (most recent call last):
  File "/home/weitianyu/teach_system/ui/main_ui.py", line 432, in _submit_answer
    is_correct, feedback = self.system.submit_answer(session, student_answer)
    ^^^^^^^^^^^^^^^^^^^^
ValueError: too many values to unpack (expected 2)

2025-11-05 10:08:54,014 - __main__ - INFO - 👋 系统已关闭
2025-11-05 10:09:31,906 - __main__ - INFO - 🚀 系统启动中...
2025-11-05 10:09:31,906 - __main__ - INFO - ✅ 检测到盘古7B模型文件
2025-11-05 10:09:31,906 - __main__ - INFO - ✅ 检测到题库文件
2025-11-05 10:09:31,906 - __main__ - INFO - ⚙️  正在初始化智能系统核心...
2025-11-05 10:09:31,906 - system_core - INFO - ✅ 智能教育系统核心初始化（增强版）
2025-11-05 10:09:31,906 - system_core - INFO - 🔄 初始化系统组件...
2025-11-05 10:09:39,209 - knowledge_management.rag_engine - WARNING - LightRAG未安装,将使用模拟模式
2025-11-05 10:09:39,210 - system_core - INFO - 📚 初始化题库...
2025-11-05 10:09:39,210 - data_management.question_db - INFO - ✅ 加载题库成功: 49 道题目
2025-11-05 10:09:39,210 - data_management.question_db - INFO - ✅ 增强版题库初始化完成: /home/weitianyu/teach_system/data/question_database_2.json
2025-11-05 10:09:39,210 - system_core - INFO - 🔤 初始化嵌入模型...
2025-11-05 10:09:39,211 - models.embedding_model - INFO - 尝试使用盘古7B的嵌入功能...
2025-11-05 10:09:39,211 - models.embedding_model - INFO - 初始化盘古7B嵌入模型: /opt/pangu/openPangu-Embedded-7B-V1.1
2025-11-05 10:09:39,211 - system_core - INFO - 🧠 初始化RAG引擎...
2025-11-05 10:09:39,211 - knowledge_management.rag_engine - INFO - 初始化RAG引擎,工作目录: /home/weitianyu/teach_system/rag_storage
2025-11-05 10:09:39,211 - knowledge_management.rag_engine - WARNING - LightRAG不可用,使用模拟模式
2025-11-05 10:09:39,211 - system_core - INFO - ✅ RAG引擎初始化成功
2025-11-05 10:09:39,212 - system_core - INFO - 🔄 正在构建知识图谱...
2025-11-05 10:09:39,212 - knowledge_management.rag_engine - INFO - 初始化题库知识图谱管理器
2025-11-05 10:09:39,212 - knowledge_management.rag_engine - WARNING - LightRAG不可用,使用模拟模式
2025-11-05 10:09:39,212 - knowledge_management.rag_engine - WARNING - LightRAG不可用,跳过文档插入
2025-11-05 10:09:39,212 - knowledge_management.rag_engine - INFO - 已构建 49 道题目的知识图谱
2025-11-05 10:09:39,212 - system_core - INFO - ✅ 知识图谱构建完成
2025-11-05 10:09:39,212 - system_core - INFO - 🚀 初始化盘古7B模型...
2025-11-05 10:09:39,212 - models.llm_models - INFO - 🆕 创建新的盘古7B模型实例（任务类型: pangu）
2025-11-05 10:09:39,213 - models.llm_models - INFO - ✅ 检测到 8 个NPU设备
2025-11-05 10:09:47,143 - models.llm_models - INFO -   NPU 0: Ascend910B2, 总显存: 60.97 GB
2025-11-05 10:09:47,144 - models.llm_models - INFO -   NPU 1: Ascend910B2, 总显存: 60.97 GB
2025-11-05 10:09:47,144 - models.llm_models - INFO -   NPU 2: Ascend910B2, 总显存: 60.97 GB
2025-11-05 10:09:47,145 - models.llm_models - INFO -   NPU 3: Ascend910B2, 总显存: 60.97 GB
2025-11-05 10:09:47,145 - models.llm_models - INFO -   NPU 4: Ascend910B2, 总显存: 60.97 GB
2025-11-05 10:09:47,145 - models.llm_models - INFO -   NPU 5: Ascend910B2, 总显存: 60.97 GB
2025-11-05 10:09:47,146 - models.llm_models - INFO -   NPU 6: Ascend910B2, 总显存: 60.97 GB
2025-11-05 10:09:47,146 - models.llm_models - INFO -   NPU 7: Ascend910B2, 总显存: 60.97 GB
2025-11-05 10:09:47,146 - models.llm_models - INFO - 盘古7B模型设备配置: ['npu:0', 'npu:1', 'npu:2', 'npu:3', 'npu:4', 'npu:5', 'npu:6', 'npu:7']
2025-11-05 10:09:47,147 - system_core - INFO - 🔄 预加载盘古7B模型...
2025-11-05 10:09:47,147 - models.llm_models - INFO - 🔄 正在加载盘古7B模型: /opt/pangu/openPangu-Embedded-7B-V1.1
2025-11-05 10:09:48,210 - models.llm_models - INFO - 🚀 使用多NPU模式，跨8个设备分布模型
2025-11-05 10:09:50,067 - datasets - INFO - PyTorch version 2.5.1 available.
2025-11-05 10:09:50,471 - accelerate.utils.modeling - INFO - Based on the current allocation process, no modules could be assigned to the following devices due to insufficient memory:
  - 0: 2512912384 bytes required
These minimum requirements are specific to this allocation attempt and may vary. Consider increasing the available memory for these devices to at least the specified minimum, or adjusting the model config.
2025-11-05 10:09:55,573 - models.llm_models - INFO - ✅ 使用device_map='auto'模式成功加载
2025-11-05 10:09:55,576 - models.llm_models - INFO - 📊 模型分布情况:
2025-11-05 10:09:55,576 - models.llm_models - INFO -    1: 4 层
2025-11-05 10:09:55,576 - models.llm_models - INFO -    2: 6 层
2025-11-05 10:09:55,576 - models.llm_models - INFO -    3: 6 层
2025-11-05 10:09:55,576 - models.llm_models - INFO -    4: 6 层
2025-11-05 10:09:55,576 - models.llm_models - INFO -    5: 6 层
2025-11-05 10:09:55,576 - models.llm_models - INFO -    6: 6 层
2025-11-05 10:09:55,576 - models.llm_models - INFO -    7: 4 层
2025-11-05 10:09:55,576 - models.llm_models - INFO - ✅ 盘古7B模型加载成功
2025-11-05 10:09:55,577 - system_core - INFO - ✅ 盘古7B模型加载完成
2025-11-05 10:09:55,577 - system_core - INFO - 🧠 初始化BKT算法...
2025-11-05 10:09:55,577 - utils.bkt_algorithm - INFO - ✅ 加载学生状态: 1 个学生, 4 条细粒度记录
2025-11-05 10:09:55,577 - utils.bkt_algorithm - INFO - ✅ 增强版BKT算法初始化完成（细粒度知识点追踪）
2025-11-05 10:09:55,578 - system_core - INFO - 📊 初始化评估器（盘古7B驱动）...
2025-11-05 10:09:55,578 - utils.evaluator - INFO - ✅ 个性化学生评估器初始化完成
2025-11-05 10:09:55,578 - system_core - INFO - 📝 初始化题目生成器（盘古7B + LightRAG）...
2025-11-05 10:09:55,578 - utils.question_generator - INFO - ✅ 增强版题目生成器初始化完成（盘古7B + LightRAG）
2025-11-05 10:09:55,578 - system_core - INFO - 🎨 初始化可视化组件...
2025-11-05 10:09:55,578 - visualization.kg_visualizer - INFO - 知识图谱可视化器初始化完成
2025-11-05 10:09:55,578 - system_core - INFO - ✅ 系统初始化完成 - 智能个性化自适应学习版（盘古7B驱动）
2025-11-05 10:09:55,578 - __main__ - INFO - ✅ 系统核心初始化完成
2025-11-05 10:09:55,578 - __main__ - INFO - 📚 题库统计: 总题目 49
2025-11-05 10:09:55,579 - __main__ - INFO - 📊 知识点大类: 4 个
2025-11-05 10:09:55,579 - __main__ - INFO - 📋 知识点小类: 38 个
2025-11-05 10:09:55,579 - __main__ - INFO - 🎨 正在创建UI界面...
2025-11-05 10:09:55,579 - ui.main_ui - INFO - ✅ 智能教育UI初始化完成
2025-11-05 10:09:55,875 - __main__ - INFO - ✅ 系统启动成功!
2025-11-05 10:09:56,063 - httpx - INFO - HTTP Request: GET http://localhost:7860/gradio_api/startup-events "HTTP/1.1 200 OK"
2025-11-05 10:09:56,091 - httpx - INFO - HTTP Request: HEAD http://localhost:7860/ "HTTP/1.1 200 OK"
2025-11-05 10:09:56,494 - httpx - INFO - HTTP Request: GET https://api.gradio.app/pkg-version "HTTP/1.1 200 OK"
2025-11-05 10:10:19,880 - ui.main_ui - INFO - 🚀 学生 student_001 开始测评
2025-11-05 10:10:19,880 - system_core - INFO - 🚀 开始智能测评: 学生 student_001, 题数 7
2025-11-05 10:10:19,881 - system_core - INFO - 📊 使用BKT算法进行自适应题目选择...
2025-11-05 10:10:19,881 - system_core - INFO - 📊 学生档案: 整体掌握度 0.152, 已学知识点 4
2025-11-05 10:10:19,882 - system_core - INFO - 📊 识别到 4 个薄弱知识点:
2025-11-05 10:10:19,882 - system_core - INFO -   - 分析/函数单调性: 0.010
2025-11-05 10:10:19,882 - system_core - INFO -   - 几何/立体几何: 0.055
2025-11-05 10:10:19,882 - system_core - INFO -   - 代数/分式不等式: 0.224
2025-11-05 10:10:19,882 - system_core - INFO - 🔍 探索新知识点: 代数/高次方程
2025-11-05 10:10:19,884 - utils.bkt_algorithm - INFO - 🆕 初始化学生状态: student_001 - 代数/高次方程
2025-11-05 10:10:19,884 - system_core - INFO - ✅ 选中题目 17 (难度: 0.30)
2025-11-05 10:10:19,884 - system_core - INFO - ✅ 测评开始 - 第1题: 代数/高次方程
2025-11-05 10:10:23,887 - ui.main_ui - INFO - 📝 提交答案，正在使用盘古7B评估...
2025-11-05 10:10:23,887 - system_core - INFO - ✍️  评估答案 (题目 1/7)
2025-11-05 10:10:23,887 - system_core - INFO - 🤖 使用盘古7B进行严格答案评估...
2025-11-05 10:10:23,887 - utils.evaluator - INFO - 🤖 使用盘古7B模型进行智能答案评估（严格模式）
2025-11-05 10:10:35,310 - system_core - INFO - 📊 盘古7B判定: ❌ 错误
2025-11-05 10:10:35,313 - utils.bkt_algorithm - INFO - 📝 答题记录: student_001 - 高次方程: 0.200 → 0.033 (✗)
2025-11-05 10:10:35,313 - system_core - INFO - 🤔 基于BKT算法智能选择下一题...
2025-11-05 10:10:35,313 - system_core - INFO - 📊 识别到 5 个薄弱知识点:
2025-11-05 10:10:35,313 - system_core - INFO -   - 分析/函数单调性: 0.010
2025-11-05 10:10:35,313 - system_core - INFO -   - 代数/高次方程: 0.033
2025-11-05 10:10:35,313 - system_core - INFO -   - 几何/立体几何: 0.055
2025-11-05 10:10:35,313 - system_core - INFO - 🔍 探索新知识点: 代数/对数方程
2025-11-05 10:10:35,315 - utils.bkt_algorithm - INFO - 🆕 初始化学生状态: student_001 - 代数/对数方程
2025-11-05 10:10:35,315 - system_core - WARNING - ⚠️  无合适难度题目，随机选择
2025-11-05 10:10:35,315 - system_core - INFO - ✅ 选中题目 22 (难度: 0.50)
2025-11-05 10:10:35,315 - system_core - INFO - ✅ 准备下一题: 代数/对数方程
2025-11-05 10:10:41,200 - system_core - INFO - 📄 加载第 2 题
2025-11-05 10:10:53,317 - ui.main_ui - INFO - 📝 提交答案，正在使用盘古7B评估...
2025-11-05 10:10:53,317 - system_core - INFO - ✍️  评估答案 (题目 2/7)
2025-11-05 10:10:53,317 - system_core - INFO - 🤖 使用盘古7B进行严格答案评估...
2025-11-05 10:10:53,317 - utils.evaluator - INFO - 🤖 使用盘古7B模型进行智能答案评估（严格模式）
2025-11-05 10:11:03,662 - system_core - INFO - 📊 盘古7B判定: ❌ 错误
2025-11-05 10:11:03,664 - utils.bkt_algorithm - INFO - 📝 答题记录: student_001 - 对数方程: 0.200 → 0.033 (✗)
2025-11-05 10:11:03,664 - system_core - INFO - 🤔 基于BKT算法智能选择下一题...
2025-11-05 10:11:03,664 - system_core - INFO - 📊 识别到 6 个薄弱知识点:
2025-11-05 10:11:03,665 - system_core - INFO -   - 分析/函数单调性: 0.010
2025-11-05 10:11:03,665 - system_core - INFO -   - 代数/高次方程: 0.033
2025-11-05 10:11:03,665 - system_core - INFO -   - 代数/对数方程: 0.033
2025-11-05 10:11:03,665 - system_core - INFO - 🎯 选择薄弱知识点: 分析/函数单调性
2025-11-05 10:11:03,665 - system_core - WARNING - ⚠️  无合适难度题目，随机选择
2025-11-05 10:11:03,665 - system_core - INFO - ✅ 选中题目 5 (难度: 0.45)
2025-11-05 10:11:03,665 - system_core - INFO - ✅ 准备下一题: 分析/函数单调性
2025-11-05 10:11:10,877 - __main__ - INFO - 👋 系统已关闭
2025-11-06 13:12:23,586 - __main__ - INFO - 🚀 系统启动中...
2025-11-06 13:12:23,586 - __main__ - INFO - ✅ 检测到盘古7B模型文件
2025-11-06 13:12:23,586 - __main__ - INFO - ✅ 检测到题库文件
2025-11-06 13:12:23,586 - __main__ - INFO - ⚙️  正在初始化智能系统核心...
2025-11-06 13:12:23,586 - system_core - INFO - ✅ 智能教育系统核心初始化（增强版）
2025-11-06 13:12:23,586 - system_core - INFO - 🔄 初始化系统组件...
2025-11-06 13:12:23,591 - system_core - ERROR - ❌ 系统初始化失败: No module named 'torch'
2025-11-06 13:12:23,592 - system_core - ERROR - Traceback (most recent call last):
  File "/home/weitianyu/teach_system/system_core.py", line 38, in initialize
    from models.llm_models import create_llm_model
  File "/home/weitianyu/teach_system/models/__init__.py", line 6, in <module>
    from .llm_models import create_llm_model, PanGuModel
  File "/home/weitianyu/teach_system/models/llm_models.py", line 7, in <module>
    import torch
ModuleNotFoundError: No module named 'torch'

2025-11-06 13:12:23,592 - __main__ - ERROR - ❌ 系统运行出错: 系统初始化失败: No module named 'torch'
Traceback (most recent call last):
  File "/home/weitianyu/teach_system/system_core.py", line 38, in initialize
    from models.llm_models import create_llm_model
  File "/home/weitianyu/teach_system/models/__init__.py", line 6, in <module>
    from .llm_models import create_llm_model, PanGuModel
  File "/home/weitianyu/teach_system/models/llm_models.py", line 7, in <module>
    import torch
ModuleNotFoundError: No module named 'torch'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/weitianyu/teach_system/main.py", line 69, in main
    system_core = create_system_core(config)
  File "/home/weitianyu/teach_system/system_core.py", line 520, in create_system_core
    core.initialize()
  File "/home/weitianyu/teach_system/system_core.py", line 132, in initialize
    raise RuntimeError(f"系统初始化失败: {e}")
RuntimeError: 系统初始化失败: No module named 'torch'
2025-11-06 13:12:23,593 - __main__ - INFO - 👋 系统已关闭
2025-11-06 13:12:25,228 - httpx - INFO - HTTP Request: GET https://api.gradio.app/gradio-messaging/en "HTTP/1.1 200 OK"
2025-11-06 13:13:26,633 - __main__ - INFO - 🚀 系统启动中...
2025-11-06 13:13:26,633 - __main__ - INFO - ✅ 检测到盘古7B模型文件
2025-11-06 13:13:26,633 - __main__ - INFO - ✅ 检测到题库文件
2025-11-06 13:13:26,634 - __main__ - INFO - ⚙️  正在初始化智能系统核心...
2025-11-06 13:13:26,634 - system_core - INFO - ✅ 智能教育系统核心初始化（增强版）
2025-11-06 13:13:26,634 - system_core - INFO - 🔄 初始化系统组件...
2025-11-06 13:13:33,693 - knowledge_management.rag_engine - WARNING - LightRAG未安装,将使用模拟模式
2025-11-06 13:13:33,699 - system_core - INFO - 📚 初始化题库...
2025-11-06 13:13:33,699 - data_management.question_db - INFO - ✅ 加载题库成功: 49 道题目
2025-11-06 13:13:33,700 - data_management.question_db - INFO - ✅ 增强版题库初始化完成: /home/weitianyu/teach_system/data/question_database_2.json
2025-11-06 13:13:33,700 - system_core - INFO - 🔤 初始化嵌入模型...
2025-11-06 13:13:33,700 - models.embedding_model - INFO - 尝试使用盘古7B的嵌入功能...
2025-11-06 13:13:33,700 - models.embedding_model - INFO - 初始化盘古7B嵌入模型: /opt/pangu/openPangu-Embedded-7B-V1.1
2025-11-06 13:13:33,700 - system_core - INFO - 🧠 初始化RAG引擎...
2025-11-06 13:13:33,700 - knowledge_management.rag_engine - INFO - 初始化RAG引擎,工作目录: /home/weitianyu/teach_system/rag_storage
2025-11-06 13:13:33,700 - knowledge_management.rag_engine - WARNING - LightRAG不可用,使用模拟模式
2025-11-06 13:13:33,700 - system_core - INFO - ✅ RAG引擎初始化成功
2025-11-06 13:13:33,701 - system_core - INFO - 🔄 正在构建知识图谱...
2025-11-06 13:13:33,701 - knowledge_management.rag_engine - INFO - 初始化题库知识图谱管理器
2025-11-06 13:13:33,701 - knowledge_management.rag_engine - WARNING - LightRAG不可用,使用模拟模式
2025-11-06 13:13:33,701 - knowledge_management.rag_engine - WARNING - LightRAG不可用,跳过文档插入
2025-11-06 13:13:33,701 - knowledge_management.rag_engine - INFO - 已构建 49 道题目的知识图谱
2025-11-06 13:13:33,701 - system_core - INFO - ✅ 知识图谱构建完成
2025-11-06 13:13:33,701 - system_core - INFO - 🚀 初始化盘古7B模型...
2025-11-06 13:13:33,701 - models.llm_models - INFO - 🆕 创建新的盘古7B模型实例（任务类型: pangu）
2025-11-06 13:13:33,702 - models.llm_models - INFO - ✅ 检测到 8 个NPU设备
2025-11-06 13:13:41,526 - models.llm_models - INFO -   NPU 0: Ascend910B2, 总显存: 60.97 GB
2025-11-06 13:13:41,527 - models.llm_models - INFO -   NPU 1: Ascend910B2, 总显存: 60.97 GB
2025-11-06 13:13:41,527 - models.llm_models - INFO -   NPU 2: Ascend910B2, 总显存: 60.97 GB
2025-11-06 13:13:41,527 - models.llm_models - INFO -   NPU 3: Ascend910B2, 总显存: 60.97 GB
2025-11-06 13:13:41,528 - models.llm_models - INFO -   NPU 4: Ascend910B2, 总显存: 60.97 GB
2025-11-06 13:13:41,528 - models.llm_models - INFO -   NPU 5: Ascend910B2, 总显存: 60.97 GB
2025-11-06 13:13:41,528 - models.llm_models - INFO -   NPU 6: Ascend910B2, 总显存: 60.97 GB
2025-11-06 13:13:41,529 - models.llm_models - INFO -   NPU 7: Ascend910B2, 总显存: 60.97 GB
2025-11-06 13:13:41,529 - models.llm_models - INFO - 盘古7B模型设备配置: ['npu:0', 'npu:1', 'npu:2', 'npu:3', 'npu:4', 'npu:5', 'npu:6', 'npu:7']
2025-11-06 13:13:41,529 - system_core - INFO - 🔄 预加载盘古7B模型...
2025-11-06 13:13:41,529 - models.llm_models - INFO - 🔄 正在加载盘古7B模型: /opt/pangu/openPangu-Embedded-7B-V1.1
2025-11-06 13:13:42,606 - models.llm_models - INFO - 🚀 使用多NPU模式，跨8个设备分布模型
2025-11-06 13:13:44,398 - datasets - INFO - PyTorch version 2.5.1 available.
2025-11-06 13:13:44,787 - accelerate.utils.modeling - INFO - Based on the current allocation process, no modules could be assigned to the following devices due to insufficient memory:
  - 0: 2512912384 bytes required
These minimum requirements are specific to this allocation attempt and may vary. Consider increasing the available memory for these devices to at least the specified minimum, or adjusting the model config.
2025-11-06 13:13:49,930 - models.llm_models - INFO - ✅ 使用device_map='auto'模式成功加载
2025-11-06 13:13:49,933 - models.llm_models - INFO - 📊 模型分布情况:
2025-11-06 13:13:49,933 - models.llm_models - INFO -    1: 4 层
2025-11-06 13:13:49,933 - models.llm_models - INFO -    2: 6 层
2025-11-06 13:13:49,933 - models.llm_models - INFO -    3: 6 层
2025-11-06 13:13:49,933 - models.llm_models - INFO -    4: 6 层
2025-11-06 13:13:49,934 - models.llm_models - INFO -    5: 6 层
2025-11-06 13:13:49,934 - models.llm_models - INFO -    6: 6 层
2025-11-06 13:13:49,934 - models.llm_models - INFO -    7: 4 层
2025-11-06 13:13:49,934 - models.llm_models - INFO - ✅ 盘古7B模型加载成功
2025-11-06 13:13:49,934 - system_core - INFO - ✅ 盘古7B模型加载完成
2025-11-06 13:13:49,934 - system_core - INFO - 🧠 初始化BKT算法...
2025-11-06 13:13:49,935 - utils.bkt_algorithm - INFO - ✅ 加载学生状态: 1 个学生, 6 条细粒度记录
2025-11-06 13:13:49,935 - utils.bkt_algorithm - INFO - ✅ 增强版BKT算法初始化完成（细粒度知识点追踪）
2025-11-06 13:13:49,935 - system_core - INFO - 📊 初始化评估器（盘古7B驱动）...
2025-11-06 13:13:49,935 - utils.evaluator - INFO - ✅ 个性化学生评估器初始化完成
2025-11-06 13:13:49,935 - system_core - INFO - 📝 初始化题目生成器（盘古7B + LightRAG）...
2025-11-06 13:13:49,935 - utils.question_generator - INFO - ✅ 增强版题目生成器初始化完成（盘古7B + LightRAG）
2025-11-06 13:13:49,935 - system_core - INFO - 🎨 初始化可视化组件...
2025-11-06 13:13:49,935 - visualization.kg_visualizer - INFO - 知识图谱可视化器初始化完成
2025-11-06 13:13:49,935 - system_core - INFO - ✅ 系统初始化完成 - 智能个性化自适应学习版（盘古7B驱动）
2025-11-06 13:13:49,936 - __main__ - INFO - ✅ 系统核心初始化完成
2025-11-06 13:13:49,936 - __main__ - INFO - 📚 题库统计: 总题目 49
2025-11-06 13:13:49,936 - __main__ - INFO - 📊 知识点大类: 4 个
2025-11-06 13:13:49,936 - __main__ - INFO - 📋 知识点小类: 38 个
2025-11-06 13:13:49,936 - __main__ - INFO - 🎨 正在创建UI界面...
2025-11-06 13:13:49,936 - ui.main_ui - INFO - ✅ 智能教育UI初始化完成
2025-11-06 13:13:50,232 - __main__ - INFO - ✅ 系统启动成功!
2025-11-06 13:13:50,378 - __main__ - ERROR - ❌ 系统运行出错: Cannot find empty port in range: 7860-7860. You can specify a different port by setting the GRADIO_SERVER_PORT environment variable or passing the `server_port` parameter to `launch()`.
Traceback (most recent call last):
  File "/home/weitianyu/teach_system/main.py", line 118, in main
    interface.launch(
  File "/root/miniconda3/envs/pangu/lib/python3.11/site-packages/gradio/blocks.py", line 2635, in launch
    ) = http_server.start_server(
        ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/root/miniconda3/envs/pangu/lib/python3.11/site-packages/gradio/http_server.py", line 157, in start_server
    raise OSError(
OSError: Cannot find empty port in range: 7860-7860. You can specify a different port by setting the GRADIO_SERVER_PORT environment variable or passing the `server_port` parameter to `launch()`.
2025-11-06 13:13:50,380 - __main__ - INFO - 👋 系统已关闭
2025-11-06 13:13:50,866 - httpx - INFO - HTTP Request: GET https://api.gradio.app/pkg-version "HTTP/1.1 200 OK"
2025-11-06 14:18:55,997 - __main__ - INFO - 🚀 系统启动中...
2025-11-06 14:18:55,997 - __main__ - INFO - ✅ 检测到盘古7B模型文件
2025-11-06 14:18:55,998 - __main__ - INFO - ✅ 检测到题库文件
2025-11-06 14:18:55,998 - __main__ - INFO - ⚙️  正在初始化智能系统核心...
2025-11-06 14:18:55,998 - system_core - INFO - ✅ 智能教育系统核心初始化（增强版）
2025-11-06 14:18:55,998 - system_core - INFO - 🔄 初始化系统组件...
2025-11-06 14:19:03,372 - knowledge_management.rag_engine - WARNING - LightRAG未安装,将使用模拟模式
2025-11-06 14:19:03,373 - system_core - INFO - 📚 初始化题库...
2025-11-06 14:19:03,374 - data_management.question_db - INFO - ✅ 加载题库成功: 49 道题目
2025-11-06 14:19:03,374 - data_management.question_db - INFO - ✅ 增强版题库初始化完成: /home/weitianyu/teach_system/data/question_database_2.json
2025-11-06 14:19:03,374 - system_core - INFO - 🔤 初始化嵌入模型...
2025-11-06 14:19:03,374 - models.embedding_model - INFO - 尝试使用盘古7B的嵌入功能...
2025-11-06 14:19:03,374 - models.embedding_model - INFO - 初始化盘古7B嵌入模型: /opt/pangu/openPangu-Embedded-7B-V1.1
2025-11-06 14:19:03,374 - system_core - INFO - 🧠 初始化RAG引擎...
2025-11-06 14:19:03,374 - knowledge_management.rag_engine - INFO - 初始化RAG引擎,工作目录: /home/weitianyu/teach_system/rag_storage
2025-11-06 14:19:03,375 - knowledge_management.rag_engine - WARNING - LightRAG不可用,使用模拟模式
2025-11-06 14:19:03,375 - system_core - INFO - ✅ RAG引擎初始化成功
2025-11-06 14:19:03,375 - system_core - INFO - 🔄 正在构建知识图谱...
2025-11-06 14:19:03,375 - knowledge_management.rag_engine - INFO - 初始化题库知识图谱管理器
2025-11-06 14:19:03,375 - knowledge_management.rag_engine - WARNING - LightRAG不可用,使用模拟模式
2025-11-06 14:19:03,376 - knowledge_management.rag_engine - WARNING - LightRAG不可用,跳过文档插入
2025-11-06 14:19:03,376 - knowledge_management.rag_engine - INFO - 已构建 49 道题目的知识图谱
2025-11-06 14:19:03,376 - system_core - INFO - ✅ 知识图谱构建完成
2025-11-06 14:19:03,376 - system_core - INFO - 🚀 初始化盘古7B模型...
2025-11-06 14:19:03,376 - models.llm_models - INFO - 🆕 创建新的盘古7B模型实例（任务类型: pangu）
2025-11-06 14:19:03,376 - models.llm_models - INFO - ✅ 检测到 8 个NPU设备
2025-11-06 14:19:11,253 - models.llm_models - INFO -   NPU 0: Ascend910B2, 总显存: 60.97 GB
2025-11-06 14:19:11,254 - models.llm_models - INFO -   NPU 1: Ascend910B2, 总显存: 60.97 GB
2025-11-06 14:19:11,254 - models.llm_models - INFO -   NPU 2: Ascend910B2, 总显存: 60.97 GB
2025-11-06 14:19:11,255 - models.llm_models - INFO -   NPU 3: Ascend910B2, 总显存: 60.97 GB
2025-11-06 14:19:11,255 - models.llm_models - INFO -   NPU 4: Ascend910B2, 总显存: 60.97 GB
2025-11-06 14:19:11,255 - models.llm_models - INFO -   NPU 5: Ascend910B2, 总显存: 60.97 GB
2025-11-06 14:19:11,256 - models.llm_models - INFO -   NPU 6: Ascend910B2, 总显存: 60.97 GB
2025-11-06 14:19:11,256 - models.llm_models - INFO -   NPU 7: Ascend910B2, 总显存: 60.97 GB
2025-11-06 14:19:11,256 - models.llm_models - INFO - 盘古7B模型设备配置: ['npu:0', 'npu:1', 'npu:2', 'npu:3', 'npu:4', 'npu:5', 'npu:6', 'npu:7']
2025-11-06 14:19:11,256 - system_core - INFO - 🔄 预加载盘古7B模型...
2025-11-06 14:19:11,256 - models.llm_models - INFO - 🔄 正在加载盘古7B模型: /opt/pangu/openPangu-Embedded-7B-V1.1
2025-11-06 14:19:12,345 - models.llm_models - INFO - 🚀 使用多NPU模式，跨8个设备分布模型
2025-11-06 14:19:14,209 - datasets - INFO - PyTorch version 2.5.1 available.
2025-11-06 14:19:14,619 - accelerate.utils.modeling - INFO - Based on the current allocation process, no modules could be assigned to the following devices due to insufficient memory:
  - 0: 2512912384 bytes required
These minimum requirements are specific to this allocation attempt and may vary. Consider increasing the available memory for these devices to at least the specified minimum, or adjusting the model config.
2025-11-06 14:19:19,606 - models.llm_models - INFO - ✅ 使用device_map='auto'模式成功加载
2025-11-06 14:19:19,609 - models.llm_models - INFO - 📊 模型分布情况:
2025-11-06 14:19:19,609 - models.llm_models - INFO -    1: 4 层
2025-11-06 14:19:19,609 - models.llm_models - INFO -    2: 6 层
2025-11-06 14:19:19,609 - models.llm_models - INFO -    3: 6 层
2025-11-06 14:19:19,609 - models.llm_models - INFO -    4: 6 层
2025-11-06 14:19:19,609 - models.llm_models - INFO -    5: 6 层
2025-11-06 14:19:19,609 - models.llm_models - INFO -    6: 6 层
2025-11-06 14:19:19,609 - models.llm_models - INFO -    7: 4 层
2025-11-06 14:19:19,609 - models.llm_models - INFO - ✅ 盘古7B模型加载成功
2025-11-06 14:19:19,609 - system_core - INFO - ✅ 盘古7B模型加载完成
2025-11-06 14:19:19,610 - system_core - INFO - 🧠 初始化BKT算法...
2025-11-06 14:19:19,610 - utils.bkt_algorithm - INFO - ✅ 加载学生状态: 1 个学生, 6 条细粒度记录
2025-11-06 14:19:19,610 - utils.bkt_algorithm - INFO - ✅ 增强版BKT算法初始化完成（细粒度知识点追踪）
2025-11-06 14:19:19,611 - system_core - INFO - 📊 初始化评估器（盘古7B驱动）...
2025-11-06 14:19:19,611 - utils.evaluator - INFO - ✅ 个性化学生评估器初始化完成
2025-11-06 14:19:19,611 - system_core - INFO - 📝 初始化题目生成器（盘古7B + LightRAG）...
2025-11-06 14:19:19,611 - utils.question_generator - INFO - ✅ 增强版题目生成器初始化完成（盘古7B + LightRAG）
2025-11-06 14:19:19,611 - system_core - INFO - 🎨 初始化可视化组件...
2025-11-06 14:19:19,611 - visualization.kg_visualizer - INFO - 知识图谱可视化器初始化完成
2025-11-06 14:19:19,611 - system_core - INFO - ✅ 系统初始化完成 - 智能个性化自适应学习版（盘古7B驱动）
2025-11-06 14:19:19,611 - __main__ - INFO - ✅ 系统核心初始化完成
2025-11-06 14:19:19,611 - __main__ - INFO - 📚 题库统计: 总题目 49
2025-11-06 14:19:19,612 - __main__ - INFO - 📊 知识点大类: 4 个
2025-11-06 14:19:19,612 - __main__ - INFO - 📋 知识点小类: 38 个
2025-11-06 14:19:19,612 - __main__ - INFO - 🎨 正在创建UI界面...
2025-11-06 14:19:19,612 - ui.main_ui - INFO - ✅ 智能教育UI初始化完成
2025-11-06 14:19:19,911 - __main__ - INFO - ✅ 系统启动成功!
2025-11-06 14:19:20,100 - httpx - INFO - HTTP Request: GET http://localhost:7860/gradio_api/startup-events "HTTP/1.1 200 OK"
2025-11-06 14:19:20,129 - httpx - INFO - HTTP Request: HEAD http://localhost:7860/ "HTTP/1.1 200 OK"
2025-11-06 14:19:20,826 - httpx - INFO - HTTP Request: GET https://api.gradio.app/pkg-version "HTTP/1.1 200 OK"
2025-11-06 14:19:37,903 - ui.main_ui - INFO - 🚀 学生 student_001 开始测评
2025-11-06 14:19:37,904 - system_core - INFO - 🚀 开始智能测评: 学生 student_001, 题数 7
2025-11-06 14:19:37,904 - system_core - INFO - 📊 使用BKT算法进行自适应题目选择...
2025-11-06 14:19:37,905 - system_core - INFO - 📊 学生档案: 整体掌握度 0.112, 已学知识点 6
2025-11-06 14:19:37,906 - system_core - INFO - 📊 识别到 6 个薄弱知识点:
2025-11-06 14:19:37,906 - system_core - INFO -   - 分析/函数单调性: 0.010
2025-11-06 14:19:37,906 - system_core - INFO -   - 代数/高次方程: 0.033
2025-11-06 14:19:37,906 - system_core - INFO -   - 代数/对数方程: 0.033
2025-11-06 14:19:37,906 - system_core - INFO - 🔍 探索新知识点: 几何/平面直线
2025-11-06 14:19:37,908 - utils.bkt_algorithm - INFO - 🆕 初始化学生状态: student_001 - 几何/平面直线
2025-11-06 14:19:37,908 - system_core - INFO - ✅ 选中题目 16 (难度: 0.30)
2025-11-06 14:19:37,908 - system_core - INFO - ✅ 测评开始 - 第1题: 几何/平面直线
2025-11-06 14:19:40,459 - ui.main_ui - INFO - 📝 提交答案，正在使用盘古7B评估...
2025-11-06 14:19:40,459 - system_core - INFO - ✍️  评估答案 (题目 1/7)
2025-11-06 14:19:40,459 - system_core - INFO - 🤖 使用盘古7B进行严格答案评估...
2025-11-06 14:19:40,459 - utils.evaluator - INFO - 🤖 使用盘古7B模型进行智能答案评估（严格模式）
2025-11-06 14:19:53,587 - system_core - INFO - 📊 盘古7B判定: ✅ 正确
2025-11-06 14:19:53,590 - utils.bkt_algorithm - INFO - 📝 答题记录: student_001 - 平面直线: 0.200 → 0.738 (✓)
2025-11-06 14:19:53,590 - system_core - INFO - 🤔 基于BKT算法智能选择下一题...
2025-11-06 14:19:53,590 - system_core - INFO - 📊 识别到 6 个薄弱知识点:
2025-11-06 14:19:53,590 - system_core - INFO -   - 分析/函数单调性: 0.010
2025-11-06 14:19:53,590 - system_core - INFO -   - 代数/高次方程: 0.033
2025-11-06 14:19:53,590 - system_core - INFO -   - 代数/对数方程: 0.033
2025-11-06 14:19:53,590 - system_core - INFO - 🎯 选择薄弱知识点: 分析/函数单调性
2025-11-06 14:19:53,590 - system_core - WARNING - ⚠️  无合适难度题目，随机选择
2025-11-06 14:19:53,591 - system_core - INFO - ✅ 选中题目 5 (难度: 0.45)
2025-11-06 14:19:53,591 - system_core - INFO - ✅ 准备下一题: 分析/函数单调性
2025-11-06 14:20:13,549 - __main__ - INFO - 👋 系统已关闭
2025-11-06 14:32:45,106 - __main__ - INFO - 🚀 系统启动中...
2025-11-06 14:32:45,106 - __main__ - INFO - ✅ 检测到盘古7B模型文件
2025-11-06 14:32:45,106 - __main__ - INFO - ✅ 检测到题库文件
2025-11-06 14:32:45,106 - __main__ - INFO - ⚙️  正在初始化智能系统核心...
2025-11-06 14:32:45,107 - system_core - INFO - ✅ 智能教育系统核心初始化（正确的RAG+BKT流程）
2025-11-06 14:32:45,107 - system_core - INFO - 🔄 初始化系统组件...
2025-11-06 14:32:52,540 - knowledge_management.rag_engine - WARNING - LightRAG未安装,将使用模拟模式
2025-11-06 14:32:52,540 - system_core - INFO - 📚 初始化题库...
2025-11-06 14:32:52,541 - data_management.question_db - INFO - ✅ 加载题库成功: 49 道题目
2025-11-06 14:32:52,541 - data_management.question_db - INFO - ✅ 增强版题库初始化完成: /home/weitianyu/teach_system/data/question_database_2.json
2025-11-06 14:32:52,541 - system_core - INFO - 🔤 初始化嵌入模型...
2025-11-06 14:32:52,541 - models.embedding_model - INFO - 尝试使用盘古7B的嵌入功能...
2025-11-06 14:32:52,541 - models.embedding_model - INFO - 初始化盘古7B嵌入模型: /opt/pangu/openPangu-Embedded-7B-V1.1
2025-11-06 14:32:52,542 - system_core - INFO - 🧠 初始化RAG引擎...
2025-11-06 14:32:52,542 - knowledge_management.rag_engine - INFO - 初始化RAG引擎,工作目录: /home/weitianyu/teach_system/rag_storage
2025-11-06 14:32:52,542 - knowledge_management.rag_engine - WARNING - LightRAG不可用,使用模拟模式
2025-11-06 14:32:52,542 - system_core - INFO - ✅ RAG引擎初始化成功
2025-11-06 14:32:52,542 - system_core - INFO - 🔄 正在构建知识图谱...
2025-11-06 14:32:52,542 - knowledge_management.rag_engine - INFO - 初始化题库知识图谱管理器
2025-11-06 14:32:52,543 - knowledge_management.rag_engine - WARNING - LightRAG不可用,使用模拟模式
2025-11-06 14:32:52,543 - knowledge_management.rag_engine - WARNING - LightRAG不可用,跳过文档插入
2025-11-06 14:32:52,543 - knowledge_management.rag_engine - INFO - 已构建 49 道题目的知识图谱
2025-11-06 14:32:52,543 - system_core - INFO - ✅ 知识图谱构建完成
2025-11-06 14:32:52,543 - system_core - INFO - 🚀 初始化盘古7B模型...
2025-11-06 14:32:52,543 - models.llm_models - INFO - 🆕 创建新的盘古7B模型实例（任务类型: pangu）
2025-11-06 14:32:52,544 - models.llm_models - INFO - ✅ 检测到 8 个NPU设备
2025-11-06 14:33:00,414 - models.llm_models - INFO -   NPU 0: Ascend910B2, 总显存: 60.97 GB
2025-11-06 14:33:00,415 - models.llm_models - INFO -   NPU 1: Ascend910B2, 总显存: 60.97 GB
2025-11-06 14:33:00,415 - models.llm_models - INFO -   NPU 2: Ascend910B2, 总显存: 60.97 GB
2025-11-06 14:33:00,416 - models.llm_models - INFO -   NPU 3: Ascend910B2, 总显存: 60.97 GB
2025-11-06 14:33:00,416 - models.llm_models - INFO -   NPU 4: Ascend910B2, 总显存: 60.97 GB
2025-11-06 14:33:00,416 - models.llm_models - INFO -   NPU 5: Ascend910B2, 总显存: 60.97 GB
2025-11-06 14:33:00,417 - models.llm_models - INFO -   NPU 6: Ascend910B2, 总显存: 60.97 GB
2025-11-06 14:33:00,417 - models.llm_models - INFO -   NPU 7: Ascend910B2, 总显存: 60.97 GB
2025-11-06 14:33:00,417 - models.llm_models - INFO - 盘古7B模型设备配置: ['npu:0', 'npu:1', 'npu:2', 'npu:3', 'npu:4', 'npu:5', 'npu:6', 'npu:7']
2025-11-06 14:33:00,417 - system_core - INFO - 🔄 预加载盘古7B模型...
2025-11-06 14:33:00,418 - models.llm_models - INFO - 🔄 正在加载盘古7B模型: /opt/pangu/openPangu-Embedded-7B-V1.1
2025-11-06 14:33:01,486 - models.llm_models - INFO - 🚀 使用多NPU模式，跨8个设备分布模型
2025-11-06 14:33:03,296 - datasets - INFO - PyTorch version 2.5.1 available.
2025-11-06 14:33:03,707 - accelerate.utils.modeling - INFO - Based on the current allocation process, no modules could be assigned to the following devices due to insufficient memory:
  - 0: 2512912384 bytes required
These minimum requirements are specific to this allocation attempt and may vary. Consider increasing the available memory for these devices to at least the specified minimum, or adjusting the model config.
2025-11-06 14:33:08,795 - models.llm_models - INFO - ✅ 使用device_map='auto'模式成功加载
2025-11-06 14:33:08,798 - models.llm_models - INFO - 📊 模型分布情况:
2025-11-06 14:33:08,798 - models.llm_models - INFO -    1: 4 层
2025-11-06 14:33:08,798 - models.llm_models - INFO -    2: 6 层
2025-11-06 14:33:08,798 - models.llm_models - INFO -    3: 6 层
2025-11-06 14:33:08,798 - models.llm_models - INFO -    4: 6 层
2025-11-06 14:33:08,798 - models.llm_models - INFO -    5: 6 层
2025-11-06 14:33:08,799 - models.llm_models - INFO -    6: 6 层
2025-11-06 14:33:08,799 - models.llm_models - INFO -    7: 4 层
2025-11-06 14:33:08,799 - models.llm_models - INFO - ✅ 盘古7B模型加载成功
2025-11-06 14:33:08,799 - system_core - INFO - ✅ 盘古7B模型加载完成
2025-11-06 14:33:08,799 - system_core - INFO - 🧠 初始化BKT算法...
2025-11-06 14:33:08,800 - utils.bkt_algorithm - INFO - ✅ 加载学生状态: 1 个学生, 7 条细粒度记录
2025-11-06 14:33:08,800 - utils.bkt_algorithm - INFO - ✅ 增强版BKT算法初始化完成（细粒度知识点追踪）
2025-11-06 14:33:08,800 - system_core - INFO - 📊 初始化评估器（盘古7B驱动）...
2025-11-06 14:33:08,800 - utils.evaluator - INFO - ✅ 个性化学生评估器初始化完成
2025-11-06 14:33:08,800 - system_core - INFO - 🎨 初始化可视化组件...
2025-11-06 14:33:08,800 - visualization.kg_visualizer - INFO - 知识图谱可视化器初始化完成
2025-11-06 14:33:08,800 - system_core - INFO - ✅ 系统初始化完成 - 正确的BKT→RAG→盘古7B筛选流程
2025-11-06 14:33:08,800 - __main__ - INFO - ✅ 系统核心初始化完成
2025-11-06 14:33:08,801 - __main__ - INFO - 📚 题库统计: 总题目 49
2025-11-06 14:33:08,801 - __main__ - INFO - 📊 知识点大类: 4 个
2025-11-06 14:33:08,801 - __main__ - INFO - 📋 知识点小类: 38 个
2025-11-06 14:33:08,801 - __main__ - INFO - 🎨 正在创建UI界面...
2025-11-06 14:33:08,801 - ui.main_ui - INFO - ✅ 智能教育UI初始化完成
2025-11-06 14:33:09,103 - __main__ - INFO - ✅ 系统启动成功!
2025-11-06 14:33:09,295 - httpx - INFO - HTTP Request: GET http://localhost:7860/gradio_api/startup-events "HTTP/1.1 200 OK"
2025-11-06 14:33:09,323 - httpx - INFO - HTTP Request: HEAD http://localhost:7860/ "HTTP/1.1 200 OK"
2025-11-06 14:33:09,909 - httpx - INFO - HTTP Request: GET https://api.gradio.app/pkg-version "HTTP/1.1 200 OK"
2025-11-06 14:36:06,601 - __main__ - INFO - 👋 系统已关闭
2025-11-06 14:59:05,285 - __main__ - INFO - 🚀 系统启动中...
2025-11-06 14:59:05,285 - __main__ - INFO - ✅ 检测到盘古7B模型文件
2025-11-06 14:59:05,285 - __main__ - INFO - ✅ 检测到题库文件
2025-11-06 14:59:05,285 - __main__ - INFO - ⚙️  正在初始化智能系统核心...
2025-11-06 14:59:05,285 - system_core - INFO - ✅ 智能教育系统核心初始化（修复版）
2025-11-06 14:59:05,285 - system_core - INFO - 🔄 初始化系统组件...
2025-11-06 14:59:12,421 - knowledge_management.rag_engine - WARNING - LightRAG未安装,将使用模拟模式
2025-11-06 14:59:12,422 - system_core - INFO - 📚 初始化题库...
2025-11-06 14:59:12,423 - data_management.question_db - INFO - ✅ 加载题库成功: 49 道题目
2025-11-06 14:59:12,423 - data_management.question_db - INFO - ✅ 增强版题库初始化完成: /home/weitianyu/teach_system/data/question_database_2.json
2025-11-06 14:59:12,423 - system_core - INFO - 🔤 初始化嵌入模型（BGE-M3）...
2025-11-06 14:59:12,423 - models.embedding_model - INFO - 尝试使用盘古7B的嵌入功能...
2025-11-06 14:59:12,423 - models.embedding_model - INFO - 初始化盘古7B嵌入模型: /opt/pangu/openPangu-Embedded-7B-V1.1
2025-11-06 14:59:12,423 - system_core - INFO - 🧠 初始化RAG引擎（LightRAG）...
2025-11-06 14:59:12,423 - knowledge_management.rag_engine - INFO - 初始化RAG引擎,工作目录: /home/weitianyu/teach_system/rag_storage
2025-11-06 14:59:12,424 - knowledge_management.rag_engine - WARNING - LightRAG不可用,使用模拟模式
2025-11-06 14:59:12,424 - system_core - INFO - ✅ RAG引擎初始化成功
2025-11-06 14:59:12,424 - system_core - INFO - 🔄 正在构建知识图谱...
2025-11-06 14:59:12,424 - knowledge_management.rag_engine - INFO - 初始化题库知识图谱管理器
2025-11-06 14:59:12,424 - knowledge_management.rag_engine - WARNING - LightRAG不可用,使用模拟模式
2025-11-06 14:59:12,424 - knowledge_management.rag_engine - WARNING - LightRAG不可用,跳过文档插入
2025-11-06 14:59:12,424 - knowledge_management.rag_engine - INFO - 已构建 49 道题目的知识图谱
2025-11-06 14:59:12,424 - system_core - INFO - ✅ 知识图谱构建完成
2025-11-06 14:59:12,425 - system_core - INFO - 🚀 初始化盘古7B模型...
2025-11-06 14:59:12,425 - models.llm_models - INFO - 🆕 创建新的盘古7B模型实例（任务类型: pangu）
2025-11-06 14:59:12,425 - models.llm_models - INFO - ✅ 检测到 8 个NPU设备
2025-11-06 14:59:20,324 - models.llm_models - INFO -   NPU 0: Ascend910B2, 总显存: 60.97 GB
2025-11-06 14:59:20,325 - models.llm_models - INFO -   NPU 1: Ascend910B2, 总显存: 60.97 GB
2025-11-06 14:59:20,325 - models.llm_models - INFO -   NPU 2: Ascend910B2, 总显存: 60.97 GB
2025-11-06 14:59:20,326 - models.llm_models - INFO -   NPU 3: Ascend910B2, 总显存: 60.97 GB
2025-11-06 14:59:20,326 - models.llm_models - INFO -   NPU 4: Ascend910B2, 总显存: 60.97 GB
2025-11-06 14:59:20,326 - models.llm_models - INFO -   NPU 5: Ascend910B2, 总显存: 60.97 GB
2025-11-06 14:59:20,327 - models.llm_models - INFO -   NPU 6: Ascend910B2, 总显存: 60.97 GB
2025-11-06 14:59:20,327 - models.llm_models - INFO -   NPU 7: Ascend910B2, 总显存: 60.97 GB
2025-11-06 14:59:20,327 - models.llm_models - INFO - 盘古7B模型设备配置: ['npu:0', 'npu:1', 'npu:2', 'npu:3', 'npu:4', 'npu:5', 'npu:6', 'npu:7']
2025-11-06 14:59:20,327 - system_core - INFO - 🔄 预加载盘古7B模型...
2025-11-06 14:59:20,327 - models.llm_models - INFO - 🔄 正在加载盘古7B模型: /opt/pangu/openPangu-Embedded-7B-V1.1
2025-11-06 14:59:21,393 - models.llm_models - INFO - 🚀 使用多NPU模式，跨8个设备分布模型
2025-11-06 14:59:23,243 - datasets - INFO - PyTorch version 2.5.1 available.
2025-11-06 14:59:23,641 - accelerate.utils.modeling - INFO - Based on the current allocation process, no modules could be assigned to the following devices due to insufficient memory:
  - 0: 2512912384 bytes required
These minimum requirements are specific to this allocation attempt and may vary. Consider increasing the available memory for these devices to at least the specified minimum, or adjusting the model config.
2025-11-06 14:59:28,987 - models.llm_models - INFO - ✅ 使用device_map='auto'模式成功加载
2025-11-06 14:59:28,990 - models.llm_models - INFO - 📊 模型分布情况:
2025-11-06 14:59:28,991 - models.llm_models - INFO -    1: 4 层
2025-11-06 14:59:28,991 - models.llm_models - INFO -    2: 6 层
2025-11-06 14:59:28,991 - models.llm_models - INFO -    3: 6 层
2025-11-06 14:59:28,991 - models.llm_models - INFO -    4: 6 层
2025-11-06 14:59:28,991 - models.llm_models - INFO -    5: 6 层
2025-11-06 14:59:28,991 - models.llm_models - INFO -    6: 6 层
2025-11-06 14:59:28,991 - models.llm_models - INFO -    7: 4 层
2025-11-06 14:59:28,991 - models.llm_models - INFO - ✅ 盘古7B模型加载成功
2025-11-06 14:59:28,991 - system_core - INFO - ✅ 盘古7B模型加载完成
2025-11-06 14:59:28,991 - system_core - INFO - 🧠 初始化BKT算法...
2025-11-06 14:59:28,992 - utils.bkt_algorithm - INFO - ✅ 加载学生状态: 1 个学生, 7 条细粒度记录
2025-11-06 14:59:28,992 - utils.bkt_algorithm - INFO - ✅ 增强版BKT算法初始化完成（细粒度知识点追踪）
2025-11-06 14:59:28,992 - system_core - INFO - 📊 初始化评估器（盘古7B驱动）...
2025-11-06 14:59:28,992 - utils.evaluator - INFO - ✅ 个性化学生评估器初始化完成
2025-11-06 14:59:28,993 - system_core - INFO - 📝 初始化题目生成器...
2025-11-06 14:59:28,993 - utils.question_generator - INFO - ⚠️  使用模拟题目生成器（从题库抽取）
2025-11-06 14:59:28,993 - system_core - INFO - 🎨 初始化可视化组件...
2025-11-06 14:59:28,993 - visualization.kg_visualizer - INFO - 知识图谱可视化器初始化完成
2025-11-06 14:59:28,993 - system_core - INFO - ✅ 系统初始化完成 - BKT+RAG+盘古7B完整流程
2025-11-06 14:59:28,993 - __main__ - INFO - ✅ 系统核心初始化完成
2025-11-06 14:59:28,993 - __main__ - INFO - 📚 题库统计: 总题目 49
2025-11-06 14:59:28,993 - __main__ - INFO - 📊 知识点大类: 4 个
2025-11-06 14:59:28,993 - __main__ - INFO - 📋 知识点小类: 38 个
2025-11-06 14:59:28,993 - __main__ - INFO - 🎨 正在创建UI界面...
2025-11-06 14:59:28,994 - ui.main_ui - INFO - ✅ 智能教育UI初始化完成
2025-11-06 14:59:29,289 - __main__ - INFO - ✅ 系统启动成功!
2025-11-06 15:01:58,208 - __main__ - INFO - 👋 系统已关闭
2025-11-06 15:13:36,884 - __main__ - INFO - 🚀 系统启动中...
2025-11-06 15:13:36,884 - __main__ - INFO - ✅ 检测到盘古7B模型文件
2025-11-06 15:13:36,885 - __main__ - INFO - ✅ 检测到题库文件
2025-11-06 15:13:36,885 - __main__ - INFO - ⚙️  正在初始化智能系统核心...
2025-11-06 15:13:36,885 - system_core - INFO - ✅ 智能教育系统核心初始化（修复版）
2025-11-06 15:13:36,885 - system_core - INFO - 🔄 初始化系统组件...
2025-11-06 15:13:45,057 - knowledge_management.rag_engine - INFO - ✅ LightRAG导入成功
2025-11-06 15:13:45,058 - system_core - INFO - 📚 初始化题库...
2025-11-06 15:13:45,059 - data_management.question_db - INFO - ✅ 加载题库成功: 49 道题目
2025-11-06 15:13:45,059 - data_management.question_db - INFO - ✅ 增强版题库初始化完成: /home/weitianyu/teach_system/data/question_database_2.json
2025-11-06 15:13:45,059 - system_core - INFO - 🔤 初始化嵌入模型（BGE-M3）...
2025-11-06 15:13:45,059 - models.embedding_model - INFO - 尝试使用盘古7B的嵌入功能...
2025-11-06 15:13:45,059 - models.embedding_model - INFO - 初始化盘古7B嵌入模型: /opt/pangu/openPangu-Embedded-7B-V1.1
2025-11-06 15:13:45,059 - system_core - INFO - 🧠 初始化RAG引擎（LightRAG）...
2025-11-06 15:13:45,059 - knowledge_management.rag_engine - INFO - ✅ RAG引擎初始化成功，工作目录: /home/weitianyu/teach_system/rag_storage
2025-11-06 15:13:45,060 - knowledge_management.rag_engine - INFO - 🔄 正在创建LightRAG实例...
2025-11-06 15:13:48,598 - knowledge_management.rag_engine - ERROR - ❌ LightRAG引擎初始化失败: 'function' object has no attribute 'embedding_dim'
2025-11-06 15:13:48,600 - knowledge_management.rag_engine - ERROR - Traceback (most recent call last):
  File "/home/weitianyu/teach_system/knowledge_management/rag_engine.py", line 93, in initialize
    self.rag = LightRAG(
               ^^^^^^^^^
  File "<string>", line 56, in __init__
  File "/root/LightRAG/lightrag/lightrag.py", line 594, in __post_init__
    self.entities_vdb: BaseVectorStorage = self.vector_db_storage_cls(  # type: ignore
                                           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "<string>", line 9, in __init__
  File "/root/LightRAG/lightrag/kg/nano_vector_db_impl.py", line 61, in __post_init__
    self.embedding_func.embedding_dim,
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: 'function' object has no attribute 'embedding_dim'

2025-11-06 15:13:48,601 - system_core - ERROR - ❌ 系统初始化失败: LightRAG初始化失败: 'function' object has no attribute 'embedding_dim'
2025-11-06 15:13:48,603 - system_core - ERROR - Traceback (most recent call last):
  File "/home/weitianyu/teach_system/knowledge_management/rag_engine.py", line 93, in initialize
    self.rag = LightRAG(
               ^^^^^^^^^
  File "<string>", line 56, in __init__
  File "/root/LightRAG/lightrag/lightrag.py", line 594, in __post_init__
    self.entities_vdb: BaseVectorStorage = self.vector_db_storage_cls(  # type: ignore
                                           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "<string>", line 9, in __init__
  File "/root/LightRAG/lightrag/kg/nano_vector_db_impl.py", line 61, in __post_init__
    self.embedding_func.embedding_dim,
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: 'function' object has no attribute 'embedding_dim'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/weitianyu/teach_system/system_core.py", line 71, in initialize
    loop.run_until_complete(self.rag_engine.initialize())
  File "/root/miniconda3/envs/pangu/lib/python3.11/asyncio/base_events.py", line 650, in run_until_complete
    return future.result()
           ^^^^^^^^^^^^^^^
  File "/home/weitianyu/teach_system/knowledge_management/rag_engine.py", line 117, in initialize
    raise RuntimeError(f"LightRAG初始化失败: {e}")
RuntimeError: LightRAG初始化失败: 'function' object has no attribute 'embedding_dim'

2025-11-06 15:13:48,603 - __main__ - ERROR - ❌ 系统运行出错: 系统初始化失败: LightRAG初始化失败: 'function' object has no attribute 'embedding_dim'
Traceback (most recent call last):
  File "/home/weitianyu/teach_system/knowledge_management/rag_engine.py", line 93, in initialize
    self.rag = LightRAG(
               ^^^^^^^^^
  File "<string>", line 56, in __init__
  File "/root/LightRAG/lightrag/lightrag.py", line 594, in __post_init__
    self.entities_vdb: BaseVectorStorage = self.vector_db_storage_cls(  # type: ignore
                                           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "<string>", line 9, in __init__
  File "/root/LightRAG/lightrag/kg/nano_vector_db_impl.py", line 61, in __post_init__
    self.embedding_func.embedding_dim,
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: 'function' object has no attribute 'embedding_dim'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/weitianyu/teach_system/system_core.py", line 71, in initialize
    loop.run_until_complete(self.rag_engine.initialize())
  File "/root/miniconda3/envs/pangu/lib/python3.11/asyncio/base_events.py", line 650, in run_until_complete
    return future.result()
           ^^^^^^^^^^^^^^^
  File "/home/weitianyu/teach_system/knowledge_management/rag_engine.py", line 117, in initialize
    raise RuntimeError(f"LightRAG初始化失败: {e}")
RuntimeError: LightRAG初始化失败: 'function' object has no attribute 'embedding_dim'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/weitianyu/teach_system/main.py", line 69, in main
    system_core = create_system_core(config)
                  ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/weitianyu/teach_system/system_core.py", line 685, in create_system_core
    core.initialize()
  File "/home/weitianyu/teach_system/system_core.py", line 133, in initialize
    raise RuntimeError(f"系统初始化失败: {e}")
RuntimeError: 系统初始化失败: LightRAG初始化失败: 'function' object has no attribute 'embedding_dim'
2025-11-06 15:13:48,605 - __main__ - INFO - 👋 系统已关闭
2025-11-06 15:23:23,117 - __main__ - INFO - 🚀 系统启动中...
2025-11-06 15:23:23,117 - __main__ - INFO - ✅ 检测到盘古7B模型文件
2025-11-06 15:23:23,117 - __main__ - INFO - ✅ 检测到题库文件
2025-11-06 15:23:23,117 - __main__ - INFO - ⚙️  正在初始化智能系统核心...
2025-11-06 15:23:23,117 - system_core - INFO - ✅ 智能教育系统核心初始化（修复版）
2025-11-06 15:23:23,117 - system_core - INFO - 🔄 初始化系统组件...
2025-11-06 15:23:31,130 - knowledge_management.rag_engine - INFO - ✅ LightRAG导入成功
2025-11-06 15:23:31,131 - system_core - INFO - 📚 初始化题库...
2025-11-06 15:23:31,131 - data_management.question_db - INFO - ✅ 加载题库成功: 49 道题目
2025-11-06 15:23:31,132 - data_management.question_db - INFO - ✅ 增强版题库初始化完成: /home/weitianyu/teach_system/data/question_database_2.json
2025-11-06 15:23:31,132 - system_core - INFO - 🔤 初始化嵌入模型（BGE-M3）...
2025-11-06 15:23:31,132 - models.embedding_model - INFO - 尝试使用盘古7B的嵌入功能...
2025-11-06 15:23:31,132 - models.embedding_model - INFO - 初始化盘古7B嵌入模型: /opt/pangu/openPangu-Embedded-7B-V1.1
2025-11-06 15:23:31,132 - system_core - INFO - 🔧 创建 LightRAG 兼容的嵌入函数包装器...
2025-11-06 15:23:31,132 - models.embedding_model - INFO - ✅ 创建 LightRAG 兼容的嵌入函数包装器
2025-11-06 15:23:31,132 - models.embedding_model - INFO - 正在加载盘古7B模型用于嵌入...
2025-11-06 15:23:35,202 - datasets - INFO - PyTorch version 2.5.1 available.
2025-11-06 15:23:45,598 - models.embedding_model - INFO - 盘古7B嵌入模型加载成功,设备: cpu
2025-11-06 15:23:45,598 - models.embedding_model - INFO - 📏 嵌入维度: 4096
2025-11-06 15:23:45,598 - system_core - INFO - ✅ 嵌入函数包装器创建成功，维度: 4096
2025-11-06 15:23:45,598 - system_core - INFO - 🧠 初始化RAG引擎（LightRAG）...
2025-11-06 15:23:45,599 - knowledge_management.rag_engine - INFO - ✅ RAG引擎初始化成功，工作目录: /home/weitianyu/teach_system/rag_storage
2025-11-06 15:23:45,600 - knowledge_management.rag_engine - INFO - 🔄 正在创建LightRAG实例...
2025-11-06 15:23:48,065 - knowledge_management.rag_engine - ERROR - ❌ LightRAG引擎初始化失败: 'function' object has no attribute 'embedding_dim'
2025-11-06 15:23:48,068 - knowledge_management.rag_engine - ERROR - Traceback (most recent call last):
  File "/home/weitianyu/teach_system/knowledge_management/rag_engine.py", line 93, in initialize
    self.rag = LightRAG(
               ^^^^^^^^^
  File "<string>", line 56, in __init__
  File "/root/LightRAG/lightrag/lightrag.py", line 594, in __post_init__
    self.entities_vdb: BaseVectorStorage = self.vector_db_storage_cls(  # type: ignore
                                           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "<string>", line 9, in __init__
  File "/root/LightRAG/lightrag/kg/nano_vector_db_impl.py", line 61, in __post_init__
    self.embedding_func.embedding_dim,
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: 'function' object has no attribute 'embedding_dim'

2025-11-06 15:23:48,068 - system_core - ERROR - ❌ 系统初始化失败: LightRAG初始化失败: 'function' object has no attribute 'embedding_dim'
2025-11-06 15:23:48,070 - system_core - ERROR - Traceback (most recent call last):
  File "/home/weitianyu/teach_system/knowledge_management/rag_engine.py", line 93, in initialize
    self.rag = LightRAG(
               ^^^^^^^^^
  File "<string>", line 56, in __init__
  File "/root/LightRAG/lightrag/lightrag.py", line 594, in __post_init__
    self.entities_vdb: BaseVectorStorage = self.vector_db_storage_cls(  # type: ignore
                                           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "<string>", line 9, in __init__
  File "/root/LightRAG/lightrag/kg/nano_vector_db_impl.py", line 61, in __post_init__
    self.embedding_func.embedding_dim,
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: 'function' object has no attribute 'embedding_dim'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/weitianyu/teach_system/system_core.py", line 78, in initialize
    loop.run_until_complete(self.rag_engine.initialize())
  File "/root/miniconda3/envs/pangu/lib/python3.11/asyncio/base_events.py", line 650, in run_until_complete
    return future.result()
           ^^^^^^^^^^^^^^^
  File "/home/weitianyu/teach_system/knowledge_management/rag_engine.py", line 117, in initialize
    raise RuntimeError(f"LightRAG初始化失败: {e}")
RuntimeError: LightRAG初始化失败: 'function' object has no attribute 'embedding_dim'

2025-11-06 15:23:48,070 - __main__ - ERROR - ❌ 系统运行出错: 系统初始化失败: LightRAG初始化失败: 'function' object has no attribute 'embedding_dim'
Traceback (most recent call last):
  File "/home/weitianyu/teach_system/knowledge_management/rag_engine.py", line 93, in initialize
    self.rag = LightRAG(
               ^^^^^^^^^
  File "<string>", line 56, in __init__
  File "/root/LightRAG/lightrag/lightrag.py", line 594, in __post_init__
    self.entities_vdb: BaseVectorStorage = self.vector_db_storage_cls(  # type: ignore
                                           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "<string>", line 9, in __init__
  File "/root/LightRAG/lightrag/kg/nano_vector_db_impl.py", line 61, in __post_init__
    self.embedding_func.embedding_dim,
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: 'function' object has no attribute 'embedding_dim'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/weitianyu/teach_system/system_core.py", line 78, in initialize
    loop.run_until_complete(self.rag_engine.initialize())
  File "/root/miniconda3/envs/pangu/lib/python3.11/asyncio/base_events.py", line 650, in run_until_complete
    return future.result()
           ^^^^^^^^^^^^^^^
  File "/home/weitianyu/teach_system/knowledge_management/rag_engine.py", line 117, in initialize
    raise RuntimeError(f"LightRAG初始化失败: {e}")
RuntimeError: LightRAG初始化失败: 'function' object has no attribute 'embedding_dim'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/weitianyu/teach_system/main.py", line 69, in main
    system_core = create_system_core(config)
                  ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/weitianyu/teach_system/system_core.py", line 694, in create_system_core
    core.initialize()
  File "/home/weitianyu/teach_system/system_core.py", line 140, in initialize
    raise RuntimeError(f"系统初始化失败: {e}")
RuntimeError: 系统初始化失败: LightRAG初始化失败: 'function' object has no attribute 'embedding_dim'
2025-11-06 15:23:48,072 - __main__ - INFO - 👋 系统已关闭
2025-11-06 15:28:39,399 - __main__ - INFO - 🚀 系统启动中...
2025-11-06 15:28:39,400 - __main__ - INFO - ✅ 检测到盘古7B模型文件
2025-11-06 15:28:39,400 - __main__ - INFO - ✅ 检测到题库文件
2025-11-06 15:28:39,400 - __main__ - INFO - ⚙️  正在初始化智能系统核心...
2025-11-06 15:28:39,400 - system_core - INFO - ✅ 智能教育系统核心初始化（修复版）
2025-11-06 15:28:39,400 - system_core - INFO - 🔄 初始化系统组件...
2025-11-06 15:28:47,676 - knowledge_management.rag_engine - INFO - ✅ LightRAG导入成功
2025-11-06 15:28:47,677 - system_core - INFO - 📚 初始化题库...
2025-11-06 15:28:47,678 - data_management.question_db - INFO - ✅ 加载题库成功: 49 道题目
2025-11-06 15:28:47,678 - data_management.question_db - INFO - ✅ 增强版题库初始化完成: /home/weitianyu/teach_system/data/question_database_2.json
2025-11-06 15:28:47,678 - system_core - INFO - 🔤 初始化嵌入模型（BGE-M3）...
2025-11-06 15:28:47,678 - models.embedding_model - INFO - 尝试使用盘古7B的嵌入功能...
2025-11-06 15:28:47,678 - models.embedding_model - INFO - 初始化盘古7B嵌入模型: /opt/pangu/openPangu-Embedded-7B-V1.1
2025-11-06 15:28:47,678 - system_core - INFO - 🔧 创建 LightRAG 兼容的嵌入函数包装器...
2025-11-06 15:28:47,678 - models.embedding_model - INFO - ✅ 创建 LightRAG 兼容的嵌入函数包装器
2025-11-06 15:28:47,679 - models.embedding_model - INFO - 正在加载盘古7B模型用于嵌入...
2025-11-06 15:28:51,507 - datasets - INFO - PyTorch version 2.5.1 available.
2025-11-06 15:29:01,743 - models.embedding_model - INFO - 盘古7B嵌入模型加载成功,设备: cpu
2025-11-06 15:29:01,744 - models.embedding_model - INFO - 📏 嵌入维度: 4096
2025-11-06 15:29:01,744 - system_core - INFO - ✅ 嵌入函数包装器创建成功，维度: 4096
2025-11-06 15:29:01,744 - system_core - INFO - 🧠 初始化RAG引擎（LightRAG）...
2025-11-06 15:29:01,745 - knowledge_management.rag_engine - INFO - ✅ RAG引擎初始化成功，工作目录: /home/weitianyu/teach_system/rag_storage
2025-11-06 15:29:01,745 - knowledge_management.rag_engine - INFO - 📏 嵌入维度: 4096
2025-11-06 15:29:01,746 - knowledge_management.rag_engine - INFO - 🔧 创建默认 LLM 函数包装器...
2025-11-06 15:29:01,746 - knowledge_management.rag_engine - INFO - 🔧 创建 LightRAG 兼容的 LLM 函数包装器
2025-11-06 15:29:01,746 - knowledge_management.rag_engine - INFO - 🔄 正在创建LightRAG实例...
2025-11-06 15:29:04,177 - knowledge_management.rag_engine - ERROR - ❌ LightRAG引擎初始化失败: 'function' object has no attribute 'embedding_dim'
2025-11-06 15:29:04,180 - knowledge_management.rag_engine - ERROR - Traceback (most recent call last):
  File "/home/weitianyu/teach_system/knowledge_management/rag_engine.py", line 130, in initialize
    self.rag = LightRAG(
               ^^^^^^^^^
  File "<string>", line 56, in __init__
  File "/root/LightRAG/lightrag/lightrag.py", line 594, in __post_init__
    self.entities_vdb: BaseVectorStorage = self.vector_db_storage_cls(  # type: ignore
                                           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "<string>", line 9, in __init__
  File "/root/LightRAG/lightrag/kg/nano_vector_db_impl.py", line 61, in __post_init__
    self.embedding_func.embedding_dim,
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: 'function' object has no attribute 'embedding_dim'

2025-11-06 15:29:04,180 - system_core - ERROR - ❌ 系统初始化失败: LightRAG初始化失败: 'function' object has no attribute 'embedding_dim'
2025-11-06 15:29:04,182 - system_core - ERROR - Traceback (most recent call last):
  File "/home/weitianyu/teach_system/knowledge_management/rag_engine.py", line 130, in initialize
    self.rag = LightRAG(
               ^^^^^^^^^
  File "<string>", line 56, in __init__
  File "/root/LightRAG/lightrag/lightrag.py", line 594, in __post_init__
    self.entities_vdb: BaseVectorStorage = self.vector_db_storage_cls(  # type: ignore
                                           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "<string>", line 9, in __init__
  File "/root/LightRAG/lightrag/kg/nano_vector_db_impl.py", line 61, in __post_init__
    self.embedding_func.embedding_dim,
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: 'function' object has no attribute 'embedding_dim'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/weitianyu/teach_system/system_core.py", line 78, in initialize
    loop.run_until_complete(self.rag_engine.initialize())
  File "/root/miniconda3/envs/pangu/lib/python3.11/asyncio/base_events.py", line 650, in run_until_complete
    return future.result()
           ^^^^^^^^^^^^^^^
  File "/home/weitianyu/teach_system/knowledge_management/rag_engine.py", line 154, in initialize
    raise RuntimeError(f"LightRAG初始化失败: {e}")
RuntimeError: LightRAG初始化失败: 'function' object has no attribute 'embedding_dim'

2025-11-06 15:29:04,182 - __main__ - ERROR - ❌ 系统运行出错: 系统初始化失败: LightRAG初始化失败: 'function' object has no attribute 'embedding_dim'
Traceback (most recent call last):
  File "/home/weitianyu/teach_system/knowledge_management/rag_engine.py", line 130, in initialize
    self.rag = LightRAG(
               ^^^^^^^^^
  File "<string>", line 56, in __init__
  File "/root/LightRAG/lightrag/lightrag.py", line 594, in __post_init__
    self.entities_vdb: BaseVectorStorage = self.vector_db_storage_cls(  # type: ignore
                                           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "<string>", line 9, in __init__
  File "/root/LightRAG/lightrag/kg/nano_vector_db_impl.py", line 61, in __post_init__
    self.embedding_func.embedding_dim,
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: 'function' object has no attribute 'embedding_dim'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/weitianyu/teach_system/system_core.py", line 78, in initialize
    loop.run_until_complete(self.rag_engine.initialize())
  File "/root/miniconda3/envs/pangu/lib/python3.11/asyncio/base_events.py", line 650, in run_until_complete
    return future.result()
           ^^^^^^^^^^^^^^^
  File "/home/weitianyu/teach_system/knowledge_management/rag_engine.py", line 154, in initialize
    raise RuntimeError(f"LightRAG初始化失败: {e}")
RuntimeError: LightRAG初始化失败: 'function' object has no attribute 'embedding_dim'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/weitianyu/teach_system/main.py", line 69, in main
    system_core = create_system_core(config)
                  ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/weitianyu/teach_system/system_core.py", line 694, in create_system_core
    core.initialize()
  File "/home/weitianyu/teach_system/system_core.py", line 140, in initialize
    raise RuntimeError(f"系统初始化失败: {e}")
RuntimeError: 系统初始化失败: LightRAG初始化失败: 'function' object has no attribute 'embedding_dim'
2025-11-06 15:29:04,184 - __main__ - INFO - 👋 系统已关闭
2025-11-06 15:35:40,796 - __main__ - INFO - 🚀 系统启动中...
2025-11-06 15:35:40,797 - __main__ - INFO - ✅ 检测到盘古7B模型文件
2025-11-06 15:35:40,797 - __main__ - INFO - ✅ 检测到题库文件
2025-11-06 15:35:40,797 - __main__ - INFO - ⚙️  正在初始化智能系统核心...
2025-11-06 15:35:40,797 - system_core - INFO - ✅ 智能教育系统核心初始化（修复版）
2025-11-06 15:35:40,797 - system_core - INFO - 🔄 初始化系统组件...
2025-11-06 15:35:47,963 - knowledge_management.rag_engine - INFO - ✅ LightRAG导入成功
2025-11-06 15:35:47,964 - system_core - INFO - 📚 初始化题库...
2025-11-06 15:35:47,965 - data_management.question_db - INFO - ✅ 加载题库成功: 49 道题目
2025-11-06 15:35:47,965 - data_management.question_db - INFO - ✅ 增强版题库初始化完成: /home/weitianyu/teach_system/data/question_database_2.json
2025-11-06 15:35:47,965 - system_core - INFO - 🔤 初始化嵌入模型（BGE-M3）...
2025-11-06 15:35:47,965 - models.embedding_model - INFO - 尝试使用盘古7B的嵌入功能...
2025-11-06 15:35:47,965 - models.embedding_model - INFO - 初始化盘古7B嵌入模型: /opt/pangu/openPangu-Embedded-7B-V1.1
2025-11-06 15:35:47,965 - system_core - INFO - 🔧 创建 LightRAG 兼容的嵌入函数包装器...
2025-11-06 15:35:47,965 - models.embedding_model - INFO - ✅ 创建 LightRAG 兼容的嵌入函数包装器
2025-11-06 15:35:47,965 - models.embedding_model - INFO - 正在加载盘古7B模型用于嵌入...
2025-11-06 15:35:51,593 - datasets - INFO - PyTorch version 2.5.1 available.
2025-11-06 15:36:02,299 - models.embedding_model - INFO - 盘古7B嵌入模型加载成功,设备: cpu
2025-11-06 15:36:02,299 - models.embedding_model - INFO - 📏 嵌入维度: 4096
2025-11-06 15:36:02,299 - system_core - INFO - ✅ 嵌入函数包装器创建成功，维度: 4096
2025-11-06 15:36:02,299 - system_core - INFO - 🧠 初始化RAG引擎（LightRAG）...
2025-11-06 15:36:02,300 - knowledge_management.rag_engine - INFO - ✅ RAG引擎初始化成功，工作目录: /home/weitianyu/teach_system/rag_storage
2025-11-06 15:36:02,300 - knowledge_management.rag_engine - INFO - 📏 嵌入维度: 4096
2025-11-06 15:36:02,301 - knowledge_management.rag_engine - INFO - 🔧 创建默认 LLM 函数包装器...
2025-11-06 15:36:02,301 - knowledge_management.rag_engine - INFO - 🔧 创建 LightRAG 兼容的 LLM 函数包装器
2025-11-06 15:36:02,301 - knowledge_management.rag_engine - INFO - 🔄 正在创建LightRAG实例...
2025-11-06 15:38:20,584 - __main__ - INFO - ⏹️  收到退出信号...
2025-11-06 15:38:20,584 - __main__ - INFO - 👋 系统已关闭
2025-11-06 15:39:45,830 - __main__ - INFO - 🚀 系统启动中...
2025-11-06 15:39:45,830 - __main__ - INFO - ✅ 检测到盘古7B模型文件
2025-11-06 15:39:45,830 - __main__ - INFO - ✅ 检测到题库文件
2025-11-06 15:39:45,830 - __main__ - INFO - ⚙️  正在初始化智能系统核心...
2025-11-06 15:39:45,830 - system_core - INFO - ✅ 智能教育系统核心初始化（修复版）
2025-11-06 15:39:45,831 - system_core - INFO - 🔄 初始化系统组件...
2025-11-06 15:39:52,969 - knowledge_management.rag_engine - INFO - ✅ LightRAG导入成功
2025-11-06 15:39:52,970 - system_core - INFO - 📚 初始化题库...
2025-11-06 15:39:52,971 - data_management.question_db - INFO - ✅ 加载题库成功: 49 道题目
2025-11-06 15:39:52,971 - data_management.question_db - INFO - ✅ 增强版题库初始化完成: /home/weitianyu/teach_system/data/question_database_2.json
2025-11-06 15:39:52,971 - system_core - INFO - 🔤 初始化嵌入模型（BGE-M3）...
2025-11-06 15:39:52,971 - models.embedding_model - INFO - 尝试使用盘古7B的嵌入功能...
2025-11-06 15:39:52,971 - models.embedding_model - INFO - 初始化盘古7B嵌入模型: /opt/pangu/openPangu-Embedded-7B-V1.1
2025-11-06 15:39:52,971 - system_core - INFO - 🧠 初始化RAG引擎（LightRAG）...
2025-11-06 15:39:52,971 - knowledge_management.rag_engine - INFO - ✅ RAG引擎初始化成功，工作目录: /home/weitianyu/teach_system/rag_storage
2025-11-06 15:39:52,971 - knowledge_management.rag_engine - INFO - 🔄 正在创建LightRAG实例...
2025-11-06 15:40:32,218 - __main__ - INFO - ⏹️  收到退出信号...
2025-11-06 15:40:32,219 - __main__ - INFO - 👋 系统已关闭
2025-11-06 15:40:58,595 - __main__ - INFO - 🚀 系统启动中...
2025-11-06 15:40:58,595 - __main__ - INFO - ✅ 检测到盘古7B模型文件
2025-11-06 15:40:58,595 - __main__ - INFO - ✅ 检测到题库文件
2025-11-06 15:40:58,595 - __main__ - INFO - ⚙️  正在初始化智能系统核心...
2025-11-06 15:40:58,595 - system_core - INFO - ✅ 智能教育系统核心初始化（修复版）
2025-11-06 15:40:58,595 - system_core - INFO - 🔄 初始化系统组件...
2025-11-06 15:41:05,774 - knowledge_management.rag_engine - INFO - ✅ LightRAG导入成功
2025-11-06 15:41:05,774 - system_core - INFO - 📚 初始化题库...
2025-11-06 15:41:05,775 - data_management.question_db - INFO - ✅ 加载题库成功: 49 道题目
2025-11-06 15:41:05,775 - data_management.question_db - INFO - ✅ 增强版题库初始化完成: /home/weitianyu/teach_system/data/question_database_2.json
2025-11-06 15:41:05,775 - system_core - INFO - 🔤 初始化嵌入模型（BGE-M3）...
2025-11-06 15:41:05,775 - models.embedding_model - INFO - 尝试使用盘古7B的嵌入功能...
2025-11-06 15:41:05,775 - models.embedding_model - INFO - 初始化盘古7B嵌入模型: /opt/pangu/openPangu-Embedded-7B-V1.1
2025-11-06 15:41:05,775 - system_core - INFO - 🧠 初始化RAG引擎（LightRAG）...
2025-11-06 15:41:05,775 - knowledge_management.rag_engine - INFO - ✅ RAG引擎初始化成功，工作目录: /home/weitianyu/teach_system/rag_storage
2025-11-06 15:41:05,776 - knowledge_management.rag_engine - INFO - 🔄 正在创建LightRAG实例...
2025-11-06 15:41:23,042 - __main__ - INFO - ⏹️  收到退出信号...
2025-11-06 15:41:23,043 - __main__ - INFO - 👋 系统已关闭
2025-11-06 15:42:44,255 - __main__ - INFO - 🚀 系统启动中...
2025-11-06 15:42:44,255 - __main__ - INFO - ✅ 检测到盘古7B模型文件
2025-11-06 15:42:44,255 - __main__ - INFO - ✅ 检测到题库文件
2025-11-06 15:42:44,256 - __main__ - INFO - ⚙️  正在初始化智能系统核心...
2025-11-06 15:42:44,256 - system_core - INFO - ✅ 智能教育系统核心初始化（修复版）
2025-11-06 15:42:44,256 - system_core - INFO - 🔄 初始化系统组件...
2025-11-06 15:42:52,039 - knowledge_management.rag_engine - INFO - ✅ LightRAG导入成功
2025-11-06 15:42:52,040 - system_core - INFO - 📚 初始化题库...
2025-11-06 15:42:52,041 - data_management.question_db - INFO - ✅ 加载题库成功: 49 道题目
2025-11-06 15:42:52,041 - data_management.question_db - INFO - ✅ 增强版题库初始化完成: /home/weitianyu/teach_system/data/question_database_2.json
2025-11-06 15:42:52,041 - system_core - INFO - 🔤 初始化嵌入模型（BGE-M3）...
2025-11-06 15:42:52,041 - models.embedding_model - INFO - 尝试使用盘古7B的嵌入功能...
2025-11-06 15:42:52,041 - models.embedding_model - INFO - 初始化盘古7B嵌入模型: /opt/pangu/openPangu-Embedded-7B-V1.1
2025-11-06 15:42:52,041 - system_core - INFO - 🧠 初始化RAG引擎（LightRAG）...
2025-11-06 15:42:52,041 - knowledge_management.rag_engine - INFO - ✅ RAG引擎初始化成功，工作目录: /home/weitianyu/teach_system/rag_storage
2025-11-06 15:42:52,042 - knowledge_management.rag_engine - INFO - 🔄 正在创建LightRAG实例...
2025-11-06 15:42:52,765 - knowledge_management.rag_engine - ERROR - ❌ LightRAG引擎初始化失败: 'function' object has no attribute 'embedding_dim'
2025-11-06 15:42:52,767 - knowledge_management.rag_engine - ERROR - Traceback (most recent call last):
  File "/home/weitianyu/teach_system/knowledge_management/rag_engine.py", line 93, in initialize
    self.rag = LightRAG(
               ^^^^^^^^^
  File "<string>", line 37, in __init__
  File "/root/miniconda3/envs/pangu/lib/python3.11/site-packages/lightrag/lightrag.py", line 396, in __post_init__
    self.entities_vdb: BaseVectorStorage = self.vector_db_storage_cls(  # type: ignore
                                           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/root/miniconda3/envs/pangu/lib/python3.11/site-packages/lightrag/utils.py", line 1323, in import_class
    return cls(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^
  File "<string>", line 8, in __init__
  File "/root/miniconda3/envs/pangu/lib/python3.11/site-packages/lightrag/kg/nano_vector_db_impl.py", line 50, in __post_init__
    self.embedding_func.embedding_dim,
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: 'function' object has no attribute 'embedding_dim'

2025-11-06 15:42:52,767 - system_core - ERROR - ❌ 系统初始化失败: LightRAG初始化失败: 'function' object has no attribute 'embedding_dim'
2025-11-06 15:42:52,769 - system_core - ERROR - Traceback (most recent call last):
  File "/home/weitianyu/teach_system/knowledge_management/rag_engine.py", line 93, in initialize
    self.rag = LightRAG(
               ^^^^^^^^^
  File "<string>", line 37, in __init__
  File "/root/miniconda3/envs/pangu/lib/python3.11/site-packages/lightrag/lightrag.py", line 396, in __post_init__
    self.entities_vdb: BaseVectorStorage = self.vector_db_storage_cls(  # type: ignore
                                           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/root/miniconda3/envs/pangu/lib/python3.11/site-packages/lightrag/utils.py", line 1323, in import_class
    return cls(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^
  File "<string>", line 8, in __init__
  File "/root/miniconda3/envs/pangu/lib/python3.11/site-packages/lightrag/kg/nano_vector_db_impl.py", line 50, in __post_init__
    self.embedding_func.embedding_dim,
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: 'function' object has no attribute 'embedding_dim'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/weitianyu/teach_system/system_core.py", line 71, in initialize
    loop.run_until_complete(self.rag_engine.initialize())
  File "/root/miniconda3/envs/pangu/lib/python3.11/asyncio/base_events.py", line 650, in run_until_complete
    return future.result()
           ^^^^^^^^^^^^^^^
  File "/home/weitianyu/teach_system/knowledge_management/rag_engine.py", line 117, in initialize
    raise RuntimeError(f"LightRAG初始化失败: {e}")
RuntimeError: LightRAG初始化失败: 'function' object has no attribute 'embedding_dim'

2025-11-06 15:42:52,769 - __main__ - ERROR - ❌ 系统运行出错: 系统初始化失败: LightRAG初始化失败: 'function' object has no attribute 'embedding_dim'
Traceback (most recent call last):
  File "/home/weitianyu/teach_system/knowledge_management/rag_engine.py", line 93, in initialize
    self.rag = LightRAG(
               ^^^^^^^^^
  File "<string>", line 37, in __init__
  File "/root/miniconda3/envs/pangu/lib/python3.11/site-packages/lightrag/lightrag.py", line 396, in __post_init__
    self.entities_vdb: BaseVectorStorage = self.vector_db_storage_cls(  # type: ignore
                                           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/root/miniconda3/envs/pangu/lib/python3.11/site-packages/lightrag/utils.py", line 1323, in import_class
    return cls(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^
  File "<string>", line 8, in __init__
  File "/root/miniconda3/envs/pangu/lib/python3.11/site-packages/lightrag/kg/nano_vector_db_impl.py", line 50, in __post_init__
    self.embedding_func.embedding_dim,
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: 'function' object has no attribute 'embedding_dim'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/weitianyu/teach_system/system_core.py", line 71, in initialize
    loop.run_until_complete(self.rag_engine.initialize())
  File "/root/miniconda3/envs/pangu/lib/python3.11/asyncio/base_events.py", line 650, in run_until_complete
    return future.result()
           ^^^^^^^^^^^^^^^
  File "/home/weitianyu/teach_system/knowledge_management/rag_engine.py", line 117, in initialize
    raise RuntimeError(f"LightRAG初始化失败: {e}")
RuntimeError: LightRAG初始化失败: 'function' object has no attribute 'embedding_dim'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/weitianyu/teach_system/main.py", line 69, in main
    system_core = create_system_core(config)
                  ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/weitianyu/teach_system/system_core.py", line 685, in create_system_core
    core.initialize()
  File "/home/weitianyu/teach_system/system_core.py", line 133, in initialize
    raise RuntimeError(f"系统初始化失败: {e}")
RuntimeError: 系统初始化失败: LightRAG初始化失败: 'function' object has no attribute 'embedding_dim'
2025-11-06 15:42:52,771 - __main__ - INFO - 👋 系统已关闭
2025-11-06 15:55:07,014 - __main__ - INFO - 🚀 系统启动中...
2025-11-06 15:55:07,014 - __main__ - INFO - ✅ 检测到盘古7B模型文件
2025-11-06 15:55:07,014 - __main__ - INFO - ✅ 检测到题库文件
2025-11-06 15:55:07,015 - __main__ - INFO - ⚙️  正在初始化智能系统核心...
2025-11-06 15:55:07,015 - system_core - INFO - ✅ 智能教育系统核心初始化（修复版）
2025-11-06 15:55:07,015 - system_core - INFO - 🔄 初始化系统组件...
2025-11-06 15:55:14,794 - knowledge_management.rag_engine - INFO - ✅ LightRAG导入成功
2025-11-06 15:55:14,795 - system_core - INFO - 📚 初始化题库...
2025-11-06 15:55:14,795 - data_management.question_db - INFO - ✅ 加载题库成功: 49 道题目
2025-11-06 15:55:14,796 - data_management.question_db - INFO - ✅ 增强版题库初始化完成: /home/weitianyu/teach_system/data/question_database_2.json
2025-11-06 15:55:14,796 - system_core - INFO - 🔤 初始化嵌入模型（BGE-M3）...
2025-11-06 15:55:14,796 - models.embedding_model - INFO - 尝试使用盘古7B的嵌入功能...
2025-11-06 15:55:14,796 - models.embedding_model - INFO - 初始化盘古7B嵌入模型: /opt/pangu/openPangu-Embedded-7B-V1.1
2025-11-06 15:55:14,796 - system_core - INFO - 🧠 初始化RAG引擎（LightRAG）...
2025-11-06 15:55:14,796 - knowledge_management.rag_engine - INFO - ✅ RAG引擎初始化成功，工作目录: /home/weitianyu/teach_system/rag_storage
2025-11-06 15:55:14,796 - knowledge_management.rag_engine - INFO - 🔄 正在创建LightRAG实例...
2025-11-06 15:55:15,519 - nano-vectordb - INFO - Init {'embedding_dim': 1024, 'metric': 'cosine', 'storage_file': '/home/weitianyu/teach_system/rag_storage/vdb_entities.json'} 0 data
2025-11-06 15:55:15,519 - nano-vectordb - INFO - Init {'embedding_dim': 1024, 'metric': 'cosine', 'storage_file': '/home/weitianyu/teach_system/rag_storage/vdb_relationships.json'} 0 data
2025-11-06 15:55:15,519 - nano-vectordb - INFO - Init {'embedding_dim': 1024, 'metric': 'cosine', 'storage_file': '/home/weitianyu/teach_system/rag_storage/vdb_chunks.json'} 0 data
2025-11-06 15:55:15,520 - knowledge_management.rag_engine - INFO - 🔄 正在初始化LightRAG存储...
2025-11-06 15:55:15,522 - knowledge_management.rag_engine - INFO - ✅ LightRAG引擎初始化完成
2025-11-06 15:55:15,522 - knowledge_management.rag_engine - INFO - 📝 知识图谱数据为空，需要构建
2025-11-06 15:55:15,522 - system_core - INFO - ✅ RAG引擎初始化成功
2025-11-06 15:55:15,522 - system_core - INFO - 🔄 正在构建知识图谱...
2025-11-06 15:55:15,522 - knowledge_management.rag_engine - INFO - ✅ 题库知识图谱管理器初始化完成
2025-11-06 15:55:15,522 - knowledge_management.rag_engine - INFO - 🏗️  开始构建知识图谱，共 49 道题目
2025-11-06 15:55:15,523 - knowledge_management.rag_engine - INFO - 📥 正在插入 49 个文档到知识图谱...
2025-11-06 15:55:15,523 - knowledge_management.rag_engine - WARNING - ⚠️  文档 1 插入失败: This event loop is already running
2025-11-06 15:55:15,523 - knowledge_management.rag_engine - WARNING - ⚠️  文档 2 插入失败: This event loop is already running
2025-11-06 15:55:15,523 - knowledge_management.rag_engine - WARNING - ⚠️  文档 3 插入失败: This event loop is already running
2025-11-06 15:55:15,523 - knowledge_management.rag_engine - WARNING - ⚠️  文档 4 插入失败: This event loop is already running
2025-11-06 15:55:15,524 - knowledge_management.rag_engine - WARNING - ⚠️  文档 5 插入失败: This event loop is already running
2025-11-06 15:55:15,524 - knowledge_management.rag_engine - WARNING - ⚠️  文档 6 插入失败: This event loop is already running
2025-11-06 15:55:15,524 - knowledge_management.rag_engine - WARNING - ⚠️  文档 7 插入失败: This event loop is already running
2025-11-06 15:55:15,524 - knowledge_management.rag_engine - WARNING - ⚠️  文档 8 插入失败: This event loop is already running
2025-11-06 15:55:15,524 - knowledge_management.rag_engine - WARNING - ⚠️  文档 9 插入失败: This event loop is already running
2025-11-06 15:55:15,524 - knowledge_management.rag_engine - WARNING - ⚠️  文档 10 插入失败: This event loop is already running
2025-11-06 15:55:15,524 - knowledge_management.rag_engine - WARNING - ⚠️  文档 11 插入失败: This event loop is already running
2025-11-06 15:55:15,524 - knowledge_management.rag_engine - WARNING - ⚠️  文档 12 插入失败: This event loop is already running
2025-11-06 15:55:15,524 - knowledge_management.rag_engine - WARNING - ⚠️  文档 13 插入失败: This event loop is already running
2025-11-06 15:55:15,524 - knowledge_management.rag_engine - WARNING - ⚠️  文档 14 插入失败: This event loop is already running
2025-11-06 15:55:15,524 - knowledge_management.rag_engine - WARNING - ⚠️  文档 15 插入失败: This event loop is already running
2025-11-06 15:55:15,524 - knowledge_management.rag_engine - WARNING - ⚠️  文档 16 插入失败: This event loop is already running
2025-11-06 15:55:15,525 - knowledge_management.rag_engine - WARNING - ⚠️  文档 17 插入失败: This event loop is already running
2025-11-06 15:55:15,525 - knowledge_management.rag_engine - WARNING - ⚠️  文档 18 插入失败: This event loop is already running
2025-11-06 15:55:15,525 - knowledge_management.rag_engine - WARNING - ⚠️  文档 19 插入失败: This event loop is already running
2025-11-06 15:55:15,525 - knowledge_management.rag_engine - WARNING - ⚠️  文档 20 插入失败: This event loop is already running
2025-11-06 15:55:15,525 - knowledge_management.rag_engine - WARNING - ⚠️  文档 21 插入失败: This event loop is already running
2025-11-06 15:55:15,525 - knowledge_management.rag_engine - WARNING - ⚠️  文档 22 插入失败: This event loop is already running
2025-11-06 15:55:15,525 - knowledge_management.rag_engine - WARNING - ⚠️  文档 23 插入失败: This event loop is already running
2025-11-06 15:55:15,525 - knowledge_management.rag_engine - WARNING - ⚠️  文档 24 插入失败: This event loop is already running
2025-11-06 15:55:15,525 - knowledge_management.rag_engine - WARNING - ⚠️  文档 25 插入失败: This event loop is already running
2025-11-06 15:55:15,525 - knowledge_management.rag_engine - WARNING - ⚠️  文档 26 插入失败: This event loop is already running
2025-11-06 15:55:15,525 - knowledge_management.rag_engine - WARNING - ⚠️  文档 27 插入失败: This event loop is already running
2025-11-06 15:55:15,526 - knowledge_management.rag_engine - WARNING - ⚠️  文档 28 插入失败: This event loop is already running
2025-11-06 15:55:15,526 - knowledge_management.rag_engine - WARNING - ⚠️  文档 29 插入失败: This event loop is already running
2025-11-06 15:55:15,526 - knowledge_management.rag_engine - WARNING - ⚠️  文档 30 插入失败: This event loop is already running
2025-11-06 15:55:15,526 - knowledge_management.rag_engine - WARNING - ⚠️  文档 31 插入失败: This event loop is already running
2025-11-06 15:55:15,526 - knowledge_management.rag_engine - WARNING - ⚠️  文档 32 插入失败: This event loop is already running
2025-11-06 15:55:15,526 - knowledge_management.rag_engine - WARNING - ⚠️  文档 33 插入失败: This event loop is already running
2025-11-06 15:55:15,526 - knowledge_management.rag_engine - WARNING - ⚠️  文档 34 插入失败: This event loop is already running
2025-11-06 15:55:15,526 - knowledge_management.rag_engine - WARNING - ⚠️  文档 35 插入失败: This event loop is already running
2025-11-06 15:55:15,526 - knowledge_management.rag_engine - WARNING - ⚠️  文档 36 插入失败: This event loop is already running
2025-11-06 15:55:15,526 - knowledge_management.rag_engine - WARNING - ⚠️  文档 37 插入失败: This event loop is already running
2025-11-06 15:55:15,526 - knowledge_management.rag_engine - WARNING - ⚠️  文档 38 插入失败: This event loop is already running
2025-11-06 15:55:15,526 - knowledge_management.rag_engine - WARNING - ⚠️  文档 39 插入失败: This event loop is already running
2025-11-06 15:55:15,526 - knowledge_management.rag_engine - WARNING - ⚠️  文档 40 插入失败: This event loop is already running
2025-11-06 15:55:15,527 - knowledge_management.rag_engine - WARNING - ⚠️  文档 41 插入失败: This event loop is already running
2025-11-06 15:55:15,527 - knowledge_management.rag_engine - WARNING - ⚠️  文档 42 插入失败: This event loop is already running
2025-11-06 15:55:15,527 - knowledge_management.rag_engine - WARNING - ⚠️  文档 43 插入失败: This event loop is already running
2025-11-06 15:55:15,527 - knowledge_management.rag_engine - WARNING - ⚠️  文档 44 插入失败: This event loop is already running
2025-11-06 15:55:15,527 - knowledge_management.rag_engine - WARNING - ⚠️  文档 45 插入失败: This event loop is already running
2025-11-06 15:55:15,527 - knowledge_management.rag_engine - WARNING - ⚠️  文档 46 插入失败: This event loop is already running
2025-11-06 15:55:15,527 - knowledge_management.rag_engine - WARNING - ⚠️  文档 47 插入失败: This event loop is already running
2025-11-06 15:55:15,527 - knowledge_management.rag_engine - WARNING - ⚠️  文档 48 插入失败: This event loop is already running
2025-11-06 15:55:15,527 - knowledge_management.rag_engine - WARNING - ⚠️  文档 49 插入失败: This event loop is already running
2025-11-06 15:55:15,527 - knowledge_management.rag_engine - INFO - ✅ 文档插入完成
2025-11-06 15:55:15,527 - knowledge_management.rag_engine - INFO - ✅ 知识图谱构建完成，共 49 个节点
2025-11-06 15:55:15,527 - system_core - INFO - ✅ 知识图谱构建完成
2025-11-06 15:55:15,528 - system_core - INFO - 🚀 初始化盘古7B模型...
2025-11-06 15:55:15,528 - models.llm_models - INFO - 🆕 创建新的盘古7B模型实例（任务类型: pangu）
2025-11-06 15:55:15,528 - models.llm_models - INFO - ✅ 检测到 8 个NPU设备
2025-11-06 15:55:23,451 - models.llm_models - INFO -   NPU 0: Ascend910B2, 总显存: 60.97 GB
2025-11-06 15:55:23,451 - models.llm_models - INFO -   NPU 1: Ascend910B2, 总显存: 60.97 GB
2025-11-06 15:55:23,452 - models.llm_models - INFO -   NPU 2: Ascend910B2, 总显存: 60.97 GB
2025-11-06 15:55:23,452 - models.llm_models - INFO -   NPU 3: Ascend910B2, 总显存: 60.97 GB
2025-11-06 15:55:23,453 - models.llm_models - INFO -   NPU 4: Ascend910B2, 总显存: 60.97 GB
2025-11-06 15:55:23,453 - models.llm_models - INFO -   NPU 5: Ascend910B2, 总显存: 60.97 GB
2025-11-06 15:55:23,453 - models.llm_models - INFO -   NPU 6: Ascend910B2, 总显存: 60.97 GB
2025-11-06 15:55:23,454 - models.llm_models - INFO -   NPU 7: Ascend910B2, 总显存: 60.97 GB
2025-11-06 15:55:23,454 - models.llm_models - INFO - 盘古7B模型设备配置: ['npu:0', 'npu:1', 'npu:2', 'npu:3', 'npu:4', 'npu:5', 'npu:6', 'npu:7']
2025-11-06 15:55:23,454 - system_core - INFO - 🔄 预加载盘古7B模型...
2025-11-06 15:55:23,454 - models.llm_models - INFO - 🔄 正在加载盘古7B模型: /opt/pangu/openPangu-Embedded-7B-V1.1
2025-11-06 15:55:24,528 - models.llm_models - INFO - 🚀 使用多NPU模式，跨8个设备分布模型
2025-11-06 15:55:25,426 - datasets - INFO - PyTorch version 2.5.1 available.
2025-11-06 15:55:25,830 - accelerate.utils.modeling - INFO - Based on the current allocation process, no modules could be assigned to the following devices due to insufficient memory:
  - 0: 2512912384 bytes required
These minimum requirements are specific to this allocation attempt and may vary. Consider increasing the available memory for these devices to at least the specified minimum, or adjusting the model config.
2025-11-06 15:55:31,108 - models.llm_models - INFO - ✅ 使用device_map='auto'模式成功加载
2025-11-06 15:55:31,111 - models.llm_models - INFO - 📊 模型分布情况:
2025-11-06 15:55:31,111 - models.llm_models - INFO -    1: 4 层
2025-11-06 15:55:31,111 - models.llm_models - INFO -    2: 6 层
2025-11-06 15:55:31,111 - models.llm_models - INFO -    3: 6 层
2025-11-06 15:55:31,112 - models.llm_models - INFO -    4: 6 层
2025-11-06 15:55:31,112 - models.llm_models - INFO -    5: 6 层
2025-11-06 15:55:31,112 - models.llm_models - INFO -    6: 6 层
2025-11-06 15:55:31,112 - models.llm_models - INFO -    7: 4 层
2025-11-06 15:55:31,112 - models.llm_models - INFO - ✅ 盘古7B模型加载成功
2025-11-06 15:55:31,112 - system_core - INFO - ✅ 盘古7B模型加载完成
2025-11-06 15:55:31,112 - system_core - INFO - 🧠 初始化BKT算法...
2025-11-06 15:55:31,113 - utils.bkt_algorithm - INFO - ✅ 加载学生状态: 1 个学生, 7 条细粒度记录
2025-11-06 15:55:31,113 - utils.bkt_algorithm - INFO - ✅ 增强版BKT算法初始化完成（细粒度知识点追踪）
2025-11-06 15:55:31,113 - system_core - INFO - 📊 初始化评估器（盘古7B驱动）...
2025-11-06 15:55:31,113 - utils.evaluator - INFO - ✅ 个性化学生评估器初始化完成
2025-11-06 15:55:31,113 - system_core - INFO - 📝 初始化题目生成器...
2025-11-06 15:55:31,113 - utils.question_generator - INFO - ⚠️  使用模拟题目生成器（从题库抽取）
2025-11-06 15:55:31,113 - system_core - INFO - 🎨 初始化可视化组件...
2025-11-06 15:55:31,114 - visualization.kg_visualizer - INFO - 知识图谱可视化器初始化完成
2025-11-06 15:55:31,114 - system_core - INFO - ✅ 系统初始化完成 - BKT+RAG+盘古7B完整流程
2025-11-06 15:55:31,114 - __main__ - INFO - ✅ 系统核心初始化完成
2025-11-06 15:55:31,114 - __main__ - INFO - 📚 题库统计: 总题目 49
2025-11-06 15:55:31,114 - __main__ - INFO - 📊 知识点大类: 4 个
2025-11-06 15:55:31,114 - __main__ - INFO - 📋 知识点小类: 38 个
2025-11-06 15:55:31,114 - __main__ - INFO - 🎨 正在创建UI界面...
2025-11-06 15:55:31,114 - ui.main_ui - INFO - ✅ 智能教育UI初始化完成
2025-11-06 15:55:31,418 - __main__ - INFO - ✅ 系统启动成功!
2025-11-06 15:55:54,880 - __main__ - INFO - 👋 系统已关闭
2025-11-06 16:04:32,605 - __main__ - INFO - 🚀 系统启动中...
2025-11-06 16:04:32,605 - __main__ - INFO - ✅ 检测到盘古7B模型文件
2025-11-06 16:04:32,605 - __main__ - INFO - ✅ 检测到题库文件
2025-11-06 16:04:32,605 - __main__ - INFO - ⚙️  正在初始化智能系统核心...
2025-11-06 16:04:32,605 - system_core - INFO - ✅ 智能教育系统核心初始化（修复版）
2025-11-06 16:04:32,606 - system_core - INFO - 🔄 初始化系统组件...
2025-11-06 16:04:40,407 - knowledge_management.rag_engine - INFO - ✅ LightRAG导入成功
2025-11-06 16:04:40,408 - system_core - INFO - 📚 初始化题库...
2025-11-06 16:04:40,409 - data_management.question_db - INFO - ✅ 加载题库成功: 49 道题目
2025-11-06 16:04:40,409 - data_management.question_db - INFO - ✅ 增强版题库初始化完成: /home/weitianyu/teach_system/data/question_database_2.json
2025-11-06 16:04:40,409 - system_core - INFO - 🔤 初始化嵌入模型（BGE-M3）...
2025-11-06 16:04:40,409 - models.embedding_model - INFO - 尝试使用盘古7B的嵌入功能...
2025-11-06 16:04:40,409 - models.embedding_model - INFO - 初始化盘古7B嵌入模型: /opt/pangu/openPangu-Embedded-7B-V1.1
2025-11-06 16:04:40,409 - system_core - INFO - 🧠 初始化RAG引擎（LightRAG）...
2025-11-06 16:04:40,409 - knowledge_management.rag_engine - INFO - ✅ RAG引擎初始化成功，工作目录: /home/weitianyu/teach_system/rag_storage
2025-11-06 16:04:40,409 - system_core - INFO - 🔄 正在初始化RAG引擎...
2025-11-06 16:04:40,410 - knowledge_management.rag_engine - INFO - 🔄 正在创建LightRAG实例...
2025-11-06 16:04:41,127 - nano-vectordb - INFO - Init {'embedding_dim': 1024, 'metric': 'cosine', 'storage_file': '/home/weitianyu/teach_system/rag_storage/vdb_entities.json'} 0 data
2025-11-06 16:04:41,127 - nano-vectordb - INFO - Init {'embedding_dim': 1024, 'metric': 'cosine', 'storage_file': '/home/weitianyu/teach_system/rag_storage/vdb_relationships.json'} 0 data
2025-11-06 16:04:41,128 - nano-vectordb - INFO - Init {'embedding_dim': 1024, 'metric': 'cosine', 'storage_file': '/home/weitianyu/teach_system/rag_storage/vdb_chunks.json'} 0 data
2025-11-06 16:04:41,129 - knowledge_management.rag_engine - INFO - 🔄 正在初始化LightRAG存储...
2025-11-06 16:04:41,130 - knowledge_management.rag_engine - INFO - ✅ LightRAG引擎初始化完成
2025-11-06 16:04:41,130 - knowledge_management.rag_engine - INFO - 📝 知识图谱数据为空，需要构建
2025-11-06 16:04:41,131 - system_core - INFO - ✅ RAG引擎初始化成功
2025-11-06 16:04:41,131 - system_core - INFO - 🔄 正在构建知识图谱...
2025-11-06 16:04:41,131 - knowledge_management.rag_engine - INFO - ✅ 题库知识图谱管理器初始化完成
2025-11-06 16:04:41,131 - knowledge_management.rag_engine - INFO - 🏗️  开始构建知识图谱，共 49 道题目
2025-11-06 16:04:41,131 - knowledge_management.rag_engine - INFO - 📥 正在插入 49 个文档到知识图谱...
2025-11-06 16:04:41,131 - knowledge_management.rag_engine - WARNING - ⚠️  文档 1 插入失败: This event loop is already running
2025-11-06 16:04:41,132 - knowledge_management.rag_engine - WARNING - ⚠️  文档 2 插入失败: This event loop is already running
2025-11-06 16:04:41,132 - knowledge_management.rag_engine - WARNING - ⚠️  文档 3 插入失败: This event loop is already running
2025-11-06 16:04:41,132 - knowledge_management.rag_engine - WARNING - ⚠️  文档 4 插入失败: This event loop is already running
2025-11-06 16:04:41,132 - knowledge_management.rag_engine - WARNING - ⚠️  文档 5 插入失败: This event loop is already running
2025-11-06 16:04:41,132 - knowledge_management.rag_engine - WARNING - ⚠️  文档 6 插入失败: This event loop is already running
2025-11-06 16:04:41,132 - knowledge_management.rag_engine - WARNING - ⚠️  文档 7 插入失败: This event loop is already running
2025-11-06 16:04:41,132 - knowledge_management.rag_engine - WARNING - ⚠️  文档 8 插入失败: This event loop is already running
2025-11-06 16:04:41,133 - knowledge_management.rag_engine - WARNING - ⚠️  文档 9 插入失败: This event loop is already running
2025-11-06 16:04:41,133 - knowledge_management.rag_engine - WARNING - ⚠️  文档 10 插入失败: This event loop is already running
2025-11-06 16:04:41,133 - knowledge_management.rag_engine - WARNING - ⚠️  文档 11 插入失败: This event loop is already running
2025-11-06 16:04:41,133 - knowledge_management.rag_engine - WARNING - ⚠️  文档 12 插入失败: This event loop is already running
2025-11-06 16:04:41,133 - knowledge_management.rag_engine - WARNING - ⚠️  文档 13 插入失败: This event loop is already running
2025-11-06 16:04:41,133 - knowledge_management.rag_engine - WARNING - ⚠️  文档 14 插入失败: This event loop is already running
2025-11-06 16:04:41,133 - knowledge_management.rag_engine - WARNING - ⚠️  文档 15 插入失败: This event loop is already running
2025-11-06 16:04:41,133 - knowledge_management.rag_engine - WARNING - ⚠️  文档 16 插入失败: This event loop is already running
2025-11-06 16:04:41,133 - knowledge_management.rag_engine - WARNING - ⚠️  文档 17 插入失败: This event loop is already running
2025-11-06 16:04:41,133 - knowledge_management.rag_engine - WARNING - ⚠️  文档 18 插入失败: This event loop is already running
2025-11-06 16:04:41,133 - knowledge_management.rag_engine - WARNING - ⚠️  文档 19 插入失败: This event loop is already running
2025-11-06 16:04:41,133 - knowledge_management.rag_engine - WARNING - ⚠️  文档 20 插入失败: This event loop is already running
2025-11-06 16:04:41,134 - knowledge_management.rag_engine - WARNING - ⚠️  文档 21 插入失败: This event loop is already running
2025-11-06 16:04:41,134 - knowledge_management.rag_engine - WARNING - ⚠️  文档 22 插入失败: This event loop is already running
2025-11-06 16:04:41,134 - knowledge_management.rag_engine - WARNING - ⚠️  文档 23 插入失败: This event loop is already running
2025-11-06 16:04:41,134 - knowledge_management.rag_engine - WARNING - ⚠️  文档 24 插入失败: This event loop is already running
2025-11-06 16:04:41,134 - knowledge_management.rag_engine - WARNING - ⚠️  文档 25 插入失败: This event loop is already running
2025-11-06 16:04:41,134 - knowledge_management.rag_engine - WARNING - ⚠️  文档 26 插入失败: This event loop is already running
2025-11-06 16:04:41,134 - knowledge_management.rag_engine - WARNING - ⚠️  文档 27 插入失败: This event loop is already running
2025-11-06 16:04:41,134 - knowledge_management.rag_engine - WARNING - ⚠️  文档 28 插入失败: This event loop is already running
2025-11-06 16:04:41,134 - knowledge_management.rag_engine - WARNING - ⚠️  文档 29 插入失败: This event loop is already running
2025-11-06 16:04:41,134 - knowledge_management.rag_engine - WARNING - ⚠️  文档 30 插入失败: This event loop is already running
2025-11-06 16:04:41,134 - knowledge_management.rag_engine - WARNING - ⚠️  文档 31 插入失败: This event loop is already running
2025-11-06 16:04:41,134 - knowledge_management.rag_engine - WARNING - ⚠️  文档 32 插入失败: This event loop is already running
2025-11-06 16:04:41,135 - knowledge_management.rag_engine - WARNING - ⚠️  文档 33 插入失败: This event loop is already running
2025-11-06 16:04:41,135 - knowledge_management.rag_engine - WARNING - ⚠️  文档 34 插入失败: This event loop is already running
2025-11-06 16:04:41,135 - knowledge_management.rag_engine - WARNING - ⚠️  文档 35 插入失败: This event loop is already running
2025-11-06 16:04:41,135 - knowledge_management.rag_engine - WARNING - ⚠️  文档 36 插入失败: This event loop is already running
2025-11-06 16:04:41,135 - knowledge_management.rag_engine - WARNING - ⚠️  文档 37 插入失败: This event loop is already running
2025-11-06 16:04:41,135 - knowledge_management.rag_engine - WARNING - ⚠️  文档 38 插入失败: This event loop is already running
2025-11-06 16:04:41,135 - knowledge_management.rag_engine - WARNING - ⚠️  文档 39 插入失败: This event loop is already running
2025-11-06 16:04:41,135 - knowledge_management.rag_engine - WARNING - ⚠️  文档 40 插入失败: This event loop is already running
2025-11-06 16:04:41,135 - knowledge_management.rag_engine - WARNING - ⚠️  文档 41 插入失败: This event loop is already running
2025-11-06 16:04:41,135 - knowledge_management.rag_engine - WARNING - ⚠️  文档 42 插入失败: This event loop is already running
2025-11-06 16:04:41,135 - knowledge_management.rag_engine - WARNING - ⚠️  文档 43 插入失败: This event loop is already running
2025-11-06 16:04:41,135 - knowledge_management.rag_engine - WARNING - ⚠️  文档 44 插入失败: This event loop is already running
2025-11-06 16:04:41,136 - knowledge_management.rag_engine - WARNING - ⚠️  文档 45 插入失败: This event loop is already running
2025-11-06 16:04:41,136 - knowledge_management.rag_engine - WARNING - ⚠️  文档 46 插入失败: This event loop is already running
2025-11-06 16:04:41,136 - knowledge_management.rag_engine - WARNING - ⚠️  文档 47 插入失败: This event loop is already running
2025-11-06 16:04:41,136 - knowledge_management.rag_engine - WARNING - ⚠️  文档 48 插入失败: This event loop is already running
2025-11-06 16:04:41,136 - knowledge_management.rag_engine - WARNING - ⚠️  文档 49 插入失败: This event loop is already running
2025-11-06 16:04:41,136 - knowledge_management.rag_engine - INFO - ✅ 文档插入完成
2025-11-06 16:04:41,136 - knowledge_management.rag_engine - INFO - ✅ 知识图谱构建完成，共 49 个节点
2025-11-06 16:04:41,136 - system_core - INFO - ✅ 知识图谱构建完成
2025-11-06 16:04:41,136 - system_core - INFO - 🚀 初始化盘古7B模型...
2025-11-06 16:04:41,136 - models.llm_models - INFO - 🆕 创建新的盘古7B模型实例（任务类型: pangu）
2025-11-06 16:04:41,137 - models.llm_models - INFO - ✅ 检测到 8 个NPU设备
2025-11-06 16:04:49,051 - models.llm_models - INFO -   NPU 0: Ascend910B2, 总显存: 60.97 GB
2025-11-06 16:04:49,052 - models.llm_models - INFO -   NPU 1: Ascend910B2, 总显存: 60.97 GB
2025-11-06 16:04:49,053 - models.llm_models - INFO -   NPU 2: Ascend910B2, 总显存: 60.97 GB
2025-11-06 16:04:49,053 - models.llm_models - INFO -   NPU 3: Ascend910B2, 总显存: 60.97 GB
2025-11-06 16:04:49,053 - models.llm_models - INFO -   NPU 4: Ascend910B2, 总显存: 60.97 GB
2025-11-06 16:04:49,054 - models.llm_models - INFO -   NPU 5: Ascend910B2, 总显存: 60.97 GB
2025-11-06 16:04:49,054 - models.llm_models - INFO -   NPU 6: Ascend910B2, 总显存: 60.97 GB
2025-11-06 16:04:49,055 - models.llm_models - INFO -   NPU 7: Ascend910B2, 总显存: 60.97 GB
2025-11-06 16:04:49,055 - models.llm_models - INFO - 盘古7B模型设备配置: ['npu:0', 'npu:1', 'npu:2', 'npu:3', 'npu:4', 'npu:5', 'npu:6', 'npu:7']
2025-11-06 16:04:49,055 - system_core - INFO - 🔄 预加载盘古7B模型...
2025-11-06 16:04:49,055 - models.llm_models - INFO - 🔄 正在加载盘古7B模型: /opt/pangu/openPangu-Embedded-7B-V1.1
2025-11-06 16:04:50,172 - models.llm_models - INFO - 🚀 使用多NPU模式，跨8个设备分布模型
2025-11-06 16:04:51,075 - datasets - INFO - PyTorch version 2.5.1 available.
2025-11-06 16:04:51,485 - accelerate.utils.modeling - INFO - Based on the current allocation process, no modules could be assigned to the following devices due to insufficient memory:
  - 0: 2512912384 bytes required
These minimum requirements are specific to this allocation attempt and may vary. Consider increasing the available memory for these devices to at least the specified minimum, or adjusting the model config.
2025-11-06 16:04:56,974 - models.llm_models - INFO - ✅ 使用device_map='auto'模式成功加载
2025-11-06 16:04:56,977 - models.llm_models - INFO - 📊 模型分布情况:
2025-11-06 16:04:56,977 - models.llm_models - INFO -    1: 4 层
2025-11-06 16:04:56,977 - models.llm_models - INFO -    2: 6 层
2025-11-06 16:04:56,978 - models.llm_models - INFO -    3: 6 层
2025-11-06 16:04:56,978 - models.llm_models - INFO -    4: 6 层
2025-11-06 16:04:56,978 - models.llm_models - INFO -    5: 6 层
2025-11-06 16:04:56,978 - models.llm_models - INFO -    6: 6 层
2025-11-06 16:04:56,978 - models.llm_models - INFO -    7: 4 层
2025-11-06 16:04:56,978 - models.llm_models - INFO - ✅ 盘古7B模型加载成功
2025-11-06 16:04:56,978 - system_core - INFO - ✅ 盘古7B模型加载完成
2025-11-06 16:04:56,978 - system_core - INFO - 🧠 初始化BKT算法...
2025-11-06 16:04:56,979 - utils.bkt_algorithm - INFO - ✅ 加载学生状态: 1 个学生, 7 条细粒度记录
2025-11-06 16:04:56,979 - utils.bkt_algorithm - INFO - ✅ 增强版BKT算法初始化完成（细粒度知识点追踪）
2025-11-06 16:04:56,979 - system_core - INFO - 📊 初始化评估器（盘古7B驱动）...
2025-11-06 16:04:56,979 - utils.evaluator - INFO - ✅ 个性化学生评估器初始化完成
2025-11-06 16:04:56,979 - system_core - INFO - 📝 初始化题目生成器...
2025-11-06 16:04:56,979 - utils.question_generator - INFO - ⚠️  使用模拟题目生成器（从题库抽取）
2025-11-06 16:04:56,980 - system_core - INFO - 🎨 初始化可视化组件...
2025-11-06 16:04:56,980 - visualization.kg_visualizer - INFO - 知识图谱可视化器初始化完成
2025-11-06 16:04:56,980 - system_core - INFO - ✅ 系统初始化完成 - BKT+RAG+盘古7B完整流程
2025-11-06 16:04:56,980 - __main__ - INFO - ✅ 系统核心初始化完成
2025-11-06 16:04:56,980 - __main__ - INFO - 📚 题库统计: 总题目 49
2025-11-06 16:04:56,980 - __main__ - INFO - 📊 知识点大类: 4 个
2025-11-06 16:04:56,980 - __main__ - INFO - 📋 知识点小类: 38 个
2025-11-06 16:04:56,980 - __main__ - INFO - 🎨 正在创建UI界面...
2025-11-06 16:04:56,981 - ui.main_ui - INFO - ✅ 智能教育UI初始化完成
2025-11-06 16:04:57,281 - __main__ - INFO - ✅ 系统启动成功!
2025-11-06 16:08:09,714 - __main__ - INFO - 👋 系统已关闭
2025-11-06 16:08:22,586 - __main__ - INFO - 🚀 系统启动中...
2025-11-06 16:08:22,586 - __main__ - INFO - ✅ 检测到盘古7B模型文件
2025-11-06 16:08:22,586 - __main__ - INFO - ✅ 检测到题库文件
2025-11-06 16:08:22,586 - __main__ - INFO - ⚙️  正在初始化智能系统核心...
2025-11-06 16:08:22,587 - system_core - INFO - ✅ 智能教育系统核心初始化（修复版）
2025-11-06 16:08:22,587 - system_core - INFO - 🔄 初始化系统组件...
2025-11-06 16:08:30,384 - knowledge_management.rag_engine - INFO - ✅ LightRAG导入成功
2025-11-06 16:08:30,390 - system_core - INFO - 📚 初始化题库...
2025-11-06 16:08:30,390 - data_management.question_db - INFO - ✅ 加载题库成功: 49 道题目
2025-11-06 16:08:30,390 - data_management.question_db - INFO - ✅ 增强版题库初始化完成: /home/weitianyu/teach_system/data/question_database_2.json
2025-11-06 16:08:30,390 - system_core - INFO - 🔤 初始化嵌入模型（BGE-M3）...
2025-11-06 16:08:30,390 - models.embedding_model - INFO - 尝试使用盘古7B的嵌入功能...
2025-11-06 16:08:30,391 - models.embedding_model - INFO - 初始化盘古7B嵌入模型: /opt/pangu/openPangu-Embedded-7B-V1.1
2025-11-06 16:08:30,391 - system_core - INFO - 🧠 初始化RAG引擎（LightRAG）...
2025-11-06 16:08:30,391 - knowledge_management.rag_engine - INFO - ✅ RAG引擎初始化成功，工作目录: /home/weitianyu/teach_system/rag_storage
2025-11-06 16:08:30,391 - knowledge_management.rag_engine - INFO - 🔄 正在创建LightRAG实例...
2025-11-06 16:08:31,128 - knowledge_management.rag_engine - ERROR - ❌ LightRAG引擎初始化失败: 'function' object has no attribute 'embedding_dim'
2025-11-06 16:08:31,130 - knowledge_management.rag_engine - ERROR - Traceback (most recent call last):
  File "/home/weitianyu/teach_system/knowledge_management/rag_engine.py", line 93, in initialize
    self.rag = LightRAG(
               ^^^^^^^^^
  File "<string>", line 37, in __init__
  File "/root/miniconda3/envs/pangu/lib/python3.11/site-packages/lightrag/lightrag.py", line 396, in __post_init__
    self.entities_vdb: BaseVectorStorage = self.vector_db_storage_cls(  # type: ignore
                                           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/root/miniconda3/envs/pangu/lib/python3.11/site-packages/lightrag/utils.py", line 1323, in import_class
    return cls(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^
  File "<string>", line 8, in __init__
  File "/root/miniconda3/envs/pangu/lib/python3.11/site-packages/lightrag/kg/nano_vector_db_impl.py", line 50, in __post_init__
    self.embedding_func.embedding_dim,
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: 'function' object has no attribute 'embedding_dim'

2025-11-06 16:08:31,130 - system_core - ERROR - ❌ 系统初始化失败: LightRAG初始化失败: 'function' object has no attribute 'embedding_dim'
2025-11-06 16:08:31,132 - system_core - ERROR - Traceback (most recent call last):
  File "/home/weitianyu/teach_system/knowledge_management/rag_engine.py", line 93, in initialize
    self.rag = LightRAG(
               ^^^^^^^^^
  File "<string>", line 37, in __init__
  File "/root/miniconda3/envs/pangu/lib/python3.11/site-packages/lightrag/lightrag.py", line 396, in __post_init__
    self.entities_vdb: BaseVectorStorage = self.vector_db_storage_cls(  # type: ignore
                                           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/root/miniconda3/envs/pangu/lib/python3.11/site-packages/lightrag/utils.py", line 1323, in import_class
    return cls(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^
  File "<string>", line 8, in __init__
  File "/root/miniconda3/envs/pangu/lib/python3.11/site-packages/lightrag/kg/nano_vector_db_impl.py", line 50, in __post_init__
    self.embedding_func.embedding_dim,
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: 'function' object has no attribute 'embedding_dim'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/weitianyu/teach_system/system_core.py", line 71, in initialize
    loop.run_until_complete(self.rag_engine.initialize())
  File "/root/miniconda3/envs/pangu/lib/python3.11/asyncio/base_events.py", line 650, in run_until_complete
    return future.result()
           ^^^^^^^^^^^^^^^
  File "/home/weitianyu/teach_system/knowledge_management/rag_engine.py", line 117, in initialize
    raise RuntimeError(f"LightRAG初始化失败: {e}")
RuntimeError: LightRAG初始化失败: 'function' object has no attribute 'embedding_dim'

2025-11-06 16:08:31,132 - __main__ - ERROR - ❌ 系统运行出错: 系统初始化失败: LightRAG初始化失败: 'function' object has no attribute 'embedding_dim'
Traceback (most recent call last):
  File "/home/weitianyu/teach_system/knowledge_management/rag_engine.py", line 93, in initialize
    self.rag = LightRAG(
               ^^^^^^^^^
  File "<string>", line 37, in __init__
  File "/root/miniconda3/envs/pangu/lib/python3.11/site-packages/lightrag/lightrag.py", line 396, in __post_init__
    self.entities_vdb: BaseVectorStorage = self.vector_db_storage_cls(  # type: ignore
                                           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/root/miniconda3/envs/pangu/lib/python3.11/site-packages/lightrag/utils.py", line 1323, in import_class
    return cls(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^
  File "<string>", line 8, in __init__
  File "/root/miniconda3/envs/pangu/lib/python3.11/site-packages/lightrag/kg/nano_vector_db_impl.py", line 50, in __post_init__
    self.embedding_func.embedding_dim,
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: 'function' object has no attribute 'embedding_dim'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/weitianyu/teach_system/system_core.py", line 71, in initialize
    loop.run_until_complete(self.rag_engine.initialize())
  File "/root/miniconda3/envs/pangu/lib/python3.11/asyncio/base_events.py", line 650, in run_until_complete
    return future.result()
           ^^^^^^^^^^^^^^^
  File "/home/weitianyu/teach_system/knowledge_management/rag_engine.py", line 117, in initialize
    raise RuntimeError(f"LightRAG初始化失败: {e}")
RuntimeError: LightRAG初始化失败: 'function' object has no attribute 'embedding_dim'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/weitianyu/teach_system/main.py", line 69, in main
    system_core = create_system_core(config)
                  ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/weitianyu/teach_system/system_core.py", line 685, in create_system_core
    core.initialize()
  File "/home/weitianyu/teach_system/system_core.py", line 133, in initialize
    raise RuntimeError(f"系统初始化失败: {e}")
RuntimeError: 系统初始化失败: LightRAG初始化失败: 'function' object has no attribute 'embedding_dim'
2025-11-06 16:08:31,134 - __main__ - INFO - 👋 系统已关闭
2025-11-06 16:14:36,093 - __main__ - INFO - 🚀 系统启动中...
2025-11-06 16:14:36,093 - __main__ - INFO - ✅ 检测到盘古7B模型文件
2025-11-06 16:14:36,094 - __main__ - INFO - ✅ 检测到题库文件
2025-11-06 16:14:36,094 - __main__ - INFO - ⚙️  正在初始化智能系统核心...
2025-11-06 16:14:36,094 - system_core - INFO - ✅ 智能教育系统核心初始化（修复版）
2025-11-06 16:14:36,094 - system_core - INFO - 🔄 初始化系统组件...
2025-11-06 16:14:43,890 - knowledge_management.rag_engine - INFO - ✅ LightRAG导入成功
2025-11-06 16:14:43,890 - system_core - INFO - 📚 初始化题库...
2025-11-06 16:14:43,891 - data_management.question_db - INFO - ✅ 加载题库成功: 49 道题目
2025-11-06 16:14:43,891 - data_management.question_db - INFO - ✅ 增强版题库初始化完成: /home/weitianyu/teach_system/data/question_database_2.json
2025-11-06 16:14:43,891 - system_core - INFO - 🔤 初始化嵌入模型（BGE-M3）...
2025-11-06 16:14:43,891 - models.embedding_model - INFO - 尝试使用盘古7B的嵌入功能...
2025-11-06 16:14:43,891 - models.embedding_model - INFO - 初始化盘古7B嵌入模型: /opt/pangu/openPangu-Embedded-7B-V1.1
2025-11-06 16:14:43,892 - system_core - INFO - 🔧 创建LightRAG嵌入函数包装器...
2025-11-06 16:14:43,892 - models.embedding_model - INFO - 正在加载盘古7B模型用于嵌入...
2025-11-06 16:14:46,880 - datasets - INFO - PyTorch version 2.5.1 available.
2025-11-06 16:14:57,759 - models.embedding_model - INFO - 盘古7B嵌入模型加载成功,设备: cpu
2025-11-06 16:14:57,760 - models.embedding_model - INFO - ✅ LightRAG嵌入包装器初始化完成，维度: 4096
2025-11-06 16:14:57,760 - system_core - INFO - ✅ 包装器创建成功，embedding_dim=4096
2025-11-06 16:14:57,760 - system_core - INFO - 🧠 初始化RAG引擎（LightRAG）...
2025-11-06 16:14:57,760 - knowledge_management.rag_engine - INFO - ✅ RAG引擎初始化成功，工作目录: /home/weitianyu/teach_system/rag_storage
2025-11-06 16:14:57,761 - knowledge_management.rag_engine - INFO - 🔄 正在创建LightRAG实例...
2025-11-06 16:14:59,474 - nano-vectordb - INFO - Init {'embedding_dim': 4096, 'metric': 'cosine', 'storage_file': '/home/weitianyu/teach_system/rag_storage/vdb_entities.json'} 0 data
2025-11-06 16:14:59,474 - nano-vectordb - INFO - Init {'embedding_dim': 4096, 'metric': 'cosine', 'storage_file': '/home/weitianyu/teach_system/rag_storage/vdb_relationships.json'} 0 data
2025-11-06 16:14:59,474 - nano-vectordb - INFO - Init {'embedding_dim': 4096, 'metric': 'cosine', 'storage_file': '/home/weitianyu/teach_system/rag_storage/vdb_chunks.json'} 0 data
2025-11-06 16:14:59,476 - knowledge_management.rag_engine - INFO - 🔄 正在初始化LightRAG存储...
2025-11-06 16:14:59,477 - knowledge_management.rag_engine - INFO - ✅ LightRAG引擎初始化完成
2025-11-06 16:14:59,477 - knowledge_management.rag_engine - INFO - 📝 知识图谱数据为空，需要构建
2025-11-06 16:14:59,478 - system_core - INFO - ✅ RAG引擎初始化成功
2025-11-06 16:14:59,478 - system_core - INFO - 🔄 正在构建知识图谱...
2025-11-06 16:14:59,478 - knowledge_management.rag_engine - INFO - ✅ 题库知识图谱管理器初始化完成
2025-11-06 16:14:59,478 - knowledge_management.rag_engine - INFO - 🏗️  开始构建知识图谱，共 49 道题目
2025-11-06 16:14:59,478 - knowledge_management.rag_engine - INFO - 📥 正在插入 49 个文档到知识图谱...
2025-11-06 16:14:59,479 - knowledge_management.rag_engine - WARNING - ⚠️  文档 1 插入失败: This event loop is already running
2025-11-06 16:14:59,479 - knowledge_management.rag_engine - WARNING - ⚠️  文档 2 插入失败: This event loop is already running
2025-11-06 16:14:59,479 - knowledge_management.rag_engine - WARNING - ⚠️  文档 3 插入失败: This event loop is already running
2025-11-06 16:14:59,479 - knowledge_management.rag_engine - WARNING - ⚠️  文档 4 插入失败: This event loop is already running
2025-11-06 16:14:59,479 - knowledge_management.rag_engine - WARNING - ⚠️  文档 5 插入失败: This event loop is already running
2025-11-06 16:14:59,479 - knowledge_management.rag_engine - WARNING - ⚠️  文档 6 插入失败: This event loop is already running
2025-11-06 16:14:59,480 - knowledge_management.rag_engine - WARNING - ⚠️  文档 7 插入失败: This event loop is already running
2025-11-06 16:14:59,480 - knowledge_management.rag_engine - WARNING - ⚠️  文档 8 插入失败: This event loop is already running
2025-11-06 16:14:59,480 - knowledge_management.rag_engine - WARNING - ⚠️  文档 9 插入失败: This event loop is already running
2025-11-06 16:14:59,480 - knowledge_management.rag_engine - WARNING - ⚠️  文档 10 插入失败: This event loop is already running
2025-11-06 16:14:59,480 - knowledge_management.rag_engine - WARNING - ⚠️  文档 11 插入失败: This event loop is already running
2025-11-06 16:14:59,480 - knowledge_management.rag_engine - WARNING - ⚠️  文档 12 插入失败: This event loop is already running
2025-11-06 16:14:59,480 - knowledge_management.rag_engine - WARNING - ⚠️  文档 13 插入失败: This event loop is already running
2025-11-06 16:14:59,480 - knowledge_management.rag_engine - WARNING - ⚠️  文档 14 插入失败: This event loop is already running
2025-11-06 16:14:59,480 - knowledge_management.rag_engine - WARNING - ⚠️  文档 15 插入失败: This event loop is already running
2025-11-06 16:14:59,480 - knowledge_management.rag_engine - WARNING - ⚠️  文档 16 插入失败: This event loop is already running
2025-11-06 16:14:59,480 - knowledge_management.rag_engine - WARNING - ⚠️  文档 17 插入失败: This event loop is already running
2025-11-06 16:14:59,481 - knowledge_management.rag_engine - WARNING - ⚠️  文档 18 插入失败: This event loop is already running
2025-11-06 16:14:59,481 - knowledge_management.rag_engine - WARNING - ⚠️  文档 19 插入失败: This event loop is already running
2025-11-06 16:14:59,481 - knowledge_management.rag_engine - WARNING - ⚠️  文档 20 插入失败: This event loop is already running
2025-11-06 16:14:59,481 - knowledge_management.rag_engine - WARNING - ⚠️  文档 21 插入失败: This event loop is already running
2025-11-06 16:14:59,481 - knowledge_management.rag_engine - WARNING - ⚠️  文档 22 插入失败: This event loop is already running
2025-11-06 16:14:59,481 - knowledge_management.rag_engine - WARNING - ⚠️  文档 23 插入失败: This event loop is already running
2025-11-06 16:14:59,481 - knowledge_management.rag_engine - WARNING - ⚠️  文档 24 插入失败: This event loop is already running
2025-11-06 16:14:59,481 - knowledge_management.rag_engine - WARNING - ⚠️  文档 25 插入失败: This event loop is already running
2025-11-06 16:14:59,481 - knowledge_management.rag_engine - WARNING - ⚠️  文档 26 插入失败: This event loop is already running
2025-11-06 16:14:59,481 - knowledge_management.rag_engine - WARNING - ⚠️  文档 27 插入失败: This event loop is already running
2025-11-06 16:14:59,481 - knowledge_management.rag_engine - WARNING - ⚠️  文档 28 插入失败: This event loop is already running
2025-11-06 16:14:59,481 - knowledge_management.rag_engine - WARNING - ⚠️  文档 29 插入失败: This event loop is already running
2025-11-06 16:14:59,482 - knowledge_management.rag_engine - WARNING - ⚠️  文档 30 插入失败: This event loop is already running
2025-11-06 16:14:59,482 - knowledge_management.rag_engine - WARNING - ⚠️  文档 31 插入失败: This event loop is already running
2025-11-06 16:14:59,482 - knowledge_management.rag_engine - WARNING - ⚠️  文档 32 插入失败: This event loop is already running
2025-11-06 16:14:59,482 - knowledge_management.rag_engine - WARNING - ⚠️  文档 33 插入失败: This event loop is already running
2025-11-06 16:14:59,482 - knowledge_management.rag_engine - WARNING - ⚠️  文档 34 插入失败: This event loop is already running
2025-11-06 16:14:59,482 - knowledge_management.rag_engine - WARNING - ⚠️  文档 35 插入失败: This event loop is already running
2025-11-06 16:14:59,482 - knowledge_management.rag_engine - WARNING - ⚠️  文档 36 插入失败: This event loop is already running
2025-11-06 16:14:59,482 - knowledge_management.rag_engine - WARNING - ⚠️  文档 37 插入失败: This event loop is already running
2025-11-06 16:14:59,482 - knowledge_management.rag_engine - WARNING - ⚠️  文档 38 插入失败: This event loop is already running
2025-11-06 16:14:59,482 - knowledge_management.rag_engine - WARNING - ⚠️  文档 39 插入失败: This event loop is already running
2025-11-06 16:14:59,482 - knowledge_management.rag_engine - WARNING - ⚠️  文档 40 插入失败: This event loop is already running
2025-11-06 16:14:59,482 - knowledge_management.rag_engine - WARNING - ⚠️  文档 41 插入失败: This event loop is already running
2025-11-06 16:14:59,483 - knowledge_management.rag_engine - WARNING - ⚠️  文档 42 插入失败: This event loop is already running
2025-11-06 16:14:59,483 - knowledge_management.rag_engine - WARNING - ⚠️  文档 43 插入失败: This event loop is already running
2025-11-06 16:14:59,483 - knowledge_management.rag_engine - WARNING - ⚠️  文档 44 插入失败: This event loop is already running
2025-11-06 16:14:59,483 - knowledge_management.rag_engine - WARNING - ⚠️  文档 45 插入失败: This event loop is already running
2025-11-06 16:14:59,483 - knowledge_management.rag_engine - WARNING - ⚠️  文档 46 插入失败: This event loop is already running
2025-11-06 16:14:59,483 - knowledge_management.rag_engine - WARNING - ⚠️  文档 47 插入失败: This event loop is already running
2025-11-06 16:14:59,483 - knowledge_management.rag_engine - WARNING - ⚠️  文档 48 插入失败: This event loop is already running
2025-11-06 16:14:59,483 - knowledge_management.rag_engine - WARNING - ⚠️  文档 49 插入失败: This event loop is already running
2025-11-06 16:14:59,483 - knowledge_management.rag_engine - INFO - ✅ 文档插入完成
2025-11-06 16:14:59,483 - knowledge_management.rag_engine - INFO - ✅ 知识图谱构建完成，共 49 个节点
2025-11-06 16:14:59,483 - system_core - INFO - ✅ 知识图谱构建完成
2025-11-06 16:14:59,484 - system_core - INFO - 🚀 初始化盘古7B模型...
2025-11-06 16:14:59,484 - models.llm_models - INFO - 🆕 创建新的盘古7B模型实例（任务类型: pangu）
2025-11-06 16:14:59,484 - models.llm_models - INFO - ✅ 检测到 8 个NPU设备
2025-11-06 16:14:59,485 - models.llm_models - INFO -   NPU 0: Ascend910B2, 总显存: 60.97 GB
2025-11-06 16:14:59,485 - models.llm_models - INFO -   NPU 1: Ascend910B2, 总显存: 60.97 GB
2025-11-06 16:14:59,485 - models.llm_models - INFO -   NPU 2: Ascend910B2, 总显存: 60.97 GB
2025-11-06 16:14:59,486 - models.llm_models - INFO -   NPU 3: Ascend910B2, 总显存: 60.97 GB
2025-11-06 16:14:59,486 - models.llm_models - INFO -   NPU 4: Ascend910B2, 总显存: 60.97 GB
2025-11-06 16:14:59,486 - models.llm_models - INFO -   NPU 5: Ascend910B2, 总显存: 60.97 GB
2025-11-06 16:14:59,487 - models.llm_models - INFO -   NPU 6: Ascend910B2, 总显存: 60.97 GB
2025-11-06 16:14:59,487 - models.llm_models - INFO -   NPU 7: Ascend910B2, 总显存: 60.97 GB
2025-11-06 16:14:59,487 - models.llm_models - INFO - 盘古7B模型设备配置: ['npu:0', 'npu:1', 'npu:2', 'npu:3', 'npu:4', 'npu:5', 'npu:6', 'npu:7']
2025-11-06 16:14:59,487 - system_core - INFO - 🔄 预加载盘古7B模型...
2025-11-06 16:14:59,487 - models.llm_models - INFO - 🔄 正在加载盘古7B模型: /opt/pangu/openPangu-Embedded-7B-V1.1
2025-11-06 16:15:00,546 - models.llm_models - INFO - 🚀 使用多NPU模式，跨8个设备分布模型
2025-11-06 16:15:01,209 - accelerate.utils.modeling - INFO - Based on the current allocation process, no modules could be assigned to the following devices due to insufficient memory:
  - 0: 2512912384 bytes required
These minimum requirements are specific to this allocation attempt and may vary. Consider increasing the available memory for these devices to at least the specified minimum, or adjusting the model config.
2025-11-06 16:15:06,423 - models.llm_models - INFO - ✅ 使用device_map='auto'模式成功加载
2025-11-06 16:15:06,426 - models.llm_models - INFO - 📊 模型分布情况:
2025-11-06 16:15:06,426 - models.llm_models - INFO -    1: 4 层
2025-11-06 16:15:06,426 - models.llm_models - INFO -    2: 6 层
2025-11-06 16:15:06,426 - models.llm_models - INFO -    3: 6 层
2025-11-06 16:15:06,426 - models.llm_models - INFO -    4: 6 层
2025-11-06 16:15:06,426 - models.llm_models - INFO -    5: 6 层
2025-11-06 16:15:06,426 - models.llm_models - INFO -    6: 6 层
2025-11-06 16:15:06,427 - models.llm_models - INFO -    7: 4 层
2025-11-06 16:15:06,427 - models.llm_models - INFO - ✅ 盘古7B模型加载成功
2025-11-06 16:15:06,427 - system_core - INFO - ✅ 盘古7B模型加载完成
2025-11-06 16:15:06,427 - system_core - INFO - 🧠 初始化BKT算法...
2025-11-06 16:15:06,427 - utils.bkt_algorithm - INFO - ✅ 加载学生状态: 1 个学生, 7 条细粒度记录
2025-11-06 16:15:06,428 - utils.bkt_algorithm - INFO - ✅ 增强版BKT算法初始化完成（细粒度知识点追踪）
2025-11-06 16:15:06,428 - system_core - INFO - 📊 初始化评估器（盘古7B驱动）...
2025-11-06 16:15:06,428 - utils.evaluator - INFO - ✅ 个性化学生评估器初始化完成
2025-11-06 16:15:06,428 - system_core - INFO - 📝 初始化题目生成器...
2025-11-06 16:15:06,428 - utils.question_generator - INFO - ⚠️  使用模拟题目生成器（从题库抽取）
2025-11-06 16:15:06,428 - system_core - INFO - 🎨 初始化可视化组件...
2025-11-06 16:15:06,428 - visualization.kg_visualizer - INFO - 知识图谱可视化器初始化完成
2025-11-06 16:15:06,428 - system_core - INFO - ✅ 系统初始化完成 - BKT+RAG+盘古7B完整流程
2025-11-06 16:15:06,428 - __main__ - INFO - ✅ 系统核心初始化完成
2025-11-06 16:15:06,428 - __main__ - INFO - 📚 题库统计: 总题目 49
2025-11-06 16:15:06,429 - __main__ - INFO - 📊 知识点大类: 4 个
2025-11-06 16:15:06,429 - __main__ - INFO - 📋 知识点小类: 38 个
2025-11-06 16:15:06,429 - __main__ - INFO - 🎨 正在创建UI界面...
2025-11-06 16:15:06,429 - ui.main_ui - INFO - ✅ 智能教育UI初始化完成
2025-11-06 16:15:06,717 - __main__ - INFO - ✅ 系统启动成功!
2025-11-06 16:16:09,838 - __main__ - INFO - 👋 系统已关闭
2025-11-06 16:46:45,683 - __main__ - INFO - 🚀 系统启动中...
2025-11-06 16:46:45,683 - __main__ - INFO - ✅ 检测到盘古7B模型文件
2025-11-06 16:46:45,683 - __main__ - INFO - ✅ 检测到题库文件
2025-11-06 16:46:45,683 - __main__ - INFO - ⚙️  正在初始化智能系统核心...
2025-11-06 16:46:45,683 - system_core - INFO - ✅ 智能教育系统核心初始化
2025-11-06 16:46:45,683 - system_core - INFO - 🔄 初始化系统组件...
2025-11-06 16:46:53,482 - knowledge_management.rag_engine - WARNING - LightRAG未安装,将使用模拟模式
2025-11-06 16:46:53,486 - system_core - INFO - 📚 初始化题库...
2025-11-06 16:46:53,487 - data_management.question_db - INFO - ✅ 加载题库成功: 49 道题目
2025-11-06 16:46:53,487 - data_management.question_db - INFO - ✅ 增强版题库初始化完成: /home/weitianyu/teach_system/data/question_database_2.json
2025-11-06 16:46:53,487 - system_core - INFO - 🔤 初始化嵌入模型（BGE-M3）...
2025-11-06 16:46:53,487 - models.embedding_model - INFO - 尝试使用盘古7B的嵌入功能...
2025-11-06 16:46:53,487 - models.embedding_model - INFO - 初始化盘古7B嵌入模型: /opt/pangu/openPangu-Embedded-7B-V1.1
2025-11-06 16:46:53,487 - system_core - INFO - 🧠 初始化RAG引擎（LightRAG + BGE-M3）...
2025-11-06 16:46:53,487 - knowledge_management.rag_engine - INFO - 初始化RAG引擎(LightRAG核心),工作目录: /home/weitianyu/teach_system/rag_storage
2025-11-06 16:46:53,488 - knowledge_management.rag_engine - WARNING - LightRAG不可用,使用模拟模式
2025-11-06 16:46:53,488 - system_core - INFO - ✅ RAG引擎初始化成功
2025-11-06 16:46:53,488 - system_core - INFO - 🔄 正在构建知识图谱和题目嵌入索引...
2025-11-06 16:46:53,488 - knowledge_management.rag_engine - INFO - 初始化题库RAG管理器（LightRAG核心）
2025-11-06 16:46:53,488 - knowledge_management.rag_engine - WARNING - LightRAG不可用,使用模拟模式
2025-11-06 16:46:53,488 - knowledge_management.rag_engine - WARNING - LightRAG不可用,跳过知识图谱构建
2025-11-06 16:46:53,488 - system_core - INFO - ✅ 知识图谱和嵌入索引构建完成
2025-11-06 16:46:53,489 - system_core - INFO - 🧠 初始化BKT算法...
2025-11-06 16:46:53,489 - utils.bkt_algorithm - INFO - ✅ 加载学生状态: 1 个学生, 7 条细粒度记录
2025-11-06 16:46:53,489 - utils.bkt_algorithm - INFO - ✅ 增强版BKT算法初始化完成（细粒度知识点追踪）
2025-11-06 16:46:53,489 - system_core - INFO - 🚀 初始化盘古7B模型...
2025-11-06 16:46:53,489 - models.llm_models - INFO - 🆕 创建新的盘古7B模型实例（任务类型: pangu）
2025-11-06 16:46:53,490 - models.llm_models - INFO - ✅ 检测到 8 个NPU设备
2025-11-06 16:47:01,383 - models.llm_models - INFO -   NPU 0: Ascend910B2, 总显存: 60.97 GB
2025-11-06 16:47:01,383 - models.llm_models - INFO -   NPU 1: Ascend910B2, 总显存: 60.97 GB
2025-11-06 16:47:01,384 - models.llm_models - INFO -   NPU 2: Ascend910B2, 总显存: 60.97 GB
2025-11-06 16:47:01,384 - models.llm_models - INFO -   NPU 3: Ascend910B2, 总显存: 60.97 GB
2025-11-06 16:47:01,384 - models.llm_models - INFO -   NPU 4: Ascend910B2, 总显存: 60.97 GB
2025-11-06 16:47:01,385 - models.llm_models - INFO -   NPU 5: Ascend910B2, 总显存: 60.97 GB
2025-11-06 16:47:01,385 - models.llm_models - INFO -   NPU 6: Ascend910B2, 总显存: 60.97 GB
2025-11-06 16:47:01,386 - models.llm_models - INFO -   NPU 7: Ascend910B2, 总显存: 60.97 GB
2025-11-06 16:47:01,386 - models.llm_models - INFO - 盘古7B模型设备配置: ['npu:0', 'npu:1', 'npu:2', 'npu:3', 'npu:4', 'npu:5', 'npu:6', 'npu:7']
2025-11-06 16:47:01,386 - system_core - INFO - 🔄 预加载盘古7B模型...
2025-11-06 16:47:01,386 - models.llm_models - INFO - 🔄 正在加载盘古7B模型: /opt/pangu/openPangu-Embedded-7B-V1.1
2025-11-06 16:47:02,460 - models.llm_models - INFO - 🚀 使用多NPU模式，跨8个设备分布模型
2025-11-06 16:47:03,461 - datasets - INFO - PyTorch version 2.5.1 available.
2025-11-06 16:47:03,854 - accelerate.utils.modeling - INFO - Based on the current allocation process, no modules could be assigned to the following devices due to insufficient memory:
  - 0: 2512912384 bytes required
These minimum requirements are specific to this allocation attempt and may vary. Consider increasing the available memory for these devices to at least the specified minimum, or adjusting the model config.
2025-11-06 16:47:09,213 - models.llm_models - INFO - ✅ 使用device_map='auto'模式成功加载
2025-11-06 16:47:09,216 - models.llm_models - INFO - 📊 模型分布情况:
2025-11-06 16:47:09,216 - models.llm_models - INFO -    1: 4 层
2025-11-06 16:47:09,216 - models.llm_models - INFO -    2: 6 层
2025-11-06 16:47:09,216 - models.llm_models - INFO -    3: 6 层
2025-11-06 16:47:09,216 - models.llm_models - INFO -    4: 6 层
2025-11-06 16:47:09,217 - models.llm_models - INFO -    5: 6 层
2025-11-06 16:47:09,217 - models.llm_models - INFO -    6: 6 层
2025-11-06 16:47:09,217 - models.llm_models - INFO -    7: 4 层
2025-11-06 16:47:09,217 - models.llm_models - INFO - ✅ 盘古7B模型加载成功
2025-11-06 16:47:09,217 - system_core - INFO - ✅ 盘古7B模型加载完成
2025-11-06 16:47:09,217 - system_core - INFO - 📊 初始化评估器（盘古7B驱动）...
2025-11-06 16:47:09,217 - utils.evaluator - INFO - ✅ 个性化学生评估器初始化完成
2025-11-06 16:47:09,217 - system_core - INFO - 🎯 初始化智能题目选择器（BKT + RAG + 盘古7B）...
2025-11-06 16:47:09,217 - utils.question_selector - INFO - ✅ 智能题目选择器初始化完成（BKT + RAG + 盘古7B）
2025-11-06 16:47:09,217 - system_core - INFO - 🎨 初始化可视化组件...
2025-11-06 16:47:09,217 - visualization.kg_visualizer - INFO - 知识图谱可视化器初始化完成
2025-11-06 16:47:09,218 - system_core - INFO - ✅ 系统初始化完成 - 完整版（BKT + RAG + 盘古7B）
2025-11-06 16:47:09,218 - system_core - INFO - 📋 核心流程: BKT算法 → RAG检索(BGE-M3) → 盘古7B选择
2025-11-06 16:47:09,218 - __main__ - INFO - ✅ 系统核心初始化完成
2025-11-06 16:47:09,218 - __main__ - INFO - 📚 题库统计: 总题目 49
2025-11-06 16:47:09,218 - __main__ - INFO - 📊 知识点大类: 4 个
2025-11-06 16:47:09,218 - __main__ - INFO - 📋 知识点小类: 38 个
2025-11-06 16:47:09,218 - __main__ - INFO - 🎨 正在创建UI界面...
2025-11-06 16:47:09,218 - ui.main_ui - INFO - ✅ 智能教育UI初始化完成
2025-11-06 16:47:09,529 - __main__ - INFO - ✅ 系统启动成功!
2025-11-06 16:47:19,380 - __main__ - INFO - 👋 系统已关闭
2025-11-06 16:49:05,413 - __main__ - INFO - 🚀 系统启动中...
2025-11-06 16:49:05,413 - __main__ - INFO - ✅ 检测到盘古7B模型文件
2025-11-06 16:49:05,413 - __main__ - INFO - ✅ 检测到题库文件
2025-11-06 16:49:05,413 - __main__ - INFO - ⚙️  正在初始化智能系统核心...
2025-11-06 16:49:05,414 - system_core - INFO - ✅ 智能教育系统核心初始化（增强版）
2025-11-06 16:49:05,414 - system_core - INFO - 🔄 初始化系统组件...
2025-11-06 16:49:13,173 - knowledge_management.rag_engine - WARNING - LightRAG未安装,将使用模拟模式
2025-11-06 16:49:13,178 - system_core - ERROR - ❌ 系统初始化失败: cannot import name 'create_question_generator' from 'utils.question_generator' (/home/weitianyu/teach_system/utils/question_generator.py)
2025-11-06 16:49:13,178 - system_core - ERROR - Traceback (most recent call last):
  File "/home/weitianyu/teach_system/system_core.py", line 46, in initialize
    from utils.question_generator import create_question_generator  # 修复：改为 utils
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
ImportError: cannot import name 'create_question_generator' from 'utils.question_generator' (/home/weitianyu/teach_system/utils/question_generator.py)

2025-11-06 16:49:13,178 - __main__ - ERROR - ❌ 系统运行出错: 系统初始化失败: cannot import name 'create_question_generator' from 'utils.question_generator' (/home/weitianyu/teach_system/utils/question_generator.py)
Traceback (most recent call last):
  File "/home/weitianyu/teach_system/system_core.py", line 46, in initialize
    from utils.question_generator import create_question_generator  # 修复：改为 utils
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
ImportError: cannot import name 'create_question_generator' from 'utils.question_generator' (/home/weitianyu/teach_system/utils/question_generator.py)

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/weitianyu/teach_system/main.py", line 69, in main
    system_core = create_system_core(config)
                  ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/weitianyu/teach_system/system_core.py", line 520, in create_system_core
    core.initialize()
  File "/home/weitianyu/teach_system/system_core.py", line 132, in initialize
    raise RuntimeError(f"系统初始化失败: {e}")
RuntimeError: 系统初始化失败: cannot import name 'create_question_generator' from 'utils.question_generator' (/home/weitianyu/teach_system/utils/question_generator.py)
2025-11-06 16:49:13,179 - __main__ - INFO - 👋 系统已关闭
2025-11-06 16:58:31,452 - __main__ - INFO - 🚀 系统启动中...
2025-11-06 16:58:31,452 - __main__ - INFO - ✅ 检测到盘古7B模型文件
2025-11-06 16:58:31,452 - __main__ - INFO - ✅ 检测到题库文件
2025-11-06 16:58:31,453 - __main__ - INFO - ⚙️  正在初始化智能系统核心...
2025-11-06 16:58:31,453 - system_core - INFO - ✅ 智能教育系统核心初始化（修复版）
2025-11-06 16:58:31,453 - system_core - INFO - 🔄 初始化系统组件...
2025-11-06 16:58:39,187 - knowledge_management.rag_engine - WARNING - LightRAG未安装,将使用模拟模式
2025-11-06 16:58:39,192 - system_core - INFO - 📚 初始化题库...
2025-11-06 16:58:39,192 - data_management.question_db - INFO - ✅ 加载题库成功: 49 道题目
2025-11-06 16:58:39,193 - data_management.question_db - INFO - ✅ 增强版题库初始化完成: /home/weitianyu/teach_system/data/question_database_2.json
2025-11-06 16:58:39,193 - system_core - INFO - 🔤 初始化嵌入模型...
2025-11-06 16:58:39,193 - models.embedding_model - INFO - 尝试使用盘古7B的嵌入功能...
2025-11-06 16:58:39,193 - models.embedding_model - INFO - 初始化盘古7B嵌入模型: /opt/pangu/openPangu-Embedded-7B-V1.1
2025-11-06 16:58:39,193 - system_core - INFO - 🧠 初始化LightRAG引擎...
2025-11-06 16:58:39,193 - knowledge_management.rag_engine - INFO - 初始化RAG引擎,工作目录: /home/weitianyu/teach_system/rag_storage
2025-11-06 16:58:39,193 - knowledge_management.rag_engine - WARNING - LightRAG不可用,使用模拟模式
2025-11-06 16:58:39,193 - system_core - INFO - ✅ LightRAG引擎初始化成功
2025-11-06 16:58:39,194 - system_core - INFO - 🔄 正在构建知识图谱...
2025-11-06 16:58:39,194 - knowledge_management.rag_engine - INFO - 初始化题库知识图谱管理器
2025-11-06 16:58:39,194 - knowledge_management.rag_engine - WARNING - LightRAG不可用,使用模拟模式
2025-11-06 16:58:39,194 - knowledge_management.rag_engine - WARNING - LightRAG不可用,跳过文档插入
2025-11-06 16:58:39,194 - knowledge_management.rag_engine - INFO - 已构建 49 道题目的知识图谱
2025-11-06 16:58:39,194 - system_core - INFO - ✅ 知识图谱构建完成
2025-11-06 16:58:39,194 - system_core - INFO - 🧠 初始化BKT算法...
2025-11-06 16:58:39,195 - utils.bkt_algorithm - INFO - ✅ 加载学生状态: 1 个学生, 7 条细粒度记录
2025-11-06 16:58:39,195 - utils.bkt_algorithm - INFO - ✅ 增强版BKT算法初始化完成（细粒度知识点追踪）
2025-11-06 16:58:39,195 - system_core - INFO - 🚀 初始化盘古7B模型...
2025-11-06 16:58:39,195 - models.llm_models - INFO - 🆕 创建新的盘古7B模型实例（任务类型: pangu）
2025-11-06 16:58:39,196 - models.llm_models - INFO - ✅ 检测到 8 个NPU设备
2025-11-06 16:58:47,108 - models.llm_models - INFO -   NPU 0: Ascend910B2, 总显存: 60.97 GB
2025-11-06 16:58:47,109 - models.llm_models - INFO -   NPU 1: Ascend910B2, 总显存: 60.97 GB
2025-11-06 16:58:47,109 - models.llm_models - INFO -   NPU 2: Ascend910B2, 总显存: 60.97 GB
2025-11-06 16:58:47,110 - models.llm_models - INFO -   NPU 3: Ascend910B2, 总显存: 60.97 GB
2025-11-06 16:58:47,110 - models.llm_models - INFO -   NPU 4: Ascend910B2, 总显存: 60.97 GB
2025-11-06 16:58:47,110 - models.llm_models - INFO -   NPU 5: Ascend910B2, 总显存: 60.97 GB
2025-11-06 16:58:47,111 - models.llm_models - INFO -   NPU 6: Ascend910B2, 总显存: 60.97 GB
2025-11-06 16:58:47,111 - models.llm_models - INFO -   NPU 7: Ascend910B2, 总显存: 60.97 GB
2025-11-06 16:58:47,111 - models.llm_models - INFO - 盘古7B模型设备配置: ['npu:0', 'npu:1', 'npu:2', 'npu:3', 'npu:4', 'npu:5', 'npu:6', 'npu:7']
2025-11-06 16:58:47,111 - system_core - INFO - 🔄 预加载盘古7B模型...
2025-11-06 16:58:47,111 - models.llm_models - INFO - 🔄 正在加载盘古7B模型: /opt/pangu/openPangu-Embedded-7B-V1.1
2025-11-06 16:58:48,164 - models.llm_models - INFO - 🚀 使用多NPU模式，跨8个设备分布模型
2025-11-06 16:58:49,187 - datasets - INFO - PyTorch version 2.5.1 available.
2025-11-06 16:58:49,584 - accelerate.utils.modeling - INFO - Based on the current allocation process, no modules could be assigned to the following devices due to insufficient memory:
  - 0: 2512912384 bytes required
These minimum requirements are specific to this allocation attempt and may vary. Consider increasing the available memory for these devices to at least the specified minimum, or adjusting the model config.
2025-11-06 16:58:54,839 - models.llm_models - INFO - ✅ 使用device_map='auto'模式成功加载
2025-11-06 16:58:54,842 - models.llm_models - INFO - 📊 模型分布情况:
2025-11-06 16:58:54,842 - models.llm_models - INFO -    1: 4 层
2025-11-06 16:58:54,842 - models.llm_models - INFO -    2: 6 层
2025-11-06 16:58:54,842 - models.llm_models - INFO -    3: 6 层
2025-11-06 16:58:54,842 - models.llm_models - INFO -    4: 6 层
2025-11-06 16:58:54,842 - models.llm_models - INFO -    5: 6 层
2025-11-06 16:58:54,842 - models.llm_models - INFO -    6: 6 层
2025-11-06 16:58:54,842 - models.llm_models - INFO -    7: 4 层
2025-11-06 16:58:54,842 - models.llm_models - INFO - ✅ 盘古7B模型加载成功
2025-11-06 16:58:54,842 - system_core - INFO - ✅ 盘古7B模型加载完成
2025-11-06 16:58:54,842 - system_core - INFO - 📊 初始化评估器（盘古7B驱动）...
2025-11-06 16:58:54,842 - utils.evaluator - INFO - ✅ 个性化学生评估器初始化完成
2025-11-06 16:58:54,843 - system_core - INFO - 📝 初始化题目生成器（LightRAG + 盘古7B）...
2025-11-06 16:58:54,843 - utils.question_generator - INFO - ✅ 增强版题目生成器初始化完成（LightRAG检索 + 盘古7B选题）
2025-11-06 16:58:54,843 - system_core - INFO - 🎨 初始化可视化组件...
2025-11-06 16:58:54,843 - visualization.kg_visualizer - INFO - 知识图谱可视化器初始化完成
2025-11-06 16:58:54,843 - system_core - INFO - ✅ 系统初始化完成
2025-11-06 16:58:54,843 - system_core - INFO - ======================================================================
2025-11-06 16:58:54,843 - system_core - INFO - 🔥 核心技术栈:
2025-11-06 16:58:54,843 - system_core - INFO -    1️⃣  BKT算法 - 判断学生掌握度
2025-11-06 16:58:54,843 - system_core - INFO -    2️⃣  LightRAG - 智能检索题目
2025-11-06 16:58:54,843 - system_core - INFO -    3️⃣  盘古7B - 选择最佳题目
2025-11-06 16:58:54,844 - system_core - INFO - ======================================================================
2025-11-06 16:58:54,844 - __main__ - INFO - ✅ 系统核心初始化完成
2025-11-06 16:58:54,844 - __main__ - INFO - 📚 题库统计: 总题目 49
2025-11-06 16:58:54,844 - __main__ - INFO - 📊 知识点大类: 4 个
2025-11-06 16:58:54,844 - __main__ - INFO - 📋 知识点小类: 38 个
2025-11-06 16:58:54,844 - __main__ - INFO - 🎨 正在创建UI界面...
2025-11-06 16:58:54,844 - ui.main_ui - INFO - ✅ 智能教育UI初始化完成
2025-11-06 16:58:55,145 - __main__ - INFO - ✅ 系统启动成功!
2025-11-06 17:01:54,288 - __main__ - INFO - 👋 系统已关闭
2025-11-06 17:02:08,410 - __main__ - INFO - 🚀 系统启动中...
2025-11-06 17:02:08,410 - __main__ - INFO - ✅ 检测到盘古7B模型文件
2025-11-06 17:02:08,410 - __main__ - INFO - ✅ 检测到题库文件
2025-11-06 17:02:08,410 - __main__ - INFO - ⚙️  正在初始化智能系统核心...
2025-11-06 17:02:08,410 - system_core - INFO - ✅ 智能教育系统核心初始化（修复版）
2025-11-06 17:02:08,410 - system_core - INFO - 🔄 初始化系统组件...
2025-11-06 17:02:16,192 - knowledge_management.rag_engine - WARNING - LightRAG未安装,将使用模拟模式
2025-11-06 17:02:16,192 - system_core - INFO - 📚 初始化题库...
2025-11-06 17:02:16,193 - data_management.question_db - INFO - ✅ 加载题库成功: 49 道题目
2025-11-06 17:02:16,193 - data_management.question_db - INFO - ✅ 增强版题库初始化完成: /home/weitianyu/teach_system/data/question_database_2.json
2025-11-06 17:02:16,193 - system_core - INFO - 🔤 初始化嵌入模型...
2025-11-06 17:02:16,193 - models.embedding_model - INFO - 尝试使用盘古7B的嵌入功能...
2025-11-06 17:02:16,193 - models.embedding_model - INFO - 初始化盘古7B嵌入模型: /opt/pangu/openPangu-Embedded-7B-V1.1
2025-11-06 17:02:16,193 - system_core - INFO - 🧠 初始化RAG引擎...
2025-11-06 17:02:16,193 - knowledge_management.rag_engine - INFO - 初始化RAG引擎,工作目录: /home/weitianyu/teach_system/rag_storage
2025-11-06 17:02:16,194 - knowledge_management.rag_engine - WARNING - LightRAG不可用,使用模拟模式
2025-11-06 17:02:16,194 - system_core - INFO - ✅ RAG引擎初始化成功
2025-11-06 17:02:16,194 - system_core - INFO - 🔄 正在构建知识图谱...
2025-11-06 17:02:16,194 - knowledge_management.rag_engine - INFO - 初始化题库知识图谱管理器
2025-11-06 17:02:16,194 - knowledge_management.rag_engine - WARNING - LightRAG不可用,使用模拟模式
2025-11-06 17:02:16,194 - knowledge_management.rag_engine - WARNING - LightRAG不可用,跳过文档插入
2025-11-06 17:02:16,195 - knowledge_management.rag_engine - INFO - 已构建 49 道题目的知识图谱
2025-11-06 17:02:16,195 - system_core - INFO - ✅ 知识图谱构建完成
2025-11-06 17:02:16,195 - system_core - INFO - 🚀 初始化盘古7B模型...
2025-11-06 17:02:16,195 - models.llm_models - INFO - 🆕 创建新的盘古7B模型实例（任务类型: pangu）
2025-11-06 17:02:16,195 - models.llm_models - INFO - ✅ 检测到 8 个NPU设备
2025-11-06 17:02:24,134 - models.llm_models - INFO -   NPU 0: Ascend910B2, 总显存: 60.97 GB
2025-11-06 17:02:24,135 - models.llm_models - INFO -   NPU 1: Ascend910B2, 总显存: 60.97 GB
2025-11-06 17:02:24,135 - models.llm_models - INFO -   NPU 2: Ascend910B2, 总显存: 60.97 GB
2025-11-06 17:02:24,136 - models.llm_models - INFO -   NPU 3: Ascend910B2, 总显存: 60.97 GB
2025-11-06 17:02:24,136 - models.llm_models - INFO -   NPU 4: Ascend910B2, 总显存: 60.97 GB
2025-11-06 17:02:24,136 - models.llm_models - INFO -   NPU 5: Ascend910B2, 总显存: 60.97 GB
2025-11-06 17:02:24,137 - models.llm_models - INFO -   NPU 6: Ascend910B2, 总显存: 60.97 GB
2025-11-06 17:02:24,137 - models.llm_models - INFO -   NPU 7: Ascend910B2, 总显存: 60.97 GB
2025-11-06 17:02:24,137 - models.llm_models - INFO - 盘古7B模型设备配置: ['npu:0', 'npu:1', 'npu:2', 'npu:3', 'npu:4', 'npu:5', 'npu:6', 'npu:7']
2025-11-06 17:02:24,138 - system_core - INFO - 🔄 预加载盘古7B模型...
2025-11-06 17:02:24,138 - models.llm_models - INFO - 🔄 正在加载盘古7B模型: /opt/pangu/openPangu-Embedded-7B-V1.1
2025-11-06 17:02:25,210 - models.llm_models - INFO - 🚀 使用多NPU模式，跨8个设备分布模型
2025-11-06 17:02:26,230 - datasets - INFO - PyTorch version 2.5.1 available.
2025-11-06 17:02:26,626 - accelerate.utils.modeling - INFO - Based on the current allocation process, no modules could be assigned to the following devices due to insufficient memory:
  - 0: 2512912384 bytes required
These minimum requirements are specific to this allocation attempt and may vary. Consider increasing the available memory for these devices to at least the specified minimum, or adjusting the model config.
2025-11-06 17:02:31,934 - models.llm_models - INFO - ✅ 使用device_map='auto'模式成功加载
2025-11-06 17:02:31,939 - models.llm_models - INFO - 📊 模型分布情况:
2025-11-06 17:02:31,939 - models.llm_models - INFO -    1: 4 层
2025-11-06 17:02:31,939 - models.llm_models - INFO -    2: 6 层
2025-11-06 17:02:31,939 - models.llm_models - INFO -    3: 6 层
2025-11-06 17:02:31,939 - models.llm_models - INFO -    4: 6 层
2025-11-06 17:02:31,939 - models.llm_models - INFO -    5: 6 层
2025-11-06 17:02:31,939 - models.llm_models - INFO -    6: 6 层
2025-11-06 17:02:31,939 - models.llm_models - INFO -    7: 4 层
2025-11-06 17:02:31,939 - models.llm_models - INFO - ✅ 盘古7B模型加载成功
2025-11-06 17:02:31,940 - system_core - INFO - ✅ 盘古7B模型加载完成
2025-11-06 17:02:31,940 - system_core - INFO - 🧠 初始化BKT算法...
2025-11-06 17:02:31,941 - utils.bkt_algorithm - INFO - ✅ 加载学生状态: 1 个学生, 7 条细粒度记录
2025-11-06 17:02:31,941 - utils.bkt_algorithm - INFO - ✅ 增强版BKT算法初始化完成（细粒度知识点追踪）
2025-11-06 17:02:31,941 - system_core - INFO - 📊 初始化评估器（盘古7B驱动）...
2025-11-06 17:02:31,941 - utils.evaluator - INFO - ✅ 个性化学生评估器初始化完成
2025-11-06 17:02:31,941 - system_core - INFO - 🎨 初始化可视化组件...
2025-11-06 17:02:31,941 - visualization.kg_visualizer - INFO - 知识图谱可视化器初始化完成
2025-11-06 17:02:31,941 - system_core - INFO - ✅ 系统初始化完成 - BKT→LightRAG→盘古7B 完整流程
2025-11-06 17:02:31,941 - __main__ - INFO - ✅ 系统核心初始化完成
2025-11-06 17:02:31,942 - __main__ - INFO - 📚 题库统计: 总题目 49
2025-11-06 17:02:31,942 - __main__ - INFO - 📊 知识点大类: 4 个
2025-11-06 17:02:31,942 - __main__ - INFO - 📋 知识点小类: 38 个
2025-11-06 17:02:31,942 - __main__ - INFO - 🎨 正在创建UI界面...
2025-11-06 17:02:31,942 - ui.main_ui - INFO - ✅ 智能教育UI初始化完成
2025-11-06 17:02:32,243 - __main__ - INFO - ✅ 系统启动成功!
2025-11-06 17:10:25,746 - __main__ - INFO - 👋 系统已关闭
2025-11-06 17:10:44,166 - __main__ - INFO - 🚀 系统启动中...
2025-11-06 17:10:44,166 - __main__ - INFO - ✅ 检测到盘古7B模型文件
2025-11-06 17:10:44,166 - __main__ - INFO - ✅ 检测到题库文件
2025-11-06 17:10:44,167 - __main__ - INFO - ⚙️  正在初始化智能系统核心...
2025-11-06 17:10:44,167 - system_core - INFO - ✅ 智能教育系统核心初始化（修复版）
2025-11-06 17:10:44,167 - system_core - INFO - 🔄 初始化系统组件...
2025-11-06 17:10:51,920 - knowledge_management.rag_engine - WARNING - LightRAG未安装,将使用模拟模式
2025-11-06 17:10:51,925 - system_core - INFO - 📚 初始化题库...
2025-11-06 17:10:51,925 - data_management.question_db - INFO - ✅ 加载题库成功: 49 道题目
2025-11-06 17:10:51,925 - data_management.question_db - INFO - ✅ 增强版题库初始化完成: /home/weitianyu/teach_system/data/question_database_2.json
2025-11-06 17:10:51,925 - system_core - INFO - 🔤 初始化嵌入模型...
2025-11-06 17:10:51,926 - models.embedding_model - INFO - 尝试使用盘古7B的嵌入功能...
2025-11-06 17:10:51,926 - models.embedding_model - INFO - 初始化盘古7B嵌入模型: /opt/pangu/openPangu-Embedded-7B-V1.1
2025-11-06 17:10:51,926 - system_core - INFO - 🧠 初始化RAG引擎...
2025-11-06 17:10:51,926 - knowledge_management.rag_engine - INFO - 初始化RAG引擎,工作目录: /home/weitianyu/teach_system/rag_storage
2025-11-06 17:10:51,926 - knowledge_management.rag_engine - WARNING - LightRAG不可用,使用模拟模式
2025-11-06 17:10:51,926 - system_core - INFO - ✅ RAG引擎初始化成功
2025-11-06 17:10:51,926 - system_core - INFO - 🔄 正在构建知识图谱...
2025-11-06 17:10:51,927 - knowledge_management.rag_engine - INFO - 初始化题库知识图谱管理器
2025-11-06 17:10:51,927 - knowledge_management.rag_engine - WARNING - LightRAG不可用,使用模拟模式
2025-11-06 17:10:51,927 - knowledge_management.rag_engine - WARNING - LightRAG不可用,跳过文档插入
2025-11-06 17:10:51,927 - knowledge_management.rag_engine - INFO - 已构建 49 道题目的知识图谱
2025-11-06 17:10:51,927 - system_core - INFO - ✅ 知识图谱构建完成
2025-11-06 17:10:51,927 - system_core - INFO - 🚀 初始化盘古7B模型...
2025-11-06 17:10:51,927 - models.llm_models - INFO - 🆕 创建新的盘古7B模型实例（任务类型: pangu）
2025-11-06 17:10:51,928 - models.llm_models - INFO - ✅ 检测到 8 个NPU设备
2025-11-06 17:10:59,913 - models.llm_models - INFO -   NPU 0: Ascend910B2, 总显存: 60.97 GB
2025-11-06 17:10:59,914 - models.llm_models - INFO -   NPU 1: Ascend910B2, 总显存: 60.97 GB
2025-11-06 17:10:59,915 - models.llm_models - INFO -   NPU 2: Ascend910B2, 总显存: 60.97 GB
2025-11-06 17:10:59,915 - models.llm_models - INFO -   NPU 3: Ascend910B2, 总显存: 60.97 GB
2025-11-06 17:10:59,915 - models.llm_models - INFO -   NPU 4: Ascend910B2, 总显存: 60.97 GB
2025-11-06 17:10:59,916 - models.llm_models - INFO -   NPU 5: Ascend910B2, 总显存: 60.97 GB
2025-11-06 17:10:59,916 - models.llm_models - INFO -   NPU 6: Ascend910B2, 总显存: 60.97 GB
2025-11-06 17:10:59,916 - models.llm_models - INFO -   NPU 7: Ascend910B2, 总显存: 60.97 GB
2025-11-06 17:10:59,916 - models.llm_models - INFO - 盘古7B模型设备配置: ['npu:0', 'npu:1', 'npu:2', 'npu:3', 'npu:4', 'npu:5', 'npu:6', 'npu:7']
2025-11-06 17:10:59,917 - system_core - INFO - 🔄 预加载盘古7B模型...
2025-11-06 17:10:59,917 - models.llm_models - INFO - 🔄 正在加载盘古7B模型: /opt/pangu/openPangu-Embedded-7B-V1.1
2025-11-06 17:11:00,980 - models.llm_models - INFO - 🚀 使用多NPU模式，跨8个设备分布模型
2025-11-06 17:11:01,992 - datasets - INFO - PyTorch version 2.5.1 available.
2025-11-06 17:11:02,387 - accelerate.utils.modeling - INFO - Based on the current allocation process, no modules could be assigned to the following devices due to insufficient memory:
  - 0: 2512912384 bytes required
These minimum requirements are specific to this allocation attempt and may vary. Consider increasing the available memory for these devices to at least the specified minimum, or adjusting the model config.
2025-11-06 17:11:07,589 - models.llm_models - INFO - ✅ 使用device_map='auto'模式成功加载
2025-11-06 17:11:07,592 - models.llm_models - INFO - 📊 模型分布情况:
2025-11-06 17:11:07,593 - models.llm_models - INFO -    1: 4 层
2025-11-06 17:11:07,593 - models.llm_models - INFO -    2: 6 层
2025-11-06 17:11:07,593 - models.llm_models - INFO -    3: 6 层
2025-11-06 17:11:07,593 - models.llm_models - INFO -    4: 6 层
2025-11-06 17:11:07,593 - models.llm_models - INFO -    5: 6 层
2025-11-06 17:11:07,593 - models.llm_models - INFO -    6: 6 层
2025-11-06 17:11:07,593 - models.llm_models - INFO -    7: 4 层
2025-11-06 17:11:07,593 - models.llm_models - INFO - ✅ 盘古7B模型加载成功
2025-11-06 17:11:07,593 - system_core - INFO - ✅ 盘古7B模型加载完成
2025-11-06 17:11:07,593 - system_core - INFO - 🧠 初始化BKT算法...
2025-11-06 17:11:07,594 - utils.bkt_algorithm - INFO - ✅ 加载学生状态: 1 个学生, 7 条细粒度记录
2025-11-06 17:11:07,594 - utils.bkt_algorithm - INFO - ✅ 增强版BKT算法初始化完成（细粒度知识点追踪）
2025-11-06 17:11:07,594 - system_core - INFO - 📊 初始化评估器（盘古7B驱动）...
2025-11-06 17:11:07,594 - utils.evaluator - INFO - ✅ 个性化学生评估器初始化完成
2025-11-06 17:11:07,595 - system_core - INFO - 🎯 初始化智能题目选择器（BKT + LightRAG + 盘古7B）...
2025-11-06 17:11:07,595 - utils.question_selector - INFO - ✅ 智能题目选择器初始化完成（BKT + LightRAG + 盘古7B）
2025-11-06 17:11:07,595 - system_core - INFO - ✅ 智能选择器初始化完成
2025-11-06 17:11:07,595 - system_core - INFO - 🎨 初始化可视化组件...
2025-11-06 17:11:07,595 - visualization.kg_visualizer - INFO - 知识图谱可视化器初始化完成
2025-11-06 17:11:07,595 - system_core - INFO - ======================================================================
2025-11-06 17:11:07,595 - system_core - INFO - ✅ 系统初始化完成 - 核心技术栈
2025-11-06 17:11:07,595 - system_core - INFO -    - BKT算法: 学生掌握度建模
2025-11-06 17:11:07,595 - system_core - INFO -    - LightRAG: 题目知识图谱检索
2025-11-06 17:11:07,595 - system_core - INFO -    - 盘古7B: 智能题目筛选 + 答案评估 + 报告生成
2025-11-06 17:11:07,595 - system_core - INFO - ======================================================================
2025-11-06 17:11:07,596 - __main__ - INFO - ✅ 系统核心初始化完成
2025-11-06 17:11:07,596 - __main__ - INFO - 📚 题库统计: 总题目 49
2025-11-06 17:11:07,596 - __main__ - INFO - 📊 知识点大类: 4 个
2025-11-06 17:11:07,596 - __main__ - INFO - 📋 知识点小类: 38 个
2025-11-06 17:11:07,596 - __main__ - INFO - 🎨 正在创建UI界面...
2025-11-06 17:11:07,596 - ui.main_ui - INFO - ✅ 智能教育UI初始化完成
2025-11-06 17:11:07,899 - __main__ - INFO - ✅ 系统启动成功!
2025-11-06 17:18:43,992 - __main__ - INFO - 👋 系统已关闭
2025-11-06 17:19:44,838 - __main__ - INFO - 🚀 系统启动中...
2025-11-06 17:19:44,838 - __main__ - INFO - ✅ 检测到盘古7B模型文件
2025-11-06 17:19:44,838 - __main__ - INFO - ✅ 检测到题库文件
2025-11-06 17:19:44,838 - __main__ - INFO - ⚙️  正在初始化智能系统核心...
2025-11-06 17:19:44,838 - system_core - INFO - ✅ 智能教育系统核心初始化
2025-11-06 17:19:44,838 - system_core - INFO - 🔄 初始化系统组件...
2025-11-06 17:19:52,671 - knowledge_management.rag_engine - ERROR - ❌ LightRAG未安装！请安装: pip install lightrag-hku
2025-11-06 17:19:52,671 - system_core - ERROR - ❌ 系统初始化失败: LightRAG是必需的，请先安装
2025-11-06 17:19:52,672 - system_core - ERROR - Traceback (most recent call last):
  File "/home/weitianyu/teach_system/knowledge_management/rag_engine.py", line 17, in <module>
    from lightrag.llm import openai_complete_if_cache, openai_embed
ImportError: cannot import name 'openai_complete_if_cache' from 'lightrag.llm' (/root/miniconda3/envs/pangu/lib/python3.11/site-packages/lightrag/llm/__init__.py)

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/weitianyu/teach_system/system_core.py", line 46, in initialize
    from knowledge_management.rag_engine import create_rag_engine, QuestionRAGManager
  File "/home/weitianyu/teach_system/knowledge_management/rag_engine.py", line 22, in <module>
    raise ImportError("LightRAG是必需的，请先安装")
ImportError: LightRAG是必需的，请先安装

2025-11-06 17:19:52,672 - __main__ - ERROR - ❌ 系统运行出错: 系统初始化失败: LightRAG是必需的，请先安装
Traceback (most recent call last):
  File "/home/weitianyu/teach_system/knowledge_management/rag_engine.py", line 17, in <module>
    from lightrag.llm import openai_complete_if_cache, openai_embed
ImportError: cannot import name 'openai_complete_if_cache' from 'lightrag.llm' (/root/miniconda3/envs/pangu/lib/python3.11/site-packages/lightrag/llm/__init__.py)

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/weitianyu/teach_system/system_core.py", line 46, in initialize
    from knowledge_management.rag_engine import create_rag_engine, QuestionRAGManager
  File "/home/weitianyu/teach_system/knowledge_management/rag_engine.py", line 22, in <module>
    raise ImportError("LightRAG是必需的，请先安装")
ImportError: LightRAG是必需的，请先安装

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/weitianyu/teach_system/main.py", line 69, in main
    system_core = create_system_core(config)
                  ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/weitianyu/teach_system/system_core.py", line 463, in create_system_core
    core.initialize()
  File "/home/weitianyu/teach_system/system_core.py", line 143, in initialize
    raise RuntimeError(f"系统初始化失败: {e}")
RuntimeError: 系统初始化失败: LightRAG是必需的，请先安装
2025-11-06 17:19:52,673 - __main__ - INFO - 👋 系统已关闭
2025-11-06 17:26:44,107 - __main__ - INFO - 🚀 系统启动中...
2025-11-06 17:26:44,107 - __main__ - INFO - ✅ 检测到盘古7B模型文件
2025-11-06 17:26:44,107 - __main__ - INFO - ✅ 检测到题库文件
2025-11-06 17:26:44,107 - __main__ - INFO - ⚙️  正在初始化智能系统核心...
2025-11-06 17:26:44,107 - system_core - INFO - ✅ 智能教育系统核心初始化
2025-11-06 17:26:44,108 - system_core - INFO - 🔄 初始化系统组件...
2025-11-06 17:26:52,000 - knowledge_management.rag_engine - INFO - ✅ LightRAG导入成功
2025-11-06 17:26:52,004 - system_core - INFO - 📚 初始化题库...
2025-11-06 17:26:52,004 - data_management.question_db - INFO - ✅ 加载题库成功: 49 道题目
2025-11-06 17:26:52,004 - data_management.question_db - INFO - ✅ 增强版题库初始化完成: /home/weitianyu/teach_system/data/question_database_2.json
2025-11-06 17:26:52,005 - system_core - INFO - 🔤 初始化嵌入模型...
2025-11-06 17:26:52,005 - models.embedding_model - INFO - 尝试使用盘古7B的嵌入功能...
2025-11-06 17:26:52,005 - models.embedding_model - INFO - 初始化盘古7B嵌入模型: /opt/pangu/openPangu-Embedded-7B-V1.1
2025-11-06 17:26:52,005 - system_core - INFO - 🧠 初始化LightRAG引擎...
2025-11-06 17:26:52,005 - knowledge_management.rag_engine - INFO - ✅ 初始化RAG引擎，工作目录: /home/weitianyu/teach_system/rag_storage
2025-11-06 17:26:52,740 - knowledge_management.rag_engine - ERROR - ❌ RAG引擎初始化失败: 'function' object has no attribute 'embedding_dim'
2025-11-06 17:26:52,740 - system_core - ERROR - ❌ 系统初始化失败: 'function' object has no attribute 'embedding_dim'
2025-11-06 17:26:52,743 - system_core - ERROR - Traceback (most recent call last):
  File "/home/weitianyu/teach_system/system_core.py", line 72, in initialize
    loop.run_until_complete(self.rag_engine.initialize())
  File "/root/miniconda3/envs/pangu/lib/python3.11/asyncio/base_events.py", line 650, in run_until_complete
    return future.result()
           ^^^^^^^^^^^^^^^
  File "/home/weitianyu/teach_system/knowledge_management/rag_engine.py", line 52, in initialize
    self.rag = LightRAG(
               ^^^^^^^^^
  File "<string>", line 37, in __init__
  File "/root/miniconda3/envs/pangu/lib/python3.11/site-packages/lightrag/lightrag.py", line 396, in __post_init__
    self.entities_vdb: BaseVectorStorage = self.vector_db_storage_cls(  # type: ignore
                                           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/root/miniconda3/envs/pangu/lib/python3.11/site-packages/lightrag/utils.py", line 1323, in import_class
    return cls(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^
  File "<string>", line 8, in __init__
  File "/root/miniconda3/envs/pangu/lib/python3.11/site-packages/lightrag/kg/nano_vector_db_impl.py", line 50, in __post_init__
    self.embedding_func.embedding_dim,
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: 'function' object has no attribute 'embedding_dim'

2025-11-06 17:26:52,743 - __main__ - ERROR - ❌ 系统运行出错: 系统初始化失败: 'function' object has no attribute 'embedding_dim'
Traceback (most recent call last):
  File "/home/weitianyu/teach_system/system_core.py", line 72, in initialize
    loop.run_until_complete(self.rag_engine.initialize())
  File "/root/miniconda3/envs/pangu/lib/python3.11/asyncio/base_events.py", line 650, in run_until_complete
    return future.result()
           ^^^^^^^^^^^^^^^
  File "/home/weitianyu/teach_system/knowledge_management/rag_engine.py", line 52, in initialize
    self.rag = LightRAG(
               ^^^^^^^^^
  File "<string>", line 37, in __init__
  File "/root/miniconda3/envs/pangu/lib/python3.11/site-packages/lightrag/lightrag.py", line 396, in __post_init__
    self.entities_vdb: BaseVectorStorage = self.vector_db_storage_cls(  # type: ignore
                                           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/root/miniconda3/envs/pangu/lib/python3.11/site-packages/lightrag/utils.py", line 1323, in import_class
    return cls(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^
  File "<string>", line 8, in __init__
  File "/root/miniconda3/envs/pangu/lib/python3.11/site-packages/lightrag/kg/nano_vector_db_impl.py", line 50, in __post_init__
    self.embedding_func.embedding_dim,
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: 'function' object has no attribute 'embedding_dim'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/weitianyu/teach_system/main.py", line 69, in main
    system_core = create_system_core(config)
                  ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/weitianyu/teach_system/system_core.py", line 463, in create_system_core
    core.initialize()
  File "/home/weitianyu/teach_system/system_core.py", line 143, in initialize
    raise RuntimeError(f"系统初始化失败: {e}")
RuntimeError: 系统初始化失败: 'function' object has no attribute 'embedding_dim'
2025-11-06 17:26:52,745 - __main__ - INFO - 👋 系统已关闭
2025-11-06 17:30:28,012 - __main__ - INFO - 🚀 系统启动中...
2025-11-06 17:30:28,012 - __main__ - INFO - ✅ 检测到盘古7B模型文件
2025-11-06 17:30:28,013 - __main__ - INFO - ✅ 检测到题库文件
2025-11-06 17:30:28,013 - __main__ - INFO - ⚙️  正在初始化智能系统核心...
2025-11-06 17:30:28,013 - system_core - INFO - ✅ 智能教育系统核心初始化
2025-11-06 17:30:28,013 - system_core - INFO - 🔄 初始化系统组件...
2025-11-06 17:30:35,951 - knowledge_management.rag_engine - INFO - ✅ LightRAG导入成功
2025-11-06 17:30:35,951 - system_core - INFO - 📚 初始化题库...
2025-11-06 17:30:35,952 - data_management.question_db - INFO - ✅ 加载题库成功: 49 道题目
2025-11-06 17:30:35,952 - data_management.question_db - INFO - ✅ 增强版题库初始化完成: /home/weitianyu/teach_system/data/question_database_2.json
2025-11-06 17:30:35,952 - system_core - INFO - 🔤 初始化嵌入模型...
2025-11-06 17:30:35,952 - models.embedding_model - INFO - 尝试使用盘古7B的嵌入功能...
2025-11-06 17:30:35,952 - models.embedding_model - INFO - 初始化盘古7B嵌入模型: /opt/pangu/openPangu-Embedded-7B-V1.1
2025-11-06 17:30:35,952 - system_core - INFO - 🧠 初始化LightRAG引擎...
2025-11-06 17:30:35,952 - system_core - ERROR - ❌ 系统初始化失败: create_rag_engine() missing 1 required positional argument: 'embedding_dim'
2025-11-06 17:30:35,953 - system_core - ERROR - Traceback (most recent call last):
  File "/home/weitianyu/teach_system/system_core.py", line 63, in initialize
    self.rag_engine = create_rag_engine(
                      ^^^^^^^^^^^^^^^^^^
TypeError: create_rag_engine() missing 1 required positional argument: 'embedding_dim'

2025-11-06 17:30:35,953 - __main__ - ERROR - ❌ 系统运行出错: 系统初始化失败: create_rag_engine() missing 1 required positional argument: 'embedding_dim'
Traceback (most recent call last):
  File "/home/weitianyu/teach_system/system_core.py", line 63, in initialize
    self.rag_engine = create_rag_engine(
                      ^^^^^^^^^^^^^^^^^^
TypeError: create_rag_engine() missing 1 required positional argument: 'embedding_dim'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/weitianyu/teach_system/main.py", line 69, in main
    system_core = create_system_core(config)
                  ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/weitianyu/teach_system/system_core.py", line 463, in create_system_core
    core.initialize()
  File "/home/weitianyu/teach_system/system_core.py", line 143, in initialize
    raise RuntimeError(f"系统初始化失败: {e}")
RuntimeError: 系统初始化失败: create_rag_engine() missing 1 required positional argument: 'embedding_dim'
2025-11-06 17:30:35,954 - __main__ - INFO - 👋 系统已关闭
2025-11-06 18:50:26,866 - __main__ - INFO - 🚀 系统启动中...
2025-11-06 18:50:26,866 - __main__ - INFO - ✅ 检测到盘古7B模型文件
2025-11-06 18:50:26,867 - __main__ - INFO - ✅ 检测到题库文件
2025-11-06 18:50:26,867 - __main__ - INFO - ⚙️  正在初始化智能系统核心...
2025-11-06 18:50:26,867 - system_core - INFO - ✅ 智能教育系统核心初始化（LightRAG驱动）
2025-11-06 18:50:26,867 - system_core - INFO - 🔄 初始化系统组件...
2025-11-06 18:50:34,866 - knowledge_management.rag_engine - WARNING - LightRAG未安装,将使用模拟模式
2025-11-06 18:50:34,866 - system_core - INFO - 📚 初始化题库...
2025-11-06 18:50:34,867 - data_management.question_db - INFO - ✅ 加载题库成功: 49 道题目
2025-11-06 18:50:34,867 - data_management.question_db - INFO - ✅ 增强版题库初始化完成: /home/weitianyu/teach_system/data/question_database_2.json
2025-11-06 18:50:34,867 - system_core - INFO - 🔤 初始化嵌入模型...
2025-11-06 18:50:34,867 - models.embedding_model - INFO - 尝试使用盘古7B的嵌入功能...
2025-11-06 18:50:34,867 - models.embedding_model - INFO - 初始化盘古7B嵌入模型: /opt/pangu/openPangu-Embedded-7B-V1.1
2025-11-06 18:50:34,867 - system_core - INFO - 🧠 初始化LightRAG引擎...
2025-11-06 18:50:34,868 - knowledge_management.rag_engine - INFO - 初始化RAG引擎,工作目录: /home/weitianyu/teach_system/rag_storage
2025-11-06 18:50:34,868 - knowledge_management.rag_engine - WARNING - LightRAG不可用,使用模拟模式
2025-11-06 18:50:34,868 - system_core - INFO - ✅ LightRAG引擎初始化成功
2025-11-06 18:50:34,868 - system_core - INFO - 🔄 正在将题库插入LightRAG知识图谱...
2025-11-06 18:50:34,868 - system_core - INFO - 📝 正在插入 49 道题目到LightRAG...
2025-11-06 18:50:34,869 - knowledge_management.rag_engine - WARNING - LightRAG不可用,使用模拟模式
2025-11-06 18:50:34,869 - knowledge_management.rag_engine - WARNING - LightRAG不可用,跳过文档插入
2025-11-06 18:50:34,869 - system_core - INFO -   进度: 10/49
2025-11-06 18:50:34,869 - knowledge_management.rag_engine - WARNING - LightRAG不可用,使用模拟模式
2025-11-06 18:50:34,869 - knowledge_management.rag_engine - WARNING - LightRAG不可用,跳过文档插入
2025-11-06 18:50:34,869 - system_core - INFO -   进度: 20/49
2025-11-06 18:50:34,869 - knowledge_management.rag_engine - WARNING - LightRAG不可用,使用模拟模式
2025-11-06 18:50:34,869 - knowledge_management.rag_engine - WARNING - LightRAG不可用,跳过文档插入
2025-11-06 18:50:34,869 - system_core - INFO -   进度: 30/49
2025-11-06 18:50:34,870 - knowledge_management.rag_engine - WARNING - LightRAG不可用,使用模拟模式
2025-11-06 18:50:34,870 - knowledge_management.rag_engine - WARNING - LightRAG不可用,跳过文档插入
2025-11-06 18:50:34,870 - system_core - INFO -   进度: 40/49
2025-11-06 18:50:34,870 - knowledge_management.rag_engine - WARNING - LightRAG不可用,使用模拟模式
2025-11-06 18:50:34,870 - knowledge_management.rag_engine - WARNING - LightRAG不可用,跳过文档插入
2025-11-06 18:50:34,870 - system_core - INFO -   进度: 49/49
2025-11-06 18:50:34,870 - system_core - INFO - ✅ 成功将 49 道题目插入LightRAG
2025-11-06 18:50:34,870 - system_core - INFO - ✅ 题库知识图谱构建完成
2025-11-06 18:50:34,870 - system_core - INFO - 🚀 初始化盘古7B模型...
2025-11-06 18:50:34,870 - models.llm_models - INFO - 🆕 创建新的盘古7B模型实例（任务类型: pangu）
2025-11-06 18:50:34,871 - models.llm_models - INFO - ✅ 检测到 8 个NPU设备
2025-11-06 18:50:42,528 - models.llm_models - INFO -   NPU 0: Ascend910B2, 总显存: 60.97 GB
2025-11-06 18:50:42,529 - models.llm_models - INFO -   NPU 1: Ascend910B2, 总显存: 60.97 GB
2025-11-06 18:50:42,530 - models.llm_models - INFO -   NPU 2: Ascend910B2, 总显存: 60.97 GB
2025-11-06 18:50:42,530 - models.llm_models - INFO -   NPU 3: Ascend910B2, 总显存: 60.97 GB
2025-11-06 18:50:42,530 - models.llm_models - INFO -   NPU 4: Ascend910B2, 总显存: 60.97 GB
2025-11-06 18:50:42,531 - models.llm_models - INFO -   NPU 5: Ascend910B2, 总显存: 60.97 GB
2025-11-06 18:50:42,531 - models.llm_models - INFO -   NPU 6: Ascend910B2, 总显存: 60.97 GB
2025-11-06 18:50:42,531 - models.llm_models - INFO -   NPU 7: Ascend910B2, 总显存: 60.97 GB
2025-11-06 18:50:42,531 - models.llm_models - INFO - 盘古7B模型设备配置: ['npu:0', 'npu:1', 'npu:2', 'npu:3', 'npu:4', 'npu:5', 'npu:6', 'npu:7']
2025-11-06 18:50:42,532 - system_core - INFO - 🔄 预加载盘古7B模型...
2025-11-06 18:50:42,532 - models.llm_models - INFO - 🔄 正在加载盘古7B模型: /opt/pangu/openPangu-Embedded-7B-V1.1
2025-11-06 18:50:43,602 - models.llm_models - INFO - 🚀 使用多NPU模式，跨8个设备分布模型
2025-11-06 18:50:44,629 - datasets - INFO - PyTorch version 2.5.1 available.
2025-11-06 18:50:45,029 - accelerate.utils.modeling - INFO - Based on the current allocation process, no modules could be assigned to the following devices due to insufficient memory:
  - 0: 2512912384 bytes required
These minimum requirements are specific to this allocation attempt and may vary. Consider increasing the available memory for these devices to at least the specified minimum, or adjusting the model config.
2025-11-06 18:50:50,070 - models.llm_models - INFO - ✅ 使用device_map='auto'模式成功加载
2025-11-06 18:50:50,073 - models.llm_models - INFO - 📊 模型分布情况:
2025-11-06 18:50:50,074 - models.llm_models - INFO -    1: 4 层
2025-11-06 18:50:50,074 - models.llm_models - INFO -    2: 6 层
2025-11-06 18:50:50,074 - models.llm_models - INFO -    3: 6 层
2025-11-06 18:50:50,074 - models.llm_models - INFO -    4: 6 层
2025-11-06 18:50:50,074 - models.llm_models - INFO -    5: 6 层
2025-11-06 18:50:50,074 - models.llm_models - INFO -    6: 6 层
2025-11-06 18:50:50,074 - models.llm_models - INFO -    7: 4 层
2025-11-06 18:50:50,074 - models.llm_models - INFO - ✅ 盘古7B模型加载成功
2025-11-06 18:50:50,074 - system_core - INFO - ✅ 盘古7B模型加载完成
2025-11-06 18:50:50,074 - system_core - INFO - 🧠 初始化BKT算法...
2025-11-06 18:50:50,075 - utils.bkt_algorithm - INFO - ✅ 加载学生状态: 1 个学生, 7 条细粒度记录
2025-11-06 18:50:50,075 - utils.bkt_algorithm - INFO - ✅ 增强版BKT算法初始化完成（细粒度知识点追踪）
2025-11-06 18:50:50,075 - system_core - INFO - 📊 初始化评估器（盘古7B驱动）...
2025-11-06 18:50:50,076 - utils.evaluator - INFO - ✅ 个性化学生评估器初始化完成
2025-11-06 18:50:50,076 - system_core - INFO - 🎨 初始化可视化组件...
2025-11-06 18:50:50,076 - visualization.kg_visualizer - INFO - 知识图谱可视化器初始化完成
2025-11-06 18:50:50,076 - system_core - INFO - ✅ 系统初始化完成 - LightRAG驱动的智能选题系统
2025-11-06 18:50:50,076 - __main__ - INFO - ✅ 系统核心初始化完成
2025-11-06 18:50:50,076 - __main__ - INFO - 📚 题库统计: 总题目 49
2025-11-06 18:50:50,076 - __main__ - INFO - 📊 知识点大类: 4 个
2025-11-06 18:50:50,077 - __main__ - INFO - 📋 知识点小类: 38 个
2025-11-06 18:50:50,077 - __main__ - INFO - 🎨 正在创建UI界面...
2025-11-06 18:50:50,077 - ui.main_ui - INFO - ✅ 智能教育UI初始化完成
2025-11-06 18:50:50,387 - __main__ - INFO - ✅ 系统启动成功!
2025-11-06 19:00:22,663 - __main__ - INFO - ⏹️  收到退出信号...
2025-11-06 19:00:22,664 - __main__ - INFO - 👋 系统已关闭
2025-11-06 19:17:02,058 - __main__ - INFO - 🚀 系统启动中...
2025-11-06 19:17:02,059 - __main__ - INFO - ✅ 检测到盘古7B模型文件
2025-11-06 19:17:02,059 - __main__ - INFO - ✅ 检测到题库文件
2025-11-06 19:17:02,059 - __main__ - INFO - ⚙️  正在初始化智能系统核心...
2025-11-06 19:17:02,059 - system_core - INFO - ✅ 智能教育系统核心初始化（LightRAG驱动）
2025-11-06 19:17:02,059 - system_core - INFO - 📄 初始化系统组件...
2025-11-06 19:17:10,082 - knowledge_management.rag_engine - INFO - ✅ LightRAG核心库导入成功
2025-11-06 19:17:10,083 - system_core - INFO - 📚 初始化题库...
2025-11-06 19:17:10,083 - data_management.question_db - INFO - ✅ 加载题库成功: 49 道题目
2025-11-06 19:17:10,084 - data_management.question_db - INFO - ✅ 增强版题库初始化完成: /home/weitianyu/teach_system/data/question_database_2.json
2025-11-06 19:17:10,084 - system_core - INFO - 🔤 初始化嵌入模型...
2025-11-06 19:17:10,084 - models.embedding_model - INFO - 尝试使用盘古7B的嵌入功能...
2025-11-06 19:17:10,084 - models.embedding_model - INFO - 初始化盘古7B嵌入模型: /opt/pangu/openPangu-Embedded-7B-V1.1
2025-11-06 19:17:10,084 - system_core - INFO - 🧠 初始化LightRAG引擎（使用本地嵌入模型）...
2025-11-06 19:17:10,084 - knowledge_management.rag_engine - INFO - 🚀 初始化LightRAG引擎（本地模式）
2025-11-06 19:17:10,084 - knowledge_management.rag_engine - INFO -    工作目录: /home/weitianyu/teach_system/rag_storage
2025-11-06 19:17:10,084 - knowledge_management.rag_engine - INFO -    使用本地嵌入模型: PanGuEmbedding
2025-11-06 19:17:10,084 - system_core - INFO - ⚙️  正在启动LightRAG异步初始化...
2025-11-06 19:17:10,085 - system_core - INFO - 🔄 步骤1: 初始化LightRAG存储系统...
2025-11-06 19:17:10,085 - knowledge_management.rag_engine - INFO - ⚙️  正在创建LightRAG实例...
2025-11-06 19:17:10,085 - models.embedding_model - INFO - 正在加载盘古7B模型用于嵌入...
2025-11-06 19:17:13,131 - datasets - INFO - PyTorch version 2.5.1 available.
2025-11-06 19:17:23,489 - models.embedding_model - INFO - 盘古7B嵌入模型加载成功,设备: cpu
2025-11-06 19:17:23,489 - knowledge_management.rag_engine - INFO -    嵌入维度: 4096
2025-11-06 19:17:23,490 - knowledge_management.rag_engine - INFO -    ✅ 嵌入函数已包装（使用EmbeddingFunc）
2025-11-06 19:17:23,490 - knowledge_management.rag_engine - INFO -    ✅ LLM函数已包装
2025-11-06 19:17:23,490 - knowledge_management.rag_engine - INFO -    配置参数:
2025-11-06 19:17:23,490 - knowledge_management.rag_engine - INFO -      - 工作目录: /home/weitianyu/teach_system/rag_storage
2025-11-06 19:17:23,490 - knowledge_management.rag_engine - INFO -      - 嵌入维度: 4096
2025-11-06 19:17:23,490 - knowledge_management.rag_engine - INFO -      - 嵌入函数类型: EmbeddingFunc
2025-11-06 19:17:24,061 - nano-vectordb - INFO - Init {'embedding_dim': 4096, 'metric': 'cosine', 'storage_file': '/home/weitianyu/teach_system/rag_storage/vdb_entities.json'} 0 data
2025-11-06 19:17:24,061 - nano-vectordb - INFO - Init {'embedding_dim': 4096, 'metric': 'cosine', 'storage_file': '/home/weitianyu/teach_system/rag_storage/vdb_relationships.json'} 0 data
2025-11-06 19:17:24,061 - nano-vectordb - INFO - Init {'embedding_dim': 4096, 'metric': 'cosine', 'storage_file': '/home/weitianyu/teach_system/rag_storage/vdb_chunks.json'} 0 data
2025-11-06 19:17:24,063 - knowledge_management.rag_engine - INFO - 📦 正在初始化LightRAG存储...
2025-11-06 19:17:24,065 - knowledge_management.rag_engine - INFO - ✅ LightRAG引擎初始化成功！
2025-11-06 19:17:24,065 - system_core - INFO - ✅ LightRAG引擎初始化成功
2025-11-06 19:17:24,065 - system_core - INFO - 🔄 步骤2: 构建题库知识图谱...
2025-11-06 19:17:24,065 - system_core - INFO - 📊 题库包含 49 道题目
2025-11-06 19:17:24,066 - system_core - INFO - 📝 正在插入 49 道题目到LightRAG...
2025-11-06 19:17:24,066 - knowledge_management.rag_engine - INFO - 📝 正在插入 1 个文档到LightRAG...
2025-11-06 19:17:24,066 - knowledge_management.rag_engine - ERROR -    ❌ 插入第1个文档失败: This event loop is already running
2025-11-06 19:17:24,067 - knowledge_management.rag_engine - INFO - ✅ 文档插入完成！成功插入 0/1 个文档
2025-11-06 19:17:24,067 - knowledge_management.rag_engine - WARNING - ⚠️  有 1 个文档插入失败
2025-11-06 19:17:24,067 - system_core - INFO -   ✅ 进度: 10/49
2025-11-06 19:17:24,067 - knowledge_management.rag_engine - INFO - 📝 正在插入 1 个文档到LightRAG...
2025-11-06 19:17:24,067 - knowledge_management.rag_engine - ERROR -    ❌ 插入第1个文档失败: This event loop is already running
2025-11-06 19:17:24,067 - knowledge_management.rag_engine - INFO - ✅ 文档插入完成！成功插入 0/1 个文档
2025-11-06 19:17:24,067 - knowledge_management.rag_engine - WARNING - ⚠️  有 1 个文档插入失败
2025-11-06 19:17:24,068 - system_core - INFO -   ✅ 进度: 20/49
2025-11-06 19:17:24,068 - knowledge_management.rag_engine - INFO - 📝 正在插入 1 个文档到LightRAG...
2025-11-06 19:17:24,068 - knowledge_management.rag_engine - ERROR -    ❌ 插入第1个文档失败: This event loop is already running
2025-11-06 19:17:24,068 - knowledge_management.rag_engine - INFO - ✅ 文档插入完成！成功插入 0/1 个文档
2025-11-06 19:17:24,068 - knowledge_management.rag_engine - WARNING - ⚠️  有 1 个文档插入失败
2025-11-06 19:17:24,068 - system_core - INFO -   ✅ 进度: 30/49
2025-11-06 19:17:24,068 - knowledge_management.rag_engine - INFO - 📝 正在插入 1 个文档到LightRAG...
2025-11-06 19:17:24,068 - knowledge_management.rag_engine - ERROR -    ❌ 插入第1个文档失败: This event loop is already running
2025-11-06 19:17:24,068 - knowledge_management.rag_engine - INFO - ✅ 文档插入完成！成功插入 0/1 个文档
2025-11-06 19:17:24,068 - knowledge_management.rag_engine - WARNING - ⚠️  有 1 个文档插入失败
2025-11-06 19:17:24,069 - system_core - INFO -   ✅ 进度: 40/49
2025-11-06 19:17:24,069 - knowledge_management.rag_engine - INFO - 📝 正在插入 1 个文档到LightRAG...
2025-11-06 19:17:24,069 - knowledge_management.rag_engine - ERROR -    ❌ 插入第1个文档失败: This event loop is already running
2025-11-06 19:17:24,069 - knowledge_management.rag_engine - INFO - ✅ 文档插入完成！成功插入 0/1 个文档
2025-11-06 19:17:24,069 - knowledge_management.rag_engine - WARNING - ⚠️  有 1 个文档插入失败
2025-11-06 19:17:24,069 - system_core - INFO -   ✅ 进度: 49/49
2025-11-06 19:17:24,069 - system_core - INFO - ✅ 成功将 49 道题目插入LightRAG
2025-11-06 19:17:24,069 - system_core - INFO - ✅ 题库知识图谱构建完成
2025-11-06 19:17:24,069 - system_core - INFO - 🚀 初始化盘古7B模型...
2025-11-06 19:17:24,070 - models.llm_models - INFO - 🆕 创建新的盘古7B模型实例（任务类型: pangu）
2025-11-06 19:17:24,070 - models.llm_models - INFO - ✅ 检测到 8 个NPU设备
2025-11-06 19:17:24,070 - models.llm_models - INFO -   NPU 0: Ascend910B2, 总显存: 60.97 GB
2025-11-06 19:17:24,071 - models.llm_models - INFO -   NPU 1: Ascend910B2, 总显存: 60.97 GB
2025-11-06 19:17:24,071 - models.llm_models - INFO -   NPU 2: Ascend910B2, 总显存: 60.97 GB
2025-11-06 19:17:24,072 - models.llm_models - INFO -   NPU 3: Ascend910B2, 总显存: 60.97 GB
2025-11-06 19:17:24,072 - models.llm_models - INFO -   NPU 4: Ascend910B2, 总显存: 60.97 GB
2025-11-06 19:17:24,072 - models.llm_models - INFO -   NPU 5: Ascend910B2, 总显存: 60.97 GB
2025-11-06 19:17:24,073 - models.llm_models - INFO -   NPU 6: Ascend910B2, 总显存: 60.97 GB
2025-11-06 19:17:24,073 - models.llm_models - INFO -   NPU 7: Ascend910B2, 总显存: 60.97 GB
2025-11-06 19:17:24,073 - models.llm_models - INFO - 盘古7B模型设备配置: ['npu:0', 'npu:1', 'npu:2', 'npu:3', 'npu:4', 'npu:5', 'npu:6', 'npu:7']
2025-11-06 19:17:24,073 - system_core - INFO - 📄 预加载盘古7B模型...
2025-11-06 19:17:24,073 - models.llm_models - INFO - 🔄 正在加载盘古7B模型: /opt/pangu/openPangu-Embedded-7B-V1.1
2025-11-06 19:17:25,142 - models.llm_models - INFO - 🚀 使用多NPU模式，跨8个设备分布模型
2025-11-06 19:17:25,297 - accelerate.utils.modeling - INFO - Based on the current allocation process, no modules could be assigned to the following devices due to insufficient memory:
  - 0: 2512912384 bytes required
These minimum requirements are specific to this allocation attempt and may vary. Consider increasing the available memory for these devices to at least the specified minimum, or adjusting the model config.
2025-11-06 19:17:30,381 - models.llm_models - INFO - ✅ 使用device_map='auto'模式成功加载
2025-11-06 19:17:30,384 - models.llm_models - INFO - 📊 模型分布情况:
2025-11-06 19:17:30,384 - models.llm_models - INFO -    1: 4 层
2025-11-06 19:17:30,385 - models.llm_models - INFO -    2: 6 层
2025-11-06 19:17:30,385 - models.llm_models - INFO -    3: 6 层
2025-11-06 19:17:30,385 - models.llm_models - INFO -    4: 6 层
2025-11-06 19:17:30,385 - models.llm_models - INFO -    5: 6 层
2025-11-06 19:17:30,385 - models.llm_models - INFO -    6: 6 层
2025-11-06 19:17:30,385 - models.llm_models - INFO -    7: 4 层
2025-11-06 19:17:30,385 - models.llm_models - INFO - ✅ 盘古7B模型加载成功
2025-11-06 19:17:30,385 - system_core - INFO - ✅ 盘古7B模型加载完成
2025-11-06 19:17:30,385 - system_core - INFO - 🧠 初始化BKT算法...
2025-11-06 19:17:30,386 - utils.bkt_algorithm - INFO - ✅ 加载学生状态: 1 个学生, 7 条细粒度记录
2025-11-06 19:17:30,386 - utils.bkt_algorithm - INFO - ✅ 增强版BKT算法初始化完成（细粒度知识点追踪）
2025-11-06 19:17:30,386 - system_core - INFO - 📊 初始化评估器（盘古7B驱动）...
2025-11-06 19:17:30,386 - utils.evaluator - INFO - ✅ 个性化学生评估器初始化完成
2025-11-06 19:17:30,386 - system_core - INFO - 🎨 初始化可视化组件...
2025-11-06 19:17:30,387 - visualization.kg_visualizer - INFO - 知识图谱可视化器初始化完成
2025-11-06 19:17:30,387 - system_core - INFO - ======================================================================
2025-11-06 19:17:30,387 - system_core - INFO - ✅ 系统初始化完成 - LightRAG驱动的智能选题系统
2025-11-06 19:17:30,387 - system_core - INFO - ======================================================================
2025-11-06 19:17:30,387 - __main__ - INFO - ✅ 系统核心初始化完成
2025-11-06 19:17:30,387 - __main__ - INFO - 📚 题库统计: 总题目 49
2025-11-06 19:17:30,387 - __main__ - INFO - 📊 知识点大类: 4 个
2025-11-06 19:17:30,387 - __main__ - INFO - 📋 知识点小类: 38 个
2025-11-06 19:17:30,387 - __main__ - INFO - 🎨 正在创建UI界面...
2025-11-06 19:17:30,387 - ui.main_ui - INFO - ✅ 智能教育UI初始化完成
2025-11-06 19:17:31,244 - __main__ - INFO - ✅ 系统启动成功!
2025-11-06 19:17:38,234 - __main__ - INFO - 👋 系统已关闭
2025-11-06 19:48:21,166 - __main__ - INFO - 🚀 系统启动中...
2025-11-06 19:48:21,167 - __main__ - INFO - ✅ 检测到盘古7B模型文件
2025-11-06 19:48:21,167 - __main__ - INFO - ✅ 检测到题库文件
2025-11-06 19:48:21,167 - __main__ - INFO - ⚙️  正在初始化智能系统核心...
2025-11-06 19:48:21,167 - system_core - INFO - ✅ 整合教育系统初始化
2025-11-06 19:48:21,167 - system_core - INFO - 🔄 开始初始化系统组件...
2025-11-06 19:48:28,921 - system_core - ERROR - ❌ 找不到 utils/smart_question_selector.py
2025-11-06 19:48:28,921 - system_core - ERROR -    请确保文件存在: /home/weitianyu/teach_system/utils/smart_question_selector.py
2025-11-06 19:48:28,921 - system_core - ERROR - ❌ 系统初始化失败: No module named 'utils.smart_question_selector'
2025-11-06 19:48:28,921 - system_core - ERROR - Traceback (most recent call last):
  File "/home/weitianyu/teach_system/system_core.py", line 60, in initialize
    from utils.smart_question_selector import create_smart_selector
ModuleNotFoundError: No module named 'utils.smart_question_selector'

2025-11-06 19:48:28,921 - __main__ - ERROR - ❌ 系统运行出错: 系统初始化失败: No module named 'utils.smart_question_selector'
Traceback (most recent call last):
  File "/home/weitianyu/teach_system/system_core.py", line 60, in initialize
    from utils.smart_question_selector import create_smart_selector
ModuleNotFoundError: No module named 'utils.smart_question_selector'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/weitianyu/teach_system/main.py", line 69, in main
    system_core = create_system_core(config)
                  ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/weitianyu/teach_system/system_core.py", line 481, in create_system_core
    core.initialize()
  File "/home/weitianyu/teach_system/system_core.py", line 165, in initialize
    raise RuntimeError(f"系统初始化失败: {e}")
RuntimeError: 系统初始化失败: No module named 'utils.smart_question_selector'
2025-11-06 19:48:28,922 - __main__ - INFO - 👋 系统已关闭
2025-11-06 19:49:32,901 - __main__ - INFO - 🚀 系统启动中...
2025-11-06 19:49:32,902 - __main__ - INFO - ✅ 检测到盘古7B模型文件
2025-11-06 19:49:32,902 - __main__ - INFO - ✅ 检测到题库文件
2025-11-06 19:49:32,902 - __main__ - INFO - ⚙️  正在初始化智能系统核心...
2025-11-06 19:49:32,902 - system_core - INFO - ✅ 整合教育系统初始化
2025-11-06 19:49:32,902 - system_core - INFO - 🔄 开始初始化系统组件...
2025-11-06 19:49:40,893 - system_core - INFO - ✅ 智能选择器模块已找到
2025-11-06 19:49:40,893 - system_core - INFO - 📚 步骤1：初始化题库...
2025-11-06 19:49:40,894 - data_management.question_db - INFO - ✅ 加载题库成功: 49 道题目
2025-11-06 19:49:40,894 - data_management.question_db - INFO - ✅ 增强版题库初始化完成: /home/weitianyu/teach_system/data/question_database_2.json
2025-11-06 19:49:40,894 - system_core - INFO -    ✅ 加载了 49 道题目
2025-11-06 19:49:40,894 - system_core - INFO - 🔤 步骤2：初始化BGE-M3嵌入模型（本地）...
2025-11-06 19:49:40,894 - models.embedding_model - INFO - 尝试使用盘古7B的嵌入功能...
2025-11-06 19:49:40,894 - models.embedding_model - INFO - 初始化盘古7B嵌入模型: /opt/pangu/openPangu-Embedded-7B-V1.1
2025-11-06 19:49:40,895 - models.embedding_model - INFO - 正在加载盘古7B模型用于嵌入...
2025-11-06 19:49:43,959 - datasets - INFO - PyTorch version 2.5.1 available.
2025-11-06 19:49:54,152 - models.embedding_model - INFO - 盘古7B嵌入模型加载成功,设备: cpu
2025-11-06 19:49:54,152 - system_core - INFO -    ✅ BGE-M3模型加载完成
2025-11-06 19:49:54,153 - system_core - INFO - 🧠 步骤3：初始化LightRAG引擎...
2025-11-06 19:49:54,153 - knowledge_management.rag_engine - INFO - 初始化题库RAG引擎,工作目录: /home/weitianyu/teach_system/rag_storage
2025-11-06 19:49:54,724 - knowledge_management.rag_engine - ERROR - ❌ LightRAG初始化失败: 'function' object has no attribute 'embedding_dim'
2025-11-06 19:49:54,724 - system_core - ERROR - ❌ 系统初始化失败: 'function' object has no attribute 'embedding_dim'
2025-11-06 19:49:54,728 - system_core - ERROR - Traceback (most recent call last):
  File "/home/weitianyu/teach_system/system_core.py", line 93, in initialize
    loop.run_until_complete(self.question_rag_engine.initialize())
  File "/root/miniconda3/envs/pangu/lib/python3.11/asyncio/base_events.py", line 650, in run_until_complete
    return future.result()
           ^^^^^^^^^^^^^^^
  File "/home/weitianyu/teach_system/knowledge_management/rag_engine.py", line 57, in initialize
    self.rag = LightRAG(
               ^^^^^^^^^
  File "<string>", line 37, in __init__
  File "/root/miniconda3/envs/pangu/lib/python3.11/site-packages/lightrag/lightrag.py", line 396, in __post_init__
    self.entities_vdb: BaseVectorStorage = self.vector_db_storage_cls(  # type: ignore
                                           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/root/miniconda3/envs/pangu/lib/python3.11/site-packages/lightrag/utils.py", line 1323, in import_class
    return cls(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^
  File "<string>", line 8, in __init__
  File "/root/miniconda3/envs/pangu/lib/python3.11/site-packages/lightrag/kg/nano_vector_db_impl.py", line 50, in __post_init__
    self.embedding_func.embedding_dim,
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: 'function' object has no attribute 'embedding_dim'

2025-11-06 19:49:54,728 - __main__ - ERROR - ❌ 系统运行出错: 系统初始化失败: 'function' object has no attribute 'embedding_dim'
Traceback (most recent call last):
  File "/home/weitianyu/teach_system/system_core.py", line 93, in initialize
    loop.run_until_complete(self.question_rag_engine.initialize())
  File "/root/miniconda3/envs/pangu/lib/python3.11/asyncio/base_events.py", line 650, in run_until_complete
    return future.result()
           ^^^^^^^^^^^^^^^
  File "/home/weitianyu/teach_system/knowledge_management/rag_engine.py", line 57, in initialize
    self.rag = LightRAG(
               ^^^^^^^^^
  File "<string>", line 37, in __init__
  File "/root/miniconda3/envs/pangu/lib/python3.11/site-packages/lightrag/lightrag.py", line 396, in __post_init__
    self.entities_vdb: BaseVectorStorage = self.vector_db_storage_cls(  # type: ignore
                                           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/root/miniconda3/envs/pangu/lib/python3.11/site-packages/lightrag/utils.py", line 1323, in import_class
    return cls(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^
  File "<string>", line 8, in __init__
  File "/root/miniconda3/envs/pangu/lib/python3.11/site-packages/lightrag/kg/nano_vector_db_impl.py", line 50, in __post_init__
    self.embedding_func.embedding_dim,
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: 'function' object has no attribute 'embedding_dim'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/weitianyu/teach_system/main.py", line 69, in main
    system_core = create_system_core(config)
                  ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/weitianyu/teach_system/system_core.py", line 481, in create_system_core
    core.initialize()
  File "/home/weitianyu/teach_system/system_core.py", line 165, in initialize
    raise RuntimeError(f"系统初始化失败: {e}")
RuntimeError: 系统初始化失败: 'function' object has no attribute 'embedding_dim'
2025-11-06 19:49:54,730 - __main__ - INFO - 👋 系统已关闭
2025-11-06 19:56:44,368 - __main__ - INFO - 🚀 系统启动中...
2025-11-06 19:56:44,368 - __main__ - INFO - ✅ 检测到盘古7B模型文件
2025-11-06 19:56:44,368 - __main__ - INFO - ✅ 检测到题库文件
2025-11-06 19:56:44,368 - __main__ - INFO - ⚙️  正在初始化智能系统核心...
2025-11-06 19:56:44,369 - system_core - INFO - ✅ 整合教育系统初始化
2025-11-06 19:56:44,369 - system_core - INFO - 🔄 开始初始化系统组件...
2025-11-06 19:56:52,299 - system_core - INFO - ✅ 智能选择器模块已找到
2025-11-06 19:56:52,299 - system_core - INFO - 📚 步骤1：初始化题库...
2025-11-06 19:56:52,300 - data_management.question_db - INFO - ✅ 加载题库成功: 49 道题目
2025-11-06 19:56:52,300 - data_management.question_db - INFO - ✅ 增强版题库初始化完成: /home/weitianyu/teach_system/data/question_database_2.json
2025-11-06 19:56:52,300 - system_core - INFO -    ✅ 加载了 49 道题目
2025-11-06 19:56:52,300 - system_core - INFO - 🔤 步骤2：初始化BGE-M3嵌入模型（本地）...
2025-11-06 19:56:52,300 - models.embedding_model - INFO - 初始化BGE-M3嵌入模型: /home/weitianyu/bgem3
2025-11-06 19:56:52,300 - models.embedding_model - INFO - 正在加载BGE-M3模型...
2025-11-06 19:56:55,632 - models.embedding_model - ERROR - BGE-M3模型加载失败: Due to a serious vulnerability issue in `torch.load`, even with `weights_only=True`, we now require users to upgrade torch to at least v2.6 in order to use the function. This version restriction does not apply when loading files with safetensors.
See the vulnerability report here https://nvd.nist.gov/vuln/detail/CVE-2025-32434
2025-11-06 19:56:55,632 - system_core - ERROR - ❌ 系统初始化失败: Due to a serious vulnerability issue in `torch.load`, even with `weights_only=True`, we now require users to upgrade torch to at least v2.6 in order to use the function. This version restriction does not apply when loading files with safetensors.
See the vulnerability report here https://nvd.nist.gov/vuln/detail/CVE-2025-32434
2025-11-06 19:56:55,638 - system_core - ERROR - Traceback (most recent call last):
  File "/home/weitianyu/teach_system/system_core.py", line 86, in initialize
    self.embedding_model.load_model()
  File "/home/weitianyu/teach_system/models/embedding_model.py", line 142, in load_model
    self.model = AutoModel.from_pretrained(self.model_path)
                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/root/miniconda3/envs/pangu/lib/python3.11/site-packages/transformers/models/auto/auto_factory.py", line 600, in from_pretrained
    return model_class.from_pretrained(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/root/miniconda3/envs/pangu/lib/python3.11/site-packages/transformers/modeling_utils.py", line 311, in _wrapper
    return func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^
  File "/root/miniconda3/envs/pangu/lib/python3.11/site-packages/transformers/modeling_utils.py", line 4839, in from_pretrained
    ) = cls._load_pretrained_model(
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/root/miniconda3/envs/pangu/lib/python3.11/site-packages/transformers/modeling_utils.py", line 5105, in _load_pretrained_model
    load_state_dict(checkpoint_files[0], map_location="meta", weights_only=weights_only).keys()
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/root/miniconda3/envs/pangu/lib/python3.11/site-packages/transformers/modeling_utils.py", line 556, in load_state_dict
    check_torch_load_is_safe()
  File "/root/miniconda3/envs/pangu/lib/python3.11/site-packages/transformers/utils/import_utils.py", line 1517, in check_torch_load_is_safe
    raise ValueError(
ValueError: Due to a serious vulnerability issue in `torch.load`, even with `weights_only=True`, we now require users to upgrade torch to at least v2.6 in order to use the function. This version restriction does not apply when loading files with safetensors.
See the vulnerability report here https://nvd.nist.gov/vuln/detail/CVE-2025-32434

2025-11-06 19:56:55,638 - __main__ - ERROR - ❌ 系统运行出错: 系统初始化失败: Due to a serious vulnerability issue in `torch.load`, even with `weights_only=True`, we now require users to upgrade torch to at least v2.6 in order to use the function. This version restriction does not apply when loading files with safetensors.
See the vulnerability report here https://nvd.nist.gov/vuln/detail/CVE-2025-32434
Traceback (most recent call last):
  File "/home/weitianyu/teach_system/system_core.py", line 86, in initialize
    self.embedding_model.load_model()
  File "/home/weitianyu/teach_system/models/embedding_model.py", line 142, in load_model
    self.model = AutoModel.from_pretrained(self.model_path)
                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/root/miniconda3/envs/pangu/lib/python3.11/site-packages/transformers/models/auto/auto_factory.py", line 600, in from_pretrained
    return model_class.from_pretrained(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/root/miniconda3/envs/pangu/lib/python3.11/site-packages/transformers/modeling_utils.py", line 311, in _wrapper
    return func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^
  File "/root/miniconda3/envs/pangu/lib/python3.11/site-packages/transformers/modeling_utils.py", line 4839, in from_pretrained
    ) = cls._load_pretrained_model(
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/root/miniconda3/envs/pangu/lib/python3.11/site-packages/transformers/modeling_utils.py", line 5105, in _load_pretrained_model
    load_state_dict(checkpoint_files[0], map_location="meta", weights_only=weights_only).keys()
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/root/miniconda3/envs/pangu/lib/python3.11/site-packages/transformers/modeling_utils.py", line 556, in load_state_dict
    check_torch_load_is_safe()
  File "/root/miniconda3/envs/pangu/lib/python3.11/site-packages/transformers/utils/import_utils.py", line 1517, in check_torch_load_is_safe
    raise ValueError(
ValueError: Due to a serious vulnerability issue in `torch.load`, even with `weights_only=True`, we now require users to upgrade torch to at least v2.6 in order to use the function. This version restriction does not apply when loading files with safetensors.
See the vulnerability report here https://nvd.nist.gov/vuln/detail/CVE-2025-32434

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/weitianyu/teach_system/main.py", line 69, in main
    system_core = create_system_core(config)
                  ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/weitianyu/teach_system/system_core.py", line 499, in create_system_core
    core.initialize()
  File "/home/weitianyu/teach_system/system_core.py", line 183, in initialize
    raise RuntimeError(f"系统初始化失败: {e}")
RuntimeError: 系统初始化失败: Due to a serious vulnerability issue in `torch.load`, even with `weights_only=True`, we now require users to upgrade torch to at least v2.6 in order to use the function. This version restriction does not apply when loading files with safetensors.
See the vulnerability report here https://nvd.nist.gov/vuln/detail/CVE-2025-32434
2025-11-06 19:56:55,641 - __main__ - INFO - 👋 系统已关闭
2025-11-06 22:15:44,039 - __main__ - INFO - 🚀 系统启动中...
2025-11-06 22:15:44,039 - __main__ - INFO - ✅ 检测到盘古7B模型文件
2025-11-06 22:15:44,039 - __main__ - INFO - ✅ 检测到题库文件
2025-11-06 22:15:44,039 - __main__ - INFO - ⚙️  正在初始化智能系统核心...
2025-11-06 22:15:44,039 - system_core - INFO - ✅ 智能教育系统核心初始化（增强版）
2025-11-06 22:15:44,039 - system_core - INFO - 🔄 初始化系统组件...
2025-11-06 22:15:51,749 - models - INFO - ✅ LLM模型导入成功
2025-11-06 22:15:51,753 - models - WARNING - ⚠️  嵌入模型导入失败: cannot import name 'BGESmallZHEmbedding' from 'models.embedding_model' (/home/weitianyu/teach_system/models/embedding_model.py)
2025-11-06 22:15:51,753 - models - INFO - ✅ 所有模型模块导入完成
2025-11-06 22:15:52,018 - knowledge_management.rag_engine - WARNING - LightRAG未安装,将使用模拟模式
2025-11-06 22:15:52,022 - system_core - INFO - 📚 初始化题库...
2025-11-06 22:15:52,022 - data_management.question_db - INFO - ✅ 加载题库成功: 49 道题目
2025-11-06 22:15:52,022 - data_management.question_db - INFO - ✅ 增强版题库初始化完成: /home/weitianyu/teach_system/data/question_database_2.json
2025-11-06 22:15:52,023 - system_core - INFO - 🔤 初始化嵌入模型...
2025-11-06 22:15:52,023 - system_core - ERROR - ❌ 系统初始化失败: module 'config' has no attribute 'BGE_M3_MODEL_PATH'
2025-11-06 22:15:52,023 - system_core - ERROR - Traceback (most recent call last):
  File "/home/weitianyu/teach_system/system_core.py", line 55, in initialize
    self.config.BGE_M3_MODEL_PATH,
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: module 'config' has no attribute 'BGE_M3_MODEL_PATH'

2025-11-06 22:15:52,023 - __main__ - ERROR - ❌ 系统运行出错: 系统初始化失败: module 'config' has no attribute 'BGE_M3_MODEL_PATH'
Traceback (most recent call last):
  File "/home/weitianyu/teach_system/system_core.py", line 55, in initialize
    self.config.BGE_M3_MODEL_PATH,
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: module 'config' has no attribute 'BGE_M3_MODEL_PATH'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/weitianyu/teach_system/main.py", line 69, in main
    system_core = create_system_core(config)
                  ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/weitianyu/teach_system/system_core.py", line 519, in create_system_core
    core.initialize()
  File "/home/weitianyu/teach_system/system_core.py", line 132, in initialize
    raise RuntimeError(f"系统初始化失败: {e}")
RuntimeError: 系统初始化失败: module 'config' has no attribute 'BGE_M3_MODEL_PATH'
2025-11-06 22:15:52,024 - __main__ - INFO - 👋 系统已关闭
2025-11-07 09:08:54,051 - __main__ - INFO - 🚀 系统启动中...
2025-11-07 09:08:54,051 - __main__ - INFO - ✅ 检测到盘古7B模型文件
2025-11-07 09:08:54,051 - __main__ - INFO - ✅ 检测到题库文件
2025-11-07 09:08:54,051 - __main__ - INFO - ⚙️  正在初始化智能系统核心...
2025-11-07 09:08:54,051 - system_core - INFO - ✅ 智能教育系统核心初始化（集成RAG）
2025-11-07 09:08:54,051 - system_core - INFO - 🔄 初始化系统组件...
2025-11-07 09:09:01,577 - models - INFO - ✅ LLM模型导入成功
2025-11-07 09:09:01,581 - models - ERROR - ❌ 嵌入模型导入失败: cannot import name 'LocalPanGuEmbedding' from 'models.embedding_model' (/home/weitianyu/teach_system/models/embedding_model.py)
2025-11-07 09:09:01,635 - knowledge_management.rag_engine - ERROR - ❌ LightRAG未安装，请运行: pip install lightrag-hku
2025-11-07 09:09:01,638 - system_core - INFO - 📚 初始化题库...
2025-11-07 09:09:01,639 - data_management.question_db - INFO - ✅ 加载题库成功: 49 道题目
2025-11-07 09:09:01,639 - data_management.question_db - INFO - ✅ 增强版题库初始化完成: /home/weitianyu/teach_system/data/question_database_2.json
2025-11-07 09:09:01,639 - system_core - INFO - 🚀 初始化盘古7B模型...
2025-11-07 09:09:01,639 - models.llm_models - INFO - 🆕 创建新的盘古7B模型实例（任务类型: pangu）
2025-11-07 09:09:01,640 - models.llm_models - INFO - ✅ 检测到 8 个NPU设备
2025-11-07 09:09:09,655 - models.llm_models - INFO -   NPU 0: Ascend910B2, 总显存: 60.97 GB
2025-11-07 09:09:09,655 - models.llm_models - INFO -   NPU 1: Ascend910B2, 总显存: 60.97 GB
2025-11-07 09:09:09,656 - models.llm_models - INFO -   NPU 2: Ascend910B2, 总显存: 60.97 GB
2025-11-07 09:09:09,656 - models.llm_models - INFO -   NPU 3: Ascend910B2, 总显存: 60.97 GB
2025-11-07 09:09:09,656 - models.llm_models - INFO -   NPU 4: Ascend910B2, 总显存: 60.97 GB
2025-11-07 09:09:09,657 - models.llm_models - INFO -   NPU 5: Ascend910B2, 总显存: 60.97 GB
2025-11-07 09:09:09,657 - models.llm_models - INFO -   NPU 6: Ascend910B2, 总显存: 60.97 GB
2025-11-07 09:09:09,658 - models.llm_models - INFO -   NPU 7: Ascend910B2, 总显存: 60.97 GB
2025-11-07 09:09:09,658 - models.llm_models - INFO - 盘古7B模型设备配置: ['npu:0', 'npu:1', 'npu:2', 'npu:3', 'npu:4', 'npu:5', 'npu:6', 'npu:7']
2025-11-07 09:09:09,658 - system_core - INFO - 🔄 预加载盘古7B模型...
2025-11-07 09:09:09,658 - models.llm_models - INFO - 🔄 正在加载盘古7B模型: /opt/pangu/openPangu-Embedded-7B-V1.1
2025-11-07 09:09:10,717 - models.llm_models - INFO - 🚀 使用多NPU模式，跨8个设备分布模型
2025-11-07 09:09:11,663 - datasets - INFO - PyTorch version 2.5.1 available.
2025-11-07 09:09:12,049 - accelerate.utils.modeling - INFO - Based on the current allocation process, no modules could be assigned to the following devices due to insufficient memory:
  - 0: 2512912384 bytes required
These minimum requirements are specific to this allocation attempt and may vary. Consider increasing the available memory for these devices to at least the specified minimum, or adjusting the model config.
2025-11-07 09:09:17,071 - models.llm_models - INFO - ✅ 使用device_map='auto'模式成功加载
2025-11-07 09:09:17,074 - models.llm_models - INFO - 📊 模型分布情况:
2025-11-07 09:09:17,074 - models.llm_models - INFO -    1: 4 层
2025-11-07 09:09:17,074 - models.llm_models - INFO -    2: 6 层
2025-11-07 09:09:17,074 - models.llm_models - INFO -    3: 6 层
2025-11-07 09:09:17,074 - models.llm_models - INFO -    4: 6 层
2025-11-07 09:09:17,074 - models.llm_models - INFO -    5: 6 层
2025-11-07 09:09:17,074 - models.llm_models - INFO -    6: 6 层
2025-11-07 09:09:17,074 - models.llm_models - INFO -    7: 4 层
2025-11-07 09:09:17,074 - models.llm_models - INFO - ✅ 盘古7B模型加载成功
2025-11-07 09:09:17,075 - system_core - INFO - ✅ 盘古7B模型加载完成
2025-11-07 09:09:17,075 - system_core - INFO - 🔤 初始化BGE嵌入模型...
2025-11-07 09:09:17,075 - models.embedding_model - INFO - 尝试使用盘古7B的嵌入功能...
2025-11-07 09:09:17,075 - models.embedding_model - INFO - 初始化盘古7B嵌入模型: /opt/pangu/openPangu-Embedded-7B-V1.1
2025-11-07 09:09:17,075 - system_core - INFO - 🧠 初始化LightRAG引擎（使用本地盘古7B）...
2025-11-07 09:09:17,075 - system_core - ERROR - ❌ 系统初始化失败: LightRAG未安装，无法初始化
2025-11-07 09:09:17,076 - system_core - ERROR - Traceback (most recent call last):
  File "/home/weitianyu/teach_system/system_core.py", line 70, in initialize
    self.rag_engine = create_rag_engine(
                      ^^^^^^^^^^^^^^^^^^
  File "/home/weitianyu/teach_system/knowledge_management/rag_engine.py", line 242, in create_rag_engine
    return RAGEngine(working_dir, embedding_func, pangu_model)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/weitianyu/teach_system/knowledge_management/rag_engine.py", line 78, in __init__
    raise RuntimeError("LightRAG未安装，无法初始化")
RuntimeError: LightRAG未安装，无法初始化

2025-11-07 09:09:17,076 - __main__ - ERROR - ❌ 系统运行出错: 系统初始化失败: LightRAG未安装，无法初始化
Traceback (most recent call last):
  File "/home/weitianyu/teach_system/system_core.py", line 70, in initialize
    self.rag_engine = create_rag_engine(
                      ^^^^^^^^^^^^^^^^^^
  File "/home/weitianyu/teach_system/knowledge_management/rag_engine.py", line 242, in create_rag_engine
    return RAGEngine(working_dir, embedding_func, pangu_model)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/weitianyu/teach_system/knowledge_management/rag_engine.py", line 78, in __init__
    raise RuntimeError("LightRAG未安装，无法初始化")
RuntimeError: LightRAG未安装，无法初始化

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/weitianyu/teach_system/main.py", line 69, in main
    system_core = create_system_core(config)
                  ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/weitianyu/teach_system/system_core.py", line 465, in create_system_core
    core.initialize()
  File "/home/weitianyu/teach_system/system_core.py", line 128, in initialize
    raise RuntimeError(f"系统初始化失败: {e}")
RuntimeError: 系统初始化失败: LightRAG未安装，无法初始化
2025-11-07 09:09:17,077 - __main__ - INFO - 👋 系统已关闭
2025-11-07 10:31:57,694 - __main__ - INFO - 🚀 系统启动中...
2025-11-07 10:31:57,695 - __main__ - INFO - ✅ 检测到盘古7B模型文件
2025-11-07 10:31:57,695 - __main__ - INFO - ✅ 检测到题库文件
2025-11-07 10:31:57,695 - __main__ - ERROR - ❌ 系统运行出错: 'model'
Traceback (most recent call last):
  File "/home/weitianyu/teach_system/main.py", line 62, in main
    print(f"   - 模型: {config.SYSTEM_INFO['model']}")
                      ~~~~~~~~~~~~~~~~~~^^^^^^^^^
KeyError: 'model'
2025-11-07 10:31:57,696 - __main__ - INFO - 👋 系统已关闭
2025-11-07 10:33:48,839 - __main__ - INFO - 🚀 系统启动中...
2025-11-07 10:33:48,840 - __main__ - INFO - ✅ 检测到盘古7B模型文件
2025-11-07 10:33:48,840 - __main__ - INFO - ✅ 检测到Qwen2.5-7B模型文件
2025-11-07 10:33:48,840 - __main__ - INFO - ✅ 检测到BGE嵌入模型文件
2025-11-07 10:33:48,840 - __main__ - INFO - ✅ 检测到题库文件
2025-11-07 10:33:48,840 - __main__ - INFO - ⚙️  正在初始化智能系统核心...
2025-11-07 10:33:48,840 - system_core - INFO - ✅ 智能教育系统核心初始化
2025-11-07 10:33:48,840 - system_core - INFO - 🔄 初始化系统组件...
2025-11-07 10:33:56,571 - models - INFO - ✅ LLM模型导入成功
2025-11-07 10:33:56,576 - models - ERROR - ❌ 嵌入模型导入失败: cannot import name 'LocalPanGuEmbedding' from 'models.embedding_model' (/home/weitianyu/teach_system/models/embedding_model.py)
2025-11-07 10:33:56,825 - knowledge_management.rag_engine - INFO - ✅ LightRAG已导入
2025-11-07 10:33:56,829 - system_core - INFO - 📚 初始化题库...
2025-11-07 10:33:56,830 - data_management.question_db - INFO - ✅ 加载题库成功: 49 道题目
2025-11-07 10:33:56,830 - data_management.question_db - INFO - ✅ 增强版题库初始化完成: /home/weitianyu/teach_system/data/question_database_2.json
2025-11-07 10:33:56,830 - system_core - INFO - 🔤 初始化BGE嵌入模型...
2025-11-07 10:33:56,830 - models.embedding_model - INFO - 初始化BGE-M3嵌入模型: /home/weitianyu/bge-small-zh-v1.5
2025-11-07 10:33:56,830 - system_core - INFO - 🤖 初始化Qwen2.5-7B模型（用于LightRAG）...
2025-11-07 10:33:56,830 - models.llm_models - INFO - 🆕 创建Qwen2.5-7B模型实例
2025-11-07 10:33:56,830 - models.llm_models - INFO - ✅ 检测到 8 个NPU设备
2025-11-07 10:33:56,831 - models.llm_models - INFO - Qwen2.5-7B模型设备配置: ['npu:0', 'npu:1', 'npu:2', 'npu:3', 'npu:4', 'npu:5', 'npu:6', 'npu:7']
2025-11-07 10:33:56,831 - system_core - INFO - 📥 预加载Qwen模型...
2025-11-07 10:33:56,831 - models.llm_models - INFO - 🔄 正在加载Qwen2.5-7B模型: /home/weitianyu/qwen2.5-7B-Instruct
2025-11-07 10:34:08,965 - models.llm_models - ERROR - ❌ Qwen模型加载失败: NPU out of memory. Tried to allocate 130.00 MiB (NPU 0; 60.97 GiB total capacity; 5.55 GiB already allocated; 5.55 GiB current active; 24.34 MiB free; 5.61 GiB reserved in total by PyTorch) If reserved memory is >> allocated memory try setting max_split_size_mb to avoid fragmentation.
2025-11-07 10:34:08,970 - models.llm_models - ERROR - Traceback (most recent call last):
  File "/home/weitianyu/teach_system/models/llm_models.py", line 79, in load_model
    self.model = self.model.to(self.devices[0])
                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/root/miniconda3/envs/pangu/lib/python3.11/site-packages/transformers/modeling_utils.py", line 4110, in to
    return super().to(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/root/miniconda3/envs/pangu/lib/python3.11/site-packages/torch_npu/utils/_module.py", line 79, in to
    return self._apply(convert)
           ^^^^^^^^^^^^^^^^^^^^
  File "/root/miniconda3/envs/pangu/lib/python3.11/site-packages/torch/nn/modules/module.py", line 900, in _apply
    module._apply(fn)
  File "/root/miniconda3/envs/pangu/lib/python3.11/site-packages/torch/nn/modules/module.py", line 900, in _apply
    module._apply(fn)
  File "/root/miniconda3/envs/pangu/lib/python3.11/site-packages/torch/nn/modules/module.py", line 900, in _apply
    module._apply(fn)
  [Previous line repeated 2 more times]
  File "/root/miniconda3/envs/pangu/lib/python3.11/site-packages/torch/nn/modules/module.py", line 927, in _apply
    param_applied = fn(param)
                    ^^^^^^^^^
  File "/root/miniconda3/envs/pangu/lib/python3.11/site-packages/torch_npu/utils/_module.py", line 77, in convert
    return t.to(device, dtype if t.is_floating_point() or t.is_complex() else None, non_blocking)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
RuntimeError: NPU out of memory. Tried to allocate 130.00 MiB (NPU 0; 60.97 GiB total capacity; 5.55 GiB already allocated; 5.55 GiB current active; 24.34 MiB free; 5.61 GiB reserved in total by PyTorch) If reserved memory is >> allocated memory try setting max_split_size_mb to avoid fragmentation.

2025-11-07 10:34:08,970 - system_core - ERROR - ❌ 系统初始化失败: NPU out of memory. Tried to allocate 130.00 MiB (NPU 0; 60.97 GiB total capacity; 5.55 GiB already allocated; 5.55 GiB current active; 24.34 MiB free; 5.61 GiB reserved in total by PyTorch) If reserved memory is >> allocated memory try setting max_split_size_mb to avoid fragmentation.
2025-11-07 10:34:08,971 - system_core - ERROR - Traceback (most recent call last):
  File "/home/weitianyu/teach_system/system_core.py", line 72, in initialize
    self.qwen_model.load_model()
  File "/home/weitianyu/teach_system/models/llm_models.py", line 79, in load_model
    self.model = self.model.to(self.devices[0])
                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/root/miniconda3/envs/pangu/lib/python3.11/site-packages/transformers/modeling_utils.py", line 4110, in to
    return super().to(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/root/miniconda3/envs/pangu/lib/python3.11/site-packages/torch_npu/utils/_module.py", line 79, in to
    return self._apply(convert)
           ^^^^^^^^^^^^^^^^^^^^
  File "/root/miniconda3/envs/pangu/lib/python3.11/site-packages/torch/nn/modules/module.py", line 900, in _apply
    module._apply(fn)
  File "/root/miniconda3/envs/pangu/lib/python3.11/site-packages/torch/nn/modules/module.py", line 900, in _apply
    module._apply(fn)
  File "/root/miniconda3/envs/pangu/lib/python3.11/site-packages/torch/nn/modules/module.py", line 900, in _apply
    module._apply(fn)
  [Previous line repeated 2 more times]
  File "/root/miniconda3/envs/pangu/lib/python3.11/site-packages/torch/nn/modules/module.py", line 927, in _apply
    param_applied = fn(param)
                    ^^^^^^^^^
  File "/root/miniconda3/envs/pangu/lib/python3.11/site-packages/torch_npu/utils/_module.py", line 77, in convert
    return t.to(device, dtype if t.is_floating_point() or t.is_complex() else None, non_blocking)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
RuntimeError: NPU out of memory. Tried to allocate 130.00 MiB (NPU 0; 60.97 GiB total capacity; 5.55 GiB already allocated; 5.55 GiB current active; 24.34 MiB free; 5.61 GiB reserved in total by PyTorch) If reserved memory is >> allocated memory try setting max_split_size_mb to avoid fragmentation.

2025-11-07 10:34:08,972 - __main__ - ERROR - ❌ 系统运行出错: 系统初始化失败: NPU out of memory. Tried to allocate 130.00 MiB (NPU 0; 60.97 GiB total capacity; 5.55 GiB already allocated; 5.55 GiB current active; 24.34 MiB free; 5.61 GiB reserved in total by PyTorch) If reserved memory is >> allocated memory try setting max_split_size_mb to avoid fragmentation.
Traceback (most recent call last):
  File "/home/weitianyu/teach_system/system_core.py", line 72, in initialize
    self.qwen_model.load_model()
  File "/home/weitianyu/teach_system/models/llm_models.py", line 79, in load_model
    self.model = self.model.to(self.devices[0])
                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/root/miniconda3/envs/pangu/lib/python3.11/site-packages/transformers/modeling_utils.py", line 4110, in to
    return super().to(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/root/miniconda3/envs/pangu/lib/python3.11/site-packages/torch_npu/utils/_module.py", line 79, in to
    return self._apply(convert)
           ^^^^^^^^^^^^^^^^^^^^
  File "/root/miniconda3/envs/pangu/lib/python3.11/site-packages/torch/nn/modules/module.py", line 900, in _apply
    module._apply(fn)
  File "/root/miniconda3/envs/pangu/lib/python3.11/site-packages/torch/nn/modules/module.py", line 900, in _apply
    module._apply(fn)
  File "/root/miniconda3/envs/pangu/lib/python3.11/site-packages/torch/nn/modules/module.py", line 900, in _apply
    module._apply(fn)
  [Previous line repeated 2 more times]
  File "/root/miniconda3/envs/pangu/lib/python3.11/site-packages/torch/nn/modules/module.py", line 927, in _apply
    param_applied = fn(param)
                    ^^^^^^^^^
  File "/root/miniconda3/envs/pangu/lib/python3.11/site-packages/torch_npu/utils/_module.py", line 77, in convert
    return t.to(device, dtype if t.is_floating_point() or t.is_complex() else None, non_blocking)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
RuntimeError: NPU out of memory. Tried to allocate 130.00 MiB (NPU 0; 60.97 GiB total capacity; 5.55 GiB already allocated; 5.55 GiB current active; 24.34 MiB free; 5.61 GiB reserved in total by PyTorch) If reserved memory is >> allocated memory try setting max_split_size_mb to avoid fragmentation.

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/weitianyu/teach_system/main.py", line 93, in main
    system_core = create_system_core(config)
                  ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/weitianyu/teach_system/system_core.py", line 487, in create_system_core
    core.initialize()
  File "/home/weitianyu/teach_system/system_core.py", line 155, in initialize
    raise RuntimeError(f"系统初始化失败: {e}")
RuntimeError: 系统初始化失败: NPU out of memory. Tried to allocate 130.00 MiB (NPU 0; 60.97 GiB total capacity; 5.55 GiB already allocated; 5.55 GiB current active; 24.34 MiB free; 5.61 GiB reserved in total by PyTorch) If reserved memory is >> allocated memory try setting max_split_size_mb to avoid fragmentation.
2025-11-07 10:34:08,976 - __main__ - INFO - 👋 系统已关闭
2025-11-07 10:36:03,478 - __main__ - INFO - 🚀 系统启动中...
2025-11-07 10:36:03,479 - __main__ - INFO - ✅ 检测到盘古7B模型文件
2025-11-07 10:36:03,479 - __main__ - INFO - ✅ 检测到Qwen2.5-7B模型文件
2025-11-07 10:36:03,479 - __main__ - INFO - ✅ 检测到BGE嵌入模型文件
2025-11-07 10:36:03,479 - __main__ - INFO - ✅ 检测到题库文件
2025-11-07 10:36:03,479 - __main__ - INFO - ⚙️  正在初始化智能系统核心...
2025-11-07 10:36:03,480 - system_core - INFO - ✅ 智能教育系统核心初始化
2025-11-07 10:36:03,480 - system_core - INFO - 🔄 初始化系统组件...
2025-11-07 10:36:11,289 - models - INFO - ✅ LLM模型导入成功
2025-11-07 10:36:11,290 - models - ERROR - ❌ 嵌入模型导入失败: cannot import name 'LocalPanGuEmbedding' from 'models.embedding_model' (/home/weitianyu/teach_system/models/embedding_model.py)
2025-11-07 10:36:11,534 - knowledge_management.rag_engine - INFO - ✅ LightRAG已导入
2025-11-07 10:36:11,535 - system_core - INFO - 📚 初始化题库...
2025-11-07 10:36:11,536 - data_management.question_db - INFO - ✅ 加载题库成功: 49 道题目
2025-11-07 10:36:11,536 - data_management.question_db - INFO - ✅ 增强版题库初始化完成: /home/weitianyu/teach_system/data/question_database_2.json
2025-11-07 10:36:11,536 - system_core - INFO - 🔤 初始化BGE嵌入模型...
2025-11-07 10:36:11,536 - models.embedding_model - INFO - 初始化BGE-M3嵌入模型: /home/weitianyu/bge-small-zh-v1.5
2025-11-07 10:36:11,536 - system_core - INFO - 🤖 初始化Qwen2.5-7B模型（用于LightRAG）...
2025-11-07 10:36:11,536 - models.llm_models - INFO - 🆕 创建Qwen2.5-7B模型实例
2025-11-07 10:36:11,536 - models.llm_models - INFO - Qwen2.5-7B模型设备配置: ['cpu']
2025-11-07 10:36:11,536 - system_core - INFO - 📥 预加载Qwen模型...
2025-11-07 10:36:11,536 - models.llm_models - INFO - 🔄 正在加载Qwen2.5-7B模型: /home/weitianyu/qwen2.5-7B-Instruct
2025-11-07 10:36:16,012 - models.llm_models - INFO - ✅ Qwen2.5-7B模型加载成功，设备: cpu
2025-11-07 10:36:16,012 - system_core - INFO - 🧠 初始化LightRAG引擎...
2025-11-07 10:36:16,013 - knowledge_management.rag_engine - INFO - 初始化RAG引擎，工作目录: /home/weitianyu/teach_system/rag_storage
2025-11-07 10:36:16,013 - knowledge_management.rag_engine - INFO - 使用本地Qwen2.5-7B和BGE-small-zh-v1.5
2025-11-07 10:36:16,013 - system_core - INFO - ⚙️  异步初始化RAG...
2025-11-07 10:36:16,013 - knowledge_management.rag_engine - INFO - 🔄 初始化LightRAG...
2025-11-07 10:36:19,587 - knowledge_management.rag_engine - ERROR - ❌ RAG引擎初始化失败: 'function' object has no attribute 'embedding_dim'
2025-11-07 10:36:19,589 - knowledge_management.rag_engine - ERROR - Traceback (most recent call last):
  File "/home/weitianyu/teach_system/knowledge_management/rag_engine.py", line 77, in initialize
    self.rag = LightRAG(
               ^^^^^^^^^
  File "<string>", line 37, in __init__
  File "/root/miniconda3/envs/pangu/lib/python3.11/site-packages/lightrag/lightrag.py", line 396, in __post_init__
    self.entities_vdb: BaseVectorStorage = self.vector_db_storage_cls(  # type: ignore
                                           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/root/miniconda3/envs/pangu/lib/python3.11/site-packages/lightrag/utils.py", line 1323, in import_class
    return cls(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^
  File "<string>", line 8, in __init__
  File "/root/miniconda3/envs/pangu/lib/python3.11/site-packages/lightrag/kg/nano_vector_db_impl.py", line 50, in __post_init__
    self.embedding_func.embedding_dim,
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: 'function' object has no attribute 'embedding_dim'

2025-11-07 10:36:19,589 - system_core - ERROR - ❌ 系统初始化失败: 'function' object has no attribute 'embedding_dim'
2025-11-07 10:36:19,591 - system_core - ERROR - Traceback (most recent call last):
  File "/home/weitianyu/teach_system/system_core.py", line 87, in initialize
    loop.run_until_complete(self.rag_engine.initialize())
  File "/root/miniconda3/envs/pangu/lib/python3.11/asyncio/base_events.py", line 650, in run_until_complete
    return future.result()
           ^^^^^^^^^^^^^^^
  File "/home/weitianyu/teach_system/knowledge_management/rag_engine.py", line 77, in initialize
    self.rag = LightRAG(
               ^^^^^^^^^
  File "<string>", line 37, in __init__
  File "/root/miniconda3/envs/pangu/lib/python3.11/site-packages/lightrag/lightrag.py", line 396, in __post_init__
    self.entities_vdb: BaseVectorStorage = self.vector_db_storage_cls(  # type: ignore
                                           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/root/miniconda3/envs/pangu/lib/python3.11/site-packages/lightrag/utils.py", line 1323, in import_class
    return cls(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^
  File "<string>", line 8, in __init__
  File "/root/miniconda3/envs/pangu/lib/python3.11/site-packages/lightrag/kg/nano_vector_db_impl.py", line 50, in __post_init__
    self.embedding_func.embedding_dim,
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: 'function' object has no attribute 'embedding_dim'

2025-11-07 10:36:19,591 - __main__ - ERROR - ❌ 系统运行出错: 系统初始化失败: 'function' object has no attribute 'embedding_dim'
Traceback (most recent call last):
  File "/home/weitianyu/teach_system/system_core.py", line 87, in initialize
    loop.run_until_complete(self.rag_engine.initialize())
  File "/root/miniconda3/envs/pangu/lib/python3.11/asyncio/base_events.py", line 650, in run_until_complete
    return future.result()
           ^^^^^^^^^^^^^^^
  File "/home/weitianyu/teach_system/knowledge_management/rag_engine.py", line 77, in initialize
    self.rag = LightRAG(
               ^^^^^^^^^
  File "<string>", line 37, in __init__
  File "/root/miniconda3/envs/pangu/lib/python3.11/site-packages/lightrag/lightrag.py", line 396, in __post_init__
    self.entities_vdb: BaseVectorStorage = self.vector_db_storage_cls(  # type: ignore
                                           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/root/miniconda3/envs/pangu/lib/python3.11/site-packages/lightrag/utils.py", line 1323, in import_class
    return cls(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^
  File "<string>", line 8, in __init__
  File "/root/miniconda3/envs/pangu/lib/python3.11/site-packages/lightrag/kg/nano_vector_db_impl.py", line 50, in __post_init__
    self.embedding_func.embedding_dim,
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: 'function' object has no attribute 'embedding_dim'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/weitianyu/teach_system/main.py", line 93, in main
    system_core = create_system_core(config)
                  ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/weitianyu/teach_system/system_core.py", line 487, in create_system_core
    core.initialize()
  File "/home/weitianyu/teach_system/system_core.py", line 155, in initialize
    raise RuntimeError(f"系统初始化失败: {e}")
RuntimeError: 系统初始化失败: 'function' object has no attribute 'embedding_dim'
2025-11-07 10:36:19,595 - __main__ - INFO - 👋 系统已关闭
2025-11-07 10:39:35,737 - __main__ - INFO - 🚀 系统启动中...
2025-11-07 10:39:35,738 - __main__ - INFO - ✅ 检测到盘古7B模型文件
2025-11-07 10:39:35,738 - __main__ - INFO - ✅ 检测到Qwen2.5-7B模型文件
2025-11-07 10:39:35,738 - __main__ - INFO - ✅ 检测到BGE嵌入模型文件
2025-11-07 10:39:35,738 - __main__ - INFO - ✅ 检测到题库文件
2025-11-07 10:39:35,738 - __main__ - INFO - ⚙️  正在初始化智能系统核心...
2025-11-07 10:39:35,739 - system_core - INFO - ✅ 智能教育系统核心初始化
2025-11-07 10:39:35,739 - system_core - INFO - 🔄 初始化系统组件...
2025-11-07 10:39:43,518 - models - INFO - ✅ LLM模型导入成功
2025-11-07 10:39:43,519 - models - ERROR - ❌ 嵌入模型导入失败: cannot import name 'LocalPanGuEmbedding' from 'models.embedding_model' (/home/weitianyu/teach_system/models/embedding_model.py)
2025-11-07 10:39:43,764 - knowledge_management.rag_engine - INFO - ✅ LightRAG已导入
2025-11-07 10:39:43,764 - system_core - INFO - 📚 初始化题库...
2025-11-07 10:39:43,765 - data_management.question_db - INFO - ✅ 加载题库成功: 49 道题目
2025-11-07 10:39:43,765 - data_management.question_db - INFO - ✅ 增强版题库初始化完成: /home/weitianyu/teach_system/data/question_database_2.json
2025-11-07 10:39:43,765 - system_core - INFO - 🔤 初始化BGE嵌入模型...
2025-11-07 10:39:43,765 - models.embedding_model - INFO - 初始化BGE-M3嵌入模型: /home/weitianyu/bge-small-zh-v1.5
2025-11-07 10:39:43,765 - system_core - INFO - 🤖 初始化Qwen2.5-7B模型（用于LightRAG）...
2025-11-07 10:39:43,765 - models.llm_models - INFO - 🆕 创建Qwen2.5-7B模型实例
2025-11-07 10:39:43,765 - models.llm_models - INFO - Qwen2.5-7B模型设备配置: ['cpu']
2025-11-07 10:39:43,765 - system_core - INFO - 📥 预加载Qwen模型...
2025-11-07 10:39:43,766 - models.llm_models - INFO - 🔄 正在加载Qwen2.5-7B模型: /home/weitianyu/qwen2.5-7B-Instruct
2025-11-07 10:39:47,517 - models.llm_models - INFO - ✅ Qwen2.5-7B模型加载成功，设备: cpu
2025-11-07 10:39:47,517 - system_core - INFO - 🧠 初始化LightRAG引擎...
2025-11-07 10:39:47,517 - knowledge_management.rag_engine - INFO - 初始化RAG引擎，工作目录: /home/weitianyu/teach_system/rag_storage
2025-11-07 10:39:47,517 - knowledge_management.rag_engine - INFO - 使用本地Qwen2.5-7B和BGE-small-zh-v1.5
2025-11-07 10:39:47,517 - system_core - INFO - ⚙️  异步初始化RAG...
2025-11-07 10:39:47,518 - knowledge_management.rag_engine - INFO - 🔄 初始化LightRAG...
2025-11-07 10:39:51,100 - knowledge_management.rag_engine - ERROR - ❌ RAG引擎初始化失败: 'function' object has no attribute 'embedding_dim'
2025-11-07 10:39:51,103 - knowledge_management.rag_engine - ERROR - Traceback (most recent call last):
  File "/home/weitianyu/teach_system/knowledge_management/rag_engine.py", line 77, in initialize
    self.rag = LightRAG(
               ^^^^^^^^^
  File "<string>", line 37, in __init__
  File "/root/miniconda3/envs/pangu/lib/python3.11/site-packages/lightrag/lightrag.py", line 396, in __post_init__
    self.entities_vdb: BaseVectorStorage = self.vector_db_storage_cls(  # type: ignore
                                           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/root/miniconda3/envs/pangu/lib/python3.11/site-packages/lightrag/utils.py", line 1323, in import_class
    return cls(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^
  File "<string>", line 8, in __init__
  File "/root/miniconda3/envs/pangu/lib/python3.11/site-packages/lightrag/kg/nano_vector_db_impl.py", line 50, in __post_init__
    self.embedding_func.embedding_dim,
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: 'function' object has no attribute 'embedding_dim'

2025-11-07 10:39:51,103 - system_core - ERROR - ❌ 系统初始化失败: 'function' object has no attribute 'embedding_dim'
2025-11-07 10:39:51,105 - system_core - ERROR - Traceback (most recent call last):
  File "/home/weitianyu/teach_system/system_core.py", line 87, in initialize
    loop.run_until_complete(self.rag_engine.initialize())
  File "/root/miniconda3/envs/pangu/lib/python3.11/asyncio/base_events.py", line 650, in run_until_complete
    return future.result()
           ^^^^^^^^^^^^^^^
  File "/home/weitianyu/teach_system/knowledge_management/rag_engine.py", line 77, in initialize
    self.rag = LightRAG(
               ^^^^^^^^^
  File "<string>", line 37, in __init__
  File "/root/miniconda3/envs/pangu/lib/python3.11/site-packages/lightrag/lightrag.py", line 396, in __post_init__
    self.entities_vdb: BaseVectorStorage = self.vector_db_storage_cls(  # type: ignore
                                           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/root/miniconda3/envs/pangu/lib/python3.11/site-packages/lightrag/utils.py", line 1323, in import_class
    return cls(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^
  File "<string>", line 8, in __init__
  File "/root/miniconda3/envs/pangu/lib/python3.11/site-packages/lightrag/kg/nano_vector_db_impl.py", line 50, in __post_init__
    self.embedding_func.embedding_dim,
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: 'function' object has no attribute 'embedding_dim'

2025-11-07 10:39:51,105 - __main__ - ERROR - ❌ 系统运行出错: 系统初始化失败: 'function' object has no attribute 'embedding_dim'
Traceback (most recent call last):
  File "/home/weitianyu/teach_system/system_core.py", line 87, in initialize
    loop.run_until_complete(self.rag_engine.initialize())
  File "/root/miniconda3/envs/pangu/lib/python3.11/asyncio/base_events.py", line 650, in run_until_complete
    return future.result()
           ^^^^^^^^^^^^^^^
  File "/home/weitianyu/teach_system/knowledge_management/rag_engine.py", line 77, in initialize
    self.rag = LightRAG(
               ^^^^^^^^^
  File "<string>", line 37, in __init__
  File "/root/miniconda3/envs/pangu/lib/python3.11/site-packages/lightrag/lightrag.py", line 396, in __post_init__
    self.entities_vdb: BaseVectorStorage = self.vector_db_storage_cls(  # type: ignore
                                           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/root/miniconda3/envs/pangu/lib/python3.11/site-packages/lightrag/utils.py", line 1323, in import_class
    return cls(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^
  File "<string>", line 8, in __init__
  File "/root/miniconda3/envs/pangu/lib/python3.11/site-packages/lightrag/kg/nano_vector_db_impl.py", line 50, in __post_init__
    self.embedding_func.embedding_dim,
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: 'function' object has no attribute 'embedding_dim'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/weitianyu/teach_system/main.py", line 93, in main
    system_core = create_system_core(config)
                  ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/weitianyu/teach_system/system_core.py", line 487, in create_system_core
    core.initialize()
  File "/home/weitianyu/teach_system/system_core.py", line 155, in initialize
    raise RuntimeError(f"系统初始化失败: {e}")
RuntimeError: 系统初始化失败: 'function' object has no attribute 'embedding_dim'
2025-11-07 10:39:51,109 - __main__ - INFO - 👋 系统已关闭
2025-11-07 10:41:00,653 - __main__ - INFO - 🚀 系统启动中...
2025-11-07 10:41:00,653 - __main__ - INFO - ✅ 检测到盘古7B模型文件
2025-11-07 10:41:00,653 - __main__ - INFO - ✅ 检测到Qwen2.5-7B模型文件
2025-11-07 10:41:00,653 - __main__ - INFO - ✅ 检测到BGE嵌入模型文件
2025-11-07 10:41:00,653 - __main__ - INFO - ✅ 检测到题库文件
2025-11-07 10:41:00,654 - __main__ - INFO - ⚙️  正在初始化智能系统核心...
2025-11-07 10:41:00,654 - system_core - INFO - ✅ 智能教育系统核心初始化
2025-11-07 10:41:00,654 - system_core - INFO - 🔄 初始化系统组件...
2025-11-07 10:41:08,436 - models - INFO - ✅ LLM模型导入成功
2025-11-07 10:41:08,437 - models - ERROR - ❌ 嵌入模型导入失败: cannot import name 'LocalPanGuEmbedding' from 'models.embedding_model' (/home/weitianyu/teach_system/models/embedding_model.py)
2025-11-07 10:41:08,681 - knowledge_management.rag_engine - INFO - ✅ LightRAG已导入
2025-11-07 10:41:08,682 - system_core - INFO - 📚 初始化题库...
2025-11-07 10:41:08,682 - data_management.question_db - INFO - ✅ 加载题库成功: 49 道题目
2025-11-07 10:41:08,682 - data_management.question_db - INFO - ✅ 增强版题库初始化完成: /home/weitianyu/teach_system/data/question_database_2.json
2025-11-07 10:41:08,682 - system_core - INFO - 🔤 初始化BGE嵌入模型...
2025-11-07 10:41:08,683 - models.embedding_model - INFO - 初始化BGE-M3嵌入模型: /home/weitianyu/bge-small-zh-v1.5
2025-11-07 10:41:08,683 - models.embedding_model - INFO - 正在加载BGE-M3模型...
2025-11-07 10:41:10,089 - models.embedding_model - INFO - BGE-M3模型加载成功,设备: cpu
2025-11-07 10:41:10,089 - system_core - INFO - 🤖 初始化Qwen2.5-7B模型（用于LightRAG）...
2025-11-07 10:41:10,089 - models.llm_models - INFO - 🆕 创建Qwen2.5-7B模型实例
2025-11-07 10:41:10,089 - models.llm_models - INFO - Qwen2.5-7B模型设备配置: ['cpu']
2025-11-07 10:41:10,089 - system_core - INFO - 📥 预加载Qwen模型...
2025-11-07 10:41:10,089 - models.llm_models - INFO - 🔄 正在加载Qwen2.5-7B模型: /home/weitianyu/qwen2.5-7B-Instruct
2025-11-07 10:41:13,582 - models.llm_models - INFO - ✅ Qwen2.5-7B模型加载成功，设备: cpu
2025-11-07 10:41:13,582 - system_core - INFO - 🧠 初始化LightRAG引擎...
2025-11-07 10:41:13,582 - knowledge_management.rag_engine - INFO - 初始化RAG引擎，工作目录: /home/weitianyu/teach_system/rag_storage
2025-11-07 10:41:13,582 - knowledge_management.rag_engine - INFO - 使用本地Qwen2.5-7B和BGE-small-zh-v1.5
2025-11-07 10:41:13,582 - system_core - INFO - ⚙️  异步初始化RAG...
2025-11-07 10:41:13,583 - knowledge_management.rag_engine - INFO - 🔄 初始化LightRAG...
2025-11-07 10:41:17,396 - nano-vectordb - INFO - Init {'embedding_dim': 512, 'metric': 'cosine', 'storage_file': '/home/weitianyu/teach_system/rag_storage/vdb_entities.json'} 0 data
2025-11-07 10:41:17,396 - nano-vectordb - INFO - Init {'embedding_dim': 512, 'metric': 'cosine', 'storage_file': '/home/weitianyu/teach_system/rag_storage/vdb_relationships.json'} 0 data
2025-11-07 10:41:17,396 - nano-vectordb - INFO - Init {'embedding_dim': 512, 'metric': 'cosine', 'storage_file': '/home/weitianyu/teach_system/rag_storage/vdb_chunks.json'} 0 data
2025-11-07 10:41:17,400 - knowledge_management.rag_engine - INFO - ✅ RAG引擎初始化成功
2025-11-07 10:41:17,400 - system_core - INFO - ✅ RAG引擎初始化成功
2025-11-07 10:41:17,400 - system_core - INFO - 🔨 正在构建知识图谱...
2025-11-07 10:41:17,400 - knowledge_management.rag_engine - INFO - 初始化题库知识图谱管理器
2025-11-07 10:41:17,400 - knowledge_management.rag_engine - INFO - 🔨 开始构建知识图谱，题目数: 49
2025-11-07 10:41:17,400 - knowledge_management.rag_engine - INFO - 📝 正在将题目插入知识图谱...
2025-11-07 10:41:17,401 - knowledge_management.rag_engine - INFO - 📝 正在插入 49 个文档...
2025-11-07 10:41:17,401 - knowledge_management.rag_engine - ERROR -   插入文档 1 失败: This event loop is already running
2025-11-07 10:41:17,401 - knowledge_management.rag_engine - ERROR -   插入文档 2 失败: This event loop is already running
2025-11-07 10:41:17,401 - knowledge_management.rag_engine - ERROR -   插入文档 3 失败: This event loop is already running
2025-11-07 10:41:17,401 - knowledge_management.rag_engine - ERROR -   插入文档 4 失败: This event loop is already running
2025-11-07 10:41:17,402 - knowledge_management.rag_engine - ERROR -   插入文档 5 失败: This event loop is already running
2025-11-07 10:41:17,402 - knowledge_management.rag_engine - ERROR -   插入文档 6 失败: This event loop is already running
2025-11-07 10:41:17,402 - knowledge_management.rag_engine - ERROR -   插入文档 7 失败: This event loop is already running
2025-11-07 10:41:17,402 - knowledge_management.rag_engine - ERROR -   插入文档 8 失败: This event loop is already running
2025-11-07 10:41:17,402 - knowledge_management.rag_engine - ERROR -   插入文档 9 失败: This event loop is already running
2025-11-07 10:41:17,402 - knowledge_management.rag_engine - ERROR -   插入文档 10 失败: This event loop is already running
2025-11-07 10:41:17,402 - knowledge_management.rag_engine - ERROR -   插入文档 11 失败: This event loop is already running
2025-11-07 10:41:17,402 - knowledge_management.rag_engine - ERROR -   插入文档 12 失败: This event loop is already running
2025-11-07 10:41:17,402 - knowledge_management.rag_engine - ERROR -   插入文档 13 失败: This event loop is already running
2025-11-07 10:41:17,402 - knowledge_management.rag_engine - ERROR -   插入文档 14 失败: This event loop is already running
2025-11-07 10:41:17,403 - knowledge_management.rag_engine - ERROR -   插入文档 15 失败: This event loop is already running
2025-11-07 10:41:17,403 - knowledge_management.rag_engine - ERROR -   插入文档 16 失败: This event loop is already running
2025-11-07 10:41:17,403 - knowledge_management.rag_engine - ERROR -   插入文档 17 失败: This event loop is already running
2025-11-07 10:41:17,403 - knowledge_management.rag_engine - ERROR -   插入文档 18 失败: This event loop is already running
2025-11-07 10:41:17,403 - knowledge_management.rag_engine - ERROR -   插入文档 19 失败: This event loop is already running
2025-11-07 10:41:17,403 - knowledge_management.rag_engine - ERROR -   插入文档 20 失败: This event loop is already running
2025-11-07 10:41:17,403 - knowledge_management.rag_engine - ERROR -   插入文档 21 失败: This event loop is already running
2025-11-07 10:41:17,403 - knowledge_management.rag_engine - ERROR -   插入文档 22 失败: This event loop is already running
2025-11-07 10:41:17,403 - knowledge_management.rag_engine - ERROR -   插入文档 23 失败: This event loop is already running
2025-11-07 10:41:17,403 - knowledge_management.rag_engine - ERROR -   插入文档 24 失败: This event loop is already running
2025-11-07 10:41:17,403 - knowledge_management.rag_engine - ERROR -   插入文档 25 失败: This event loop is already running
2025-11-07 10:41:17,404 - knowledge_management.rag_engine - ERROR -   插入文档 26 失败: This event loop is already running
2025-11-07 10:41:17,404 - knowledge_management.rag_engine - ERROR -   插入文档 27 失败: This event loop is already running
2025-11-07 10:41:17,404 - knowledge_management.rag_engine - ERROR -   插入文档 28 失败: This event loop is already running
2025-11-07 10:41:17,404 - knowledge_management.rag_engine - ERROR -   插入文档 29 失败: This event loop is already running
2025-11-07 10:41:17,404 - knowledge_management.rag_engine - ERROR -   插入文档 30 失败: This event loop is already running
2025-11-07 10:41:17,404 - knowledge_management.rag_engine - ERROR -   插入文档 31 失败: This event loop is already running
2025-11-07 10:41:17,404 - knowledge_management.rag_engine - ERROR -   插入文档 32 失败: This event loop is already running
2025-11-07 10:41:17,404 - knowledge_management.rag_engine - ERROR -   插入文档 33 失败: This event loop is already running
2025-11-07 10:41:17,404 - knowledge_management.rag_engine - ERROR -   插入文档 34 失败: This event loop is already running
2025-11-07 10:41:17,404 - knowledge_management.rag_engine - ERROR -   插入文档 35 失败: This event loop is already running
2025-11-07 10:41:17,404 - knowledge_management.rag_engine - ERROR -   插入文档 36 失败: This event loop is already running
2025-11-07 10:41:17,404 - knowledge_management.rag_engine - ERROR -   插入文档 37 失败: This event loop is already running
2025-11-07 10:41:17,405 - knowledge_management.rag_engine - ERROR -   插入文档 38 失败: This event loop is already running
2025-11-07 10:41:17,405 - knowledge_management.rag_engine - ERROR -   插入文档 39 失败: This event loop is already running
2025-11-07 10:41:17,405 - knowledge_management.rag_engine - ERROR -   插入文档 40 失败: This event loop is already running
2025-11-07 10:41:17,405 - knowledge_management.rag_engine - ERROR -   插入文档 41 失败: This event loop is already running
2025-11-07 10:41:17,405 - knowledge_management.rag_engine - ERROR -   插入文档 42 失败: This event loop is already running
2025-11-07 10:41:17,405 - knowledge_management.rag_engine - ERROR -   插入文档 43 失败: This event loop is already running
2025-11-07 10:41:17,405 - knowledge_management.rag_engine - ERROR -   插入文档 44 失败: This event loop is already running
2025-11-07 10:41:17,405 - knowledge_management.rag_engine - ERROR -   插入文档 45 失败: This event loop is already running
2025-11-07 10:41:17,405 - knowledge_management.rag_engine - ERROR -   插入文档 46 失败: This event loop is already running
2025-11-07 10:41:17,405 - knowledge_management.rag_engine - ERROR -   插入文档 47 失败: This event loop is already running
2025-11-07 10:41:17,405 - knowledge_management.rag_engine - ERROR -   插入文档 48 失败: This event loop is already running
2025-11-07 10:41:17,406 - knowledge_management.rag_engine - ERROR -   插入文档 49 失败: This event loop is already running
2025-11-07 10:41:17,406 - knowledge_management.rag_engine - INFO - ✅ 文档插入完成
2025-11-07 10:41:17,406 - knowledge_management.rag_engine - INFO - ✅ 知识图谱构建完成，已处理 49 道题目
2025-11-07 10:41:17,406 - system_core - INFO - ✅ 知识图谱构建完成
2025-11-07 10:41:17,406 - system_core - INFO - 🚀 初始化盘古7B模型...
2025-11-07 10:41:17,406 - models.llm_models - INFO - 🆕 创建盘古7B模型实例
2025-11-07 10:41:17,407 - models.llm_models - INFO - ✅ 检测到 8 个NPU设备
2025-11-07 10:41:17,407 - models.llm_models - INFO - 📍 盘古7B将使用指定设备: npu:0
2025-11-07 10:41:25,616 - models.llm_models - INFO -   NPU 0: Ascend910B2, 总显存: 60.97 GB
2025-11-07 10:41:25,617 - models.llm_models - INFO -   NPU 1: Ascend910B2, 总显存: 60.97 GB
2025-11-07 10:41:25,617 - models.llm_models - INFO -   NPU 2: Ascend910B2, 总显存: 60.97 GB
2025-11-07 10:41:25,617 - models.llm_models - INFO -   NPU 3: Ascend910B2, 总显存: 60.97 GB
2025-11-07 10:41:25,618 - models.llm_models - INFO -   NPU 4: Ascend910B2, 总显存: 60.97 GB
2025-11-07 10:41:25,618 - models.llm_models - INFO -   NPU 5: Ascend910B2, 总显存: 60.97 GB
2025-11-07 10:41:25,618 - models.llm_models - INFO -   NPU 6: Ascend910B2, 总显存: 60.97 GB
2025-11-07 10:41:25,619 - models.llm_models - INFO -   NPU 7: Ascend910B2, 总显存: 60.97 GB
2025-11-07 10:41:25,619 - models.llm_models - INFO - 盘古7B模型设备配置: ['npu:0']
2025-11-07 10:41:25,619 - system_core - INFO - 📥 预加载盘古7B模型...
2025-11-07 10:41:25,619 - models.llm_models - INFO - 🔄 正在加载盘古7B模型: /opt/pangu/openPangu-Embedded-7B-V1.1
2025-11-07 10:41:26,700 - models.llm_models - INFO - 📍 使用单NPU模式: npu:0
2025-11-07 10:41:26,805 - datasets - INFO - PyTorch version 2.5.1 available.
2025-11-07 10:41:30,423 - models.llm_models - ERROR - ❌ 盘古7B模型加载失败: NPU out of memory. Tried to allocate 102.00 MiB (NPU 0; 60.97 GiB total capacity; 5.43 GiB already allocated; 5.43 GiB current active; 21.05 MiB free; 5.59 GiB reserved in total by PyTorch) If reserved memory is >> allocated memory try setting max_split_size_mb to avoid fragmentation.
2025-11-07 10:41:30,428 - models.llm_models - ERROR - Traceback (most recent call last):
  File "/home/weitianyu/teach_system/models/llm_models.py", line 260, in load_model
    self.model = self.model.to(self.devices[0])
                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/root/miniconda3/envs/pangu/lib/python3.11/site-packages/transformers/modeling_utils.py", line 4110, in to
    return super().to(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/root/miniconda3/envs/pangu/lib/python3.11/site-packages/torch_npu/contrib/transfer_to_npu.py", line 161, in decorated
    return fn(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^
  File "/root/miniconda3/envs/pangu/lib/python3.11/site-packages/torch_npu/utils/_module.py", line 79, in to
    return self._apply(convert)
           ^^^^^^^^^^^^^^^^^^^^
  File "/root/miniconda3/envs/pangu/lib/python3.11/site-packages/torch/nn/modules/module.py", line 900, in _apply
    module._apply(fn)
  File "/root/miniconda3/envs/pangu/lib/python3.11/site-packages/torch/nn/modules/module.py", line 900, in _apply
    module._apply(fn)
  File "/root/miniconda3/envs/pangu/lib/python3.11/site-packages/torch/nn/modules/module.py", line 900, in _apply
    module._apply(fn)
  [Previous line repeated 2 more times]
  File "/root/miniconda3/envs/pangu/lib/python3.11/site-packages/torch/nn/modules/module.py", line 927, in _apply
    param_applied = fn(param)
                    ^^^^^^^^^
  File "/root/miniconda3/envs/pangu/lib/python3.11/site-packages/torch_npu/utils/_module.py", line 77, in convert
    return t.to(device, dtype if t.is_floating_point() or t.is_complex() else None, non_blocking)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/root/miniconda3/envs/pangu/lib/python3.11/site-packages/torch_npu/contrib/transfer_to_npu.py", line 161, in decorated
    return fn(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^
RuntimeError: NPU out of memory. Tried to allocate 102.00 MiB (NPU 0; 60.97 GiB total capacity; 5.43 GiB already allocated; 5.43 GiB current active; 21.05 MiB free; 5.59 GiB reserved in total by PyTorch) If reserved memory is >> allocated memory try setting max_split_size_mb to avoid fragmentation.

2025-11-07 10:41:30,428 - system_core - ERROR - ❌ 系统初始化失败: NPU out of memory. Tried to allocate 102.00 MiB (NPU 0; 60.97 GiB total capacity; 5.43 GiB already allocated; 5.43 GiB current active; 21.05 MiB free; 5.59 GiB reserved in total by PyTorch) If reserved memory is >> allocated memory try setting max_split_size_mb to avoid fragmentation.
2025-11-07 10:41:30,429 - system_core - ERROR - Traceback (most recent call last):
  File "/home/weitianyu/teach_system/system_core.py", line 118, in initialize
    self.pangu_model.load_model()
  File "/home/weitianyu/teach_system/models/llm_models.py", line 260, in load_model
    self.model = self.model.to(self.devices[0])
                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/root/miniconda3/envs/pangu/lib/python3.11/site-packages/transformers/modeling_utils.py", line 4110, in to
    return super().to(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/root/miniconda3/envs/pangu/lib/python3.11/site-packages/torch_npu/contrib/transfer_to_npu.py", line 161, in decorated
    return fn(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^
  File "/root/miniconda3/envs/pangu/lib/python3.11/site-packages/torch_npu/utils/_module.py", line 79, in to
    return self._apply(convert)
           ^^^^^^^^^^^^^^^^^^^^
  File "/root/miniconda3/envs/pangu/lib/python3.11/site-packages/torch/nn/modules/module.py", line 900, in _apply
    module._apply(fn)
  File "/root/miniconda3/envs/pangu/lib/python3.11/site-packages/torch/nn/modules/module.py", line 900, in _apply
    module._apply(fn)
  File "/root/miniconda3/envs/pangu/lib/python3.11/site-packages/torch/nn/modules/module.py", line 900, in _apply
    module._apply(fn)
  [Previous line repeated 2 more times]
  File "/root/miniconda3/envs/pangu/lib/python3.11/site-packages/torch/nn/modules/module.py", line 927, in _apply
    param_applied = fn(param)
                    ^^^^^^^^^
  File "/root/miniconda3/envs/pangu/lib/python3.11/site-packages/torch_npu/utils/_module.py", line 77, in convert
    return t.to(device, dtype if t.is_floating_point() or t.is_complex() else None, non_blocking)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/root/miniconda3/envs/pangu/lib/python3.11/site-packages/torch_npu/contrib/transfer_to_npu.py", line 161, in decorated
    return fn(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^
RuntimeError: NPU out of memory. Tried to allocate 102.00 MiB (NPU 0; 60.97 GiB total capacity; 5.43 GiB already allocated; 5.43 GiB current active; 21.05 MiB free; 5.59 GiB reserved in total by PyTorch) If reserved memory is >> allocated memory try setting max_split_size_mb to avoid fragmentation.

2025-11-07 10:41:30,430 - __main__ - ERROR - ❌ 系统运行出错: 系统初始化失败: NPU out of memory. Tried to allocate 102.00 MiB (NPU 0; 60.97 GiB total capacity; 5.43 GiB already allocated; 5.43 GiB current active; 21.05 MiB free; 5.59 GiB reserved in total by PyTorch) If reserved memory is >> allocated memory try setting max_split_size_mb to avoid fragmentation.
Traceback (most recent call last):
  File "/home/weitianyu/teach_system/system_core.py", line 118, in initialize
    self.pangu_model.load_model()
  File "/home/weitianyu/teach_system/models/llm_models.py", line 260, in load_model
    self.model = self.model.to(self.devices[0])
                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/root/miniconda3/envs/pangu/lib/python3.11/site-packages/transformers/modeling_utils.py", line 4110, in to
    return super().to(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/root/miniconda3/envs/pangu/lib/python3.11/site-packages/torch_npu/contrib/transfer_to_npu.py", line 161, in decorated
    return fn(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^
  File "/root/miniconda3/envs/pangu/lib/python3.11/site-packages/torch_npu/utils/_module.py", line 79, in to
    return self._apply(convert)
           ^^^^^^^^^^^^^^^^^^^^
  File "/root/miniconda3/envs/pangu/lib/python3.11/site-packages/torch/nn/modules/module.py", line 900, in _apply
    module._apply(fn)
  File "/root/miniconda3/envs/pangu/lib/python3.11/site-packages/torch/nn/modules/module.py", line 900, in _apply
    module._apply(fn)
  File "/root/miniconda3/envs/pangu/lib/python3.11/site-packages/torch/nn/modules/module.py", line 900, in _apply
    module._apply(fn)
  [Previous line repeated 2 more times]
  File "/root/miniconda3/envs/pangu/lib/python3.11/site-packages/torch/nn/modules/module.py", line 927, in _apply
    param_applied = fn(param)
                    ^^^^^^^^^
  File "/root/miniconda3/envs/pangu/lib/python3.11/site-packages/torch_npu/utils/_module.py", line 77, in convert
    return t.to(device, dtype if t.is_floating_point() or t.is_complex() else None, non_blocking)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/root/miniconda3/envs/pangu/lib/python3.11/site-packages/torch_npu/contrib/transfer_to_npu.py", line 161, in decorated
    return fn(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^
RuntimeError: NPU out of memory. Tried to allocate 102.00 MiB (NPU 0; 60.97 GiB total capacity; 5.43 GiB already allocated; 5.43 GiB current active; 21.05 MiB free; 5.59 GiB reserved in total by PyTorch) If reserved memory is >> allocated memory try setting max_split_size_mb to avoid fragmentation.

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/weitianyu/teach_system/main.py", line 93, in main
    system_core = create_system_core(config)
                  ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/weitianyu/teach_system/system_core.py", line 497, in create_system_core
    core.initialize()
  File "/home/weitianyu/teach_system/system_core.py", line 165, in initialize
    raise RuntimeError(f"系统初始化失败: {e}")
RuntimeError: 系统初始化失败: NPU out of memory. Tried to allocate 102.00 MiB (NPU 0; 60.97 GiB total capacity; 5.43 GiB already allocated; 5.43 GiB current active; 21.05 MiB free; 5.59 GiB reserved in total by PyTorch) If reserved memory is >> allocated memory try setting max_split_size_mb to avoid fragmentation.
2025-11-07 10:41:30,434 - __main__ - INFO - 👋 系统已关闭
2025-11-07 10:43:06,896 - __main__ - INFO - 🚀 系统启动中...
2025-11-07 10:43:06,896 - __main__ - INFO - ✅ 检测到盘古7B模型文件
2025-11-07 10:43:06,896 - __main__ - INFO - ✅ 检测到Qwen2.5-7B模型文件
2025-11-07 10:43:06,896 - __main__ - INFO - ✅ 检测到BGE嵌入模型文件
2025-11-07 10:43:06,896 - __main__ - INFO - ✅ 检测到题库文件
2025-11-07 10:43:06,897 - __main__ - INFO - ⚙️  正在初始化智能系统核心...
2025-11-07 10:43:06,897 - system_core - INFO - ✅ 智能教育系统核心初始化
2025-11-07 10:43:06,897 - system_core - INFO - 🔄 初始化系统组件...
2025-11-07 10:43:14,634 - models - INFO - ✅ LLM模型导入成功
2025-11-07 10:43:14,635 - models - ERROR - ❌ 嵌入模型导入失败: cannot import name 'LocalPanGuEmbedding' from 'models.embedding_model' (/home/weitianyu/teach_system/models/embedding_model.py)
2025-11-07 10:43:14,880 - knowledge_management.rag_engine - INFO - ✅ LightRAG已导入
2025-11-07 10:43:14,880 - system_core - INFO - 📚 初始化题库...
2025-11-07 10:43:14,881 - data_management.question_db - INFO - ✅ 加载题库成功: 49 道题目
2025-11-07 10:43:14,881 - data_management.question_db - INFO - ✅ 增强版题库初始化完成: /home/weitianyu/teach_system/data/question_database_2.json
2025-11-07 10:43:14,881 - system_core - INFO - 🔤 初始化BGE嵌入模型...
2025-11-07 10:43:14,881 - models.embedding_model - INFO - 初始化BGE-M3嵌入模型: /home/weitianyu/bge-small-zh-v1.5
2025-11-07 10:43:14,882 - models.embedding_model - INFO - 正在加载BGE-M3模型...
2025-11-07 10:43:16,291 - models.embedding_model - INFO - BGE-M3模型加载成功,设备: cpu
2025-11-07 10:43:16,292 - system_core - INFO - 🚀 初始化盘古7B模型（NPU:0）...
2025-11-07 10:43:16,292 - models.llm_models - INFO - 🆕 创建盘古7B模型实例
2025-11-07 10:43:16,292 - models.llm_models - INFO - ✅ 检测到 8 个NPU设备
2025-11-07 10:43:16,292 - models.llm_models - INFO - 📍 盘古7B将使用指定设备: npu:0
2025-11-07 10:43:24,281 - models.llm_models - INFO -   NPU 0: Ascend910B2, 总显存: 60.97 GB
2025-11-07 10:43:24,282 - models.llm_models - INFO -   NPU 1: Ascend910B2, 总显存: 60.97 GB
2025-11-07 10:43:24,283 - models.llm_models - INFO -   NPU 2: Ascend910B2, 总显存: 60.97 GB
2025-11-07 10:43:24,283 - models.llm_models - INFO -   NPU 3: Ascend910B2, 总显存: 60.97 GB
2025-11-07 10:43:24,283 - models.llm_models - INFO -   NPU 4: Ascend910B2, 总显存: 60.97 GB
2025-11-07 10:43:24,284 - models.llm_models - INFO -   NPU 5: Ascend910B2, 总显存: 60.97 GB
2025-11-07 10:43:24,284 - models.llm_models - INFO -   NPU 6: Ascend910B2, 总显存: 60.97 GB
2025-11-07 10:43:24,284 - models.llm_models - INFO -   NPU 7: Ascend910B2, 总显存: 60.97 GB
2025-11-07 10:43:24,285 - models.llm_models - INFO - 盘古7B模型设备配置: ['npu:0']
2025-11-07 10:43:24,285 - system_core - INFO - 📥 预加载盘古7B模型...
2025-11-07 10:43:24,285 - models.llm_models - INFO - 🔄 正在加载盘古7B模型: /opt/pangu/openPangu-Embedded-7B-V1.1
2025-11-07 10:43:25,360 - models.llm_models - INFO - 📍 使用单NPU模式: npu:0
2025-11-07 10:43:26,111 - datasets - INFO - PyTorch version 2.5.1 available.
2025-11-07 10:43:29,701 - models.llm_models - ERROR - ❌ 盘古7B模型加载失败: NPU out of memory. Tried to allocate 102.00 MiB (NPU 0; 60.97 GiB total capacity; 5.43 GiB already allocated; 5.43 GiB current active; 20.97 MiB free; 5.59 GiB reserved in total by PyTorch) If reserved memory is >> allocated memory try setting max_split_size_mb to avoid fragmentation.
2025-11-07 10:43:29,705 - models.llm_models - ERROR - Traceback (most recent call last):
  File "/home/weitianyu/teach_system/models/llm_models.py", line 260, in load_model
    self.model = self.model.to(self.devices[0])
                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/root/miniconda3/envs/pangu/lib/python3.11/site-packages/transformers/modeling_utils.py", line 4110, in to
    return super().to(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/root/miniconda3/envs/pangu/lib/python3.11/site-packages/torch_npu/contrib/transfer_to_npu.py", line 161, in decorated
    return fn(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^
  File "/root/miniconda3/envs/pangu/lib/python3.11/site-packages/torch_npu/utils/_module.py", line 79, in to
    return self._apply(convert)
           ^^^^^^^^^^^^^^^^^^^^
  File "/root/miniconda3/envs/pangu/lib/python3.11/site-packages/torch/nn/modules/module.py", line 900, in _apply
    module._apply(fn)
  File "/root/miniconda3/envs/pangu/lib/python3.11/site-packages/torch/nn/modules/module.py", line 900, in _apply
    module._apply(fn)
  File "/root/miniconda3/envs/pangu/lib/python3.11/site-packages/torch/nn/modules/module.py", line 900, in _apply
    module._apply(fn)
  [Previous line repeated 2 more times]
  File "/root/miniconda3/envs/pangu/lib/python3.11/site-packages/torch/nn/modules/module.py", line 927, in _apply
    param_applied = fn(param)
                    ^^^^^^^^^
  File "/root/miniconda3/envs/pangu/lib/python3.11/site-packages/torch_npu/utils/_module.py", line 77, in convert
    return t.to(device, dtype if t.is_floating_point() or t.is_complex() else None, non_blocking)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/root/miniconda3/envs/pangu/lib/python3.11/site-packages/torch_npu/contrib/transfer_to_npu.py", line 161, in decorated
    return fn(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^
RuntimeError: NPU out of memory. Tried to allocate 102.00 MiB (NPU 0; 60.97 GiB total capacity; 5.43 GiB already allocated; 5.43 GiB current active; 20.97 MiB free; 5.59 GiB reserved in total by PyTorch) If reserved memory is >> allocated memory try setting max_split_size_mb to avoid fragmentation.

2025-11-07 10:43:29,706 - system_core - ERROR - ❌ 系统初始化失败: NPU out of memory. Tried to allocate 102.00 MiB (NPU 0; 60.97 GiB total capacity; 5.43 GiB already allocated; 5.43 GiB current active; 20.97 MiB free; 5.59 GiB reserved in total by PyTorch) If reserved memory is >> allocated memory try setting max_split_size_mb to avoid fragmentation.
2025-11-07 10:43:29,707 - system_core - ERROR - Traceback (most recent call last):
  File "/home/weitianyu/teach_system/system_core.py", line 81, in initialize
    self.pangu_model.load_model()
  File "/home/weitianyu/teach_system/models/llm_models.py", line 260, in load_model
    self.model = self.model.to(self.devices[0])
                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/root/miniconda3/envs/pangu/lib/python3.11/site-packages/transformers/modeling_utils.py", line 4110, in to
    return super().to(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/root/miniconda3/envs/pangu/lib/python3.11/site-packages/torch_npu/contrib/transfer_to_npu.py", line 161, in decorated
    return fn(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^
  File "/root/miniconda3/envs/pangu/lib/python3.11/site-packages/torch_npu/utils/_module.py", line 79, in to
    return self._apply(convert)
           ^^^^^^^^^^^^^^^^^^^^
  File "/root/miniconda3/envs/pangu/lib/python3.11/site-packages/torch/nn/modules/module.py", line 900, in _apply
    module._apply(fn)
  File "/root/miniconda3/envs/pangu/lib/python3.11/site-packages/torch/nn/modules/module.py", line 900, in _apply
    module._apply(fn)
  File "/root/miniconda3/envs/pangu/lib/python3.11/site-packages/torch/nn/modules/module.py", line 900, in _apply
    module._apply(fn)
  [Previous line repeated 2 more times]
  File "/root/miniconda3/envs/pangu/lib/python3.11/site-packages/torch/nn/modules/module.py", line 927, in _apply
    param_applied = fn(param)
                    ^^^^^^^^^
  File "/root/miniconda3/envs/pangu/lib/python3.11/site-packages/torch_npu/utils/_module.py", line 77, in convert
    return t.to(device, dtype if t.is_floating_point() or t.is_complex() else None, non_blocking)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/root/miniconda3/envs/pangu/lib/python3.11/site-packages/torch_npu/contrib/transfer_to_npu.py", line 161, in decorated
    return fn(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^
RuntimeError: NPU out of memory. Tried to allocate 102.00 MiB (NPU 0; 60.97 GiB total capacity; 5.43 GiB already allocated; 5.43 GiB current active; 20.97 MiB free; 5.59 GiB reserved in total by PyTorch) If reserved memory is >> allocated memory try setting max_split_size_mb to avoid fragmentation.

2025-11-07 10:43:29,707 - __main__ - ERROR - ❌ 系统运行出错: 系统初始化失败: NPU out of memory. Tried to allocate 102.00 MiB (NPU 0; 60.97 GiB total capacity; 5.43 GiB already allocated; 5.43 GiB current active; 20.97 MiB free; 5.59 GiB reserved in total by PyTorch) If reserved memory is >> allocated memory try setting max_split_size_mb to avoid fragmentation.
Traceback (most recent call last):
  File "/home/weitianyu/teach_system/system_core.py", line 81, in initialize
    self.pangu_model.load_model()
  File "/home/weitianyu/teach_system/models/llm_models.py", line 260, in load_model
    self.model = self.model.to(self.devices[0])
                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/root/miniconda3/envs/pangu/lib/python3.11/site-packages/transformers/modeling_utils.py", line 4110, in to
    return super().to(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/root/miniconda3/envs/pangu/lib/python3.11/site-packages/torch_npu/contrib/transfer_to_npu.py", line 161, in decorated
    return fn(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^
  File "/root/miniconda3/envs/pangu/lib/python3.11/site-packages/torch_npu/utils/_module.py", line 79, in to
    return self._apply(convert)
           ^^^^^^^^^^^^^^^^^^^^
  File "/root/miniconda3/envs/pangu/lib/python3.11/site-packages/torch/nn/modules/module.py", line 900, in _apply
    module._apply(fn)
  File "/root/miniconda3/envs/pangu/lib/python3.11/site-packages/torch/nn/modules/module.py", line 900, in _apply
    module._apply(fn)
  File "/root/miniconda3/envs/pangu/lib/python3.11/site-packages/torch/nn/modules/module.py", line 900, in _apply
    module._apply(fn)
  [Previous line repeated 2 more times]
  File "/root/miniconda3/envs/pangu/lib/python3.11/site-packages/torch/nn/modules/module.py", line 927, in _apply
    param_applied = fn(param)
                    ^^^^^^^^^
  File "/root/miniconda3/envs/pangu/lib/python3.11/site-packages/torch_npu/utils/_module.py", line 77, in convert
    return t.to(device, dtype if t.is_floating_point() or t.is_complex() else None, non_blocking)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/root/miniconda3/envs/pangu/lib/python3.11/site-packages/torch_npu/contrib/transfer_to_npu.py", line 161, in decorated
    return fn(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^
RuntimeError: NPU out of memory. Tried to allocate 102.00 MiB (NPU 0; 60.97 GiB total capacity; 5.43 GiB already allocated; 5.43 GiB current active; 20.97 MiB free; 5.59 GiB reserved in total by PyTorch) If reserved memory is >> allocated memory try setting max_split_size_mb to avoid fragmentation.

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/weitianyu/teach_system/main.py", line 93, in main
    system_core = create_system_core(config)
                  ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/weitianyu/teach_system/system_core.py", line 507, in create_system_core
    core.initialize()
  File "/home/weitianyu/teach_system/system_core.py", line 175, in initialize
    raise RuntimeError(f"系统初始化失败: {e}")
RuntimeError: 系统初始化失败: NPU out of memory. Tried to allocate 102.00 MiB (NPU 0; 60.97 GiB total capacity; 5.43 GiB already allocated; 5.43 GiB current active; 20.97 MiB free; 5.59 GiB reserved in total by PyTorch) If reserved memory is >> allocated memory try setting max_split_size_mb to avoid fragmentation.
2025-11-07 10:43:29,712 - __main__ - INFO - 👋 系统已关闭
2025-11-07 10:47:49,183 - __main__ - INFO - 🚀 系统启动中...
2025-11-07 10:47:49,183 - __main__ - INFO - ✅ 检测到盘古7B模型文件
2025-11-07 10:47:49,183 - __main__ - INFO - ✅ 检测到题库文件
2025-11-07 10:47:49,184 - __main__ - ERROR - ❌ 系统运行出错: 'model'
Traceback (most recent call last):
  File "/home/weitianyu/teach_system/main.py", line 62, in main
    print(f"   - 模型: {config.SYSTEM_INFO['model']}")
                      ~~~~~~~~~~~~~~~~~~^^^^^^^^^
KeyError: 'model'
2025-11-07 10:47:49,184 - __main__ - INFO - 👋 系统已关闭
2025-11-07 10:53:09,867 - __main__ - INFO - 🚀 系统启动中...
2025-11-07 10:53:09,867 - __main__ - INFO - ✅ 检测到盘古7B模型文件
2025-11-07 10:53:09,867 - __main__ - INFO - ✅ 检测到题库文件
2025-11-07 10:53:09,867 - __main__ - ERROR - ❌ 系统运行出错: 'model'
Traceback (most recent call last):
  File "/home/weitianyu/teach_system/main.py", line 62, in main
    print(f"   - 模型: {config.SYSTEM_INFO['model']}")
                      ~~~~~~~~~~~~~~~~~~^^^^^^^^^
KeyError: 'model'
2025-11-07 10:53:09,868 - __main__ - INFO - 👋 系统已关闭
2025-11-07 10:59:29,134 - __main__ - INFO - 🚀 系统启动中...
2025-11-07 10:59:29,134 - __main__ - INFO - ✅ 检测到盘古7B模型文件
2025-11-07 10:59:29,134 - __main__ - INFO - ✅ 检测到题库文件
2025-11-07 10:59:29,135 - __main__ - ERROR - ❌ 系统运行出错: 'model'
Traceback (most recent call last):
  File "/home/weitianyu/teach_system/main.py", line 62, in main
    print(f"   - 模型: {config.SYSTEM_INFO['model']}")
                      ~~~~~~~~~~~~~~~~~~^^^^^^^^^
KeyError: 'model'
2025-11-07 10:59:29,135 - __main__ - INFO - 👋 系统已关闭
2025-11-07 11:05:49,834 - __main__ - INFO - 🚀 系统启动中...
2025-11-07 11:05:55,180 - system_core - INFO - ✅ 智能教育系统核心初始化
2025-11-07 11:05:55,180 - system_core - INFO - 🔄 开始初始化系统组件...
2025-11-07 11:05:55,180 - system_core - INFO - 📚 [1/8] 初始化题库...
2025-11-07 11:05:55,182 - data_management.question_db - INFO - ✅ 加载题库成功: 49 道题目
2025-11-07 11:05:55,182 - data_management.question_db - INFO - ✅ 增强版题库初始化完成: /home/weitianyu/teach_system/data/question_database_2.json
2025-11-07 11:05:55,182 - system_core - INFO - 🔤 [2/8] 初始化BGE嵌入模型...
2025-11-07 11:05:57,645 - models - INFO - ✅ LLM模型导入成功
2025-11-07 11:05:57,648 - models - ERROR - ❌ 嵌入模型导入失败: cannot import name 'LocalPanGuEmbedding' from 'models.embedding_model' (/home/weitianyu/teach_system/models/embedding_model.py)
2025-11-07 11:05:57,648 - models.embedding_model - INFO - ✅ 初始化BGE嵌入模型: /home/weitianyu/bge-small-zh-v1.5
2025-11-07 11:05:57,648 - models.embedding_model - INFO - 🔄 正在加载BGE-small-zh-v1.5模型...
2025-11-07 11:05:59,033 - models.embedding_model - INFO - ✅ BGE模型加载成功，设备: cpu
2025-11-07 11:05:59,034 - system_core - INFO - 🧠 [3/8] 初始化Qwen2.5-7B模型（用于知识图谱）...
2025-11-07 11:05:59,037 - models.qwen_model - INFO - ✅ 使用NPU设备
2025-11-07 11:05:59,037 - models.qwen_model - INFO - ✅ Qwen2.5-7B初始化: /home/weitianyu/qwen2.5-7B-Instruct
2025-11-07 11:05:59,037 - models.qwen_model - INFO - 🔄 正在加载Qwen2.5-7B模型...
2025-11-07 11:06:11,420 - models.qwen_model - ERROR - ❌ Qwen模型加载失败: NPU out of memory. Tried to allocate 130.00 MiB (NPU 0; 60.97 GiB total capacity; 5.55 GiB already allocated; 5.55 GiB current active; 25.21 MiB free; 5.61 GiB reserved in total by PyTorch) If reserved memory is >> allocated memory try setting max_split_size_mb to avoid fragmentation.
2025-11-07 11:06:11,420 - system_core - ERROR - ❌ 系统初始化失败: NPU out of memory. Tried to allocate 130.00 MiB (NPU 0; 60.97 GiB total capacity; 5.55 GiB already allocated; 5.55 GiB current active; 25.21 MiB free; 5.61 GiB reserved in total by PyTorch) If reserved memory is >> allocated memory try setting max_split_size_mb to avoid fragmentation.
2025-11-07 11:06:11,426 - system_core - ERROR - Traceback (most recent call last):
  File "/home/weitianyu/teach_system/system_core.py", line 61, in initialize
    self.qwen_model.load_model()
  File "/home/weitianyu/teach_system/models/qwen_model.py", line 69, in load_model
    self.model = self.model.to(self.device)
                 ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/root/miniconda3/envs/pangu/lib/python3.11/site-packages/transformers/modeling_utils.py", line 4110, in to
    return super().to(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/root/miniconda3/envs/pangu/lib/python3.11/site-packages/torch_npu/utils/_module.py", line 79, in to
    return self._apply(convert)
           ^^^^^^^^^^^^^^^^^^^^
  File "/root/miniconda3/envs/pangu/lib/python3.11/site-packages/torch/nn/modules/module.py", line 900, in _apply
    module._apply(fn)
  File "/root/miniconda3/envs/pangu/lib/python3.11/site-packages/torch/nn/modules/module.py", line 900, in _apply
    module._apply(fn)
  File "/root/miniconda3/envs/pangu/lib/python3.11/site-packages/torch/nn/modules/module.py", line 900, in _apply
    module._apply(fn)
  [Previous line repeated 2 more times]
  File "/root/miniconda3/envs/pangu/lib/python3.11/site-packages/torch/nn/modules/module.py", line 927, in _apply
    param_applied = fn(param)
                    ^^^^^^^^^
  File "/root/miniconda3/envs/pangu/lib/python3.11/site-packages/torch_npu/utils/_module.py", line 77, in convert
    return t.to(device, dtype if t.is_floating_point() or t.is_complex() else None, non_blocking)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
RuntimeError: NPU out of memory. Tried to allocate 130.00 MiB (NPU 0; 60.97 GiB total capacity; 5.55 GiB already allocated; 5.55 GiB current active; 25.21 MiB free; 5.61 GiB reserved in total by PyTorch) If reserved memory is >> allocated memory try setting max_split_size_mb to avoid fragmentation.

2025-11-07 11:06:11,426 - __main__ - ERROR - ❌ 系统运行出错: 系统初始化失败: NPU out of memory. Tried to allocate 130.00 MiB (NPU 0; 60.97 GiB total capacity; 5.55 GiB already allocated; 5.55 GiB current active; 25.21 MiB free; 5.61 GiB reserved in total by PyTorch) If reserved memory is >> allocated memory try setting max_split_size_mb to avoid fragmentation.
Traceback (most recent call last):
  File "/home/weitianyu/teach_system/system_core.py", line 61, in initialize
    self.qwen_model.load_model()
  File "/home/weitianyu/teach_system/models/qwen_model.py", line 69, in load_model
    self.model = self.model.to(self.device)
                 ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/root/miniconda3/envs/pangu/lib/python3.11/site-packages/transformers/modeling_utils.py", line 4110, in to
    return super().to(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/root/miniconda3/envs/pangu/lib/python3.11/site-packages/torch_npu/utils/_module.py", line 79, in to
    return self._apply(convert)
           ^^^^^^^^^^^^^^^^^^^^
  File "/root/miniconda3/envs/pangu/lib/python3.11/site-packages/torch/nn/modules/module.py", line 900, in _apply
    module._apply(fn)
  File "/root/miniconda3/envs/pangu/lib/python3.11/site-packages/torch/nn/modules/module.py", line 900, in _apply
    module._apply(fn)
  File "/root/miniconda3/envs/pangu/lib/python3.11/site-packages/torch/nn/modules/module.py", line 900, in _apply
    module._apply(fn)
  [Previous line repeated 2 more times]
  File "/root/miniconda3/envs/pangu/lib/python3.11/site-packages/torch/nn/modules/module.py", line 927, in _apply
    param_applied = fn(param)
                    ^^^^^^^^^
  File "/root/miniconda3/envs/pangu/lib/python3.11/site-packages/torch_npu/utils/_module.py", line 77, in convert
    return t.to(device, dtype if t.is_floating_point() or t.is_complex() else None, non_blocking)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
RuntimeError: NPU out of memory. Tried to allocate 130.00 MiB (NPU 0; 60.97 GiB total capacity; 5.55 GiB already allocated; 5.55 GiB current active; 25.21 MiB free; 5.61 GiB reserved in total by PyTorch) If reserved memory is >> allocated memory try setting max_split_size_mb to avoid fragmentation.

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/weitianyu/teach_system/main.py", line 124, in main
    system_core = create_system_core(config)
                  ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/weitianyu/teach_system/system_core.py", line 409, in create_system_core
    core.initialize()
  File "/home/weitianyu/teach_system/system_core.py", line 146, in initialize
    raise RuntimeError(f"系统初始化失败: {e}")
RuntimeError: 系统初始化失败: NPU out of memory. Tried to allocate 130.00 MiB (NPU 0; 60.97 GiB total capacity; 5.55 GiB already allocated; 5.55 GiB current active; 25.21 MiB free; 5.61 GiB reserved in total by PyTorch) If reserved memory is >> allocated memory try setting max_split_size_mb to avoid fragmentation.
2025-11-07 11:06:11,430 - __main__ - INFO - 👋 系统已关闭
2025-11-07 13:50:03,395 - __main__ - INFO - 🚀 系统启动中...
2025-11-07 13:50:03,396 - __main__ - INFO - ✅ 检测到盘古7B模型文件
2025-11-07 13:50:03,396 - __main__ - INFO - ✅ 检测到题库文件
2025-11-07 13:50:03,396 - __main__ - INFO - ⚙️  正在初始化智能系统核心...
2025-11-07 13:50:03,396 - system_core - INFO - ✅ 智能教育系统核心初始化（RAG增强版）
2025-11-07 13:50:03,396 - system_core - INFO - 🔄 初始化系统组件...
2025-11-07 13:50:11,157 - models - ERROR - ❌ LLM模型导入失败: cannot import name 'QwenModel' from 'models.llm_models' (/home/weitianyu/teach_system/models/llm_models.py)
2025-11-07 13:50:11,157 - system_core - ERROR - ❌ 系统初始化失败: cannot import name 'QwenModel' from 'models.llm_models' (/home/weitianyu/teach_system/models/llm_models.py)
2025-11-07 13:50:11,158 - system_core - ERROR - Traceback (most recent call last):
  File "/home/weitianyu/teach_system/system_core.py", line 35, in initialize
    from models.llm_models import create_llm_model
  File "/home/weitianyu/teach_system/models/__init__.py", line 10, in <module>
    from .llm_models import create_llm_model, PanGuModel, QwenModel
ImportError: cannot import name 'QwenModel' from 'models.llm_models' (/home/weitianyu/teach_system/models/llm_models.py)

2025-11-07 13:50:11,158 - __main__ - ERROR - ❌ 系统运行出错: 系统初始化失败: cannot import name 'QwenModel' from 'models.llm_models' (/home/weitianyu/teach_system/models/llm_models.py)
Traceback (most recent call last):
  File "/home/weitianyu/teach_system/system_core.py", line 35, in initialize
    from models.llm_models import create_llm_model
  File "/home/weitianyu/teach_system/models/__init__.py", line 10, in <module>
    from .llm_models import create_llm_model, PanGuModel, QwenModel
ImportError: cannot import name 'QwenModel' from 'models.llm_models' (/home/weitianyu/teach_system/models/llm_models.py)

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/weitianyu/teach_system/main.py", line 69, in main
    system_core = create_system_core(config)
                  ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/weitianyu/teach_system/system_core.py", line 476, in create_system_core
    core.initialize()
  File "/home/weitianyu/teach_system/system_core.py", line 151, in initialize
    raise RuntimeError(f"系统初始化失败: {e}")
RuntimeError: 系统初始化失败: cannot import name 'QwenModel' from 'models.llm_models' (/home/weitianyu/teach_system/models/llm_models.py)
2025-11-07 13:50:11,159 - __main__ - INFO - 👋 系统已关闭
2025-11-07 14:36:51,893 - __main__ - INFO - 🚀 系统启动中...
2025-11-07 14:36:51,894 - __main__ - INFO - ✅ 检测到盘古7B模型文件
2025-11-07 14:36:51,894 - __main__ - INFO - ✅ 检测到题库文件
2025-11-07 14:36:51,894 - __main__ - INFO - ⚙️  正在初始化智能系统核心...
2025-11-07 14:36:51,894 - system_core - INFO - ✅ 智能教育系统核心初始化（本地RAG版）
2025-11-07 14:36:51,894 - system_core - INFO - 🔄 初始化系统组件...
2025-11-07 14:36:59,819 - system_core - INFO - 📚 初始化题库...
2025-11-07 14:36:59,819 - data_management.question_db - INFO - ✅ 加载题库成功: 49 道题目
2025-11-07 14:36:59,820 - data_management.question_db - INFO - ✅ 增强版题库初始化完成: /home/weitianyu/teach_system/data/question_database_2.json
2025-11-07 14:36:59,820 - system_core - INFO - 🔤 初始化BGE嵌入模型...
2025-11-07 14:36:59,820 - models.embedding_model - INFO - 初始化BGE-M3嵌入模型: /home/weitianyu/bge-small-zh-v1.5
2025-11-07 14:36:59,820 - models.embedding_model - INFO - 正在加载BGE-M3模型...
2025-11-07 14:37:01,220 - models.embedding_model - INFO - BGE-M3模型加载成功,设备: cpu
2025-11-07 14:37:01,220 - system_core - INFO - ✅ BGE嵌入模型加载完成
2025-11-07 14:37:01,220 - system_core - INFO - 🚀 初始化盘古7B模型...
2025-11-07 14:37:01,221 - models.llm_models - INFO - 🆕 创建新的盘古7B模型实例（任务类型: pangu）
2025-11-07 14:37:01,221 - models.llm_models - INFO - ✅ 检测到 8 个NPU设备
2025-11-07 14:37:08,947 - models.llm_models - INFO -   NPU 0: Ascend910B2, 总显存: 60.97 GB
2025-11-07 14:37:08,948 - models.llm_models - INFO -   NPU 1: Ascend910B2, 总显存: 60.97 GB
2025-11-07 14:37:08,948 - models.llm_models - INFO -   NPU 2: Ascend910B2, 总显存: 60.97 GB
2025-11-07 14:37:08,949 - models.llm_models - INFO -   NPU 3: Ascend910B2, 总显存: 60.97 GB
2025-11-07 14:37:08,949 - models.llm_models - INFO -   NPU 4: Ascend910B2, 总显存: 60.97 GB
2025-11-07 14:37:08,949 - models.llm_models - INFO -   NPU 5: Ascend910B2, 总显存: 60.97 GB
2025-11-07 14:37:08,950 - models.llm_models - INFO -   NPU 6: Ascend910B2, 总显存: 60.97 GB
2025-11-07 14:37:08,950 - models.llm_models - INFO -   NPU 7: Ascend910B2, 总显存: 60.97 GB
2025-11-07 14:37:08,950 - models.llm_models - INFO - 盘古7B模型设备配置: ['npu:0', 'npu:1', 'npu:2', 'npu:3', 'npu:4', 'npu:5', 'npu:6', 'npu:7']
2025-11-07 14:37:08,950 - system_core - INFO - 🔄 预加载盘古7B模型...
2025-11-07 14:37:08,950 - models.llm_models - INFO - 🔄 正在加载盘古7B模型: /opt/pangu/openPangu-Embedded-7B-V1.1
2025-11-07 14:37:10,021 - models.llm_models - INFO - 🚀 使用多NPU模式，跨8个设备分布模型
2025-11-07 14:37:10,762 - datasets - INFO - PyTorch version 2.5.1 available.
2025-11-07 14:37:11,161 - accelerate.utils.modeling - INFO - Based on the current allocation process, no modules could be assigned to the following devices due to insufficient memory:
  - 0: 2512912384 bytes required
These minimum requirements are specific to this allocation attempt and may vary. Consider increasing the available memory for these devices to at least the specified minimum, or adjusting the model config.
2025-11-07 14:37:16,215 - models.llm_models - INFO - ✅ 使用device_map='auto'模式成功加载
2025-11-07 14:37:16,218 - models.llm_models - INFO - 📊 模型分布情况:
2025-11-07 14:37:16,218 - models.llm_models - INFO -    1: 4 层
2025-11-07 14:37:16,219 - models.llm_models - INFO -    2: 6 层
2025-11-07 14:37:16,219 - models.llm_models - INFO -    3: 6 层
2025-11-07 14:37:16,219 - models.llm_models - INFO -    4: 6 层
2025-11-07 14:37:16,219 - models.llm_models - INFO -    5: 6 层
2025-11-07 14:37:16,219 - models.llm_models - INFO -    6: 6 层
2025-11-07 14:37:16,219 - models.llm_models - INFO -    7: 4 层
2025-11-07 14:37:16,219 - models.llm_models - INFO - ✅ 盘古7B模型加载成功
2025-11-07 14:37:16,219 - system_core - INFO - ✅ 盘古7B模型加载完成
2025-11-07 14:37:16,219 - system_core - INFO - 🧠 初始化本地RAG引擎...
2025-11-07 14:37:16,219 - knowledge_management.rag_engine - INFO - ✅ 本地RAG引擎初始化完成
2025-11-07 14:37:16,219 - system_core - INFO - 🔄 构建题目向量索引...
2025-11-07 14:37:16,219 - knowledge_management.rag_engine - INFO - 🔄 正在为 49 道题目构建向量索引...
2025-11-07 14:37:16,220 - knowledge_management.rag_engine - INFO - 🔄 正在计算题目嵌入...
2025-11-07 14:37:17,125 - knowledge_management.rag_engine - INFO - ✅ 题目索引构建完成: 49 道题, 嵌入维度 512
2025-11-07 14:37:17,125 - system_core - INFO - ✅ 题目索引构建完成
2025-11-07 14:37:17,125 - system_core - INFO - 🧠 初始化BKT算法...
2025-11-07 14:37:17,127 - utils.bkt_algorithm - INFO - ✅ 加载学生状态: 4 个学生, 12 条细粒度记录
2025-11-07 14:37:17,127 - utils.bkt_algorithm - INFO - ✅ 增强版BKT算法初始化完成（细粒度知识点追踪）
2025-11-07 14:37:17,127 - system_core - INFO - 📊 初始化评估器（盘古7B驱动）...
2025-11-07 14:37:17,127 - utils.evaluator - INFO - ✅ 个性化学生评估器初始化完成
2025-11-07 14:37:17,127 - system_core - INFO - 📝 初始化智能题目选择器（RAG + 盘古7B）...
2025-11-07 14:37:17,127 - utils.question_generator - INFO - ✅ 智能题目选择器初始化完成
2025-11-07 14:37:17,127 - system_core - INFO - 🎨 初始化可视化组件...
2025-11-07 14:37:17,128 - visualization.kg_visualizer - INFO - 知识图谱可视化器初始化完成
2025-11-07 14:37:17,128 - system_core - INFO - ✅ 系统初始化完成 - 本地RAG智能个性化学习版
2025-11-07 14:37:17,128 - __main__ - INFO - ✅ 系统核心初始化完成
2025-11-07 14:37:17,128 - __main__ - INFO - 📚 题库统计: 总题目 49
2025-11-07 14:37:17,128 - __main__ - INFO - 📊 知识点大类: 4 个
2025-11-07 14:37:17,128 - __main__ - INFO - 📋 知识点小类: 38 个
2025-11-07 14:37:17,128 - __main__ - INFO - 🎨 正在创建UI界面...
2025-11-07 14:37:17,128 - ui.main_ui - INFO - ✅ 智能教育UI初始化完成
2025-11-07 14:37:17,952 - __main__ - INFO - ✅ 系统启动成功!
2025-11-07 14:37:18,141 - httpx - INFO - HTTP Request: GET http://localhost:7860/gradio_api/startup-events "HTTP/1.1 200 OK"
2025-11-07 14:37:18,170 - httpx - INFO - HTTP Request: HEAD http://localhost:7860/ "HTTP/1.1 200 OK"
2025-11-07 14:37:18,534 - httpx - INFO - HTTP Request: GET https://api.gradio.app/pkg-version "HTTP/1.1 200 OK"
2025-11-07 14:39:12,452 - ui.main_ui - INFO - 🚀 学生 student_001 开始测评
2025-11-07 14:39:12,452 - system_core - INFO - 🚀 开始智能测评: 学生 student_001, 题数 7
2025-11-07 14:39:12,453 - system_core - INFO - 📊 使用RAG + BKT算法进行自适应题目选择...
2025-11-07 14:39:12,453 - system_core - INFO - 📊 学生档案: 整体掌握度 0.202, 已学知识点 7
2025-11-07 14:39:12,454 - system_core - INFO - 📊 识别到 6 个薄弱知识点:
2025-11-07 14:39:12,454 - system_core - INFO -   - 分析/函数单调性: 0.010
2025-11-07 14:39:12,454 - system_core - INFO -   - 代数/高次方程: 0.033
2025-11-07 14:39:12,455 - system_core - INFO -   - 代数/对数方程: 0.033
2025-11-07 14:39:12,455 - system_core - INFO - 🔍 探索新知识点: 几何/空间直线与平面
2025-11-07 14:39:12,457 - utils.bkt_algorithm - INFO - 🆕 初始化学生状态: student_001 - 几何/空间直线与平面
2025-11-07 14:39:12,457 - system_core - INFO - 🔍 使用RAG检索题目...
2025-11-07 14:39:12,457 - utils.question_generator - INFO - 🎯 为学生 student_001 选择题目: 几何/空间直线与平面, 掌握度 0.200
2025-11-07 14:39:12,458 - knowledge_management.rag_engine - INFO - 🔄 构建知识子图: 几何/空间直线与平面, 掌握度: 0.200
2025-11-07 14:39:12,738 - knowledge_management.rag_engine - INFO - 🔍 检索到 1 道相关题目 (query: '几何 空间直线与平面 简单 基础...')
2025-11-07 14:39:40,434 - knowledge_management.rag_engine - INFO - ✅ 提取到 5 个实体, 3 个关系
2025-11-07 14:39:40,434 - knowledge_management.rag_engine - INFO - ✅ 知识子图构建完成: 1 道题, 5 个实体
2025-11-07 14:39:40,434 - utils.question_generator - INFO - ✅ 只有1道候选题，直接选择
2025-11-07 14:39:40,435 - utils.question_generator - INFO - ✅ 选中题目 9 (难度: 0.60)
2025-11-07 14:39:40,435 - system_core - INFO - ✅ 测评开始 - 第1题: 几何/空间直线与平面
2025-11-07 14:40:45,663 - ui.main_ui - INFO - 📝 提交答案，正在使用盘古7B评估...
2025-11-07 14:40:45,664 - system_core - INFO - ✍️  评估答案 (题目 1/7)
2025-11-07 14:40:45,664 - system_core - INFO - 🤖 使用盘古7B进行严格答案评估...
2025-11-07 14:40:45,664 - utils.evaluator - INFO - 🤖 使用盘古7B模型进行智能答案评估（严格模式）
2025-11-07 14:41:19,926 - system_core - INFO - 📊 盘古7B判定: ❌ 错误
2025-11-07 14:41:19,929 - utils.bkt_algorithm - INFO - 📝 答题记录: student_001 - 空间直线与平面: 0.200 → 0.033 (✗)
2025-11-07 14:41:19,929 - system_core - INFO - 🤔 基于RAG + BKT算法智能选择下一题...
2025-11-07 14:41:19,930 - system_core - INFO - 📊 识别到 7 个薄弱知识点:
2025-11-07 14:41:19,930 - system_core - INFO -   - 分析/函数单调性: 0.010
2025-11-07 14:41:19,930 - system_core - INFO -   - 代数/高次方程: 0.033
2025-11-07 14:41:19,930 - system_core - INFO -   - 代数/对数方程: 0.033
2025-11-07 14:41:19,930 - system_core - INFO - 🎯 选择薄弱知识点: 分析/函数单调性
2025-11-07 14:41:19,930 - utils.question_generator - INFO - 🎯 为学生 student_001 选择题目: 分析/函数单调性, 掌握度 0.010
2025-11-07 14:41:19,930 - knowledge_management.rag_engine - INFO - 🔄 构建知识子图: 分析/函数单调性, 掌握度: 0.010
2025-11-07 14:41:20,187 - knowledge_management.rag_engine - INFO - 🔍 检索到 1 道相关题目 (query: '分析 函数单调性 简单 基础...')
2025-11-07 14:41:42,671 - knowledge_management.rag_engine - INFO - ✅ 提取到 5 个实体, 3 个关系
2025-11-07 14:41:42,671 - knowledge_management.rag_engine - INFO - ✅ 知识子图构建完成: 1 道题, 5 个实体
2025-11-07 14:41:42,671 - utils.question_generator - INFO - ✅ 只有1道候选题，直接选择
2025-11-07 14:41:42,672 - utils.question_generator - INFO - ✅ 选中题目 5 (难度: 0.45)
2025-11-07 14:41:42,672 - system_core - INFO - ✅ RAG准备下一题: 分析/函数单调性
2025-11-07 14:42:05,367 - system_core - INFO - 📄 加载第 2 题
2025-11-07 14:43:05,891 - ui.main_ui - INFO - 📝 提交答案，正在使用盘古7B评估...
2025-11-07 14:43:05,892 - system_core - INFO - ✍️  评估答案 (题目 2/7)
2025-11-07 14:43:05,892 - system_core - INFO - 🤖 使用盘古7B进行严格答案评估...
2025-11-07 14:43:05,892 - utils.evaluator - INFO - 🤖 使用盘古7B模型进行智能答案评估（严格模式）
2025-11-07 14:43:16,130 - system_core - INFO - 📊 盘古7B判定: ❌ 错误
2025-11-07 14:43:16,133 - utils.bkt_algorithm - INFO - 📝 答题记录: student_001 - 函数单调性: 0.010 → 0.010 (✗)
2025-11-07 14:43:16,133 - system_core - INFO - 🤔 基于RAG + BKT算法智能选择下一题...
2025-11-07 14:43:16,133 - system_core - INFO - 📊 识别到 7 个薄弱知识点:
2025-11-07 14:43:16,133 - system_core - INFO -   - 分析/函数单调性: 0.010
2025-11-07 14:43:16,133 - system_core - INFO -   - 代数/高次方程: 0.033
2025-11-07 14:43:16,133 - system_core - INFO -   - 代数/对数方程: 0.033
2025-11-07 14:43:16,133 - system_core - INFO - 🎯 选择薄弱知识点: 分析/函数单调性
2025-11-07 14:43:16,133 - utils.question_generator - INFO - 🎯 为学生 student_001 选择题目: 分析/函数单调性, 掌握度 0.010
2025-11-07 14:43:16,134 - knowledge_management.rag_engine - INFO - 🔄 构建知识子图: 分析/函数单调性, 掌握度: 0.010
2025-11-07 14:43:16,402 - knowledge_management.rag_engine - INFO - 🔍 检索到 1 道相关题目 (query: '分析 函数单调性 简单 基础...')
2025-11-07 14:43:35,802 - knowledge_management.rag_engine - INFO - ✅ 提取到 4 个实体, 3 个关系
2025-11-07 14:43:35,802 - knowledge_management.rag_engine - INFO - ✅ 知识子图构建完成: 1 道题, 4 个实体
2025-11-07 14:43:35,802 - utils.question_generator - WARNING - ⚠️ 所有检索题目都已使用，使用备用方案
2025-11-07 14:43:35,802 - utils.question_generator - INFO - 🔄 使用备用选择方案...
2025-11-07 14:43:35,802 - utils.question_generator - ERROR - ❌ 无可用题目
2025-11-07 14:43:35,802 - system_core - WARNING - ⚠️  RAG无法选择下一题，提前结束
2025-11-07 14:43:58,639 - ui.main_ui - INFO - 📊 测评完成，正在生成报告...
2025-11-07 14:43:58,640 - system_core - INFO - 📝 正在使用盘古7B生成智能评估报告...
2025-11-07 14:43:58,640 - utils.evaluator - INFO - 📝 正在生成学生 student_001 的综合个性化评估报告...
2025-11-07 14:43:58,640 - utils.evaluator - ERROR - ❌ 生成AI建议失败: sequence item 0: expected str instance, tuple found
2025-11-07 14:43:58,641 - utils.evaluator - INFO - ✅ 综合个性化评估报告生成完成
2025-11-07 14:43:58,641 - system_core - INFO - ✅ 盘古7B报告生成完成
2025-11-07 14:44:44,791 - __main__ - INFO - 👋 系统已关闭
2025-11-07 15:41:34,842 - __main__ - INFO - 🚀 系统启动中...
2025-11-07 15:41:34,842 - __main__ - INFO - ✅ 检测到盘古7B模型文件
2025-11-07 15:41:34,842 - __main__ - INFO - ✅ 检测到题库文件
2025-11-07 15:41:34,843 - __main__ - INFO - ⚙️  正在初始化智能系统核心...
2025-11-07 15:41:34,843 - system_core - INFO - ✅ 智能教育系统核心初始化（本地RAG版）
2025-11-07 15:41:34,843 - system_core - INFO - 🔄 初始化系统组件...
2025-11-07 15:41:42,857 - system_core - INFO - 📚 初始化题库...
2025-11-07 15:41:42,858 - data_management.question_db - INFO - ✅ 加载题库成功: 79 道题目
2025-11-07 15:41:42,858 - data_management.question_db - INFO - ✅ 增强版题库初始化完成: /home/weitianyu/teach_system/data/question_database_2.json
2025-11-07 15:41:42,858 - system_core - INFO - 🔤 初始化BGE嵌入模型...
2025-11-07 15:41:42,859 - models.embedding_model - INFO - 初始化BGE嵌入模型: /home/weitianyu/bge-small-zh-v1.5
2025-11-07 15:41:42,859 - models.embedding_model - INFO - 正在加载BGE模型...
2025-11-07 15:41:44,264 - models.embedding_model - INFO - BGE模型加载成功,设备: cpu
2025-11-07 15:41:44,265 - system_core - INFO - ✅ BGE嵌入模型加载完成
2025-11-07 15:41:44,265 - system_core - INFO - 🚀 初始化盘古7B模型...
2025-11-07 15:41:44,265 - models.llm_models - INFO - 🆕 创建新的盘古7B模型实例（任务类型: pangu）
2025-11-07 15:41:44,265 - models.llm_models - INFO - ✅ 检测到 8 个NPU设备
2025-11-07 15:41:52,095 - models.llm_models - INFO -   NPU 0: Ascend910B2, 总显存: 60.97 GB
2025-11-07 15:41:52,097 - models.llm_models - INFO -   NPU 1: Ascend910B2, 总显存: 60.97 GB
2025-11-07 15:41:52,097 - models.llm_models - INFO -   NPU 2: Ascend910B2, 总显存: 60.97 GB
2025-11-07 15:41:52,097 - models.llm_models - INFO -   NPU 3: Ascend910B2, 总显存: 60.97 GB
2025-11-07 15:41:52,098 - models.llm_models - INFO -   NPU 4: Ascend910B2, 总显存: 60.97 GB
2025-11-07 15:41:52,098 - models.llm_models - INFO -   NPU 5: Ascend910B2, 总显存: 60.97 GB
2025-11-07 15:41:52,098 - models.llm_models - INFO -   NPU 6: Ascend910B2, 总显存: 60.97 GB
2025-11-07 15:41:52,099 - models.llm_models - INFO -   NPU 7: Ascend910B2, 总显存: 60.97 GB
2025-11-07 15:41:52,099 - models.llm_models - INFO - 盘古7B模型设备配置: ['npu:0', 'npu:1', 'npu:2', 'npu:3', 'npu:4', 'npu:5', 'npu:6', 'npu:7']
2025-11-07 15:41:52,099 - system_core - INFO - 🔄 预加载盘古7B模型...
2025-11-07 15:41:52,099 - models.llm_models - INFO - 🔄 正在加载盘古7B模型: /opt/pangu/openPangu-Embedded-7B-V1.1
2025-11-07 15:41:53,199 - models.llm_models - INFO - 🚀 使用多NPU模式，跨8个设备分布模型
2025-11-07 15:41:53,970 - datasets - INFO - PyTorch version 2.5.1 available.
2025-11-07 15:41:54,383 - accelerate.utils.modeling - INFO - Based on the current allocation process, no modules could be assigned to the following devices due to insufficient memory:
  - 0: 2512912384 bytes required
These minimum requirements are specific to this allocation attempt and may vary. Consider increasing the available memory for these devices to at least the specified minimum, or adjusting the model config.
2025-11-07 15:41:59,646 - models.llm_models - INFO - ✅ 使用device_map='auto'模式成功加载
2025-11-07 15:41:59,650 - models.llm_models - INFO - 📊 模型分布情况:
2025-11-07 15:41:59,650 - models.llm_models - INFO -    1: 4 层
2025-11-07 15:41:59,650 - models.llm_models - INFO -    2: 6 层
2025-11-07 15:41:59,650 - models.llm_models - INFO -    3: 6 层
2025-11-07 15:41:59,650 - models.llm_models - INFO -    4: 6 层
2025-11-07 15:41:59,650 - models.llm_models - INFO -    5: 6 层
2025-11-07 15:41:59,650 - models.llm_models - INFO -    6: 6 层
2025-11-07 15:41:59,650 - models.llm_models - INFO -    7: 4 层
2025-11-07 15:41:59,650 - models.llm_models - INFO - ✅ 盘古7B模型加载成功
2025-11-07 15:41:59,650 - system_core - INFO - ✅ 盘古7B模型加载完成
2025-11-07 15:41:59,650 - system_core - INFO - 🧠 初始化本地RAG引擎...
2025-11-07 15:41:59,651 - knowledge_management.rag_engine - INFO - ✅ 本地RAG引擎初始化完成
2025-11-07 15:41:59,651 - system_core - INFO - 🔄 构建题目向量索引...
2025-11-07 15:41:59,651 - knowledge_management.rag_engine - INFO - 🔄 正在为 79 道题目构建向量索引...
2025-11-07 15:41:59,651 - knowledge_management.rag_engine - INFO - 🔄 正在计算题目嵌入...
2025-11-07 15:42:01,015 - knowledge_management.rag_engine - INFO - ✅ 题目索引构建完成: 79 道题, 嵌入维度 512
2025-11-07 15:42:01,015 - system_core - INFO - ✅ 题目索引构建完成
2025-11-07 15:42:01,015 - system_core - INFO - 🧠 初始化BKT算法...
2025-11-07 15:42:01,017 - utils.bkt_algorithm - INFO - ✅ 加载学生状态: 4 个学生, 13 条细粒度记录
2025-11-07 15:42:01,017 - utils.bkt_algorithm - INFO - ✅ 增强版BKT算法初始化完成（细粒度知识点追踪）
2025-11-07 15:42:01,017 - system_core - INFO - 📊 初始化评估器（盘古7B驱动）...
2025-11-07 15:42:01,017 - utils.evaluator - INFO - ✅ 个性化学生评估器初始化完成
2025-11-07 15:42:01,017 - system_core - INFO - 📝 初始化智能题目选择器（RAG + 盘古7B）...
2025-11-07 15:42:01,017 - utils.question_generator - INFO - ✅ 智能题目选择器初始化完成
2025-11-07 15:42:01,017 - system_core - INFO - 🎨 初始化可视化组件...
2025-11-07 15:42:01,018 - visualization.kg_visualizer - INFO - 知识图谱可视化器初始化完成
2025-11-07 15:42:01,018 - system_core - INFO - ✅ 系统初始化完成 - 本地RAG智能个性化学习版
2025-11-07 15:42:01,018 - __main__ - INFO - ✅ 系统核心初始化完成
2025-11-07 15:42:01,018 - __main__ - INFO - 📚 题库统计: 总题目 79
2025-11-07 15:42:01,018 - __main__ - INFO - 📊 知识点大类: 5 个
2025-11-07 15:42:01,018 - __main__ - INFO - 📋 知识点小类: 39 个
2025-11-07 15:42:01,018 - __main__ - INFO - 🎨 正在创建UI界面...
2025-11-07 15:42:01,018 - ui.main_ui - INFO - ✅ 智能教育UI初始化完成
2025-11-07 15:42:01,352 - __main__ - INFO - ✅ 系统启动成功!
2025-11-07 15:42:02,166 - httpx - INFO - HTTP Request: GET http://localhost:7860/gradio_api/startup-events "HTTP/1.1 200 OK"
2025-11-07 15:42:02,196 - httpx - INFO - HTTP Request: HEAD http://localhost:7860/ "HTTP/1.1 200 OK"
2025-11-07 15:42:02,646 - httpx - INFO - HTTP Request: GET https://api.gradio.app/pkg-version "HTTP/1.1 200 OK"
2025-11-07 15:42:30,968 - ui.main_ui - INFO - 🚀 学生 student_001 开始测评
2025-11-07 15:42:30,968 - system_core - INFO - 🚀 开始智能测评: 学生 student_001, 题数 7
2025-11-07 15:42:30,969 - system_core - INFO - 📊 使用RAG + BKT算法进行自适应题目选择...
2025-11-07 15:42:30,970 - system_core - INFO - 📊 学生档案: 整体掌握度 0.180, 已学知识点 8
2025-11-07 15:42:30,970 - system_core - INFO - 📊 识别到 7 个薄弱知识点:
2025-11-07 15:42:30,970 - system_core - INFO -   - 分析/函数单调性: 0.010
2025-11-07 15:42:30,970 - system_core - INFO -   - 代数/高次方程: 0.033
2025-11-07 15:42:30,971 - system_core - INFO -   - 代数/对数方程: 0.033
2025-11-07 15:42:30,971 - system_core - INFO - 🎯 策略：优先加强薄弱知识点
2025-11-07 15:42:30,971 - system_core - INFO - ✅ 选择薄弱知识点: 分析/函数单调性 (掌握度: 0.010)
2025-11-07 15:42:30,971 - system_core - INFO - 🔍 使用RAG + 多级备用策略检索题目...
2025-11-07 15:42:30,971 - utils.question_generator - INFO - 🎯 为学生 student_001 选择题目: 分析/函数单调性, 掌握度 0.010
2025-11-07 15:42:30,971 - knowledge_management.rag_engine - INFO - 🔄 构建知识子图: 分析/函数单调性, 掌握度: 0.010
2025-11-07 15:42:31,224 - knowledge_management.rag_engine - INFO - 🔍 检索到 1 道相关题目 (query: '分析 函数单调性 简单 基础...')
2025-11-07 15:42:57,750 - knowledge_management.rag_engine - INFO - ✅ 提取到 5 个实体, 3 个关系
2025-11-07 15:42:57,750 - knowledge_management.rag_engine - INFO - ✅ 知识子图构建完成: 1 道题, 5 个实体
2025-11-07 15:42:57,751 - utils.question_generator - INFO - ✅ 只有1道候选题，直接选择
2025-11-07 15:42:57,751 - utils.question_generator - INFO - ✅ 选中题目 5 (难度: 0.45)
2025-11-07 15:42:57,751 - system_core - INFO - ✅ 测评开始 - 第1题: 分析/函数单调性, 题号5
2025-11-07 15:43:05,790 - ui.main_ui - INFO - 📝 提交答案，正在使用盘古7B评估...
2025-11-07 15:43:05,791 - system_core - INFO - ✍️  评估答案 (题目 1/7)
2025-11-07 15:43:05,791 - system_core - INFO - 🤖 使用盘古7B进行严格答案评估...
2025-11-07 15:43:05,791 - utils.evaluator - INFO - 🤖 使用盘古7B模型进行智能答案评估（严格模式）
2025-11-07 15:43:16,455 - system_core - INFO - 📊 盘古7B判定: ❌ 错误
2025-11-07 15:43:16,459 - utils.bkt_algorithm - INFO - 📝 答题记录: student_001 - 函数单调性: 0.010 → 0.010 (✗)
2025-11-07 15:43:16,459 - system_core - INFO - 🤔 基于RAG + BKT + 多级备用策略智能选择下一题...
2025-11-07 15:43:16,459 - system_core - INFO - 📊 识别到 7 个薄弱知识点:
2025-11-07 15:43:16,459 - system_core - INFO -   - 分析/函数单调性: 0.010
2025-11-07 15:43:16,459 - system_core - INFO -   - 代数/高次方程: 0.033
2025-11-07 15:43:16,460 - system_core - INFO -   - 代数/对数方程: 0.033
2025-11-07 15:43:16,460 - system_core - INFO - 🎯 策略：优先加强薄弱知识点
2025-11-07 15:43:16,460 - system_core - INFO - ✅ 选择薄弱知识点: 代数/高次方程 (掌握度: 0.033)
2025-11-07 15:43:16,460 - utils.question_generator - INFO - 🎯 为学生 student_001 选择题目: 代数/高次方程, 掌握度 0.033
2025-11-07 15:43:16,460 - knowledge_management.rag_engine - INFO - 🔄 构建知识子图: 代数/高次方程, 掌握度: 0.033
2025-11-07 15:43:16,789 - knowledge_management.rag_engine - INFO - 🔍 检索到 2 道相关题目 (query: '代数 高次方程 简单 基础...')
2025-11-07 15:43:35,898 - knowledge_management.rag_engine - INFO - ✅ 提取到 4 个实体, 3 个关系
2025-11-07 15:43:35,899 - knowledge_management.rag_engine - INFO - ✅ 知识子图构建完成: 2 道题, 4 个实体
2025-11-07 15:43:35,899 - utils.question_generator - INFO - 🤖 盘古7B正在选择题目...
2025-11-07 15:43:36,826 - utils.question_generator - INFO - ✅ 盘古7B选中题目 17
2025-11-07 15:43:36,827 - utils.question_generator - INFO - ✅ 选中题目 17 (难度: 0.30)
2025-11-07 15:43:36,827 - system_core - INFO - ✅ 准备下一题: 代数/高次方程, 题号17
2025-11-07 15:43:44,575 - system_core - INFO - 📄 加载第 2 题
2025-11-07 15:43:51,684 - ui.main_ui - INFO - 📝 提交答案，正在使用盘古7B评估...
2025-11-07 15:43:51,684 - system_core - INFO - ✍️  评估答案 (题目 2/7)
2025-11-07 15:43:51,684 - system_core - INFO - 🤖 使用盘古7B进行严格答案评估...
2025-11-07 15:43:51,685 - utils.evaluator - INFO - 🤖 使用盘古7B模型进行智能答案评估（严格模式）
2025-11-07 15:43:57,937 - system_core - INFO - 📊 盘古7B判定: ✅ 正确
2025-11-07 15:43:57,940 - utils.bkt_algorithm - INFO - 📝 答题记录: student_001 - 高次方程: 0.033 → 0.228 (✓)
2025-11-07 15:43:57,940 - system_core - INFO - 🤔 基于RAG + BKT + 多级备用策略智能选择下一题...
2025-11-07 15:43:57,940 - system_core - INFO - 📊 识别到 7 个薄弱知识点:
2025-11-07 15:43:57,940 - system_core - INFO -   - 分析/函数单调性: 0.010
2025-11-07 15:43:57,940 - system_core - INFO -   - 代数/对数方程: 0.033
2025-11-07 15:43:57,940 - system_core - INFO -   - 几何/空间直线与平面: 0.033
2025-11-07 15:43:57,941 - system_core - INFO - 🎯 策略：优先加强薄弱知识点
2025-11-07 15:43:57,941 - system_core - INFO - ✅ 选择薄弱知识点: 代数/对数方程 (掌握度: 0.033)
2025-11-07 15:43:57,941 - utils.question_generator - INFO - 🎯 为学生 student_001 选择题目: 代数/对数方程, 掌握度 0.033
2025-11-07 15:43:57,941 - knowledge_management.rag_engine - INFO - 🔄 构建知识子图: 代数/对数方程, 掌握度: 0.033
2025-11-07 15:43:58,275 - knowledge_management.rag_engine - INFO - 🔍 检索到 1 道相关题目 (query: '代数 对数方程 简单 基础...')
2025-11-07 15:44:13,407 - knowledge_management.rag_engine - INFO - ✅ 提取到 3 个实体, 2 个关系
2025-11-07 15:44:13,407 - knowledge_management.rag_engine - INFO - ✅ 知识子图构建完成: 1 道题, 3 个实体
2025-11-07 15:44:13,407 - utils.question_generator - INFO - ✅ 只有1道候选题，直接选择
2025-11-07 15:44:13,407 - utils.question_generator - INFO - ✅ 选中题目 22 (难度: 0.50)
2025-11-07 15:44:13,407 - system_core - INFO - ✅ 准备下一题: 代数/对数方程, 题号22
2025-11-07 15:45:00,088 - system_core - INFO - 📄 加载第 3 题
2025-11-07 15:45:07,600 - ui.main_ui - INFO - 📝 提交答案，正在使用盘古7B评估...
2025-11-07 15:45:07,601 - system_core - INFO - ✍️  评估答案 (题目 3/7)
2025-11-07 15:45:07,601 - system_core - INFO - 🤖 使用盘古7B进行严格答案评估...
2025-11-07 15:45:07,601 - utils.evaluator - INFO - 🤖 使用盘古7B模型进行智能答案评估（严格模式）
2025-11-07 15:45:17,771 - system_core - INFO - 📊 盘古7B判定: ❌ 错误
2025-11-07 15:45:17,774 - utils.bkt_algorithm - INFO - 📝 答题记录: student_001 - 对数方程: 0.033 → 0.010 (✗)
2025-11-07 15:45:17,774 - system_core - INFO - 🤔 基于RAG + BKT + 多级备用策略智能选择下一题...
2025-11-07 15:45:17,774 - system_core - INFO - 📊 识别到 7 个薄弱知识点:
2025-11-07 15:45:17,775 - system_core - INFO -   - 代数/对数方程: 0.010
2025-11-07 15:45:17,775 - system_core - INFO -   - 分析/函数单调性: 0.010
2025-11-07 15:45:17,775 - system_core - INFO -   - 几何/空间直线与平面: 0.033
2025-11-07 15:45:17,775 - system_core - INFO - 🔍 策略：探索新知识点
2025-11-07 15:45:17,775 - system_core - INFO - ✅ 选择未探索知识点: 分析/基本导数
2025-11-07 15:45:17,778 - utils.bkt_algorithm - INFO - 🆕 初始化学生状态: student_001 - 分析/基本导数
2025-11-07 15:45:17,778 - utils.question_generator - INFO - 🎯 为学生 student_001 选择题目: 分析/基本导数, 掌握度 0.200
2025-11-07 15:45:17,778 - knowledge_management.rag_engine - INFO - 🔄 构建知识子图: 分析/基本导数, 掌握度: 0.200
2025-11-07 15:45:18,089 - knowledge_management.rag_engine - INFO - 🔍 检索到 2 道相关题目 (query: '分析 基本导数 简单 基础...')
2025-11-07 15:45:27,710 - knowledge_management.rag_engine - INFO - ✅ 提取到 2 个实体, 1 个关系
2025-11-07 15:45:27,710 - knowledge_management.rag_engine - INFO - ✅ 知识子图构建完成: 2 道题, 2 个实体
2025-11-07 15:45:27,710 - utils.question_generator - INFO - 🤖 盘古7B正在选择题目...
2025-11-07 15:45:28,718 - utils.question_generator - INFO - ✅ 盘古7B选中题目 44
2025-11-07 15:45:28,718 - utils.question_generator - INFO - ✅ 选中题目 44 (难度: 0.35)
2025-11-07 15:45:28,718 - system_core - INFO - ✅ 准备下一题: 分析/基本导数, 题号44
2025-11-07 15:45:39,714 - system_core - INFO - 📄 加载第 4 题
2025-11-07 15:45:48,028 - ui.main_ui - INFO - 📝 提交答案，正在使用盘古7B评估...
2025-11-07 15:45:48,028 - system_core - INFO - ✍️  评估答案 (题目 4/7)
2025-11-07 15:45:48,028 - system_core - INFO - 🤖 使用盘古7B进行严格答案评估...
2025-11-07 15:45:48,028 - utils.evaluator - INFO - 🤖 使用盘古7B模型进行智能答案评估（严格模式）
2025-11-07 15:46:00,977 - system_core - INFO - 📊 盘古7B判定: ✅ 正确
2025-11-07 15:46:00,981 - utils.bkt_algorithm - INFO - 📝 答题记录: student_001 - 基本导数: 0.200 → 0.514 (✓)
2025-11-07 15:46:00,981 - system_core - INFO - 🤔 基于RAG + BKT + 多级备用策略智能选择下一题...
2025-11-07 15:46:00,981 - system_core - INFO - 📊 识别到 7 个薄弱知识点:
2025-11-07 15:46:00,981 - system_core - INFO -   - 代数/对数方程: 0.010
2025-11-07 15:46:00,981 - system_core - INFO -   - 分析/函数单调性: 0.010
2025-11-07 15:46:00,981 - system_core - INFO -   - 几何/空间直线与平面: 0.033
2025-11-07 15:46:00,981 - system_core - INFO - 🎯 策略：优先加强薄弱知识点
2025-11-07 15:46:00,982 - system_core - INFO - ✅ 选择薄弱知识点: 几何/空间直线与平面 (掌握度: 0.033)
2025-11-07 15:46:00,982 - utils.question_generator - INFO - 🎯 为学生 student_001 选择题目: 几何/空间直线与平面, 掌握度 0.033
2025-11-07 15:46:00,982 - knowledge_management.rag_engine - INFO - 🔄 构建知识子图: 几何/空间直线与平面, 掌握度: 0.033
2025-11-07 15:46:01,247 - knowledge_management.rag_engine - INFO - 🔍 检索到 1 道相关题目 (query: '几何 空间直线与平面 简单 基础...')
2025-11-07 15:46:29,750 - knowledge_management.rag_engine - INFO - ✅ 提取到 5 个实体, 4 个关系
2025-11-07 15:46:29,750 - knowledge_management.rag_engine - INFO - ✅ 知识子图构建完成: 1 道题, 5 个实体
2025-11-07 15:46:29,751 - utils.question_generator - INFO - ✅ 只有1道候选题，直接选择
2025-11-07 15:46:29,751 - utils.question_generator - INFO - ✅ 选中题目 9 (难度: 0.60)
2025-11-07 15:46:29,751 - system_core - INFO - ✅ 准备下一题: 几何/空间直线与平面, 题号9
2025-11-07 15:48:10,217 - system_core - INFO - 📄 加载第 5 题
2025-11-07 15:48:13,621 - ui.main_ui - INFO - 📝 提交答案，正在使用盘古7B评估...
2025-11-07 15:48:13,621 - system_core - INFO - ✍️  评估答案 (题目 5/7)
2025-11-07 15:48:13,621 - system_core - INFO - 🤖 使用盘古7B进行严格答案评估...
2025-11-07 15:48:13,621 - utils.evaluator - INFO - 🤖 使用盘古7B模型进行智能答案评估（严格模式）
2025-11-07 15:48:41,157 - system_core - INFO - 📊 盘古7B判定: ❌ 错误
2025-11-07 15:48:41,160 - utils.bkt_algorithm - INFO - 📝 答题记录: student_001 - 空间直线与平面: 0.033 → 0.010 (✗)
2025-11-07 15:48:41,160 - system_core - INFO - 🤔 基于RAG + BKT + 多级备用策略智能选择下一题...
2025-11-07 15:48:41,160 - system_core - INFO - 📊 识别到 7 个薄弱知识点:
2025-11-07 15:48:41,160 - system_core - INFO -   - 代数/对数方程: 0.010
2025-11-07 15:48:41,160 - system_core - INFO -   - 分析/函数单调性: 0.010
2025-11-07 15:48:41,160 - system_core - INFO -   - 几何/空间直线与平面: 0.010
2025-11-07 15:48:41,160 - system_core - INFO - 🎯 策略：优先加强薄弱知识点
2025-11-07 15:48:41,160 - system_core - INFO - ✅ 选择薄弱知识点: 几何/立体几何 (掌握度: 0.055)
2025-11-07 15:48:41,161 - utils.question_generator - INFO - 🎯 为学生 student_001 选择题目: 几何/立体几何, 掌握度 0.055
2025-11-07 15:48:41,161 - knowledge_management.rag_engine - INFO - 🔄 构建知识子图: 几何/立体几何, 掌握度: 0.055
2025-11-07 15:48:41,459 - knowledge_management.rag_engine - INFO - 🔍 检索到 1 道相关题目 (query: '几何 立体几何 简单 基础...')
2025-11-07 15:48:55,845 - knowledge_management.rag_engine - INFO - ✅ 提取到 3 个实体, 2 个关系
2025-11-07 15:48:55,845 - knowledge_management.rag_engine - INFO - ✅ 知识子图构建完成: 1 道题, 3 个实体
2025-11-07 15:48:55,845 - utils.question_generator - INFO - ✅ 只有1道候选题，直接选择
2025-11-07 15:48:55,845 - utils.question_generator - INFO - ✅ 选中题目 13 (难度: 0.45)
2025-11-07 15:48:55,845 - system_core - INFO - ✅ 准备下一题: 几何/立体几何, 题号13
2025-11-07 15:50:36,140 - system_core - INFO - 📄 加载第 6 题
2025-11-07 15:50:39,644 - ui.main_ui - INFO - 📝 提交答案，正在使用盘古7B评估...
2025-11-07 15:50:39,644 - system_core - INFO - ✍️  评估答案 (题目 6/7)
2025-11-07 15:50:39,644 - system_core - INFO - 🤖 使用盘古7B进行严格答案评估...
2025-11-07 15:50:39,644 - utils.evaluator - INFO - 🤖 使用盘古7B模型进行智能答案评估（严格模式）
2025-11-07 15:50:54,967 - system_core - INFO - 📊 盘古7B判定: ❌ 错误
2025-11-07 15:50:54,970 - utils.bkt_algorithm - INFO - 📝 答题记录: student_001 - 立体几何: 0.055 → 0.010 (✗)
2025-11-07 15:50:54,970 - system_core - INFO - 🤔 基于RAG + BKT + 多级备用策略智能选择下一题...
2025-11-07 15:50:54,970 - system_core - INFO - 📊 识别到 7 个薄弱知识点:
2025-11-07 15:50:54,970 - system_core - INFO -   - 代数/对数方程: 0.010
2025-11-07 15:50:54,970 - system_core - INFO -   - 分析/函数单调性: 0.010
2025-11-07 15:50:54,970 - system_core - INFO -   - 几何/立体几何: 0.010
2025-11-07 15:50:54,971 - system_core - INFO - 🎯 策略：优先加强薄弱知识点
2025-11-07 15:50:54,971 - system_core - INFO - ✅ 选择薄弱知识点: 代数/分式不等式 (掌握度: 0.224)
2025-11-07 15:50:54,971 - utils.question_generator - INFO - 🎯 为学生 student_001 选择题目: 代数/分式不等式, 掌握度 0.224
2025-11-07 15:50:54,971 - knowledge_management.rag_engine - INFO - 🔄 构建知识子图: 代数/分式不等式, 掌握度: 0.224
2025-11-07 15:50:55,221 - knowledge_management.rag_engine - INFO - 🔍 检索到 3 道相关题目 (query: '代数 分式不等式 简单 基础...')
